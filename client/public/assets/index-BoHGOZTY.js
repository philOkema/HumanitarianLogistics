function l2(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function XT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var JT={exports:{}},df={},ZT={exports:{}},_e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $c=Symbol.for("react.element"),c2=Symbol.for("react.portal"),u2=Symbol.for("react.fragment"),d2=Symbol.for("react.strict_mode"),h2=Symbol.for("react.profiler"),f2=Symbol.for("react.provider"),p2=Symbol.for("react.context"),m2=Symbol.for("react.forward_ref"),g2=Symbol.for("react.suspense"),y2=Symbol.for("react.memo"),v2=Symbol.for("react.lazy"),z_=Symbol.iterator;function x2(t){return t===null||typeof t!="object"?null:(t=z_&&t[z_]||t["@@iterator"],typeof t=="function"?t:null)}var eI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},tI=Object.assign,nI={};function Aa(t,e,n){this.props=t,this.context=e,this.refs=nI,this.updater=n||eI}Aa.prototype.isReactComponent={};Aa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Aa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function rI(){}rI.prototype=Aa.prototype;function tv(t,e,n){this.props=t,this.context=e,this.refs=nI,this.updater=n||eI}var nv=tv.prototype=new rI;nv.constructor=tv;tI(nv,Aa.prototype);nv.isPureReactComponent=!0;var $_=Array.isArray,sI=Object.prototype.hasOwnProperty,rv={current:null},iI={key:!0,ref:!0,__self:!0,__source:!0};function oI(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)sI.call(e,r)&&!iI.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:$c,type:t,key:i,ref:o,props:s,_owner:rv.current}}function _2(t,e){return{$$typeof:$c,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function sv(t){return typeof t=="object"&&t!==null&&t.$$typeof===$c}function w2(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var q_=/\/+/g;function Op(t,e){return typeof t=="object"&&t!==null&&t.key!=null?w2(""+t.key):e.toString(36)}function Id(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case $c:case c2:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Op(o,0):r,$_(s)?(n="",t!=null&&(n=t.replace(q_,"$&/")+"/"),Id(s,e,n,"",function(c){return c})):s!=null&&(sv(s)&&(s=_2(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(q_,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",$_(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+Op(i,a);o+=Id(i,e,n,l,s)}else if(l=x2(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+Op(i,a++),o+=Id(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Nu(t,e,n){if(t==null)return t;var r=[],s=0;return Id(t,r,"","",function(i){return e.call(n,i,s++)}),r}function b2(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var tn={current:null},Cd={transition:null},E2={ReactCurrentDispatcher:tn,ReactCurrentBatchConfig:Cd,ReactCurrentOwner:rv};function aI(){throw Error("act(...) is not supported in production builds of React.")}_e.Children={map:Nu,forEach:function(t,e,n){Nu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Nu(t,function(){e++}),e},toArray:function(t){return Nu(t,function(e){return e})||[]},only:function(t){if(!sv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};_e.Component=Aa;_e.Fragment=u2;_e.Profiler=h2;_e.PureComponent=tv;_e.StrictMode=d2;_e.Suspense=g2;_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=E2;_e.act=aI;_e.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=tI({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=rv.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)sI.call(e,l)&&!iI.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:$c,type:t.type,key:s,ref:i,props:r,_owner:o}};_e.createContext=function(t){return t={$$typeof:p2,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:f2,_context:t},t.Consumer=t};_e.createElement=oI;_e.createFactory=function(t){var e=oI.bind(null,t);return e.type=t,e};_e.createRef=function(){return{current:null}};_e.forwardRef=function(t){return{$$typeof:m2,render:t}};_e.isValidElement=sv;_e.lazy=function(t){return{$$typeof:v2,_payload:{_status:-1,_result:t},_init:b2}};_e.memo=function(t,e){return{$$typeof:y2,type:t,compare:e===void 0?null:e}};_e.startTransition=function(t){var e=Cd.transition;Cd.transition={};try{t()}finally{Cd.transition=e}};_e.unstable_act=aI;_e.useCallback=function(t,e){return tn.current.useCallback(t,e)};_e.useContext=function(t){return tn.current.useContext(t)};_e.useDebugValue=function(){};_e.useDeferredValue=function(t){return tn.current.useDeferredValue(t)};_e.useEffect=function(t,e){return tn.current.useEffect(t,e)};_e.useId=function(){return tn.current.useId()};_e.useImperativeHandle=function(t,e,n){return tn.current.useImperativeHandle(t,e,n)};_e.useInsertionEffect=function(t,e){return tn.current.useInsertionEffect(t,e)};_e.useLayoutEffect=function(t,e){return tn.current.useLayoutEffect(t,e)};_e.useMemo=function(t,e){return tn.current.useMemo(t,e)};_e.useReducer=function(t,e,n){return tn.current.useReducer(t,e,n)};_e.useRef=function(t){return tn.current.useRef(t)};_e.useState=function(t){return tn.current.useState(t)};_e.useSyncExternalStore=function(t,e,n){return tn.current.useSyncExternalStore(t,e,n)};_e.useTransition=function(){return tn.current.useTransition()};_e.version="18.3.1";ZT.exports=_e;var w=ZT.exports;const Pn=XT(w),iv=l2({__proto__:null,default:Pn},[w]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S2=w,T2=Symbol.for("react.element"),I2=Symbol.for("react.fragment"),C2=Object.prototype.hasOwnProperty,k2=S2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,A2={key:!0,ref:!0,__self:!0,__source:!0};function lI(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)C2.call(e,r)&&!A2.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:T2,type:t,key:i,ref:o,props:s,_owner:k2.current}}df.Fragment=I2;df.jsx=lI;df.jsxs=lI;JT.exports=df;var d=JT.exports,Zm={},cI={exports:{}},kn={},uI={exports:{}},dI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(M,H){var Q=M.length;M.push(H);e:for(;0<Q;){var ie=Q-1>>>1,re=M[ie];if(0<s(re,H))M[ie]=H,M[Q]=re,Q=ie;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var H=M[0],Q=M.pop();if(Q!==H){M[0]=Q;e:for(var ie=0,re=M.length,ne=re>>>1;ie<ne;){var se=2*(ie+1)-1,je=M[se],Pe=se+1,X=M[Pe];if(0>s(je,Q))Pe<re&&0>s(X,je)?(M[ie]=X,M[Pe]=Q,ie=Pe):(M[ie]=je,M[se]=Q,ie=se);else if(Pe<re&&0>s(X,Q))M[ie]=X,M[Pe]=Q,ie=Pe;else break e}}return H}function s(M,H){var Q=M.sortIndex-H.sortIndex;return Q!==0?Q:M.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,p=3,m=!1,y=!1,g=!1,x=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(M){for(var H=n(c);H!==null;){if(H.callback===null)r(c);else if(H.startTime<=M)r(c),H.sortIndex=H.expirationTime,e(l,H);else break;H=n(c)}}function k(M){if(g=!1,T(M),!y)if(n(l)!==null)y=!0,z(N);else{var H=n(c);H!==null&&W(k,H.startTime-M)}}function N(M,H){y=!1,g&&(g=!1,b(E),E=-1),m=!0;var Q=p;try{for(T(H),f=n(l);f!==null&&(!(f.expirationTime>H)||M&&!P());){var ie=f.callback;if(typeof ie=="function"){f.callback=null,p=f.priorityLevel;var re=ie(f.expirationTime<=H);H=t.unstable_now(),typeof re=="function"?f.callback=re:f===n(l)&&r(l),T(H)}else r(l);f=n(l)}if(f!==null)var ne=!0;else{var se=n(c);se!==null&&W(k,se.startTime-H),ne=!1}return ne}finally{f=null,p=Q,m=!1}}var R=!1,S=null,E=-1,C=5,A=-1;function P(){return!(t.unstable_now()-A<C)}function j(){if(S!==null){var M=t.unstable_now();A=M;var H=!0;try{H=S(!0,M)}finally{H?O():(R=!1,S=null)}}else R=!1}var O;if(typeof _=="function")O=function(){_(j)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,B=F.port2;F.port1.onmessage=j,O=function(){B.postMessage(null)}}else O=function(){x(j,0)};function z(M){S=M,R||(R=!0,O())}function W(M,H){E=x(function(){M(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){y||m||(y=!0,z(N))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(M){switch(p){case 1:case 2:case 3:var H=3;break;default:H=p}var Q=p;p=H;try{return M()}finally{p=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,H){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var Q=p;p=M;try{return H()}finally{p=Q}},t.unstable_scheduleCallback=function(M,H,Q){var ie=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?ie+Q:ie):Q=ie,M){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=Q+re,M={id:u++,callback:H,priorityLevel:M,startTime:Q,expirationTime:re,sortIndex:-1},Q>ie?(M.sortIndex=Q,e(c,M),n(l)===null&&M===n(c)&&(g?(b(E),E=-1):g=!0,W(k,Q-ie))):(M.sortIndex=re,e(l,M),y||m||(y=!0,z(N))),M},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(M){var H=p;return function(){var Q=p;p=H;try{return M.apply(this,arguments)}finally{p=Q}}}})(dI);uI.exports=dI;var R2=uI.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P2=w,Cn=R2;function G(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var hI=new Set,rc={};function lo(t,e){aa(t,e),aa(t+"Capture",e)}function aa(t,e){for(rc[t]=e,t=0;t<e.length;t++)hI.add(e[t])}var Zr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),eg=Object.prototype.hasOwnProperty,N2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,H_={},W_={};function D2(t){return eg.call(W_,t)?!0:eg.call(H_,t)?!1:N2.test(t)?W_[t]=!0:(H_[t]=!0,!1)}function O2(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function j2(t,e,n,r){if(e===null||typeof e>"u"||O2(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function nn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Pt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Pt[t]=new nn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Pt[e]=new nn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Pt[t]=new nn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Pt[t]=new nn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Pt[t]=new nn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Pt[t]=new nn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Pt[t]=new nn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Pt[t]=new nn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Pt[t]=new nn(t,5,!1,t.toLowerCase(),null,!1,!1)});var ov=/[\-:]([a-z])/g;function av(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ov,av);Pt[e]=new nn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ov,av);Pt[e]=new nn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ov,av);Pt[e]=new nn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Pt[t]=new nn(t,1,!1,t.toLowerCase(),null,!1,!1)});Pt.xlinkHref=new nn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Pt[t]=new nn(t,1,!1,t.toLowerCase(),null,!0,!0)});function lv(t,e,n,r){var s=Pt.hasOwnProperty(e)?Pt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(j2(e,n,s,r)&&(n=null),r||s===null?D2(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var cs=P2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Du=Symbol.for("react.element"),Oo=Symbol.for("react.portal"),jo=Symbol.for("react.fragment"),cv=Symbol.for("react.strict_mode"),tg=Symbol.for("react.profiler"),fI=Symbol.for("react.provider"),pI=Symbol.for("react.context"),uv=Symbol.for("react.forward_ref"),ng=Symbol.for("react.suspense"),rg=Symbol.for("react.suspense_list"),dv=Symbol.for("react.memo"),xs=Symbol.for("react.lazy"),mI=Symbol.for("react.offscreen"),K_=Symbol.iterator;function ul(t){return t===null||typeof t!="object"?null:(t=K_&&t[K_]||t["@@iterator"],typeof t=="function"?t:null)}var Xe=Object.assign,jp;function Tl(t){if(jp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);jp=e&&e[1]||""}return`
`+jp+t}var Mp=!1;function Lp(t,e){if(!t||Mp)return"";Mp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Mp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Tl(t):""}function M2(t){switch(t.tag){case 5:return Tl(t.type);case 16:return Tl("Lazy");case 13:return Tl("Suspense");case 19:return Tl("SuspenseList");case 0:case 2:case 15:return t=Lp(t.type,!1),t;case 11:return t=Lp(t.type.render,!1),t;case 1:return t=Lp(t.type,!0),t;default:return""}}function sg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case jo:return"Fragment";case Oo:return"Portal";case tg:return"Profiler";case cv:return"StrictMode";case ng:return"Suspense";case rg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case pI:return(t.displayName||"Context")+".Consumer";case fI:return(t._context.displayName||"Context")+".Provider";case uv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case dv:return e=t.displayName||null,e!==null?e:sg(t.type)||"Memo";case xs:e=t._payload,t=t._init;try{return sg(t(e))}catch{}}return null}function L2(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return sg(e);case 8:return e===cv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Js(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function gI(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function F2(t){var e=gI(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ou(t){t._valueTracker||(t._valueTracker=F2(t))}function yI(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=gI(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function sh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ig(t,e){var n=e.checked;return Xe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function G_(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Js(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function vI(t,e){e=e.checked,e!=null&&lv(t,"checked",e,!1)}function og(t,e){vI(t,e);var n=Js(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ag(t,e.type,n):e.hasOwnProperty("defaultValue")&&ag(t,e.type,Js(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Q_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ag(t,e,n){(e!=="number"||sh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Il=Array.isArray;function Ko(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Js(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function lg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(G(91));return Xe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Y_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(G(92));if(Il(n)){if(1<n.length)throw Error(G(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Js(n)}}function xI(t,e){var n=Js(e.value),r=Js(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function X_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function _I(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function cg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?_I(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ju,wI=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ju=ju||document.createElement("div"),ju.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ju.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function sc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Fl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},V2=["Webkit","ms","Moz","O"];Object.keys(Fl).forEach(function(t){V2.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Fl[e]=Fl[t]})});function bI(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Fl.hasOwnProperty(t)&&Fl[t]?(""+e).trim():e+"px"}function EI(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=bI(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var U2=Xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ug(t,e){if(e){if(U2[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(G(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(G(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(G(61))}if(e.style!=null&&typeof e.style!="object")throw Error(G(62))}}function dg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hg=null;function hv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var fg=null,Go=null,Qo=null;function J_(t){if(t=Wc(t)){if(typeof fg!="function")throw Error(G(280));var e=t.stateNode;e&&(e=gf(e),fg(t.stateNode,t.type,e))}}function SI(t){Go?Qo?Qo.push(t):Qo=[t]:Go=t}function TI(){if(Go){var t=Go,e=Qo;if(Qo=Go=null,J_(t),e)for(t=0;t<e.length;t++)J_(e[t])}}function II(t,e){return t(e)}function CI(){}var Fp=!1;function kI(t,e,n){if(Fp)return t(e,n);Fp=!0;try{return II(t,e,n)}finally{Fp=!1,(Go!==null||Qo!==null)&&(CI(),TI())}}function ic(t,e){var n=t.stateNode;if(n===null)return null;var r=gf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(G(231,e,typeof n));return n}var pg=!1;if(Zr)try{var dl={};Object.defineProperty(dl,"passive",{get:function(){pg=!0}}),window.addEventListener("test",dl,dl),window.removeEventListener("test",dl,dl)}catch{pg=!1}function B2(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Vl=!1,ih=null,oh=!1,mg=null,z2={onError:function(t){Vl=!0,ih=t}};function $2(t,e,n,r,s,i,o,a,l){Vl=!1,ih=null,B2.apply(z2,arguments)}function q2(t,e,n,r,s,i,o,a,l){if($2.apply(this,arguments),Vl){if(Vl){var c=ih;Vl=!1,ih=null}else throw Error(G(198));oh||(oh=!0,mg=c)}}function co(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function AI(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Z_(t){if(co(t)!==t)throw Error(G(188))}function H2(t){var e=t.alternate;if(!e){if(e=co(t),e===null)throw Error(G(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Z_(s),t;if(i===r)return Z_(s),e;i=i.sibling}throw Error(G(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(G(189))}}if(n.alternate!==r)throw Error(G(190))}if(n.tag!==3)throw Error(G(188));return n.stateNode.current===n?t:e}function RI(t){return t=H2(t),t!==null?PI(t):null}function PI(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=PI(t);if(e!==null)return e;t=t.sibling}return null}var NI=Cn.unstable_scheduleCallback,ew=Cn.unstable_cancelCallback,W2=Cn.unstable_shouldYield,K2=Cn.unstable_requestPaint,rt=Cn.unstable_now,G2=Cn.unstable_getCurrentPriorityLevel,fv=Cn.unstable_ImmediatePriority,DI=Cn.unstable_UserBlockingPriority,ah=Cn.unstable_NormalPriority,Q2=Cn.unstable_LowPriority,OI=Cn.unstable_IdlePriority,hf=null,wr=null;function Y2(t){if(wr&&typeof wr.onCommitFiberRoot=="function")try{wr.onCommitFiberRoot(hf,t,void 0,(t.current.flags&128)===128)}catch{}}var Zn=Math.clz32?Math.clz32:Z2,X2=Math.log,J2=Math.LN2;function Z2(t){return t>>>=0,t===0?32:31-(X2(t)/J2|0)|0}var Mu=64,Lu=4194304;function Cl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function lh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Cl(a):(i&=o,i!==0&&(r=Cl(i)))}else o=n&~s,o!==0?r=Cl(o):i!==0&&(r=Cl(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Zn(e),s=1<<n,r|=t[n],e&=~s;return r}function ej(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tj(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Zn(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=ej(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function gg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function jI(){var t=Mu;return Mu<<=1,!(Mu&4194240)&&(Mu=64),t}function Vp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function qc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Zn(e),t[e]=n}function nj(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Zn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function pv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Zn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Fe=0;function MI(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var LI,mv,FI,VI,UI,yg=!1,Fu=[],Fs=null,Vs=null,Us=null,oc=new Map,ac=new Map,bs=[],rj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tw(t,e){switch(t){case"focusin":case"focusout":Fs=null;break;case"dragenter":case"dragleave":Vs=null;break;case"mouseover":case"mouseout":Us=null;break;case"pointerover":case"pointerout":oc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ac.delete(e.pointerId)}}function hl(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Wc(e),e!==null&&mv(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function sj(t,e,n,r,s){switch(e){case"focusin":return Fs=hl(Fs,t,e,n,r,s),!0;case"dragenter":return Vs=hl(Vs,t,e,n,r,s),!0;case"mouseover":return Us=hl(Us,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return oc.set(i,hl(oc.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ac.set(i,hl(ac.get(i)||null,t,e,n,r,s)),!0}return!1}function BI(t){var e=Pi(t.target);if(e!==null){var n=co(e);if(n!==null){if(e=n.tag,e===13){if(e=AI(n),e!==null){t.blockedOn=e,UI(t.priority,function(){FI(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function kd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=vg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);hg=r,n.target.dispatchEvent(r),hg=null}else return e=Wc(n),e!==null&&mv(e),t.blockedOn=n,!1;e.shift()}return!0}function nw(t,e,n){kd(t)&&n.delete(e)}function ij(){yg=!1,Fs!==null&&kd(Fs)&&(Fs=null),Vs!==null&&kd(Vs)&&(Vs=null),Us!==null&&kd(Us)&&(Us=null),oc.forEach(nw),ac.forEach(nw)}function fl(t,e){t.blockedOn===e&&(t.blockedOn=null,yg||(yg=!0,Cn.unstable_scheduleCallback(Cn.unstable_NormalPriority,ij)))}function lc(t){function e(s){return fl(s,t)}if(0<Fu.length){fl(Fu[0],t);for(var n=1;n<Fu.length;n++){var r=Fu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Fs!==null&&fl(Fs,t),Vs!==null&&fl(Vs,t),Us!==null&&fl(Us,t),oc.forEach(e),ac.forEach(e),n=0;n<bs.length;n++)r=bs[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<bs.length&&(n=bs[0],n.blockedOn===null);)BI(n),n.blockedOn===null&&bs.shift()}var Yo=cs.ReactCurrentBatchConfig,ch=!0;function oj(t,e,n,r){var s=Fe,i=Yo.transition;Yo.transition=null;try{Fe=1,gv(t,e,n,r)}finally{Fe=s,Yo.transition=i}}function aj(t,e,n,r){var s=Fe,i=Yo.transition;Yo.transition=null;try{Fe=4,gv(t,e,n,r)}finally{Fe=s,Yo.transition=i}}function gv(t,e,n,r){if(ch){var s=vg(t,e,n,r);if(s===null)Qp(t,e,r,uh,n),tw(t,r);else if(sj(s,t,e,n,r))r.stopPropagation();else if(tw(t,r),e&4&&-1<rj.indexOf(t)){for(;s!==null;){var i=Wc(s);if(i!==null&&LI(i),i=vg(t,e,n,r),i===null&&Qp(t,e,r,uh,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Qp(t,e,r,null,n)}}var uh=null;function vg(t,e,n,r){if(uh=null,t=hv(r),t=Pi(t),t!==null)if(e=co(t),e===null)t=null;else if(n=e.tag,n===13){if(t=AI(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return uh=t,null}function zI(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(G2()){case fv:return 1;case DI:return 4;case ah:case Q2:return 16;case OI:return 536870912;default:return 16}default:return 16}}var ks=null,yv=null,Ad=null;function $I(){if(Ad)return Ad;var t,e=yv,n=e.length,r,s="value"in ks?ks.value:ks.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Ad=s.slice(t,1<r?1-r:void 0)}function Rd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Vu(){return!0}function rw(){return!1}function An(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Vu:rw,this.isPropagationStopped=rw,this}return Xe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Vu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Vu)},persist:function(){},isPersistent:Vu}),e}var Ra={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vv=An(Ra),Hc=Xe({},Ra,{view:0,detail:0}),lj=An(Hc),Up,Bp,pl,ff=Xe({},Hc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==pl&&(pl&&t.type==="mousemove"?(Up=t.screenX-pl.screenX,Bp=t.screenY-pl.screenY):Bp=Up=0,pl=t),Up)},movementY:function(t){return"movementY"in t?t.movementY:Bp}}),sw=An(ff),cj=Xe({},ff,{dataTransfer:0}),uj=An(cj),dj=Xe({},Hc,{relatedTarget:0}),zp=An(dj),hj=Xe({},Ra,{animationName:0,elapsedTime:0,pseudoElement:0}),fj=An(hj),pj=Xe({},Ra,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),mj=An(pj),gj=Xe({},Ra,{data:0}),iw=An(gj),yj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _j(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=xj[t])?!!e[t]:!1}function xv(){return _j}var wj=Xe({},Hc,{key:function(t){if(t.key){var e=yj[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Rd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?vj[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xv,charCode:function(t){return t.type==="keypress"?Rd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Rd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),bj=An(wj),Ej=Xe({},ff,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ow=An(Ej),Sj=Xe({},Hc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xv}),Tj=An(Sj),Ij=Xe({},Ra,{propertyName:0,elapsedTime:0,pseudoElement:0}),Cj=An(Ij),kj=Xe({},ff,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Aj=An(kj),Rj=[9,13,27,32],_v=Zr&&"CompositionEvent"in window,Ul=null;Zr&&"documentMode"in document&&(Ul=document.documentMode);var Pj=Zr&&"TextEvent"in window&&!Ul,qI=Zr&&(!_v||Ul&&8<Ul&&11>=Ul),aw=" ",lw=!1;function HI(t,e){switch(t){case"keyup":return Rj.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function WI(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Mo=!1;function Nj(t,e){switch(t){case"compositionend":return WI(e);case"keypress":return e.which!==32?null:(lw=!0,aw);case"textInput":return t=e.data,t===aw&&lw?null:t;default:return null}}function Dj(t,e){if(Mo)return t==="compositionend"||!_v&&HI(t,e)?(t=$I(),Ad=yv=ks=null,Mo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return qI&&e.locale!=="ko"?null:e.data;default:return null}}var Oj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Oj[t.type]:e==="textarea"}function KI(t,e,n,r){SI(r),e=dh(e,"onChange"),0<e.length&&(n=new vv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Bl=null,cc=null;function jj(t){sC(t,0)}function pf(t){var e=Vo(t);if(yI(e))return t}function Mj(t,e){if(t==="change")return e}var GI=!1;if(Zr){var $p;if(Zr){var qp="oninput"in document;if(!qp){var uw=document.createElement("div");uw.setAttribute("oninput","return;"),qp=typeof uw.oninput=="function"}$p=qp}else $p=!1;GI=$p&&(!document.documentMode||9<document.documentMode)}function dw(){Bl&&(Bl.detachEvent("onpropertychange",QI),cc=Bl=null)}function QI(t){if(t.propertyName==="value"&&pf(cc)){var e=[];KI(e,cc,t,hv(t)),kI(jj,e)}}function Lj(t,e,n){t==="focusin"?(dw(),Bl=e,cc=n,Bl.attachEvent("onpropertychange",QI)):t==="focusout"&&dw()}function Fj(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return pf(cc)}function Vj(t,e){if(t==="click")return pf(e)}function Uj(t,e){if(t==="input"||t==="change")return pf(e)}function Bj(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var nr=typeof Object.is=="function"?Object.is:Bj;function uc(t,e){if(nr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!eg.call(e,s)||!nr(t[s],e[s]))return!1}return!0}function hw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function fw(t,e){var n=hw(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=hw(n)}}function YI(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?YI(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function XI(){for(var t=window,e=sh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=sh(t.document)}return e}function wv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function zj(t){var e=XI(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&YI(n.ownerDocument.documentElement,n)){if(r!==null&&wv(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=fw(n,i);var o=fw(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var $j=Zr&&"documentMode"in document&&11>=document.documentMode,Lo=null,xg=null,zl=null,_g=!1;function pw(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;_g||Lo==null||Lo!==sh(r)||(r=Lo,"selectionStart"in r&&wv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),zl&&uc(zl,r)||(zl=r,r=dh(xg,"onSelect"),0<r.length&&(e=new vv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Lo)))}function Uu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Fo={animationend:Uu("Animation","AnimationEnd"),animationiteration:Uu("Animation","AnimationIteration"),animationstart:Uu("Animation","AnimationStart"),transitionend:Uu("Transition","TransitionEnd")},Hp={},JI={};Zr&&(JI=document.createElement("div").style,"AnimationEvent"in window||(delete Fo.animationend.animation,delete Fo.animationiteration.animation,delete Fo.animationstart.animation),"TransitionEvent"in window||delete Fo.transitionend.transition);function mf(t){if(Hp[t])return Hp[t];if(!Fo[t])return t;var e=Fo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in JI)return Hp[t]=e[n];return t}var ZI=mf("animationend"),eC=mf("animationiteration"),tC=mf("animationstart"),nC=mf("transitionend"),rC=new Map,mw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function di(t,e){rC.set(t,e),lo(e,[t])}for(var Wp=0;Wp<mw.length;Wp++){var Kp=mw[Wp],qj=Kp.toLowerCase(),Hj=Kp[0].toUpperCase()+Kp.slice(1);di(qj,"on"+Hj)}di(ZI,"onAnimationEnd");di(eC,"onAnimationIteration");di(tC,"onAnimationStart");di("dblclick","onDoubleClick");di("focusin","onFocus");di("focusout","onBlur");di(nC,"onTransitionEnd");aa("onMouseEnter",["mouseout","mouseover"]);aa("onMouseLeave",["mouseout","mouseover"]);aa("onPointerEnter",["pointerout","pointerover"]);aa("onPointerLeave",["pointerout","pointerover"]);lo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));lo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));lo("onBeforeInput",["compositionend","keypress","textInput","paste"]);lo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));lo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));lo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Wj=new Set("cancel close invalid load scroll toggle".split(" ").concat(kl));function gw(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,q2(r,e,void 0,t),t.currentTarget=null}function sC(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;gw(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;gw(s,a,c),i=l}}}if(oh)throw t=mg,oh=!1,mg=null,t}function $e(t,e){var n=e[Tg];n===void 0&&(n=e[Tg]=new Set);var r=t+"__bubble";n.has(r)||(iC(e,t,2,!1),n.add(r))}function Gp(t,e,n){var r=0;e&&(r|=4),iC(n,t,r,e)}var Bu="_reactListening"+Math.random().toString(36).slice(2);function dc(t){if(!t[Bu]){t[Bu]=!0,hI.forEach(function(n){n!=="selectionchange"&&(Wj.has(n)||Gp(n,!1,t),Gp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Bu]||(e[Bu]=!0,Gp("selectionchange",!1,e))}}function iC(t,e,n,r){switch(zI(e)){case 1:var s=oj;break;case 4:s=aj;break;default:s=gv}n=s.bind(null,e,n,t),s=void 0,!pg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Qp(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Pi(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}kI(function(){var c=i,u=hv(n),f=[];e:{var p=rC.get(t);if(p!==void 0){var m=vv,y=t;switch(t){case"keypress":if(Rd(n)===0)break e;case"keydown":case"keyup":m=bj;break;case"focusin":y="focus",m=zp;break;case"focusout":y="blur",m=zp;break;case"beforeblur":case"afterblur":m=zp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=sw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=uj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Tj;break;case ZI:case eC:case tC:m=fj;break;case nC:m=Cj;break;case"scroll":m=lj;break;case"wheel":m=Aj;break;case"copy":case"cut":case"paste":m=mj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=ow}var g=(e&4)!==0,x=!g&&t==="scroll",b=g?p!==null?p+"Capture":null:p;g=[];for(var _=c,T;_!==null;){T=_;var k=T.stateNode;if(T.tag===5&&k!==null&&(T=k,b!==null&&(k=ic(_,b),k!=null&&g.push(hc(_,k,T)))),x)break;_=_.return}0<g.length&&(p=new m(p,y,null,n,u),f.push({event:p,listeners:g}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&n!==hg&&(y=n.relatedTarget||n.fromElement)&&(Pi(y)||y[es]))break e;if((m||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,m?(y=n.relatedTarget||n.toElement,m=c,y=y?Pi(y):null,y!==null&&(x=co(y),y!==x||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=c),m!==y)){if(g=sw,k="onMouseLeave",b="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(g=ow,k="onPointerLeave",b="onPointerEnter",_="pointer"),x=m==null?p:Vo(m),T=y==null?p:Vo(y),p=new g(k,_+"leave",m,n,u),p.target=x,p.relatedTarget=T,k=null,Pi(u)===c&&(g=new g(b,_+"enter",y,n,u),g.target=T,g.relatedTarget=x,k=g),x=k,m&&y)t:{for(g=m,b=y,_=0,T=g;T;T=So(T))_++;for(T=0,k=b;k;k=So(k))T++;for(;0<_-T;)g=So(g),_--;for(;0<T-_;)b=So(b),T--;for(;_--;){if(g===b||b!==null&&g===b.alternate)break t;g=So(g),b=So(b)}g=null}else g=null;m!==null&&yw(f,p,m,g,!1),y!==null&&x!==null&&yw(f,x,y,g,!0)}}e:{if(p=c?Vo(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var N=Mj;else if(cw(p))if(GI)N=Uj;else{N=Fj;var R=Lj}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(N=Vj);if(N&&(N=N(t,c))){KI(f,N,n,u);break e}R&&R(t,p,c),t==="focusout"&&(R=p._wrapperState)&&R.controlled&&p.type==="number"&&ag(p,"number",p.value)}switch(R=c?Vo(c):window,t){case"focusin":(cw(R)||R.contentEditable==="true")&&(Lo=R,xg=c,zl=null);break;case"focusout":zl=xg=Lo=null;break;case"mousedown":_g=!0;break;case"contextmenu":case"mouseup":case"dragend":_g=!1,pw(f,n,u);break;case"selectionchange":if($j)break;case"keydown":case"keyup":pw(f,n,u)}var S;if(_v)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Mo?HI(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(qI&&n.locale!=="ko"&&(Mo||E!=="onCompositionStart"?E==="onCompositionEnd"&&Mo&&(S=$I()):(ks=u,yv="value"in ks?ks.value:ks.textContent,Mo=!0)),R=dh(c,E),0<R.length&&(E=new iw(E,t,null,n,u),f.push({event:E,listeners:R}),S?E.data=S:(S=WI(n),S!==null&&(E.data=S)))),(S=Pj?Nj(t,n):Dj(t,n))&&(c=dh(c,"onBeforeInput"),0<c.length&&(u=new iw("onBeforeInput","beforeinput",null,n,u),f.push({event:u,listeners:c}),u.data=S))}sC(f,e)})}function hc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function dh(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ic(t,n),i!=null&&r.unshift(hc(t,i,s)),i=ic(t,e),i!=null&&r.push(hc(t,i,s))),t=t.return}return r}function So(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function yw(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=ic(n,i),l!=null&&o.unshift(hc(n,l,a))):s||(l=ic(n,i),l!=null&&o.push(hc(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Kj=/\r\n?/g,Gj=/\u0000|\uFFFD/g;function vw(t){return(typeof t=="string"?t:""+t).replace(Kj,`
`).replace(Gj,"")}function zu(t,e,n){if(e=vw(e),vw(t)!==e&&n)throw Error(G(425))}function hh(){}var wg=null,bg=null;function Eg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Sg=typeof setTimeout=="function"?setTimeout:void 0,Qj=typeof clearTimeout=="function"?clearTimeout:void 0,xw=typeof Promise=="function"?Promise:void 0,Yj=typeof queueMicrotask=="function"?queueMicrotask:typeof xw<"u"?function(t){return xw.resolve(null).then(t).catch(Xj)}:Sg;function Xj(t){setTimeout(function(){throw t})}function Yp(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),lc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);lc(e)}function Bs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function _w(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Pa=Math.random().toString(36).slice(2),xr="__reactFiber$"+Pa,fc="__reactProps$"+Pa,es="__reactContainer$"+Pa,Tg="__reactEvents$"+Pa,Jj="__reactListeners$"+Pa,Zj="__reactHandles$"+Pa;function Pi(t){var e=t[xr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[es]||n[xr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=_w(t);t!==null;){if(n=t[xr])return n;t=_w(t)}return e}t=n,n=t.parentNode}return null}function Wc(t){return t=t[xr]||t[es],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Vo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(G(33))}function gf(t){return t[fc]||null}var Ig=[],Uo=-1;function hi(t){return{current:t}}function He(t){0>Uo||(t.current=Ig[Uo],Ig[Uo]=null,Uo--)}function Be(t,e){Uo++,Ig[Uo]=t.current,t.current=e}var Zs={},Gt=hi(Zs),un=hi(!1),qi=Zs;function la(t,e){var n=t.type.contextTypes;if(!n)return Zs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function dn(t){return t=t.childContextTypes,t!=null}function fh(){He(un),He(Gt)}function ww(t,e,n){if(Gt.current!==Zs)throw Error(G(168));Be(Gt,e),Be(un,n)}function oC(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(G(108,L2(t)||"Unknown",s));return Xe({},n,r)}function ph(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Zs,qi=Gt.current,Be(Gt,t),Be(un,un.current),!0}function bw(t,e,n){var r=t.stateNode;if(!r)throw Error(G(169));n?(t=oC(t,e,qi),r.__reactInternalMemoizedMergedChildContext=t,He(un),He(Gt),Be(Gt,t)):He(un),Be(un,n)}var qr=null,yf=!1,Xp=!1;function aC(t){qr===null?qr=[t]:qr.push(t)}function eM(t){yf=!0,aC(t)}function fi(){if(!Xp&&qr!==null){Xp=!0;var t=0,e=Fe;try{var n=qr;for(Fe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}qr=null,yf=!1}catch(s){throw qr!==null&&(qr=qr.slice(t+1)),NI(fv,fi),s}finally{Fe=e,Xp=!1}}return null}var Bo=[],zo=0,mh=null,gh=0,Nn=[],Dn=0,Hi=null,Wr=1,Kr="";function Ii(t,e){Bo[zo++]=gh,Bo[zo++]=mh,mh=t,gh=e}function lC(t,e,n){Nn[Dn++]=Wr,Nn[Dn++]=Kr,Nn[Dn++]=Hi,Hi=t;var r=Wr;t=Kr;var s=32-Zn(r)-1;r&=~(1<<s),n+=1;var i=32-Zn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Wr=1<<32-Zn(e)+s|n<<s|r,Kr=i+t}else Wr=1<<i|n<<s|r,Kr=t}function bv(t){t.return!==null&&(Ii(t,1),lC(t,1,0))}function Ev(t){for(;t===mh;)mh=Bo[--zo],Bo[zo]=null,gh=Bo[--zo],Bo[zo]=null;for(;t===Hi;)Hi=Nn[--Dn],Nn[Dn]=null,Kr=Nn[--Dn],Nn[Dn]=null,Wr=Nn[--Dn],Nn[Dn]=null}var Sn=null,wn=null,Ke=!1,Qn=null;function cC(t,e){var n=jn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ew(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Sn=t,wn=Bs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Sn=t,wn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Hi!==null?{id:Wr,overflow:Kr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=jn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Sn=t,wn=null,!0):!1;default:return!1}}function Cg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function kg(t){if(Ke){var e=wn;if(e){var n=e;if(!Ew(t,e)){if(Cg(t))throw Error(G(418));e=Bs(n.nextSibling);var r=Sn;e&&Ew(t,e)?cC(r,n):(t.flags=t.flags&-4097|2,Ke=!1,Sn=t)}}else{if(Cg(t))throw Error(G(418));t.flags=t.flags&-4097|2,Ke=!1,Sn=t}}}function Sw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Sn=t}function $u(t){if(t!==Sn)return!1;if(!Ke)return Sw(t),Ke=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Eg(t.type,t.memoizedProps)),e&&(e=wn)){if(Cg(t))throw uC(),Error(G(418));for(;e;)cC(t,e),e=Bs(e.nextSibling)}if(Sw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(G(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){wn=Bs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}wn=null}}else wn=Sn?Bs(t.stateNode.nextSibling):null;return!0}function uC(){for(var t=wn;t;)t=Bs(t.nextSibling)}function ca(){wn=Sn=null,Ke=!1}function Sv(t){Qn===null?Qn=[t]:Qn.push(t)}var tM=cs.ReactCurrentBatchConfig;function ml(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(G(309));var r=n.stateNode}if(!r)throw Error(G(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(G(284));if(!n._owner)throw Error(G(290,t))}return t}function qu(t,e){throw t=Object.prototype.toString.call(e),Error(G(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Tw(t){var e=t._init;return e(t._payload)}function dC(t){function e(b,_){if(t){var T=b.deletions;T===null?(b.deletions=[_],b.flags|=16):T.push(_)}}function n(b,_){if(!t)return null;for(;_!==null;)e(b,_),_=_.sibling;return null}function r(b,_){for(b=new Map;_!==null;)_.key!==null?b.set(_.key,_):b.set(_.index,_),_=_.sibling;return b}function s(b,_){return b=Hs(b,_),b.index=0,b.sibling=null,b}function i(b,_,T){return b.index=T,t?(T=b.alternate,T!==null?(T=T.index,T<_?(b.flags|=2,_):T):(b.flags|=2,_)):(b.flags|=1048576,_)}function o(b){return t&&b.alternate===null&&(b.flags|=2),b}function a(b,_,T,k){return _===null||_.tag!==6?(_=sm(T,b.mode,k),_.return=b,_):(_=s(_,T),_.return=b,_)}function l(b,_,T,k){var N=T.type;return N===jo?u(b,_,T.props.children,k,T.key):_!==null&&(_.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===xs&&Tw(N)===_.type)?(k=s(_,T.props),k.ref=ml(b,_,T),k.return=b,k):(k=Ld(T.type,T.key,T.props,null,b.mode,k),k.ref=ml(b,_,T),k.return=b,k)}function c(b,_,T,k){return _===null||_.tag!==4||_.stateNode.containerInfo!==T.containerInfo||_.stateNode.implementation!==T.implementation?(_=im(T,b.mode,k),_.return=b,_):(_=s(_,T.children||[]),_.return=b,_)}function u(b,_,T,k,N){return _===null||_.tag!==7?(_=Bi(T,b.mode,k,N),_.return=b,_):(_=s(_,T),_.return=b,_)}function f(b,_,T){if(typeof _=="string"&&_!==""||typeof _=="number")return _=sm(""+_,b.mode,T),_.return=b,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Du:return T=Ld(_.type,_.key,_.props,null,b.mode,T),T.ref=ml(b,null,_),T.return=b,T;case Oo:return _=im(_,b.mode,T),_.return=b,_;case xs:var k=_._init;return f(b,k(_._payload),T)}if(Il(_)||ul(_))return _=Bi(_,b.mode,T,null),_.return=b,_;qu(b,_)}return null}function p(b,_,T,k){var N=_!==null?_.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return N!==null?null:a(b,_,""+T,k);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Du:return T.key===N?l(b,_,T,k):null;case Oo:return T.key===N?c(b,_,T,k):null;case xs:return N=T._init,p(b,_,N(T._payload),k)}if(Il(T)||ul(T))return N!==null?null:u(b,_,T,k,null);qu(b,T)}return null}function m(b,_,T,k,N){if(typeof k=="string"&&k!==""||typeof k=="number")return b=b.get(T)||null,a(_,b,""+k,N);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Du:return b=b.get(k.key===null?T:k.key)||null,l(_,b,k,N);case Oo:return b=b.get(k.key===null?T:k.key)||null,c(_,b,k,N);case xs:var R=k._init;return m(b,_,T,R(k._payload),N)}if(Il(k)||ul(k))return b=b.get(T)||null,u(_,b,k,N,null);qu(_,k)}return null}function y(b,_,T,k){for(var N=null,R=null,S=_,E=_=0,C=null;S!==null&&E<T.length;E++){S.index>E?(C=S,S=null):C=S.sibling;var A=p(b,S,T[E],k);if(A===null){S===null&&(S=C);break}t&&S&&A.alternate===null&&e(b,S),_=i(A,_,E),R===null?N=A:R.sibling=A,R=A,S=C}if(E===T.length)return n(b,S),Ke&&Ii(b,E),N;if(S===null){for(;E<T.length;E++)S=f(b,T[E],k),S!==null&&(_=i(S,_,E),R===null?N=S:R.sibling=S,R=S);return Ke&&Ii(b,E),N}for(S=r(b,S);E<T.length;E++)C=m(S,b,E,T[E],k),C!==null&&(t&&C.alternate!==null&&S.delete(C.key===null?E:C.key),_=i(C,_,E),R===null?N=C:R.sibling=C,R=C);return t&&S.forEach(function(P){return e(b,P)}),Ke&&Ii(b,E),N}function g(b,_,T,k){var N=ul(T);if(typeof N!="function")throw Error(G(150));if(T=N.call(T),T==null)throw Error(G(151));for(var R=N=null,S=_,E=_=0,C=null,A=T.next();S!==null&&!A.done;E++,A=T.next()){S.index>E?(C=S,S=null):C=S.sibling;var P=p(b,S,A.value,k);if(P===null){S===null&&(S=C);break}t&&S&&P.alternate===null&&e(b,S),_=i(P,_,E),R===null?N=P:R.sibling=P,R=P,S=C}if(A.done)return n(b,S),Ke&&Ii(b,E),N;if(S===null){for(;!A.done;E++,A=T.next())A=f(b,A.value,k),A!==null&&(_=i(A,_,E),R===null?N=A:R.sibling=A,R=A);return Ke&&Ii(b,E),N}for(S=r(b,S);!A.done;E++,A=T.next())A=m(S,b,E,A.value,k),A!==null&&(t&&A.alternate!==null&&S.delete(A.key===null?E:A.key),_=i(A,_,E),R===null?N=A:R.sibling=A,R=A);return t&&S.forEach(function(j){return e(b,j)}),Ke&&Ii(b,E),N}function x(b,_,T,k){if(typeof T=="object"&&T!==null&&T.type===jo&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case Du:e:{for(var N=T.key,R=_;R!==null;){if(R.key===N){if(N=T.type,N===jo){if(R.tag===7){n(b,R.sibling),_=s(R,T.props.children),_.return=b,b=_;break e}}else if(R.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===xs&&Tw(N)===R.type){n(b,R.sibling),_=s(R,T.props),_.ref=ml(b,R,T),_.return=b,b=_;break e}n(b,R);break}else e(b,R);R=R.sibling}T.type===jo?(_=Bi(T.props.children,b.mode,k,T.key),_.return=b,b=_):(k=Ld(T.type,T.key,T.props,null,b.mode,k),k.ref=ml(b,_,T),k.return=b,b=k)}return o(b);case Oo:e:{for(R=T.key;_!==null;){if(_.key===R)if(_.tag===4&&_.stateNode.containerInfo===T.containerInfo&&_.stateNode.implementation===T.implementation){n(b,_.sibling),_=s(_,T.children||[]),_.return=b,b=_;break e}else{n(b,_);break}else e(b,_);_=_.sibling}_=im(T,b.mode,k),_.return=b,b=_}return o(b);case xs:return R=T._init,x(b,_,R(T._payload),k)}if(Il(T))return y(b,_,T,k);if(ul(T))return g(b,_,T,k);qu(b,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,_!==null&&_.tag===6?(n(b,_.sibling),_=s(_,T),_.return=b,b=_):(n(b,_),_=sm(T,b.mode,k),_.return=b,b=_),o(b)):n(b,_)}return x}var ua=dC(!0),hC=dC(!1),yh=hi(null),vh=null,$o=null,Tv=null;function Iv(){Tv=$o=vh=null}function Cv(t){var e=yh.current;He(yh),t._currentValue=e}function Ag(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Xo(t,e){vh=t,Tv=$o=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ln=!0),t.firstContext=null)}function Vn(t){var e=t._currentValue;if(Tv!==t)if(t={context:t,memoizedValue:e,next:null},$o===null){if(vh===null)throw Error(G(308));$o=t,vh.dependencies={lanes:0,firstContext:t}}else $o=$o.next=t;return e}var Ni=null;function kv(t){Ni===null?Ni=[t]:Ni.push(t)}function fC(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,kv(e)):(n.next=s.next,s.next=n),e.interleaved=n,ts(t,r)}function ts(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var _s=!1;function Av(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function pC(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Yr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function zs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ce&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,ts(t,n)}return s=r.interleaved,s===null?(e.next=e,kv(r)):(e.next=s.next,s.next=e),r.interleaved=e,ts(t,n)}function Pd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,pv(t,n)}}function Iw(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function xh(t,e,n,r){var s=t.updateQueue;_s=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(i!==null){var f=s.baseState;o=0,u=c=l=null,a=i;do{var p=a.lane,m=a.eventTime;if((r&p)===p){u!==null&&(u=u.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,g=a;switch(p=e,m=n,g.tag){case 1:if(y=g.payload,typeof y=="function"){f=y.call(m,f,p);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=g.payload,p=typeof y=="function"?y.call(m,f,p):y,p==null)break e;f=Xe({},f,p);break e;case 2:_s=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=m,l=f):u=u.next=m,o|=p;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;p=a,a=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(u===null&&(l=f),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ki|=o,t.lanes=o,t.memoizedState=f}}function Cw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(G(191,s));s.call(r)}}}var Kc={},br=hi(Kc),pc=hi(Kc),mc=hi(Kc);function Di(t){if(t===Kc)throw Error(G(174));return t}function Rv(t,e){switch(Be(mc,e),Be(pc,t),Be(br,Kc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:cg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=cg(e,t)}He(br),Be(br,e)}function da(){He(br),He(pc),He(mc)}function mC(t){Di(mc.current);var e=Di(br.current),n=cg(e,t.type);e!==n&&(Be(pc,t),Be(br,n))}function Pv(t){pc.current===t&&(He(br),He(pc))}var Qe=hi(0);function _h(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Jp=[];function Nv(){for(var t=0;t<Jp.length;t++)Jp[t]._workInProgressVersionPrimary=null;Jp.length=0}var Nd=cs.ReactCurrentDispatcher,Zp=cs.ReactCurrentBatchConfig,Wi=0,Ye=null,mt=null,bt=null,wh=!1,$l=!1,gc=0,nM=0;function Vt(){throw Error(G(321))}function Dv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!nr(t[n],e[n]))return!1;return!0}function Ov(t,e,n,r,s,i){if(Wi=i,Ye=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Nd.current=t===null||t.memoizedState===null?oM:aM,t=n(r,s),$l){i=0;do{if($l=!1,gc=0,25<=i)throw Error(G(301));i+=1,bt=mt=null,e.updateQueue=null,Nd.current=lM,t=n(r,s)}while($l)}if(Nd.current=bh,e=mt!==null&&mt.next!==null,Wi=0,bt=mt=Ye=null,wh=!1,e)throw Error(G(300));return t}function jv(){var t=gc!==0;return gc=0,t}function pr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bt===null?Ye.memoizedState=bt=t:bt=bt.next=t,bt}function Un(){if(mt===null){var t=Ye.alternate;t=t!==null?t.memoizedState:null}else t=mt.next;var e=bt===null?Ye.memoizedState:bt.next;if(e!==null)bt=e,mt=t;else{if(t===null)throw Error(G(310));mt=t,t={memoizedState:mt.memoizedState,baseState:mt.baseState,baseQueue:mt.baseQueue,queue:mt.queue,next:null},bt===null?Ye.memoizedState=bt=t:bt=bt.next=t}return bt}function yc(t,e){return typeof e=="function"?e(t):e}function em(t){var e=Un(),n=e.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var r=mt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var u=c.lane;if((Wi&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,Ye.lanes|=u,Ki|=u}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,nr(r,e.memoizedState)||(ln=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ye.lanes|=i,Ki|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function tm(t){var e=Un(),n=e.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);nr(i,e.memoizedState)||(ln=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function gC(){}function yC(t,e){var n=Ye,r=Un(),s=e(),i=!nr(r.memoizedState,s);if(i&&(r.memoizedState=s,ln=!0),r=r.queue,Mv(_C.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||bt!==null&&bt.memoizedState.tag&1){if(n.flags|=2048,vc(9,xC.bind(null,n,r,s,e),void 0,null),Et===null)throw Error(G(349));Wi&30||vC(n,e,s)}return s}function vC(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ye.updateQueue,e===null?(e={lastEffect:null,stores:null},Ye.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function xC(t,e,n,r){e.value=n,e.getSnapshot=r,wC(e)&&bC(t)}function _C(t,e,n){return n(function(){wC(e)&&bC(t)})}function wC(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!nr(t,n)}catch{return!0}}function bC(t){var e=ts(t,1);e!==null&&er(e,t,1,-1)}function kw(t){var e=pr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yc,lastRenderedState:t},e.queue=t,t=t.dispatch=iM.bind(null,Ye,t),[e.memoizedState,t]}function vc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ye.updateQueue,e===null?(e={lastEffect:null,stores:null},Ye.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function EC(){return Un().memoizedState}function Dd(t,e,n,r){var s=pr();Ye.flags|=t,s.memoizedState=vc(1|e,n,void 0,r===void 0?null:r)}function vf(t,e,n,r){var s=Un();r=r===void 0?null:r;var i=void 0;if(mt!==null){var o=mt.memoizedState;if(i=o.destroy,r!==null&&Dv(r,o.deps)){s.memoizedState=vc(e,n,i,r);return}}Ye.flags|=t,s.memoizedState=vc(1|e,n,i,r)}function Aw(t,e){return Dd(8390656,8,t,e)}function Mv(t,e){return vf(2048,8,t,e)}function SC(t,e){return vf(4,2,t,e)}function TC(t,e){return vf(4,4,t,e)}function IC(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function CC(t,e,n){return n=n!=null?n.concat([t]):null,vf(4,4,IC.bind(null,e,t),n)}function Lv(){}function kC(t,e){var n=Un();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Dv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function AC(t,e){var n=Un();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Dv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function RC(t,e,n){return Wi&21?(nr(n,e)||(n=jI(),Ye.lanes|=n,Ki|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ln=!0),t.memoizedState=n)}function rM(t,e){var n=Fe;Fe=n!==0&&4>n?n:4,t(!0);var r=Zp.transition;Zp.transition={};try{t(!1),e()}finally{Fe=n,Zp.transition=r}}function PC(){return Un().memoizedState}function sM(t,e,n){var r=qs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},NC(t))DC(e,n);else if(n=fC(t,e,n,r),n!==null){var s=en();er(n,t,r,s),OC(n,e,r)}}function iM(t,e,n){var r=qs(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(NC(t))DC(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,nr(a,o)){var l=e.interleaved;l===null?(s.next=s,kv(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=fC(t,e,s,r),n!==null&&(s=en(),er(n,t,r,s),OC(n,e,r))}}function NC(t){var e=t.alternate;return t===Ye||e!==null&&e===Ye}function DC(t,e){$l=wh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function OC(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,pv(t,n)}}var bh={readContext:Vn,useCallback:Vt,useContext:Vt,useEffect:Vt,useImperativeHandle:Vt,useInsertionEffect:Vt,useLayoutEffect:Vt,useMemo:Vt,useReducer:Vt,useRef:Vt,useState:Vt,useDebugValue:Vt,useDeferredValue:Vt,useTransition:Vt,useMutableSource:Vt,useSyncExternalStore:Vt,useId:Vt,unstable_isNewReconciler:!1},oM={readContext:Vn,useCallback:function(t,e){return pr().memoizedState=[t,e===void 0?null:e],t},useContext:Vn,useEffect:Aw,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Dd(4194308,4,IC.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Dd(4194308,4,t,e)},useInsertionEffect:function(t,e){return Dd(4,2,t,e)},useMemo:function(t,e){var n=pr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=pr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=sM.bind(null,Ye,t),[r.memoizedState,t]},useRef:function(t){var e=pr();return t={current:t},e.memoizedState=t},useState:kw,useDebugValue:Lv,useDeferredValue:function(t){return pr().memoizedState=t},useTransition:function(){var t=kw(!1),e=t[0];return t=rM.bind(null,t[1]),pr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ye,s=pr();if(Ke){if(n===void 0)throw Error(G(407));n=n()}else{if(n=e(),Et===null)throw Error(G(349));Wi&30||vC(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Aw(_C.bind(null,r,i,t),[t]),r.flags|=2048,vc(9,xC.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=pr(),e=Et.identifierPrefix;if(Ke){var n=Kr,r=Wr;n=(r&~(1<<32-Zn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=gc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=nM++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},aM={readContext:Vn,useCallback:kC,useContext:Vn,useEffect:Mv,useImperativeHandle:CC,useInsertionEffect:SC,useLayoutEffect:TC,useMemo:AC,useReducer:em,useRef:EC,useState:function(){return em(yc)},useDebugValue:Lv,useDeferredValue:function(t){var e=Un();return RC(e,mt.memoizedState,t)},useTransition:function(){var t=em(yc)[0],e=Un().memoizedState;return[t,e]},useMutableSource:gC,useSyncExternalStore:yC,useId:PC,unstable_isNewReconciler:!1},lM={readContext:Vn,useCallback:kC,useContext:Vn,useEffect:Mv,useImperativeHandle:CC,useInsertionEffect:SC,useLayoutEffect:TC,useMemo:AC,useReducer:tm,useRef:EC,useState:function(){return tm(yc)},useDebugValue:Lv,useDeferredValue:function(t){var e=Un();return mt===null?e.memoizedState=t:RC(e,mt.memoizedState,t)},useTransition:function(){var t=tm(yc)[0],e=Un().memoizedState;return[t,e]},useMutableSource:gC,useSyncExternalStore:yC,useId:PC,unstable_isNewReconciler:!1};function Wn(t,e){if(t&&t.defaultProps){e=Xe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Rg(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Xe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var xf={isMounted:function(t){return(t=t._reactInternals)?co(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=en(),s=qs(t),i=Yr(r,s);i.payload=e,n!=null&&(i.callback=n),e=zs(t,i,s),e!==null&&(er(e,t,s,r),Pd(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=en(),s=qs(t),i=Yr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=zs(t,i,s),e!==null&&(er(e,t,s,r),Pd(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=en(),r=qs(t),s=Yr(n,r);s.tag=2,e!=null&&(s.callback=e),e=zs(t,s,r),e!==null&&(er(e,t,r,n),Pd(e,t,r))}};function Rw(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!uc(n,r)||!uc(s,i):!0}function jC(t,e,n){var r=!1,s=Zs,i=e.contextType;return typeof i=="object"&&i!==null?i=Vn(i):(s=dn(e)?qi:Gt.current,r=e.contextTypes,i=(r=r!=null)?la(t,s):Zs),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=xf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Pw(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&xf.enqueueReplaceState(e,e.state,null)}function Pg(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Av(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Vn(i):(i=dn(e)?qi:Gt.current,s.context=la(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Rg(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&xf.enqueueReplaceState(s,s.state,null),xh(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ha(t,e){try{var n="",r=e;do n+=M2(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function nm(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ng(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var cM=typeof WeakMap=="function"?WeakMap:Map;function MC(t,e,n){n=Yr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Sh||(Sh=!0,zg=r),Ng(t,e)},n}function LC(t,e,n){n=Yr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Ng(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Ng(t,e),typeof r!="function"&&($s===null?$s=new Set([this]):$s.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Nw(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new cM;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=EM.bind(null,t,e,n),e.then(t,t))}function Dw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ow(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Yr(-1,1),e.tag=2,zs(n,e,1))),n.lanes|=1),t)}var uM=cs.ReactCurrentOwner,ln=!1;function Zt(t,e,n,r){e.child=t===null?hC(e,null,n,r):ua(e,t.child,n,r)}function jw(t,e,n,r,s){n=n.render;var i=e.ref;return Xo(e,s),r=Ov(t,e,n,r,i,s),n=jv(),t!==null&&!ln?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ns(t,e,s)):(Ke&&n&&bv(e),e.flags|=1,Zt(t,e,r,s),e.child)}function Mw(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Hv(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,FC(t,e,i,r,s)):(t=Ld(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:uc,n(o,r)&&t.ref===e.ref)return ns(t,e,s)}return e.flags|=1,t=Hs(i,r),t.ref=e.ref,t.return=e,e.child=t}function FC(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(uc(i,r)&&t.ref===e.ref)if(ln=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(ln=!0);else return e.lanes=t.lanes,ns(t,e,s)}return Dg(t,e,n,r,s)}function VC(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Be(Ho,vn),vn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Be(Ho,vn),vn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Be(Ho,vn),vn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Be(Ho,vn),vn|=r;return Zt(t,e,s,n),e.child}function UC(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Dg(t,e,n,r,s){var i=dn(n)?qi:Gt.current;return i=la(e,i),Xo(e,s),n=Ov(t,e,n,r,i,s),r=jv(),t!==null&&!ln?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ns(t,e,s)):(Ke&&r&&bv(e),e.flags|=1,Zt(t,e,n,s),e.child)}function Lw(t,e,n,r,s){if(dn(n)){var i=!0;ph(e)}else i=!1;if(Xo(e,s),e.stateNode===null)Od(t,e),jC(e,n,r),Pg(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Vn(c):(c=dn(n)?qi:Gt.current,c=la(e,c));var u=n.getDerivedStateFromProps,f=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&Pw(e,o,r,c),_s=!1;var p=e.memoizedState;o.state=p,xh(e,r,o,s),l=e.memoizedState,a!==r||p!==l||un.current||_s?(typeof u=="function"&&(Rg(e,n,u,r),l=e.memoizedState),(a=_s||Rw(e,n,a,r,p,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,pC(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Wn(e.type,a),o.props=c,f=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Vn(l):(l=dn(n)?qi:Gt.current,l=la(e,l));var m=n.getDerivedStateFromProps;(u=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&Pw(e,o,r,l),_s=!1,p=e.memoizedState,o.state=p,xh(e,r,o,s);var y=e.memoizedState;a!==f||p!==y||un.current||_s?(typeof m=="function"&&(Rg(e,n,m,r),y=e.memoizedState),(c=_s||Rw(e,n,c,r,p,y,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Og(t,e,n,r,i,s)}function Og(t,e,n,r,s,i){UC(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&bw(e,n,!1),ns(t,e,i);r=e.stateNode,uM.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ua(e,t.child,null,i),e.child=ua(e,null,a,i)):Zt(t,e,a,i),e.memoizedState=r.state,s&&bw(e,n,!0),e.child}function BC(t){var e=t.stateNode;e.pendingContext?ww(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ww(t,e.context,!1),Rv(t,e.containerInfo)}function Fw(t,e,n,r,s){return ca(),Sv(s),e.flags|=256,Zt(t,e,n,r),e.child}var jg={dehydrated:null,treeContext:null,retryLane:0};function Mg(t){return{baseLanes:t,cachePool:null,transitions:null}}function zC(t,e,n){var r=e.pendingProps,s=Qe.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Be(Qe,s&1),t===null)return kg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=bf(o,r,0,null),t=Bi(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Mg(n),e.memoizedState=jg,t):Fv(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return dM(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Hs(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Hs(a,i):(i=Bi(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Mg(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=jg,r}return i=t.child,t=i.sibling,r=Hs(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Fv(t,e){return e=bf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Hu(t,e,n,r){return r!==null&&Sv(r),ua(e,t.child,null,n),t=Fv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function dM(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=nm(Error(G(422))),Hu(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=bf({mode:"visible",children:r.children},s,0,null),i=Bi(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ua(e,t.child,null,o),e.child.memoizedState=Mg(o),e.memoizedState=jg,i);if(!(e.mode&1))return Hu(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(G(419)),r=nm(i,r,void 0),Hu(t,e,o,r)}if(a=(o&t.childLanes)!==0,ln||a){if(r=Et,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,ts(t,s),er(r,t,s,-1))}return qv(),r=nm(Error(G(421))),Hu(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=SM.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,wn=Bs(s.nextSibling),Sn=e,Ke=!0,Qn=null,t!==null&&(Nn[Dn++]=Wr,Nn[Dn++]=Kr,Nn[Dn++]=Hi,Wr=t.id,Kr=t.overflow,Hi=e),e=Fv(e,r.children),e.flags|=4096,e)}function Vw(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ag(t.return,e,n)}function rm(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function $C(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Zt(t,e,r.children,n),r=Qe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Vw(t,n,e);else if(t.tag===19)Vw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Be(Qe,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&_h(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),rm(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&_h(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}rm(e,!0,n,null,i);break;case"together":rm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Od(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ns(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ki|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(G(153));if(e.child!==null){for(t=e.child,n=Hs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Hs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function hM(t,e,n){switch(e.tag){case 3:BC(e),ca();break;case 5:mC(e);break;case 1:dn(e.type)&&ph(e);break;case 4:Rv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Be(yh,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Be(Qe,Qe.current&1),e.flags|=128,null):n&e.child.childLanes?zC(t,e,n):(Be(Qe,Qe.current&1),t=ns(t,e,n),t!==null?t.sibling:null);Be(Qe,Qe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return $C(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Be(Qe,Qe.current),r)break;return null;case 22:case 23:return e.lanes=0,VC(t,e,n)}return ns(t,e,n)}var qC,Lg,HC,WC;qC=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Lg=function(){};HC=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Di(br.current);var i=null;switch(n){case"input":s=ig(t,s),r=ig(t,r),i=[];break;case"select":s=Xe({},s,{value:void 0}),r=Xe({},r,{value:void 0}),i=[];break;case"textarea":s=lg(t,s),r=lg(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=hh)}ug(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(rc.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s?.[c],r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(rc.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&$e("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};WC=function(t,e,n,r){n!==r&&(e.flags|=4)};function gl(t,e){if(!Ke)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ut(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function fM(t,e,n){var r=e.pendingProps;switch(Ev(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ut(e),null;case 1:return dn(e.type)&&fh(),Ut(e),null;case 3:return r=e.stateNode,da(),He(un),He(Gt),Nv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&($u(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Qn!==null&&(Hg(Qn),Qn=null))),Lg(t,e),Ut(e),null;case 5:Pv(e);var s=Di(mc.current);if(n=e.type,t!==null&&e.stateNode!=null)HC(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(G(166));return Ut(e),null}if(t=Di(br.current),$u(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[xr]=e,r[fc]=i,t=(e.mode&1)!==0,n){case"dialog":$e("cancel",r),$e("close",r);break;case"iframe":case"object":case"embed":$e("load",r);break;case"video":case"audio":for(s=0;s<kl.length;s++)$e(kl[s],r);break;case"source":$e("error",r);break;case"img":case"image":case"link":$e("error",r),$e("load",r);break;case"details":$e("toggle",r);break;case"input":G_(r,i),$e("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},$e("invalid",r);break;case"textarea":Y_(r,i),$e("invalid",r)}ug(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&zu(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&zu(r.textContent,a,t),s=["children",""+a]):rc.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&$e("scroll",r)}switch(n){case"input":Ou(r),Q_(r,i,!0);break;case"textarea":Ou(r),X_(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=hh)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=_I(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[xr]=e,t[fc]=r,qC(t,e,!1,!1),e.stateNode=t;e:{switch(o=dg(n,r),n){case"dialog":$e("cancel",t),$e("close",t),s=r;break;case"iframe":case"object":case"embed":$e("load",t),s=r;break;case"video":case"audio":for(s=0;s<kl.length;s++)$e(kl[s],t);s=r;break;case"source":$e("error",t),s=r;break;case"img":case"image":case"link":$e("error",t),$e("load",t),s=r;break;case"details":$e("toggle",t),s=r;break;case"input":G_(t,r),s=ig(t,r),$e("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Xe({},r,{value:void 0}),$e("invalid",t);break;case"textarea":Y_(t,r),s=lg(t,r),$e("invalid",t);break;default:s=r}ug(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?EI(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&wI(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&sc(t,l):typeof l=="number"&&sc(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(rc.hasOwnProperty(i)?l!=null&&i==="onScroll"&&$e("scroll",t):l!=null&&lv(t,i,l,o))}switch(n){case"input":Ou(t),Q_(t,r,!1);break;case"textarea":Ou(t),X_(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Js(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ko(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ko(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=hh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ut(e),null;case 6:if(t&&e.stateNode!=null)WC(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(G(166));if(n=Di(mc.current),Di(br.current),$u(e)){if(r=e.stateNode,n=e.memoizedProps,r[xr]=e,(i=r.nodeValue!==n)&&(t=Sn,t!==null))switch(t.tag){case 3:zu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&zu(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[xr]=e,e.stateNode=r}return Ut(e),null;case 13:if(He(Qe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ke&&wn!==null&&e.mode&1&&!(e.flags&128))uC(),ca(),e.flags|=98560,i=!1;else if(i=$u(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(G(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(G(317));i[xr]=e}else ca(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ut(e),i=!1}else Qn!==null&&(Hg(Qn),Qn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Qe.current&1?yt===0&&(yt=3):qv())),e.updateQueue!==null&&(e.flags|=4),Ut(e),null);case 4:return da(),Lg(t,e),t===null&&dc(e.stateNode.containerInfo),Ut(e),null;case 10:return Cv(e.type._context),Ut(e),null;case 17:return dn(e.type)&&fh(),Ut(e),null;case 19:if(He(Qe),i=e.memoizedState,i===null)return Ut(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)gl(i,!1);else{if(yt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=_h(t),o!==null){for(e.flags|=128,gl(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Be(Qe,Qe.current&1|2),e.child}t=t.sibling}i.tail!==null&&rt()>fa&&(e.flags|=128,r=!0,gl(i,!1),e.lanes=4194304)}else{if(!r)if(t=_h(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),gl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ke)return Ut(e),null}else 2*rt()-i.renderingStartTime>fa&&n!==1073741824&&(e.flags|=128,r=!0,gl(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=rt(),e.sibling=null,n=Qe.current,Be(Qe,r?n&1|2:n&1),e):(Ut(e),null);case 22:case 23:return $v(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?vn&1073741824&&(Ut(e),e.subtreeFlags&6&&(e.flags|=8192)):Ut(e),null;case 24:return null;case 25:return null}throw Error(G(156,e.tag))}function pM(t,e){switch(Ev(e),e.tag){case 1:return dn(e.type)&&fh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return da(),He(un),He(Gt),Nv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Pv(e),null;case 13:if(He(Qe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(G(340));ca()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return He(Qe),null;case 4:return da(),null;case 10:return Cv(e.type._context),null;case 22:case 23:return $v(),null;case 24:return null;default:return null}}var Wu=!1,qt=!1,mM=typeof WeakSet=="function"?WeakSet:Set,Z=null;function qo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){et(t,e,r)}else n.current=null}function Fg(t,e,n){try{n()}catch(r){et(t,e,r)}}var Uw=!1;function gM(t,e){if(wg=ch,t=XI(),wv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,f=t,p=null;t:for(;;){for(var m;f!==n||s!==0&&f.nodeType!==3||(a=o+s),f!==i||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===t)break t;if(p===n&&++c===s&&(a=o),p===i&&++u===r&&(l=o),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(bg={focusedElem:t,selectionRange:n},ch=!1,Z=e;Z!==null;)if(e=Z,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Z=t;else for(;Z!==null;){e=Z;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var g=y.memoizedProps,x=y.memoizedState,b=e.stateNode,_=b.getSnapshotBeforeUpdate(e.elementType===e.type?g:Wn(e.type,g),x);b.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(G(163))}}catch(k){et(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,Z=t;break}Z=e.return}return y=Uw,Uw=!1,y}function ql(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Fg(e,n,i)}s=s.next}while(s!==r)}}function _f(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Vg(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function KC(t){var e=t.alternate;e!==null&&(t.alternate=null,KC(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[xr],delete e[fc],delete e[Tg],delete e[Jj],delete e[Zj])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function GC(t){return t.tag===5||t.tag===3||t.tag===4}function Bw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||GC(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ug(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=hh));else if(r!==4&&(t=t.child,t!==null))for(Ug(t,e,n),t=t.sibling;t!==null;)Ug(t,e,n),t=t.sibling}function Bg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Bg(t,e,n),t=t.sibling;t!==null;)Bg(t,e,n),t=t.sibling}var It=null,Gn=!1;function ps(t,e,n){for(n=n.child;n!==null;)QC(t,e,n),n=n.sibling}function QC(t,e,n){if(wr&&typeof wr.onCommitFiberUnmount=="function")try{wr.onCommitFiberUnmount(hf,n)}catch{}switch(n.tag){case 5:qt||qo(n,e);case 6:var r=It,s=Gn;It=null,ps(t,e,n),It=r,Gn=s,It!==null&&(Gn?(t=It,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):It.removeChild(n.stateNode));break;case 18:It!==null&&(Gn?(t=It,n=n.stateNode,t.nodeType===8?Yp(t.parentNode,n):t.nodeType===1&&Yp(t,n),lc(t)):Yp(It,n.stateNode));break;case 4:r=It,s=Gn,It=n.stateNode.containerInfo,Gn=!0,ps(t,e,n),It=r,Gn=s;break;case 0:case 11:case 14:case 15:if(!qt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Fg(n,e,o),s=s.next}while(s!==r)}ps(t,e,n);break;case 1:if(!qt&&(qo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){et(n,e,a)}ps(t,e,n);break;case 21:ps(t,e,n);break;case 22:n.mode&1?(qt=(r=qt)||n.memoizedState!==null,ps(t,e,n),qt=r):ps(t,e,n);break;default:ps(t,e,n)}}function zw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new mM),e.forEach(function(r){var s=TM.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function qn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:It=a.stateNode,Gn=!1;break e;case 3:It=a.stateNode.containerInfo,Gn=!0;break e;case 4:It=a.stateNode.containerInfo,Gn=!0;break e}a=a.return}if(It===null)throw Error(G(160));QC(i,o,s),It=null,Gn=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){et(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)YC(e,t),e=e.sibling}function YC(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(qn(e,t),ur(t),r&4){try{ql(3,t,t.return),_f(3,t)}catch(g){et(t,t.return,g)}try{ql(5,t,t.return)}catch(g){et(t,t.return,g)}}break;case 1:qn(e,t),ur(t),r&512&&n!==null&&qo(n,n.return);break;case 5:if(qn(e,t),ur(t),r&512&&n!==null&&qo(n,n.return),t.flags&32){var s=t.stateNode;try{sc(s,"")}catch(g){et(t,t.return,g)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&vI(s,i),dg(a,o);var c=dg(a,i);for(o=0;o<l.length;o+=2){var u=l[o],f=l[o+1];u==="style"?EI(s,f):u==="dangerouslySetInnerHTML"?wI(s,f):u==="children"?sc(s,f):lv(s,u,f,c)}switch(a){case"input":og(s,i);break;case"textarea":xI(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Ko(s,!!i.multiple,m,!1):p!==!!i.multiple&&(i.defaultValue!=null?Ko(s,!!i.multiple,i.defaultValue,!0):Ko(s,!!i.multiple,i.multiple?[]:"",!1))}s[fc]=i}catch(g){et(t,t.return,g)}}break;case 6:if(qn(e,t),ur(t),r&4){if(t.stateNode===null)throw Error(G(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(g){et(t,t.return,g)}}break;case 3:if(qn(e,t),ur(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{lc(e.containerInfo)}catch(g){et(t,t.return,g)}break;case 4:qn(e,t),ur(t);break;case 13:qn(e,t),ur(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Bv=rt())),r&4&&zw(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(qt=(c=qt)||u,qn(e,t),qt=c):qn(e,t),ur(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(Z=t,u=t.child;u!==null;){for(f=Z=u;Z!==null;){switch(p=Z,m=p.child,p.tag){case 0:case 11:case 14:case 15:ql(4,p,p.return);break;case 1:qo(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(g){et(r,n,g)}}break;case 5:qo(p,p.return);break;case 22:if(p.memoizedState!==null){qw(f);continue}}m!==null?(m.return=p,Z=m):qw(f)}u=u.sibling}e:for(u=null,f=t;;){if(f.tag===5){if(u===null){u=f;try{s=f.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=bI("display",o))}catch(g){et(t,t.return,g)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(g){et(t,t.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:qn(e,t),ur(t),r&4&&zw(t);break;case 21:break;default:qn(e,t),ur(t)}}function ur(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(GC(n)){var r=n;break e}n=n.return}throw Error(G(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(sc(s,""),r.flags&=-33);var i=Bw(t);Bg(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Bw(t);Ug(t,a,o);break;default:throw Error(G(161))}}catch(l){et(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function yM(t,e,n){Z=t,XC(t)}function XC(t,e,n){for(var r=(t.mode&1)!==0;Z!==null;){var s=Z,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Wu;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||qt;a=Wu;var c=qt;if(Wu=o,(qt=l)&&!c)for(Z=s;Z!==null;)o=Z,l=o.child,o.tag===22&&o.memoizedState!==null?Hw(s):l!==null?(l.return=o,Z=l):Hw(s);for(;i!==null;)Z=i,XC(i),i=i.sibling;Z=s,Wu=a,qt=c}$w(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Z=i):$w(t)}}function $w(t){for(;Z!==null;){var e=Z;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:qt||_f(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!qt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Wn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Cw(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Cw(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&lc(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(G(163))}qt||e.flags&512&&Vg(e)}catch(p){et(e,e.return,p)}}if(e===t){Z=null;break}if(n=e.sibling,n!==null){n.return=e.return,Z=n;break}Z=e.return}}function qw(t){for(;Z!==null;){var e=Z;if(e===t){Z=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Z=n;break}Z=e.return}}function Hw(t){for(;Z!==null;){var e=Z;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{_f(4,e)}catch(l){et(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){et(e,s,l)}}var i=e.return;try{Vg(e)}catch(l){et(e,i,l)}break;case 5:var o=e.return;try{Vg(e)}catch(l){et(e,o,l)}}}catch(l){et(e,e.return,l)}if(e===t){Z=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Z=a;break}Z=e.return}}var vM=Math.ceil,Eh=cs.ReactCurrentDispatcher,Vv=cs.ReactCurrentOwner,Ln=cs.ReactCurrentBatchConfig,Ce=0,Et=null,dt=null,Rt=0,vn=0,Ho=hi(0),yt=0,xc=null,Ki=0,wf=0,Uv=0,Hl=null,on=null,Bv=0,fa=1/0,$r=null,Sh=!1,zg=null,$s=null,Ku=!1,As=null,Th=0,Wl=0,$g=null,jd=-1,Md=0;function en(){return Ce&6?rt():jd!==-1?jd:jd=rt()}function qs(t){return t.mode&1?Ce&2&&Rt!==0?Rt&-Rt:tM.transition!==null?(Md===0&&(Md=jI()),Md):(t=Fe,t!==0||(t=window.event,t=t===void 0?16:zI(t.type)),t):1}function er(t,e,n,r){if(50<Wl)throw Wl=0,$g=null,Error(G(185));qc(t,n,r),(!(Ce&2)||t!==Et)&&(t===Et&&(!(Ce&2)&&(wf|=n),yt===4&&Es(t,Rt)),hn(t,r),n===1&&Ce===0&&!(e.mode&1)&&(fa=rt()+500,yf&&fi()))}function hn(t,e){var n=t.callbackNode;tj(t,e);var r=lh(t,t===Et?Rt:0);if(r===0)n!==null&&ew(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&ew(n),e===1)t.tag===0?eM(Ww.bind(null,t)):aC(Ww.bind(null,t)),Yj(function(){!(Ce&6)&&fi()}),n=null;else{switch(MI(r)){case 1:n=fv;break;case 4:n=DI;break;case 16:n=ah;break;case 536870912:n=OI;break;default:n=ah}n=ik(n,JC.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function JC(t,e){if(jd=-1,Md=0,Ce&6)throw Error(G(327));var n=t.callbackNode;if(Jo()&&t.callbackNode!==n)return null;var r=lh(t,t===Et?Rt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ih(t,r);else{e=r;var s=Ce;Ce|=2;var i=ek();(Et!==t||Rt!==e)&&($r=null,fa=rt()+500,Ui(t,e));do try{wM();break}catch(a){ZC(t,a)}while(!0);Iv(),Eh.current=i,Ce=s,dt!==null?e=0:(Et=null,Rt=0,e=yt)}if(e!==0){if(e===2&&(s=gg(t),s!==0&&(r=s,e=qg(t,s))),e===1)throw n=xc,Ui(t,0),Es(t,r),hn(t,rt()),n;if(e===6)Es(t,r);else{if(s=t.current.alternate,!(r&30)&&!xM(s)&&(e=Ih(t,r),e===2&&(i=gg(t),i!==0&&(r=i,e=qg(t,i))),e===1))throw n=xc,Ui(t,0),Es(t,r),hn(t,rt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(G(345));case 2:Ci(t,on,$r);break;case 3:if(Es(t,r),(r&130023424)===r&&(e=Bv+500-rt(),10<e)){if(lh(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){en(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Sg(Ci.bind(null,t,on,$r),e);break}Ci(t,on,$r);break;case 4:if(Es(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Zn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=rt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*vM(r/1960))-r,10<r){t.timeoutHandle=Sg(Ci.bind(null,t,on,$r),r);break}Ci(t,on,$r);break;case 5:Ci(t,on,$r);break;default:throw Error(G(329))}}}return hn(t,rt()),t.callbackNode===n?JC.bind(null,t):null}function qg(t,e){var n=Hl;return t.current.memoizedState.isDehydrated&&(Ui(t,e).flags|=256),t=Ih(t,e),t!==2&&(e=on,on=n,e!==null&&Hg(e)),t}function Hg(t){on===null?on=t:on.push.apply(on,t)}function xM(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!nr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Es(t,e){for(e&=~Uv,e&=~wf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Zn(e),r=1<<n;t[n]=-1,e&=~r}}function Ww(t){if(Ce&6)throw Error(G(327));Jo();var e=lh(t,0);if(!(e&1))return hn(t,rt()),null;var n=Ih(t,e);if(t.tag!==0&&n===2){var r=gg(t);r!==0&&(e=r,n=qg(t,r))}if(n===1)throw n=xc,Ui(t,0),Es(t,e),hn(t,rt()),n;if(n===6)throw Error(G(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ci(t,on,$r),hn(t,rt()),null}function zv(t,e){var n=Ce;Ce|=1;try{return t(e)}finally{Ce=n,Ce===0&&(fa=rt()+500,yf&&fi())}}function Gi(t){As!==null&&As.tag===0&&!(Ce&6)&&Jo();var e=Ce;Ce|=1;var n=Ln.transition,r=Fe;try{if(Ln.transition=null,Fe=1,t)return t()}finally{Fe=r,Ln.transition=n,Ce=e,!(Ce&6)&&fi()}}function $v(){vn=Ho.current,He(Ho)}function Ui(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Qj(n)),dt!==null)for(n=dt.return;n!==null;){var r=n;switch(Ev(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&fh();break;case 3:da(),He(un),He(Gt),Nv();break;case 5:Pv(r);break;case 4:da();break;case 13:He(Qe);break;case 19:He(Qe);break;case 10:Cv(r.type._context);break;case 22:case 23:$v()}n=n.return}if(Et=t,dt=t=Hs(t.current,null),Rt=vn=e,yt=0,xc=null,Uv=wf=Ki=0,on=Hl=null,Ni!==null){for(e=0;e<Ni.length;e++)if(n=Ni[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Ni=null}return t}function ZC(t,e){do{var n=dt;try{if(Iv(),Nd.current=bh,wh){for(var r=Ye.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}wh=!1}if(Wi=0,bt=mt=Ye=null,$l=!1,gc=0,Vv.current=null,n===null||n.return===null){yt=1,xc=e,dt=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=Rt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=Dw(o);if(m!==null){m.flags&=-257,Ow(m,o,a,i,e),m.mode&1&&Nw(i,c,e),e=m,l=c;var y=e.updateQueue;if(y===null){var g=new Set;g.add(l),e.updateQueue=g}else y.add(l);break e}else{if(!(e&1)){Nw(i,c,e),qv();break e}l=Error(G(426))}}else if(Ke&&a.mode&1){var x=Dw(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),Ow(x,o,a,i,e),Sv(ha(l,a));break e}}i=l=ha(l,a),yt!==4&&(yt=2),Hl===null?Hl=[i]:Hl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var b=MC(i,l,e);Iw(i,b);break e;case 1:a=l;var _=i.type,T=i.stateNode;if(!(i.flags&128)&&(typeof _.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&($s===null||!$s.has(T)))){i.flags|=65536,e&=-e,i.lanes|=e;var k=LC(i,a,e);Iw(i,k);break e}}i=i.return}while(i!==null)}nk(n)}catch(N){e=N,dt===n&&n!==null&&(dt=n=n.return);continue}break}while(!0)}function ek(){var t=Eh.current;return Eh.current=bh,t===null?bh:t}function qv(){(yt===0||yt===3||yt===2)&&(yt=4),Et===null||!(Ki&268435455)&&!(wf&268435455)||Es(Et,Rt)}function Ih(t,e){var n=Ce;Ce|=2;var r=ek();(Et!==t||Rt!==e)&&($r=null,Ui(t,e));do try{_M();break}catch(s){ZC(t,s)}while(!0);if(Iv(),Ce=n,Eh.current=r,dt!==null)throw Error(G(261));return Et=null,Rt=0,yt}function _M(){for(;dt!==null;)tk(dt)}function wM(){for(;dt!==null&&!W2();)tk(dt)}function tk(t){var e=sk(t.alternate,t,vn);t.memoizedProps=t.pendingProps,e===null?nk(t):dt=e,Vv.current=null}function nk(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=pM(n,e),n!==null){n.flags&=32767,dt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{yt=6,dt=null;return}}else if(n=fM(n,e,vn),n!==null){dt=n;return}if(e=e.sibling,e!==null){dt=e;return}dt=e=t}while(e!==null);yt===0&&(yt=5)}function Ci(t,e,n){var r=Fe,s=Ln.transition;try{Ln.transition=null,Fe=1,bM(t,e,n,r)}finally{Ln.transition=s,Fe=r}return null}function bM(t,e,n,r){do Jo();while(As!==null);if(Ce&6)throw Error(G(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(G(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(nj(t,i),t===Et&&(dt=Et=null,Rt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ku||(Ku=!0,ik(ah,function(){return Jo(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Ln.transition,Ln.transition=null;var o=Fe;Fe=1;var a=Ce;Ce|=4,Vv.current=null,gM(t,n),YC(n,t),zj(bg),ch=!!wg,bg=wg=null,t.current=n,yM(n),K2(),Ce=a,Fe=o,Ln.transition=i}else t.current=n;if(Ku&&(Ku=!1,As=t,Th=s),i=t.pendingLanes,i===0&&($s=null),Y2(n.stateNode),hn(t,rt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Sh)throw Sh=!1,t=zg,zg=null,t;return Th&1&&t.tag!==0&&Jo(),i=t.pendingLanes,i&1?t===$g?Wl++:(Wl=0,$g=t):Wl=0,fi(),null}function Jo(){if(As!==null){var t=MI(Th),e=Ln.transition,n=Fe;try{if(Ln.transition=null,Fe=16>t?16:t,As===null)var r=!1;else{if(t=As,As=null,Th=0,Ce&6)throw Error(G(331));var s=Ce;for(Ce|=4,Z=t.current;Z!==null;){var i=Z,o=i.child;if(Z.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Z=c;Z!==null;){var u=Z;switch(u.tag){case 0:case 11:case 15:ql(8,u,i)}var f=u.child;if(f!==null)f.return=u,Z=f;else for(;Z!==null;){u=Z;var p=u.sibling,m=u.return;if(KC(u),u===c){Z=null;break}if(p!==null){p.return=m,Z=p;break}Z=m}}}var y=i.alternate;if(y!==null){var g=y.child;if(g!==null){y.child=null;do{var x=g.sibling;g.sibling=null,g=x}while(g!==null)}}Z=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Z=o;else e:for(;Z!==null;){if(i=Z,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ql(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,Z=b;break e}Z=i.return}}var _=t.current;for(Z=_;Z!==null;){o=Z;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,Z=T;else e:for(o=_;Z!==null;){if(a=Z,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:_f(9,a)}}catch(N){et(a,a.return,N)}if(a===o){Z=null;break e}var k=a.sibling;if(k!==null){k.return=a.return,Z=k;break e}Z=a.return}}if(Ce=s,fi(),wr&&typeof wr.onPostCommitFiberRoot=="function")try{wr.onPostCommitFiberRoot(hf,t)}catch{}r=!0}return r}finally{Fe=n,Ln.transition=e}}return!1}function Kw(t,e,n){e=ha(n,e),e=MC(t,e,1),t=zs(t,e,1),e=en(),t!==null&&(qc(t,1,e),hn(t,e))}function et(t,e,n){if(t.tag===3)Kw(t,t,n);else for(;e!==null;){if(e.tag===3){Kw(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&($s===null||!$s.has(r))){t=ha(n,t),t=LC(e,t,1),e=zs(e,t,1),t=en(),e!==null&&(qc(e,1,t),hn(e,t));break}}e=e.return}}function EM(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=en(),t.pingedLanes|=t.suspendedLanes&n,Et===t&&(Rt&n)===n&&(yt===4||yt===3&&(Rt&130023424)===Rt&&500>rt()-Bv?Ui(t,0):Uv|=n),hn(t,e)}function rk(t,e){e===0&&(t.mode&1?(e=Lu,Lu<<=1,!(Lu&130023424)&&(Lu=4194304)):e=1);var n=en();t=ts(t,e),t!==null&&(qc(t,e,n),hn(t,n))}function SM(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),rk(t,n)}function TM(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(G(314))}r!==null&&r.delete(e),rk(t,n)}var sk;sk=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||un.current)ln=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ln=!1,hM(t,e,n);ln=!!(t.flags&131072)}else ln=!1,Ke&&e.flags&1048576&&lC(e,gh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Od(t,e),t=e.pendingProps;var s=la(e,Gt.current);Xo(e,n),s=Ov(null,e,r,t,s,n);var i=jv();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,dn(r)?(i=!0,ph(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Av(e),s.updater=xf,e.stateNode=s,s._reactInternals=e,Pg(e,r,t,n),e=Og(null,e,r,!0,i,n)):(e.tag=0,Ke&&i&&bv(e),Zt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Od(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=CM(r),t=Wn(r,t),s){case 0:e=Dg(null,e,r,t,n);break e;case 1:e=Lw(null,e,r,t,n);break e;case 11:e=jw(null,e,r,t,n);break e;case 14:e=Mw(null,e,r,Wn(r.type,t),n);break e}throw Error(G(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Wn(r,s),Dg(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Wn(r,s),Lw(t,e,r,s,n);case 3:e:{if(BC(e),t===null)throw Error(G(387));r=e.pendingProps,i=e.memoizedState,s=i.element,pC(t,e),xh(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=ha(Error(G(423)),e),e=Fw(t,e,r,n,s);break e}else if(r!==s){s=ha(Error(G(424)),e),e=Fw(t,e,r,n,s);break e}else for(wn=Bs(e.stateNode.containerInfo.firstChild),Sn=e,Ke=!0,Qn=null,n=hC(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ca(),r===s){e=ns(t,e,n);break e}Zt(t,e,r,n)}e=e.child}return e;case 5:return mC(e),t===null&&kg(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Eg(r,s)?o=null:i!==null&&Eg(r,i)&&(e.flags|=32),UC(t,e),Zt(t,e,o,n),e.child;case 6:return t===null&&kg(e),null;case 13:return zC(t,e,n);case 4:return Rv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ua(e,null,r,n):Zt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Wn(r,s),jw(t,e,r,s,n);case 7:return Zt(t,e,e.pendingProps,n),e.child;case 8:return Zt(t,e,e.pendingProps.children,n),e.child;case 12:return Zt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Be(yh,r._currentValue),r._currentValue=o,i!==null)if(nr(i.value,o)){if(i.children===s.children&&!un.current){e=ns(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Yr(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Ag(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(G(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Ag(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Zt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Xo(e,n),s=Vn(s),r=r(s),e.flags|=1,Zt(t,e,r,n),e.child;case 14:return r=e.type,s=Wn(r,e.pendingProps),s=Wn(r.type,s),Mw(t,e,r,s,n);case 15:return FC(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Wn(r,s),Od(t,e),e.tag=1,dn(r)?(t=!0,ph(e)):t=!1,Xo(e,n),jC(e,r,s),Pg(e,r,s,n),Og(null,e,r,!0,t,n);case 19:return $C(t,e,n);case 22:return VC(t,e,n)}throw Error(G(156,e.tag))};function ik(t,e){return NI(t,e)}function IM(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jn(t,e,n,r){return new IM(t,e,n,r)}function Hv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function CM(t){if(typeof t=="function")return Hv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===uv)return 11;if(t===dv)return 14}return 2}function Hs(t,e){var n=t.alternate;return n===null?(n=jn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ld(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Hv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case jo:return Bi(n.children,s,i,e);case cv:o=8,s|=8;break;case tg:return t=jn(12,n,e,s|2),t.elementType=tg,t.lanes=i,t;case ng:return t=jn(13,n,e,s),t.elementType=ng,t.lanes=i,t;case rg:return t=jn(19,n,e,s),t.elementType=rg,t.lanes=i,t;case mI:return bf(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case fI:o=10;break e;case pI:o=9;break e;case uv:o=11;break e;case dv:o=14;break e;case xs:o=16,r=null;break e}throw Error(G(130,t==null?t:typeof t,""))}return e=jn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Bi(t,e,n,r){return t=jn(7,t,r,e),t.lanes=n,t}function bf(t,e,n,r){return t=jn(22,t,r,e),t.elementType=mI,t.lanes=n,t.stateNode={isHidden:!1},t}function sm(t,e,n){return t=jn(6,t,null,e),t.lanes=n,t}function im(t,e,n){return e=jn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function kM(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vp(0),this.expirationTimes=Vp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vp(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Wv(t,e,n,r,s,i,o,a,l){return t=new kM(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=jn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Av(i),t}function AM(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Oo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function ok(t){if(!t)return Zs;t=t._reactInternals;e:{if(co(t)!==t||t.tag!==1)throw Error(G(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(dn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(G(171))}if(t.tag===1){var n=t.type;if(dn(n))return oC(t,n,e)}return e}function ak(t,e,n,r,s,i,o,a,l){return t=Wv(n,r,!0,t,s,i,o,a,l),t.context=ok(null),n=t.current,r=en(),s=qs(n),i=Yr(r,s),i.callback=e??null,zs(n,i,s),t.current.lanes=s,qc(t,s,r),hn(t,r),t}function Ef(t,e,n,r){var s=e.current,i=en(),o=qs(s);return n=ok(n),e.context===null?e.context=n:e.pendingContext=n,e=Yr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=zs(s,e,o),t!==null&&(er(t,s,o,i),Pd(t,s,o)),o}function Ch(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Gw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Kv(t,e){Gw(t,e),(t=t.alternate)&&Gw(t,e)}function RM(){return null}var lk=typeof reportError=="function"?reportError:function(t){console.error(t)};function Gv(t){this._internalRoot=t}Sf.prototype.render=Gv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(G(409));Ef(t,e,null,null)};Sf.prototype.unmount=Gv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Gi(function(){Ef(null,t,null,null)}),e[es]=null}};function Sf(t){this._internalRoot=t}Sf.prototype.unstable_scheduleHydration=function(t){if(t){var e=VI();t={blockedOn:null,target:t,priority:e};for(var n=0;n<bs.length&&e!==0&&e<bs[n].priority;n++);bs.splice(n,0,t),n===0&&BI(t)}};function Qv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Tf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Qw(){}function PM(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Ch(o);i.call(c)}}var o=ak(e,r,t,0,null,!1,!1,"",Qw);return t._reactRootContainer=o,t[es]=o.current,dc(t.nodeType===8?t.parentNode:t),Gi(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Ch(l);a.call(c)}}var l=Wv(t,0,!1,null,null,!1,!1,"",Qw);return t._reactRootContainer=l,t[es]=l.current,dc(t.nodeType===8?t.parentNode:t),Gi(function(){Ef(e,l,n,r)}),l}function If(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Ch(o);a.call(l)}}Ef(e,o,t,s)}else o=PM(n,e,t,s,r);return Ch(o)}LI=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Cl(e.pendingLanes);n!==0&&(pv(e,n|1),hn(e,rt()),!(Ce&6)&&(fa=rt()+500,fi()))}break;case 13:Gi(function(){var r=ts(t,1);if(r!==null){var s=en();er(r,t,1,s)}}),Kv(t,1)}};mv=function(t){if(t.tag===13){var e=ts(t,134217728);if(e!==null){var n=en();er(e,t,134217728,n)}Kv(t,134217728)}};FI=function(t){if(t.tag===13){var e=qs(t),n=ts(t,e);if(n!==null){var r=en();er(n,t,e,r)}Kv(t,e)}};VI=function(){return Fe};UI=function(t,e){var n=Fe;try{return Fe=t,e()}finally{Fe=n}};fg=function(t,e,n){switch(e){case"input":if(og(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=gf(r);if(!s)throw Error(G(90));yI(r),og(r,s)}}}break;case"textarea":xI(t,n);break;case"select":e=n.value,e!=null&&Ko(t,!!n.multiple,e,!1)}};II=zv;CI=Gi;var NM={usingClientEntryPoint:!1,Events:[Wc,Vo,gf,SI,TI,zv]},yl={findFiberByHostInstance:Pi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},DM={bundleType:yl.bundleType,version:yl.version,rendererPackageName:yl.rendererPackageName,rendererConfig:yl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:cs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=RI(t),t===null?null:t.stateNode},findFiberByHostInstance:yl.findFiberByHostInstance||RM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gu.isDisabled&&Gu.supportsFiber)try{hf=Gu.inject(DM),wr=Gu}catch{}}kn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NM;kn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Qv(e))throw Error(G(200));return AM(t,e,null,n)};kn.createRoot=function(t,e){if(!Qv(t))throw Error(G(299));var n=!1,r="",s=lk;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Wv(t,1,!1,null,null,n,!1,r,s),t[es]=e.current,dc(t.nodeType===8?t.parentNode:t),new Gv(e)};kn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(G(188)):(t=Object.keys(t).join(","),Error(G(268,t)));return t=RI(e),t=t===null?null:t.stateNode,t};kn.flushSync=function(t){return Gi(t)};kn.hydrate=function(t,e,n){if(!Tf(e))throw Error(G(200));return If(null,t,e,!0,n)};kn.hydrateRoot=function(t,e,n){if(!Qv(t))throw Error(G(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=lk;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=ak(e,null,t,1,n??null,s,!1,i,o),t[es]=e.current,dc(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Sf(e)};kn.render=function(t,e,n){if(!Tf(e))throw Error(G(200));return If(null,t,e,!1,n)};kn.unmountComponentAtNode=function(t){if(!Tf(t))throw Error(G(40));return t._reactRootContainer?(Gi(function(){If(null,null,t,!1,function(){t._reactRootContainer=null,t[es]=null})}),!0):!1};kn.unstable_batchedUpdates=zv;kn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Tf(n))throw Error(G(200));if(t==null||t._reactInternals===void 0)throw Error(G(38));return If(t,e,n,!1,r)};kn.version="18.3.1-next-f1338f8080-20240426";function ck(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ck)}catch(t){console.error(t)}}ck(),cI.exports=kn;var uo=cI.exports;const OM=XT(uo);var Yw=uo;Zm.createRoot=Yw.createRoot,Zm.hydrateRoot=Yw.hydrateRoot;function jM(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,s,i,o=[],a="",l=t.split("/");for(l[0]||l.shift();s=l.shift();)n=s[0],n==="*"?(o.push(n),a+=s[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=s.indexOf("?",1),i=s.indexOf(".",1),o.push(s.substring(1,~r?r:~i?i:s.length)),a+=~r&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(a+=(~r?"?":"")+"\\"+s.substring(i))):a+="/"+s;return{keys:o,pattern:new RegExp("^"+a+(e?"(?=$|/)":"/?$"),"i")}}var uk={exports:{}},dk={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pa=w;function MM(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var LM=typeof Object.is=="function"?Object.is:MM,FM=pa.useState,VM=pa.useEffect,UM=pa.useLayoutEffect,BM=pa.useDebugValue;function zM(t,e){var n=e(),r=FM({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return UM(function(){s.value=n,s.getSnapshot=e,om(s)&&i({inst:s})},[t,n,e]),VM(function(){return om(s)&&i({inst:s}),t(function(){om(s)&&i({inst:s})})},[t]),BM(n),n}function om(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!LM(t,n)}catch{return!0}}function $M(t,e){return e()}var qM=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?$M:zM;dk.useSyncExternalStore=pa.useSyncExternalStore!==void 0?pa.useSyncExternalStore:qM;uk.exports=dk;var hk=uk.exports;const HM=iv.useInsertionEffect,WM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",fk=WM?w.useLayoutEffect:w.useEffect,KM=HM||fk,Yv=t=>{const e=w.useRef([t,(...n)=>e[0](...n)]).current;return KM(()=>{e[0]=t}),e[1]},GM="popstate",Xv="pushState",Jv="replaceState",QM="hashchange",Xw=[GM,Xv,Jv,QM],YM=t=>{for(const e of Xw)addEventListener(e,t);return()=>{for(const e of Xw)removeEventListener(e,t)}},pk=(t,e)=>hk.useSyncExternalStore(YM,t,e),XM=()=>location.search,JM=({ssrSearch:t=""}={})=>pk(XM,()=>t),Jw=()=>location.pathname,ZM=({ssrPath:t}={})=>pk(Jw,t?()=>t:Jw),eL=(t,{replace:e=!1,state:n=null}={})=>history[e?Jv:Xv](n,"",t),tL=(t={})=>[ZM(t),eL],Zw=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[Zw]>"u"){for(const t of[Xv,Jv]){const e=history[t];history[t]=function(){const n=e.apply(this,arguments),r=new Event(t);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,Zw,{value:!0})}const nL=(t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",mk=(t="")=>t==="/"?"":t,rL=(t,e)=>t[0]==="~"?t.slice(1):mk(e)+t,sL=(t="",e)=>nL(eb(mk(t)),eb(e)),eb=t=>{try{return decodeURI(t)}catch{return t}},gk={hook:tL,searchHook:JM,parser:jM,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:t=>t},yk=w.createContext(gk),Na=()=>w.useContext(yk),vk={},xk=w.createContext(vk),iL=()=>w.useContext(xk),Gc=t=>{const[e,n]=t.hook(t);return[sL(t.base,e),Yv((r,s)=>n(rL(r,t.base),s))]},or=()=>Gc(Na()),_k=(t,e,n,r)=>{const{pattern:s,keys:i}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",r),o=s.exec(n)||[],[a,...l]=o;return a!==void 0?[!0,(()=>{const c=i!==!1?Object.fromEntries(i.map((f,p)=>[f,l[p]])):o.groups;let u={...l};return c&&Object.assign(u,c),u})(),...r?[a]:[]]:[!1,null]},oL=({children:t,...e})=>{const n=Na(),r=e.hook?gk:n;let s=r;const[i,o]=e.ssrPath?.split("?")??[];o&&(e.ssrSearch=o,e.ssrPath=i),e.hrefs=e.hrefs??e.hook?.hrefs;let a=w.useRef({}),l=a.current,c=l;for(let u in r){const f=u==="base"?r[u]+(e[u]||""):e[u]||r[u];l===c&&f!==c[u]&&(a.current=c={...c}),c[u]=f,f!==r[u]&&(s=c)}return w.createElement(yk.Provider,{value:s,children:t})},tb=({children:t,component:e},n)=>e?w.createElement(e,{params:n}):typeof t=="function"?t(n):t,aL=t=>{let e=w.useRef(vk);const n=e.current;return e.current=Object.keys(t).length!==Object.keys(n).length||Object.entries(t).some(([r,s])=>s!==n[r])?t:n},ft=({path:t,nest:e,match:n,...r})=>{const s=Na(),[i]=Gc(s),[o,a,l]=n??_k(s.parser,t,i,e),c=aL({...iL(),...a});if(!o)return null;const u=l?w.createElement(oL,{base:l},tb(r,c)):tb(r,c);return w.createElement(xk.Provider,{value:c,children:u})},bn=w.forwardRef((t,e)=>{const n=Na(),[r,s]=Gc(n),{to:i="",href:o=i,onClick:a,asChild:l,children:c,className:u,replace:f,state:p,...m}=t,y=Yv(x=>{x.ctrlKey||x.metaKey||x.altKey||x.shiftKey||x.button!==0||(a?.(x),x.defaultPrevented||(x.preventDefault(),s(o,t)))}),g=n.hrefs(o[0]==="~"?o.slice(1):n.base+o,n);return l&&w.isValidElement(c)?w.cloneElement(c,{onClick:y,href:g}):w.createElement("a",{...m,onClick:y,href:g,className:u?.call?u(r===o):u,children:c,ref:e})}),wk=t=>Array.isArray(t)?t.flatMap(e=>wk(e&&e.type===w.Fragment?e.props.children:e)):[t],lL=({children:t,location:e})=>{const n=Na(),[r]=Gc(n);for(const s of wk(t)){let i=0;if(w.isValidElement(s)&&(i=_k(n.parser,s.props.path,e||r,s.props.nest))[0])return w.cloneElement(s,{match:i})}return null},Qi=t=>{const{to:e,href:n=e}=t,r=Na(),[,s]=Gc(r),i=Yv(()=>s(e||n,t)),{ssrContext:o}=r;return fk(()=>{i()},[]),o&&(o.redirectTo=e),null},cL=()=>{};var nb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bk=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},uL=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Ek={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,u=i>>2,f=(i&3)<<4|a>>4;let p=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(p=64)),r.push(n[u],n[f],n[p],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(bk(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):uL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||f==null)throw new dL;const p=i<<2|a>>4;if(r.push(p),c!==64){const m=a<<4&240|c>>2;if(r.push(m),f!==64){const y=c<<6&192|f;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class dL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const hL=function(t){const e=bk(t);return Ek.encodeByteArray(e,!0)},kh=function(t){return hL(t).replace(/\./g,"")},Sk=function(t){try{return Ek.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pL=()=>fL().__FIREBASE_DEFAULTS__,mL=()=>{if(typeof process>"u"||typeof nb>"u")return;const t=nb.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},gL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Sk(t[1]);return e&&JSON.parse(e)},Cf=()=>{try{return cL()||pL()||mL()||gL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Tk=t=>{var e,n;return(n=(e=Cf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Ik=t=>{const e=Tk(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Ck=()=>{var t;return(t=Cf())===null||t===void 0?void 0:t.config},kk=t=>{var e;return(e=Cf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vL(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[kh(JSON.stringify(n)),kh(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xL(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qt())}function _L(){var t;const e=(t=Cf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function wL(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function bL(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function EL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function SL(){const t=Qt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function TL(){return!_L()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function IL(){try{return typeof indexedDB=="object"}catch{return!1}}function CL(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kL="FirebaseError";class Dr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=kL,Object.setPrototypeOf(this,Dr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qc.prototype.create)}}class Qc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?AL(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Dr(s,a,r)}}function AL(t,e){return t.replace(RL,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const RL=/\{\$([^}]+)}/g;function PL(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Yi(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(rb(i)&&rb(o)){if(!Yi(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function rb(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Al(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Rl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function NL(t,e){const n=new DL(t,e);return n.subscribe.bind(n)}class DL{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");OL(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=am),s.error===void 0&&(s.error=am),s.complete===void 0&&(s.complete=am);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function OL(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function am(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nt(t){return t&&t._delegate?t._delegate:t}class ei{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ki="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jL=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new yL;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e?.identifier),s=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(LL(e))try{this.getOrInitializeService({instanceIdentifier:ki})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ki){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ki){return this.instances.has(e)}getOptions(e=ki){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ML(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ki){return this.component?this.component.multipleInstances?e:ki:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function ML(t){return t===ki?void 0:t}function LL(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new jL(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var we;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(we||(we={}));const VL={debug:we.DEBUG,verbose:we.VERBOSE,info:we.INFO,warn:we.WARN,error:we.ERROR,silent:we.SILENT},UL=we.INFO,BL={[we.DEBUG]:"log",[we.VERBOSE]:"log",[we.INFO]:"info",[we.WARN]:"warn",[we.ERROR]:"error"},zL=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=BL[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Zv{constructor(e){this.name=e,this._logLevel=UL,this._logHandler=zL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in we))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?VL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,we.DEBUG,...e),this._logHandler(this,we.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,we.VERBOSE,...e),this._logHandler(this,we.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,we.INFO,...e),this._logHandler(this,we.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,we.WARN,...e),this._logHandler(this,we.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,we.ERROR,...e),this._logHandler(this,we.ERROR,...e)}}const $L=(t,e)=>e.some(n=>t instanceof n);let sb,ib;function qL(){return sb||(sb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function HL(){return ib||(ib=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ak=new WeakMap,Wg=new WeakMap,Rk=new WeakMap,lm=new WeakMap,e0=new WeakMap;function WL(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Ws(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Ak.set(n,t)}).catch(()=>{}),e0.set(e,t),e}function KL(t){if(Wg.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Wg.set(t,e)}let Kg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Wg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Rk.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ws(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function GL(t){Kg=t(Kg)}function QL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(cm(this),e,...n);return Rk.set(r,e.sort?e.sort():[e]),Ws(r)}:HL().includes(t)?function(...e){return t.apply(cm(this),e),Ws(Ak.get(this))}:function(...e){return Ws(t.apply(cm(this),e))}}function YL(t){return typeof t=="function"?QL(t):(t instanceof IDBTransaction&&KL(t),$L(t,qL())?new Proxy(t,Kg):t)}function Ws(t){if(t instanceof IDBRequest)return WL(t);if(lm.has(t))return lm.get(t);const e=YL(t);return e!==t&&(lm.set(t,e),e0.set(e,t)),e}const cm=t=>e0.get(t);function XL(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Ws(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Ws(o.result),l.oldVersion,l.newVersion,Ws(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const JL=["get","getKey","getAll","getAllKeys","count"],ZL=["put","add","delete","clear"],um=new Map;function ob(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(um.get(e))return um.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=ZL.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||JL.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return um.set(e,i),i}GL(t=>({...t,get:(e,n,r)=>ob(e,n)||t.get(e,n,r),has:(e,n)=>!!ob(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eF{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(tF(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function tF(t){const e=t.getComponent();return e?.type==="VERSION"}const Gg="@firebase/app",ab="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs=new Zv("@firebase/app"),nF="@firebase/app-compat",rF="@firebase/analytics-compat",sF="@firebase/analytics",iF="@firebase/app-check-compat",oF="@firebase/app-check",aF="@firebase/auth",lF="@firebase/auth-compat",cF="@firebase/database",uF="@firebase/data-connect",dF="@firebase/database-compat",hF="@firebase/functions",fF="@firebase/functions-compat",pF="@firebase/installations",mF="@firebase/installations-compat",gF="@firebase/messaging",yF="@firebase/messaging-compat",vF="@firebase/performance",xF="@firebase/performance-compat",_F="@firebase/remote-config",wF="@firebase/remote-config-compat",bF="@firebase/storage",EF="@firebase/storage-compat",SF="@firebase/firestore",TF="@firebase/vertexai",IF="@firebase/firestore-compat",CF="firebase",kF="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qg="[DEFAULT]",AF={[Gg]:"fire-core",[nF]:"fire-core-compat",[sF]:"fire-analytics",[rF]:"fire-analytics-compat",[oF]:"fire-app-check",[iF]:"fire-app-check-compat",[aF]:"fire-auth",[lF]:"fire-auth-compat",[cF]:"fire-rtdb",[uF]:"fire-data-connect",[dF]:"fire-rtdb-compat",[hF]:"fire-fn",[fF]:"fire-fn-compat",[pF]:"fire-iid",[mF]:"fire-iid-compat",[gF]:"fire-fcm",[yF]:"fire-fcm-compat",[vF]:"fire-perf",[xF]:"fire-perf-compat",[_F]:"fire-rc",[wF]:"fire-rc-compat",[bF]:"fire-gcs",[EF]:"fire-gcs-compat",[SF]:"fire-fst",[IF]:"fire-fst-compat",[TF]:"fire-vertex","fire-js":"fire-js",[CF]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _c=new Map,RF=new Map,Yg=new Map;function lb(t,e){try{t.container.addComponent(e)}catch(n){rs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Xi(t){const e=t.name;if(Yg.has(e))return rs.debug(`There were multiple attempts to register component ${e}.`),!1;Yg.set(e,t);for(const n of _c.values())lb(n,t);for(const n of RF.values())lb(n,t);return!0}function kf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function _n(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PF={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ks=new Qc("app","Firebase",PF);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NF{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ei("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ks.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Da=kF;function t0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Qg,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Ks.create("bad-app-name",{appName:String(s)});if(n||(n=Ck()),!n)throw Ks.create("no-options");const i=_c.get(s);if(i){if(Yi(n,i.options)&&Yi(r,i.config))return i;throw Ks.create("duplicate-app",{appName:s})}const o=new FL(s);for(const l of Yg.values())o.addComponent(l);const a=new NF(n,r,o);return _c.set(s,a),a}function Af(t=Qg){const e=_c.get(t);if(!e&&t===Qg&&Ck())return t0();if(!e)throw Ks.create("no-app",{appName:t});return e}function Xg(){return Array.from(_c.values())}function Er(t,e,n){var r;let s=(r=AF[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),rs.warn(a.join(" "));return}Xi(new ei(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DF="firebase-heartbeat-database",OF=1,wc="firebase-heartbeat-store";let dm=null;function Pk(){return dm||(dm=XL(DF,OF,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(wc)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ks.create("idb-open",{originalErrorMessage:t.message})})),dm}async function jF(t){try{const n=(await Pk()).transaction(wc),r=await n.objectStore(wc).get(Nk(t));return await n.done,r}catch(e){if(e instanceof Dr)rs.warn(e.message);else{const n=Ks.create("idb-get",{originalErrorMessage:e?.message});rs.warn(n.message)}}}async function cb(t,e){try{const r=(await Pk()).transaction(wc,"readwrite");await r.objectStore(wc).put(e,Nk(t)),await r.done}catch(n){if(n instanceof Dr)rs.warn(n.message);else{const r=Ks.create("idb-set",{originalErrorMessage:n?.message});rs.warn(r.message)}}}function Nk(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MF=1024,LF=30;class FF{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new UF(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=ub();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>LF){const o=BF(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){rs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ub(),{heartbeatsToSend:r,unsentEntries:s}=VF(this._heartbeatsCache.heartbeats),i=kh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return rs.warn(n),""}}}function ub(){return new Date().toISOString().substring(0,10)}function VF(t,e=MF){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),db(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),db(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class UF{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return IL()?CL().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await jF(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return cb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return cb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function db(t){return kh(JSON.stringify({version:2,heartbeats:t})).length}function BF(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zF(t){Xi(new ei("platform-logger",e=>new eF(e),"PRIVATE")),Xi(new ei("heartbeat",e=>new FF(e),"PRIVATE")),Er(Gg,ab,t),Er(Gg,ab,"esm2017"),Er("fire-js","")}zF("");var hb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Gs,Dk;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,E){function C(){}C.prototype=E.prototype,S.D=E.prototype,S.prototype=new C,S.prototype.constructor=S,S.C=function(A,P,j){for(var O=Array(arguments.length-2),F=2;F<arguments.length;F++)O[F-2]=arguments[F];return E.prototype[P].apply(A,O)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,E,C){C||(C=0);var A=Array(16);if(typeof E=="string")for(var P=0;16>P;++P)A[P]=E.charCodeAt(C++)|E.charCodeAt(C++)<<8|E.charCodeAt(C++)<<16|E.charCodeAt(C++)<<24;else for(P=0;16>P;++P)A[P]=E[C++]|E[C++]<<8|E[C++]<<16|E[C++]<<24;E=S.g[0],C=S.g[1],P=S.g[2];var j=S.g[3],O=E+(j^C&(P^j))+A[0]+3614090360&4294967295;E=C+(O<<7&4294967295|O>>>25),O=j+(P^E&(C^P))+A[1]+3905402710&4294967295,j=E+(O<<12&4294967295|O>>>20),O=P+(C^j&(E^C))+A[2]+606105819&4294967295,P=j+(O<<17&4294967295|O>>>15),O=C+(E^P&(j^E))+A[3]+3250441966&4294967295,C=P+(O<<22&4294967295|O>>>10),O=E+(j^C&(P^j))+A[4]+4118548399&4294967295,E=C+(O<<7&4294967295|O>>>25),O=j+(P^E&(C^P))+A[5]+1200080426&4294967295,j=E+(O<<12&4294967295|O>>>20),O=P+(C^j&(E^C))+A[6]+2821735955&4294967295,P=j+(O<<17&4294967295|O>>>15),O=C+(E^P&(j^E))+A[7]+4249261313&4294967295,C=P+(O<<22&4294967295|O>>>10),O=E+(j^C&(P^j))+A[8]+1770035416&4294967295,E=C+(O<<7&4294967295|O>>>25),O=j+(P^E&(C^P))+A[9]+2336552879&4294967295,j=E+(O<<12&4294967295|O>>>20),O=P+(C^j&(E^C))+A[10]+4294925233&4294967295,P=j+(O<<17&4294967295|O>>>15),O=C+(E^P&(j^E))+A[11]+2304563134&4294967295,C=P+(O<<22&4294967295|O>>>10),O=E+(j^C&(P^j))+A[12]+1804603682&4294967295,E=C+(O<<7&4294967295|O>>>25),O=j+(P^E&(C^P))+A[13]+4254626195&4294967295,j=E+(O<<12&4294967295|O>>>20),O=P+(C^j&(E^C))+A[14]+2792965006&4294967295,P=j+(O<<17&4294967295|O>>>15),O=C+(E^P&(j^E))+A[15]+1236535329&4294967295,C=P+(O<<22&4294967295|O>>>10),O=E+(P^j&(C^P))+A[1]+4129170786&4294967295,E=C+(O<<5&4294967295|O>>>27),O=j+(C^P&(E^C))+A[6]+3225465664&4294967295,j=E+(O<<9&4294967295|O>>>23),O=P+(E^C&(j^E))+A[11]+643717713&4294967295,P=j+(O<<14&4294967295|O>>>18),O=C+(j^E&(P^j))+A[0]+3921069994&4294967295,C=P+(O<<20&4294967295|O>>>12),O=E+(P^j&(C^P))+A[5]+3593408605&4294967295,E=C+(O<<5&4294967295|O>>>27),O=j+(C^P&(E^C))+A[10]+38016083&4294967295,j=E+(O<<9&4294967295|O>>>23),O=P+(E^C&(j^E))+A[15]+3634488961&4294967295,P=j+(O<<14&4294967295|O>>>18),O=C+(j^E&(P^j))+A[4]+3889429448&4294967295,C=P+(O<<20&4294967295|O>>>12),O=E+(P^j&(C^P))+A[9]+568446438&4294967295,E=C+(O<<5&4294967295|O>>>27),O=j+(C^P&(E^C))+A[14]+3275163606&4294967295,j=E+(O<<9&4294967295|O>>>23),O=P+(E^C&(j^E))+A[3]+4107603335&4294967295,P=j+(O<<14&4294967295|O>>>18),O=C+(j^E&(P^j))+A[8]+1163531501&4294967295,C=P+(O<<20&4294967295|O>>>12),O=E+(P^j&(C^P))+A[13]+2850285829&4294967295,E=C+(O<<5&4294967295|O>>>27),O=j+(C^P&(E^C))+A[2]+4243563512&4294967295,j=E+(O<<9&4294967295|O>>>23),O=P+(E^C&(j^E))+A[7]+1735328473&4294967295,P=j+(O<<14&4294967295|O>>>18),O=C+(j^E&(P^j))+A[12]+2368359562&4294967295,C=P+(O<<20&4294967295|O>>>12),O=E+(C^P^j)+A[5]+4294588738&4294967295,E=C+(O<<4&4294967295|O>>>28),O=j+(E^C^P)+A[8]+2272392833&4294967295,j=E+(O<<11&4294967295|O>>>21),O=P+(j^E^C)+A[11]+1839030562&4294967295,P=j+(O<<16&4294967295|O>>>16),O=C+(P^j^E)+A[14]+4259657740&4294967295,C=P+(O<<23&4294967295|O>>>9),O=E+(C^P^j)+A[1]+2763975236&4294967295,E=C+(O<<4&4294967295|O>>>28),O=j+(E^C^P)+A[4]+1272893353&4294967295,j=E+(O<<11&4294967295|O>>>21),O=P+(j^E^C)+A[7]+4139469664&4294967295,P=j+(O<<16&4294967295|O>>>16),O=C+(P^j^E)+A[10]+3200236656&4294967295,C=P+(O<<23&4294967295|O>>>9),O=E+(C^P^j)+A[13]+681279174&4294967295,E=C+(O<<4&4294967295|O>>>28),O=j+(E^C^P)+A[0]+3936430074&4294967295,j=E+(O<<11&4294967295|O>>>21),O=P+(j^E^C)+A[3]+3572445317&4294967295,P=j+(O<<16&4294967295|O>>>16),O=C+(P^j^E)+A[6]+76029189&4294967295,C=P+(O<<23&4294967295|O>>>9),O=E+(C^P^j)+A[9]+3654602809&4294967295,E=C+(O<<4&4294967295|O>>>28),O=j+(E^C^P)+A[12]+3873151461&4294967295,j=E+(O<<11&4294967295|O>>>21),O=P+(j^E^C)+A[15]+530742520&4294967295,P=j+(O<<16&4294967295|O>>>16),O=C+(P^j^E)+A[2]+3299628645&4294967295,C=P+(O<<23&4294967295|O>>>9),O=E+(P^(C|~j))+A[0]+4096336452&4294967295,E=C+(O<<6&4294967295|O>>>26),O=j+(C^(E|~P))+A[7]+1126891415&4294967295,j=E+(O<<10&4294967295|O>>>22),O=P+(E^(j|~C))+A[14]+2878612391&4294967295,P=j+(O<<15&4294967295|O>>>17),O=C+(j^(P|~E))+A[5]+4237533241&4294967295,C=P+(O<<21&4294967295|O>>>11),O=E+(P^(C|~j))+A[12]+1700485571&4294967295,E=C+(O<<6&4294967295|O>>>26),O=j+(C^(E|~P))+A[3]+2399980690&4294967295,j=E+(O<<10&4294967295|O>>>22),O=P+(E^(j|~C))+A[10]+4293915773&4294967295,P=j+(O<<15&4294967295|O>>>17),O=C+(j^(P|~E))+A[1]+2240044497&4294967295,C=P+(O<<21&4294967295|O>>>11),O=E+(P^(C|~j))+A[8]+1873313359&4294967295,E=C+(O<<6&4294967295|O>>>26),O=j+(C^(E|~P))+A[15]+4264355552&4294967295,j=E+(O<<10&4294967295|O>>>22),O=P+(E^(j|~C))+A[6]+2734768916&4294967295,P=j+(O<<15&4294967295|O>>>17),O=C+(j^(P|~E))+A[13]+1309151649&4294967295,C=P+(O<<21&4294967295|O>>>11),O=E+(P^(C|~j))+A[4]+4149444226&4294967295,E=C+(O<<6&4294967295|O>>>26),O=j+(C^(E|~P))+A[11]+3174756917&4294967295,j=E+(O<<10&4294967295|O>>>22),O=P+(E^(j|~C))+A[2]+718787259&4294967295,P=j+(O<<15&4294967295|O>>>17),O=C+(j^(P|~E))+A[9]+3951481745&4294967295,S.g[0]=S.g[0]+E&4294967295,S.g[1]=S.g[1]+(P+(O<<21&4294967295|O>>>11))&4294967295,S.g[2]=S.g[2]+P&4294967295,S.g[3]=S.g[3]+j&4294967295}r.prototype.u=function(S,E){E===void 0&&(E=S.length);for(var C=E-this.blockSize,A=this.B,P=this.h,j=0;j<E;){if(P==0)for(;j<=C;)s(this,S,j),j+=this.blockSize;if(typeof S=="string"){for(;j<E;)if(A[P++]=S.charCodeAt(j++),P==this.blockSize){s(this,A),P=0;break}}else for(;j<E;)if(A[P++]=S[j++],P==this.blockSize){s(this,A),P=0;break}}this.h=P,this.o+=E},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var E=1;E<S.length-8;++E)S[E]=0;var C=8*this.o;for(E=S.length-8;E<S.length;++E)S[E]=C&255,C/=256;for(this.u(S),S=Array(16),E=C=0;4>E;++E)for(var A=0;32>A;A+=8)S[C++]=this.g[E]>>>A&255;return S};function i(S,E){var C=a;return Object.prototype.hasOwnProperty.call(C,S)?C[S]:C[S]=E(S)}function o(S,E){this.h=E;for(var C=[],A=!0,P=S.length-1;0<=P;P--){var j=S[P]|0;A&&j==E||(C[P]=j,A=!1)}this.g=C}var a={};function l(S){return-128<=S&&128>S?i(S,function(E){return new o([E|0],0>E?-1:0)}):new o([S|0],0>S?-1:0)}function c(S){if(isNaN(S)||!isFinite(S))return f;if(0>S)return x(c(-S));for(var E=[],C=1,A=0;S>=C;A++)E[A]=S/C|0,C*=4294967296;return new o(E,0)}function u(S,E){if(S.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(S.charAt(0)=="-")return x(u(S.substring(1),E));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=c(Math.pow(E,8)),A=f,P=0;P<S.length;P+=8){var j=Math.min(8,S.length-P),O=parseInt(S.substring(P,P+j),E);8>j?(j=c(Math.pow(E,j)),A=A.j(j).add(c(O))):(A=A.j(C),A=A.add(c(O)))}return A}var f=l(0),p=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(g(this))return-x(this).m();for(var S=0,E=1,C=0;C<this.g.length;C++){var A=this.i(C);S+=(0<=A?A:4294967296+A)*E,E*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(y(this))return"0";if(g(this))return"-"+x(this).toString(S);for(var E=c(Math.pow(S,6)),C=this,A="";;){var P=k(C,E).g;C=b(C,P.j(E));var j=((0<C.g.length?C.g[0]:C.h)>>>0).toString(S);if(C=P,y(C))return j+A;for(;6>j.length;)j="0"+j;A=j+A}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function y(S){if(S.h!=0)return!1;for(var E=0;E<S.g.length;E++)if(S.g[E]!=0)return!1;return!0}function g(S){return S.h==-1}t.l=function(S){return S=b(this,S),g(S)?-1:y(S)?0:1};function x(S){for(var E=S.g.length,C=[],A=0;A<E;A++)C[A]=~S.g[A];return new o(C,~S.h).add(p)}t.abs=function(){return g(this)?x(this):this},t.add=function(S){for(var E=Math.max(this.g.length,S.g.length),C=[],A=0,P=0;P<=E;P++){var j=A+(this.i(P)&65535)+(S.i(P)&65535),O=(j>>>16)+(this.i(P)>>>16)+(S.i(P)>>>16);A=O>>>16,j&=65535,O&=65535,C[P]=O<<16|j}return new o(C,C[C.length-1]&-2147483648?-1:0)};function b(S,E){return S.add(x(E))}t.j=function(S){if(y(this)||y(S))return f;if(g(this))return g(S)?x(this).j(x(S)):x(x(this).j(S));if(g(S))return x(this.j(x(S)));if(0>this.l(m)&&0>S.l(m))return c(this.m()*S.m());for(var E=this.g.length+S.g.length,C=[],A=0;A<2*E;A++)C[A]=0;for(A=0;A<this.g.length;A++)for(var P=0;P<S.g.length;P++){var j=this.i(A)>>>16,O=this.i(A)&65535,F=S.i(P)>>>16,B=S.i(P)&65535;C[2*A+2*P]+=O*B,_(C,2*A+2*P),C[2*A+2*P+1]+=j*B,_(C,2*A+2*P+1),C[2*A+2*P+1]+=O*F,_(C,2*A+2*P+1),C[2*A+2*P+2]+=j*F,_(C,2*A+2*P+2)}for(A=0;A<E;A++)C[A]=C[2*A+1]<<16|C[2*A];for(A=E;A<2*E;A++)C[A]=0;return new o(C,0)};function _(S,E){for(;(S[E]&65535)!=S[E];)S[E+1]+=S[E]>>>16,S[E]&=65535,E++}function T(S,E){this.g=S,this.h=E}function k(S,E){if(y(E))throw Error("division by zero");if(y(S))return new T(f,f);if(g(S))return E=k(x(S),E),new T(x(E.g),x(E.h));if(g(E))return E=k(S,x(E)),new T(x(E.g),E.h);if(30<S.g.length){if(g(S)||g(E))throw Error("slowDivide_ only works with positive integers.");for(var C=p,A=E;0>=A.l(S);)C=N(C),A=N(A);var P=R(C,1),j=R(A,1);for(A=R(A,2),C=R(C,2);!y(A);){var O=j.add(A);0>=O.l(S)&&(P=P.add(C),j=O),A=R(A,1),C=R(C,1)}return E=b(S,P.j(E)),new T(P,E)}for(P=f;0<=S.l(E);){for(C=Math.max(1,Math.floor(S.m()/E.m())),A=Math.ceil(Math.log(C)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),j=c(C),O=j.j(E);g(O)||0<O.l(S);)C-=A,j=c(C),O=j.j(E);y(j)&&(j=p),P=P.add(j),S=b(S,O)}return new T(P,S)}t.A=function(S){return k(this,S).h},t.and=function(S){for(var E=Math.max(this.g.length,S.g.length),C=[],A=0;A<E;A++)C[A]=this.i(A)&S.i(A);return new o(C,this.h&S.h)},t.or=function(S){for(var E=Math.max(this.g.length,S.g.length),C=[],A=0;A<E;A++)C[A]=this.i(A)|S.i(A);return new o(C,this.h|S.h)},t.xor=function(S){for(var E=Math.max(this.g.length,S.g.length),C=[],A=0;A<E;A++)C[A]=this.i(A)^S.i(A);return new o(C,this.h^S.h)};function N(S){for(var E=S.g.length+1,C=[],A=0;A<E;A++)C[A]=S.i(A)<<1|S.i(A-1)>>>31;return new o(C,S.h)}function R(S,E){var C=E>>5;E%=32;for(var A=S.g.length-C,P=[],j=0;j<A;j++)P[j]=0<E?S.i(j+C)>>>E|S.i(j+C+1)<<32-E:S.i(j+C);return new o(P,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Dk=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,Gs=o}).apply(typeof hb<"u"?hb:typeof self<"u"?self:typeof window<"u"?window:{});var Qu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ok,Pl,jk,Fd,Jg,Mk,Lk,Fk;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,v,I){return h==Array.prototype||h==Object.prototype||(h[v]=I.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Qu=="object"&&Qu];for(var v=0;v<h.length;++v){var I=h[v];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var r=n(this);function s(h,v){if(v)e:{var I=r;h=h.split(".");for(var D=0;D<h.length-1;D++){var L=h[D];if(!(L in I))break e;I=I[L]}h=h[h.length-1],D=I[h],v=v(D),v!=D&&v!=null&&e(I,h,{configurable:!0,writable:!0,value:v})}}function i(h,v){h instanceof String&&(h+="");var I=0,D=!1,L={next:function(){if(!D&&I<h.length){var V=I++;return{value:v(V,h[V]),done:!1}}return D=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}s("Array.prototype.values",function(h){return h||function(){return i(this,function(v,I){return I})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(h){var v=typeof h;return v=v!="object"?v:h?Array.isArray(h)?"array":v:"null",v=="array"||v=="object"&&typeof h.length=="number"}function c(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function u(h,v,I){return h.call.apply(h.bind,arguments)}function f(h,v,I){if(!h)throw Error();if(2<arguments.length){var D=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,D),h.apply(v,L)}}return function(){return h.apply(v,arguments)}}function p(h,v,I){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:f,p.apply(null,arguments)}function m(h,v){var I=Array.prototype.slice.call(arguments,1);return function(){var D=I.slice();return D.push.apply(D,arguments),h.apply(this,D)}}function y(h,v){function I(){}I.prototype=v.prototype,h.aa=v.prototype,h.prototype=new I,h.prototype.constructor=h,h.Qb=function(D,L,V){for(var Y=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)Y[Ve-2]=arguments[Ve];return v.prototype[L].apply(D,Y)}}function g(h){const v=h.length;if(0<v){const I=Array(v);for(let D=0;D<v;D++)I[D]=h[D];return I}return[]}function x(h,v){for(let I=1;I<arguments.length;I++){const D=arguments[I];if(l(D)){const L=h.length||0,V=D.length||0;h.length=L+V;for(let Y=0;Y<V;Y++)h[L+Y]=D[Y]}else h.push(D)}}class b{constructor(v,I){this.i=v,this.j=I,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function _(h){return/^[\s\xa0]*$/.test(h)}function T(){var h=a.navigator;return h&&(h=h.userAgent)?h:""}function k(h){return k[" "](h),h}k[" "]=function(){};var N=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function R(h,v,I){for(const D in h)v.call(I,h[D],D,h)}function S(h,v){for(const I in h)v.call(void 0,h[I],I,h)}function E(h){const v={};for(const I in h)v[I]=h[I];return v}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(h,v){let I,D;for(let L=1;L<arguments.length;L++){D=arguments[L];for(I in D)h[I]=D[I];for(let V=0;V<C.length;V++)I=C[V],Object.prototype.hasOwnProperty.call(D,I)&&(h[I]=D[I])}}function P(h){var v=1;h=h.split(":");const I=[];for(;0<v&&h.length;)I.push(h.shift()),v--;return h.length&&I.push(h.join(":")),I}function j(h){a.setTimeout(()=>{throw h},0)}function O(){var h=H;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class F{constructor(){this.h=this.g=null}add(v,I){const D=B.get();D.set(v,I),this.h?this.h.next=D:this.g=D,this.h=D}}var B=new b(()=>new z,h=>h.reset());class z{constructor(){this.next=this.g=this.h=null}set(v,I){this.h=v,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let W,M=!1,H=new F,Q=()=>{const h=a.Promise.resolve(void 0);W=()=>{h.then(ie)}};var ie=()=>{for(var h;h=O();){try{h.h.call(h.g)}catch(I){j(I)}var v=B;v.j(h),100>v.h&&(v.h++,h.next=v.g,v.g=h)}M=!1};function re(){this.s=this.s,this.C=this.C}re.prototype.s=!1,re.prototype.ma=function(){this.s||(this.s=!0,this.N())},re.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ne(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}ne.prototype.h=function(){this.defaultPrevented=!0};var se=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const I=()=>{};a.addEventListener("test",I,v),a.removeEventListener("test",I,v)}catch{}return h}();function je(h,v){if(ne.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var I=this.type=h.type,D=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget){if(N){e:{try{k(v.nodeName);var L=!0;break e}catch{}L=!1}L||(v=null)}}else I=="mouseover"?v=h.fromElement:I=="mouseout"&&(v=h.toElement);this.relatedTarget=v,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:Pe[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&je.aa.h.call(this)}}y(je,ne);var Pe={2:"touch",3:"pen",4:"mouse"};je.prototype.h=function(){je.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var X="closure_listenable_"+(1e6*Math.random()|0),Me=0;function We(h,v,I,D,L){this.listener=h,this.proxy=null,this.src=v,this.type=I,this.capture=!!D,this.ha=L,this.key=++Me,this.da=this.fa=!1}function xe(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Se(h){this.src=h,this.g={},this.h=0}Se.prototype.add=function(h,v,I,D,L){var V=h.toString();h=this.g[V],h||(h=this.g[V]=[],this.h++);var Y=_t(h,v,D,L);return-1<Y?(v=h[Y],I||(v.fa=!1)):(v=new We(v,this.src,V,!!D,L),v.fa=I,h.push(v)),v};function Re(h,v){var I=v.type;if(I in h.g){var D=h.g[I],L=Array.prototype.indexOf.call(D,v,void 0),V;(V=0<=L)&&Array.prototype.splice.call(D,L,1),V&&(xe(v),h.g[I].length==0&&(delete h.g[I],h.h--))}}function _t(h,v,I,D){for(var L=0;L<h.length;++L){var V=h[L];if(!V.da&&V.listener==v&&V.capture==!!I&&V.ha==D)return L}return-1}var pn="closure_lm_"+(1e6*Math.random()|0),jr={};function $(h,v,I,D,L){if(Array.isArray(v)){for(var V=0;V<v.length;V++)$(h,v[V],I,D,L);return null}return I=Wx(I),h&&h[X]?h.K(v,I,c(D)?!!D.capture:!1,L):oe(h,v,I,!1,D,L)}function oe(h,v,I,D,L,V){if(!v)throw Error("Invalid event type");var Y=c(L)?!!L.capture:!!L,Ve=gp(h);if(Ve||(h[pn]=Ve=new Se(h)),I=Ve.add(v,I,D,Y,V),I.proxy)return I;if(D=ke(),I.proxy=D,D.src=h,D.listener=I,h.addEventListener)se||(L=Y),L===void 0&&(L=!1),h.addEventListener(v.toString(),D,L);else if(h.attachEvent)h.attachEvent(Ya(v.toString()),D);else if(h.addListener&&h.removeListener)h.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return I}function ke(){function h(I){return v.call(h.src,h.listener,I)}const v=jO;return h}function at(h,v,I,D,L){if(Array.isArray(v))for(var V=0;V<v.length;V++)at(h,v[V],I,D,L);else D=c(D)?!!D.capture:!!D,I=Wx(I),h&&h[X]?(h=h.i,v=String(v).toString(),v in h.g&&(V=h.g[v],I=_t(V,I,D,L),-1<I&&(xe(V[I]),Array.prototype.splice.call(V,I,1),V.length==0&&(delete h.g[v],h.h--)))):h&&(h=gp(h))&&(v=h.g[v.toString()],h=-1,v&&(h=_t(v,I,D,L)),(I=-1<h?v[h]:null)&&mn(I))}function mn(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[X])Re(v.i,h);else{var I=h.type,D=h.proxy;v.removeEventListener?v.removeEventListener(I,D,h.capture):v.detachEvent?v.detachEvent(Ya(I),D):v.addListener&&v.removeListener&&v.removeListener(D),(I=gp(v))?(Re(I,h),I.h==0&&(I.src=null,v[pn]=null)):xe(h)}}}function Ya(h){return h in jr?jr[h]:jr[h]="on"+h}function jO(h,v){if(h.da)h=!0;else{v=new je(v,this);var I=h.listener,D=h.ha||h.src;h.fa&&mn(h),h=I.call(D,v)}return h}function gp(h){return h=h[pn],h instanceof Se?h:null}var yp="__closure_events_fn_"+(1e9*Math.random()>>>0);function Wx(h){return typeof h=="function"?h:(h[yp]||(h[yp]=function(v){return h.handleEvent(v)}),h[yp])}function Mt(){re.call(this),this.i=new Se(this),this.M=this,this.F=null}y(Mt,re),Mt.prototype[X]=!0,Mt.prototype.removeEventListener=function(h,v,I,D){at(this,h,v,I,D)};function Xt(h,v){var I,D=h.F;if(D)for(I=[];D;D=D.F)I.push(D);if(h=h.M,D=v.type||v,typeof v=="string")v=new ne(v,h);else if(v instanceof ne)v.target=v.target||h;else{var L=v;v=new ne(D,h),A(v,L)}if(L=!0,I)for(var V=I.length-1;0<=V;V--){var Y=v.g=I[V];L=gu(Y,D,!0,v)&&L}if(Y=v.g=h,L=gu(Y,D,!0,v)&&L,L=gu(Y,D,!1,v)&&L,I)for(V=0;V<I.length;V++)Y=v.g=I[V],L=gu(Y,D,!1,v)&&L}Mt.prototype.N=function(){if(Mt.aa.N.call(this),this.i){var h=this.i,v;for(v in h.g){for(var I=h.g[v],D=0;D<I.length;D++)xe(I[D]);delete h.g[v],h.h--}}this.F=null},Mt.prototype.K=function(h,v,I,D){return this.i.add(String(h),v,!1,I,D)},Mt.prototype.L=function(h,v,I,D){return this.i.add(String(h),v,!0,I,D)};function gu(h,v,I,D){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();for(var L=!0,V=0;V<v.length;++V){var Y=v[V];if(Y&&!Y.da&&Y.capture==I){var Ve=Y.listener,Tt=Y.ha||Y.src;Y.fa&&Re(h.i,Y),L=Ve.call(Tt,D)!==!1&&L}}return L&&!D.defaultPrevented}function Kx(h,v,I){if(typeof h=="function")I&&(h=p(h,I));else if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:a.setTimeout(h,v||0)}function Gx(h){h.g=Kx(()=>{h.g=null,h.i&&(h.i=!1,Gx(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class MO extends re{constructor(v,I){super(),this.m=v,this.l=I,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Gx(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xa(h){re.call(this),this.h=h,this.g={}}y(Xa,re);var Qx=[];function Yx(h){R(h.g,function(v,I){this.g.hasOwnProperty(I)&&mn(v)},h),h.g={}}Xa.prototype.N=function(){Xa.aa.N.call(this),Yx(this)},Xa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var vp=a.JSON.stringify,LO=a.JSON.parse,FO=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function xp(){}xp.prototype.h=null;function Xx(h){return h.h||(h.h=h.i())}function Jx(){}var Ja={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function _p(){ne.call(this,"d")}y(_p,ne);function wp(){ne.call(this,"c")}y(wp,ne);var vi={},Zx=null;function yu(){return Zx=Zx||new Mt}vi.La="serverreachability";function e_(h){ne.call(this,vi.La,h)}y(e_,ne);function Za(h){const v=yu();Xt(v,new e_(v))}vi.STAT_EVENT="statevent";function t_(h,v){ne.call(this,vi.STAT_EVENT,h),this.stat=v}y(t_,ne);function Jt(h){const v=yu();Xt(v,new t_(v,h))}vi.Ma="timingevent";function n_(h,v){ne.call(this,vi.Ma,h),this.size=v}y(n_,ne);function el(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},v)}function tl(){this.g=!0}tl.prototype.xa=function(){this.g=!1};function VO(h,v,I,D,L,V){h.info(function(){if(h.g)if(V)for(var Y="",Ve=V.split("&"),Tt=0;Tt<Ve.length;Tt++){var Ae=Ve[Tt].split("=");if(1<Ae.length){var Lt=Ae[0];Ae=Ae[1];var Ft=Lt.split("_");Y=2<=Ft.length&&Ft[1]=="type"?Y+(Lt+"="+Ae+"&"):Y+(Lt+"=redacted&")}}else Y=null;else Y=V;return"XMLHTTP REQ ("+D+") [attempt "+L+"]: "+v+`
`+I+`
`+Y})}function UO(h,v,I,D,L,V,Y){h.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+L+"]: "+v+`
`+I+`
`+V+" "+Y})}function _o(h,v,I,D){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+zO(h,I)+(D?" "+D:"")})}function BO(h,v){h.info(function(){return"TIMEOUT: "+v})}tl.prototype.info=function(){};function zO(h,v){if(!h.g)return v;if(!v)return null;try{var I=JSON.parse(v);if(I){for(h=0;h<I.length;h++)if(Array.isArray(I[h])){var D=I[h];if(!(2>D.length)){var L=D[1];if(Array.isArray(L)&&!(1>L.length)){var V=L[0];if(V!="noop"&&V!="stop"&&V!="close")for(var Y=1;Y<L.length;Y++)L[Y]=""}}}}return vp(I)}catch{return v}}var vu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},r_={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},bp;function xu(){}y(xu,xp),xu.prototype.g=function(){return new XMLHttpRequest},xu.prototype.i=function(){return{}},bp=new xu;function ds(h,v,I,D){this.j=h,this.i=v,this.l=I,this.R=D||1,this.U=new Xa(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new s_}function s_(){this.i=null,this.g="",this.h=!1}var i_={},Ep={};function Sp(h,v,I){h.L=1,h.v=Eu(Mr(v)),h.m=I,h.P=!0,o_(h,null)}function o_(h,v){h.F=Date.now(),_u(h),h.A=Mr(h.v);var I=h.A,D=h.R;Array.isArray(D)||(D=[String(D)]),__(I.i,"t",D),h.C=0,I=h.j.J,h.h=new s_,h.g=F_(h.j,I?v:null,!h.m),0<h.O&&(h.M=new MO(p(h.Y,h,h.g),h.O)),v=h.U,I=h.g,D=h.ca;var L="readystatechange";Array.isArray(L)||(L&&(Qx[0]=L.toString()),L=Qx);for(var V=0;V<L.length;V++){var Y=$(I,L[V],D||v.handleEvent,!1,v.h||v);if(!Y)break;v.g[Y.key]=Y}v=h.H?E(h.H):{},h.m?(h.u||(h.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,v)):(h.u="GET",h.g.ea(h.A,h.u,null,v)),Za(),VO(h.i,h.u,h.A,h.l,h.R,h.m)}ds.prototype.ca=function(h){h=h.target;const v=this.M;v&&Lr(h)==3?v.j():this.Y(h)},ds.prototype.Y=function(h){try{if(h==this.g)e:{const Ft=Lr(this.g);var v=this.g.Ba();const Eo=this.g.Z();if(!(3>Ft)&&(Ft!=3||this.g&&(this.h.h||this.g.oa()||C_(this.g)))){this.J||Ft!=4||v==7||(v==8||0>=Eo?Za(3):Za(2)),Tp(this);var I=this.g.Z();this.X=I;t:if(a_(this)){var D=C_(this.g);h="";var L=D.length,V=Lr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){xi(this),nl(this);var Y="";break t}this.h.i=new a.TextDecoder}for(v=0;v<L;v++)this.h.h=!0,h+=this.h.i.decode(D[v],{stream:!(V&&v==L-1)});D.length=0,this.h.g+=h,this.C=0,Y=this.h.g}else Y=this.g.oa();if(this.o=I==200,UO(this.i,this.u,this.A,this.l,this.R,Ft,I),this.o){if(this.T&&!this.K){t:{if(this.g){var Ve,Tt=this.g;if((Ve=Tt.g?Tt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(Ve)){var Ae=Ve;break t}}Ae=null}if(I=Ae)_o(this.i,this.l,I,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ip(this,I);else{this.o=!1,this.s=3,Jt(12),xi(this),nl(this);break e}}if(this.P){I=!0;let $n;for(;!this.J&&this.C<Y.length;)if($n=$O(this,Y),$n==Ep){Ft==4&&(this.s=4,Jt(14),I=!1),_o(this.i,this.l,null,"[Incomplete Response]");break}else if($n==i_){this.s=4,Jt(15),_o(this.i,this.l,Y,"[Invalid Chunk]"),I=!1;break}else _o(this.i,this.l,$n,null),Ip(this,$n);if(a_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ft!=4||Y.length!=0||this.h.h||(this.s=1,Jt(16),I=!1),this.o=this.o&&I,!I)_o(this.i,this.l,Y,"[Invalid Chunked Response]"),xi(this),nl(this);else if(0<Y.length&&!this.W){this.W=!0;var Lt=this.j;Lt.g==this&&Lt.ba&&!Lt.M&&(Lt.j.info("Great, no buffering proxy detected. Bytes received: "+Y.length),Np(Lt),Lt.M=!0,Jt(11))}}else _o(this.i,this.l,Y,null),Ip(this,Y);Ft==4&&xi(this),this.o&&!this.J&&(Ft==4?O_(this.j,this):(this.o=!1,_u(this)))}else o2(this.g),I==400&&0<Y.indexOf("Unknown SID")?(this.s=3,Jt(12)):(this.s=0,Jt(13)),xi(this),nl(this)}}}catch{}finally{}};function a_(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function $O(h,v){var I=h.C,D=v.indexOf(`
`,I);return D==-1?Ep:(I=Number(v.substring(I,D)),isNaN(I)?i_:(D+=1,D+I>v.length?Ep:(v=v.slice(D,D+I),h.C=D+I,v)))}ds.prototype.cancel=function(){this.J=!0,xi(this)};function _u(h){h.S=Date.now()+h.I,l_(h,h.I)}function l_(h,v){if(h.B!=null)throw Error("WatchDog timer not null");h.B=el(p(h.ba,h),v)}function Tp(h){h.B&&(a.clearTimeout(h.B),h.B=null)}ds.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(BO(this.i,this.A),this.L!=2&&(Za(),Jt(17)),xi(this),this.s=2,nl(this)):l_(this,this.S-h)};function nl(h){h.j.G==0||h.J||O_(h.j,h)}function xi(h){Tp(h);var v=h.M;v&&typeof v.ma=="function"&&v.ma(),h.M=null,Yx(h.U),h.g&&(v=h.g,h.g=null,v.abort(),v.ma())}function Ip(h,v){try{var I=h.j;if(I.G!=0&&(I.g==h||Cp(I.h,h))){if(!h.K&&Cp(I.h,h)&&I.G==3){try{var D=I.Da.g.parse(v)}catch{D=null}if(Array.isArray(D)&&D.length==3){var L=D;if(L[0]==0){e:if(!I.u){if(I.g)if(I.g.F+3e3<h.F)Au(I),Cu(I);else break e;Pp(I),Jt(18)}}else I.za=L[1],0<I.za-I.T&&37500>L[2]&&I.F&&I.v==0&&!I.C&&(I.C=el(p(I.Za,I),6e3));if(1>=d_(I.h)&&I.ca){try{I.ca()}catch{}I.ca=void 0}}else wi(I,11)}else if((h.K||I.g==h)&&Au(I),!_(v))for(L=I.Da.g.parse(v),v=0;v<L.length;v++){let Ae=L[v];if(I.T=Ae[0],Ae=Ae[1],I.G==2)if(Ae[0]=="c"){I.K=Ae[1],I.ia=Ae[2];const Lt=Ae[3];Lt!=null&&(I.la=Lt,I.j.info("VER="+I.la));const Ft=Ae[4];Ft!=null&&(I.Aa=Ft,I.j.info("SVER="+I.Aa));const Eo=Ae[5];Eo!=null&&typeof Eo=="number"&&0<Eo&&(D=1.5*Eo,I.L=D,I.j.info("backChannelRequestTimeoutMs_="+D)),D=I;const $n=h.g;if($n){const Pu=$n.g?$n.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Pu){var V=D.h;V.g||Pu.indexOf("spdy")==-1&&Pu.indexOf("quic")==-1&&Pu.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(kp(V,V.h),V.h=null))}if(D.D){const Dp=$n.g?$n.g.getResponseHeader("X-HTTP-Session-Id"):null;Dp&&(D.ya=Dp,ze(D.I,D.D,Dp))}}I.G=3,I.l&&I.l.ua(),I.ba&&(I.R=Date.now()-h.F,I.j.info("Handshake RTT: "+I.R+"ms")),D=I;var Y=h;if(D.qa=L_(D,D.J?D.ia:null,D.W),Y.K){h_(D.h,Y);var Ve=Y,Tt=D.L;Tt&&(Ve.I=Tt),Ve.B&&(Tp(Ve),_u(Ve)),D.g=Y}else N_(D);0<I.i.length&&ku(I)}else Ae[0]!="stop"&&Ae[0]!="close"||wi(I,7);else I.G==3&&(Ae[0]=="stop"||Ae[0]=="close"?Ae[0]=="stop"?wi(I,7):Rp(I):Ae[0]!="noop"&&I.l&&I.l.ta(Ae),I.v=0)}}Za(4)}catch{}}var qO=class{constructor(h,v){this.g=h,this.map=v}};function c_(h){this.l=h||10,a.PerformanceNavigationTiming?(h=a.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function u_(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function d_(h){return h.h?1:h.g?h.g.size:0}function Cp(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function kp(h,v){h.g?h.g.add(v):h.h=v}function h_(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}c_.prototype.cancel=function(){if(this.i=f_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function f_(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const I of h.g.values())v=v.concat(I.D);return v}return g(h.i)}function HO(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(l(h)){for(var v=[],I=h.length,D=0;D<I;D++)v.push(h[D]);return v}v=[],I=0;for(D in h)v[I++]=h[D];return v}function WO(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(l(h)||typeof h=="string"){var v=[];h=h.length;for(var I=0;I<h;I++)v.push(I);return v}v=[],I=0;for(const D in h)v[I++]=D;return v}}}function p_(h,v){if(h.forEach&&typeof h.forEach=="function")h.forEach(v,void 0);else if(l(h)||typeof h=="string")Array.prototype.forEach.call(h,v,void 0);else for(var I=WO(h),D=HO(h),L=D.length,V=0;V<L;V++)v.call(void 0,D[V],I&&I[V],h)}var m_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function KO(h,v){if(h){h=h.split("&");for(var I=0;I<h.length;I++){var D=h[I].indexOf("="),L=null;if(0<=D){var V=h[I].substring(0,D);L=h[I].substring(D+1)}else V=h[I];v(V,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function _i(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof _i){this.h=h.h,wu(this,h.j),this.o=h.o,this.g=h.g,bu(this,h.s),this.l=h.l;var v=h.i,I=new il;I.i=v.i,v.g&&(I.g=new Map(v.g),I.h=v.h),g_(this,I),this.m=h.m}else h&&(v=String(h).match(m_))?(this.h=!1,wu(this,v[1]||"",!0),this.o=rl(v[2]||""),this.g=rl(v[3]||"",!0),bu(this,v[4]),this.l=rl(v[5]||"",!0),g_(this,v[6]||"",!0),this.m=rl(v[7]||"")):(this.h=!1,this.i=new il(null,this.h))}_i.prototype.toString=function(){var h=[],v=this.j;v&&h.push(sl(v,y_,!0),":");var I=this.g;return(I||v=="file")&&(h.push("//"),(v=this.o)&&h.push(sl(v,y_,!0),"@"),h.push(encodeURIComponent(String(I)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.s,I!=null&&h.push(":",String(I))),(I=this.l)&&(this.g&&I.charAt(0)!="/"&&h.push("/"),h.push(sl(I,I.charAt(0)=="/"?YO:QO,!0))),(I=this.i.toString())&&h.push("?",I),(I=this.m)&&h.push("#",sl(I,JO)),h.join("")};function Mr(h){return new _i(h)}function wu(h,v,I){h.j=I?rl(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function bu(h,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);h.s=v}else h.s=null}function g_(h,v,I){v instanceof il?(h.i=v,ZO(h.i,h.h)):(I||(v=sl(v,XO)),h.i=new il(v,h.h))}function ze(h,v,I){h.i.set(v,I)}function Eu(h){return ze(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function rl(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function sl(h,v,I){return typeof h=="string"?(h=encodeURI(h).replace(v,GO),I&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function GO(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var y_=/[#\/\?@]/g,QO=/[#\?:]/g,YO=/[#\?]/g,XO=/[#\?@]/g,JO=/#/g;function il(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function hs(h){h.g||(h.g=new Map,h.h=0,h.i&&KO(h.i,function(v,I){h.add(decodeURIComponent(v.replace(/\+/g," ")),I)}))}t=il.prototype,t.add=function(h,v){hs(this),this.i=null,h=wo(this,h);var I=this.g.get(h);return I||this.g.set(h,I=[]),I.push(v),this.h+=1,this};function v_(h,v){hs(h),v=wo(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function x_(h,v){return hs(h),v=wo(h,v),h.g.has(v)}t.forEach=function(h,v){hs(this),this.g.forEach(function(I,D){I.forEach(function(L){h.call(v,L,D,this)},this)},this)},t.na=function(){hs(this);const h=Array.from(this.g.values()),v=Array.from(this.g.keys()),I=[];for(let D=0;D<v.length;D++){const L=h[D];for(let V=0;V<L.length;V++)I.push(v[D])}return I},t.V=function(h){hs(this);let v=[];if(typeof h=="string")x_(this,h)&&(v=v.concat(this.g.get(wo(this,h))));else{h=Array.from(this.g.values());for(let I=0;I<h.length;I++)v=v.concat(h[I])}return v},t.set=function(h,v){return hs(this),this.i=null,h=wo(this,h),x_(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},t.get=function(h,v){return h?(h=this.V(h),0<h.length?String(h[0]):v):v};function __(h,v,I){v_(h,v),0<I.length&&(h.i=null,h.g.set(wo(h,v),g(I)),h.h+=I.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(var I=0;I<v.length;I++){var D=v[I];const V=encodeURIComponent(String(D)),Y=this.V(D);for(D=0;D<Y.length;D++){var L=V;Y[D]!==""&&(L+="="+encodeURIComponent(String(Y[D]))),h.push(L)}}return this.i=h.join("&")};function wo(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function ZO(h,v){v&&!h.j&&(hs(h),h.i=null,h.g.forEach(function(I,D){var L=D.toLowerCase();D!=L&&(v_(this,D),__(this,L,I))},h)),h.j=v}function e2(h,v){const I=new tl;if(a.Image){const D=new Image;D.onload=m(fs,I,"TestLoadImage: loaded",!0,v,D),D.onerror=m(fs,I,"TestLoadImage: error",!1,v,D),D.onabort=m(fs,I,"TestLoadImage: abort",!1,v,D),D.ontimeout=m(fs,I,"TestLoadImage: timeout",!1,v,D),a.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=h}else v(!1)}function t2(h,v){const I=new tl,D=new AbortController,L=setTimeout(()=>{D.abort(),fs(I,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:D.signal}).then(V=>{clearTimeout(L),V.ok?fs(I,"TestPingServer: ok",!0,v):fs(I,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(L),fs(I,"TestPingServer: error",!1,v)})}function fs(h,v,I,D,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),D(I)}catch{}}function n2(){this.g=new FO}function r2(h,v,I){const D=I||"";try{p_(h,function(L,V){let Y=L;c(L)&&(Y=vp(L)),v.push(D+V+"="+encodeURIComponent(Y))})}catch(L){throw v.push(D+"type="+encodeURIComponent("_badmap")),L}}function Su(h){this.l=h.Ub||null,this.j=h.eb||!1}y(Su,xp),Su.prototype.g=function(){return new Tu(this.l,this.j)},Su.prototype.i=function(h){return function(){return h}}({});function Tu(h,v){Mt.call(this),this.D=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(Tu,Mt),t=Tu.prototype,t.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=v,this.readyState=1,al(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(v.body=h),(this.D||a).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ol(this)),this.readyState=0},t.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,al(this)),this.g&&(this.readyState=3,al(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;w_(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function w_(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}t.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?ol(this):al(this),this.readyState==3&&w_(this)}},t.Ra=function(h){this.g&&(this.response=this.responseText=h,ol(this))},t.Qa=function(h){this.g&&(this.response=h,ol(this))},t.ga=function(){this.g&&ol(this)};function ol(h){h.readyState=4,h.l=null,h.j=null,h.v=null,al(h)}t.setRequestHeader=function(h,v){this.u.append(h,v)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var I=v.next();!I.done;)I=I.value,h.push(I[0]+": "+I[1]),I=v.next();return h.join(`\r
`)};function al(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Tu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function b_(h){let v="";return R(h,function(I,D){v+=D,v+=":",v+=I,v+=`\r
`}),v}function Ap(h,v,I){e:{for(D in I){var D=!1;break e}D=!0}D||(I=b_(I),typeof h=="string"?I!=null&&encodeURIComponent(String(I)):ze(h,v,I))}function Ze(h){Mt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(Ze,Mt);var s2=/^https?$/i,i2=["POST","PUT"];t=Ze.prototype,t.Ha=function(h){this.J=h},t.ea=function(h,v,I,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():bp.g(),this.v=this.o?Xx(this.o):Xx(bp),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(V){E_(this,V);return}if(h=I||"",I=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var L in D)I.set(L,D[L]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const V of D.keys())I.set(V,D.get(V));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(I.keys()).find(V=>V.toLowerCase()=="content-type"),L=a.FormData&&h instanceof a.FormData,!(0<=Array.prototype.indexOf.call(i2,v,void 0))||D||L||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,Y]of I)this.g.setRequestHeader(V,Y);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{I_(this),this.u=!0,this.g.send(h),this.u=!1}catch(V){E_(this,V)}};function E_(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.m=5,S_(h),Iu(h)}function S_(h){h.A||(h.A=!0,Xt(h,"complete"),Xt(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Xt(this,"complete"),Xt(this,"abort"),Iu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Iu(this,!0)),Ze.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?T_(this):this.bb())},t.bb=function(){T_(this)};function T_(h){if(h.h&&typeof o<"u"&&(!h.v[1]||Lr(h)!=4||h.Z()!=2)){if(h.u&&Lr(h)==4)Kx(h.Ea,0,h);else if(Xt(h,"readystatechange"),Lr(h)==4){h.h=!1;try{const Y=h.Z();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var I;if(!(I=v)){var D;if(D=Y===0){var L=String(h.D).match(m_)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),D=!s2.test(L?L.toLowerCase():"")}I=D}if(I)Xt(h,"complete"),Xt(h,"success");else{h.m=6;try{var V=2<Lr(h)?h.g.statusText:""}catch{V=""}h.l=V+" ["+h.Z()+"]",S_(h)}}finally{Iu(h)}}}}function Iu(h,v){if(h.g){I_(h);const I=h.g,D=h.v[0]?()=>{}:null;h.g=null,h.v=null,v||Xt(h,"ready");try{I.onreadystatechange=D}catch{}}}function I_(h){h.I&&(a.clearTimeout(h.I),h.I=null)}t.isActive=function(){return!!this.g};function Lr(h){return h.g?h.g.readyState:0}t.Z=function(){try{return 2<Lr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),LO(v)}};function C_(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function o2(h){const v={};h=(h.g&&2<=Lr(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<h.length;D++){if(_(h[D]))continue;var I=P(h[D]);const L=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const V=v[L]||[];v[L]=V,V.push(I)}S(v,function(D){return D.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ll(h,v,I){return I&&I.internalChannelParams&&I.internalChannelParams[h]||v}function k_(h){this.Aa=0,this.i=[],this.j=new tl,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ll("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ll("baseRetryDelayMs",5e3,h),this.cb=ll("retryDelaySeedMs",1e4,h),this.Wa=ll("forwardChannelMaxRetries",2,h),this.wa=ll("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new c_(h&&h.concurrentRequestLimit),this.Da=new n2,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=k_.prototype,t.la=8,t.G=1,t.connect=function(h,v,I,D){Jt(0),this.W=h,this.H=v||{},I&&D!==void 0&&(this.H.OSID=I,this.H.OAID=D),this.F=this.X,this.I=L_(this,null,this.W),ku(this)};function Rp(h){if(A_(h),h.G==3){var v=h.U++,I=Mr(h.I);if(ze(I,"SID",h.K),ze(I,"RID",v),ze(I,"TYPE","terminate"),cl(h,I),v=new ds(h,h.j,v),v.L=2,v.v=Eu(Mr(I)),I=!1,a.navigator&&a.navigator.sendBeacon)try{I=a.navigator.sendBeacon(v.v.toString(),"")}catch{}!I&&a.Image&&(new Image().src=v.v,I=!0),I||(v.g=F_(v.j,null),v.g.ea(v.v)),v.F=Date.now(),_u(v)}M_(h)}function Cu(h){h.g&&(Np(h),h.g.cancel(),h.g=null)}function A_(h){Cu(h),h.u&&(a.clearTimeout(h.u),h.u=null),Au(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&a.clearTimeout(h.s),h.s=null)}function ku(h){if(!u_(h.h)&&!h.s){h.s=!0;var v=h.Ga;W||Q(),M||(W(),M=!0),H.add(v,h),h.B=0}}function a2(h,v){return d_(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=v.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=el(p(h.Ga,h,v),j_(h,h.B)),h.B++,!0)}t.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const L=new ds(this,this.j,h);let V=this.o;if(this.S&&(V?(V=E(V),A(V,this.S)):V=this.S),this.m!==null||this.O||(L.H=V,V=null),this.P)e:{for(var v=0,I=0;I<this.i.length;I++){t:{var D=this.i[I];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(v+=D,4096<v){v=I;break e}if(v===4096||I===this.i.length-1){v=I+1;break e}}v=1e3}else v=1e3;v=P_(this,L,v),I=Mr(this.I),ze(I,"RID",h),ze(I,"CVER",22),this.D&&ze(I,"X-HTTP-Session-Id",this.D),cl(this,I),V&&(this.O?v="headers="+encodeURIComponent(String(b_(V)))+"&"+v:this.m&&Ap(I,this.m,V)),kp(this.h,L),this.Ua&&ze(I,"TYPE","init"),this.P?(ze(I,"$req",v),ze(I,"SID","null"),L.T=!0,Sp(L,I,null)):Sp(L,I,v),this.G=2}}else this.G==3&&(h?R_(this,h):this.i.length==0||u_(this.h)||R_(this))};function R_(h,v){var I;v?I=v.l:I=h.U++;const D=Mr(h.I);ze(D,"SID",h.K),ze(D,"RID",I),ze(D,"AID",h.T),cl(h,D),h.m&&h.o&&Ap(D,h.m,h.o),I=new ds(h,h.j,I,h.B+1),h.m===null&&(I.H=h.o),v&&(h.i=v.D.concat(h.i)),v=P_(h,I,1e3),I.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),kp(h.h,I),Sp(I,D,v)}function cl(h,v){h.H&&R(h.H,function(I,D){ze(v,D,I)}),h.l&&p_({},function(I,D){ze(v,D,I)})}function P_(h,v,I){I=Math.min(h.i.length,I);var D=h.l?p(h.l.Na,h.l,h):null;e:{var L=h.i;let V=-1;for(;;){const Y=["count="+I];V==-1?0<I?(V=L[0].g,Y.push("ofs="+V)):V=0:Y.push("ofs="+V);let Ve=!0;for(let Tt=0;Tt<I;Tt++){let Ae=L[Tt].g;const Lt=L[Tt].map;if(Ae-=V,0>Ae)V=Math.max(0,L[Tt].g-100),Ve=!1;else try{r2(Lt,Y,"req"+Ae+"_")}catch{D&&D(Lt)}}if(Ve){D=Y.join("&");break e}}}return h=h.i.splice(0,I),v.D=h,D}function N_(h){if(!h.g&&!h.u){h.Y=1;var v=h.Fa;W||Q(),M||(W(),M=!0),H.add(v,h),h.v=0}}function Pp(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=el(p(h.Fa,h),j_(h,h.v)),h.v++,!0)}t.Fa=function(){if(this.u=null,D_(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=el(p(this.ab,this),h)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Jt(10),Cu(this),D_(this))};function Np(h){h.A!=null&&(a.clearTimeout(h.A),h.A=null)}function D_(h){h.g=new ds(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var v=Mr(h.qa);ze(v,"RID","rpc"),ze(v,"SID",h.K),ze(v,"AID",h.T),ze(v,"CI",h.F?"0":"1"),!h.F&&h.ja&&ze(v,"TO",h.ja),ze(v,"TYPE","xmlhttp"),cl(h,v),h.m&&h.o&&Ap(v,h.m,h.o),h.L&&(h.g.I=h.L);var I=h.g;h=h.ia,I.L=1,I.v=Eu(Mr(v)),I.m=null,I.P=!0,o_(I,h)}t.Za=function(){this.C!=null&&(this.C=null,Cu(this),Pp(this),Jt(19))};function Au(h){h.C!=null&&(a.clearTimeout(h.C),h.C=null)}function O_(h,v){var I=null;if(h.g==v){Au(h),Np(h),h.g=null;var D=2}else if(Cp(h.h,v))I=v.D,h_(h.h,v),D=1;else return;if(h.G!=0){if(v.o)if(D==1){I=v.m?v.m.length:0,v=Date.now()-v.F;var L=h.B;D=yu(),Xt(D,new n_(D,I)),ku(h)}else N_(h);else if(L=v.s,L==3||L==0&&0<v.X||!(D==1&&a2(h,v)||D==2&&Pp(h)))switch(I&&0<I.length&&(v=h.h,v.i=v.i.concat(I)),L){case 1:wi(h,5);break;case 4:wi(h,10);break;case 3:wi(h,6);break;default:wi(h,2)}}}function j_(h,v){let I=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(I*=2),I*v}function wi(h,v){if(h.j.info("Error code "+v),v==2){var I=p(h.fb,h),D=h.Xa;const L=!D;D=new _i(D||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||wu(D,"https"),Eu(D),L?e2(D.toString(),I):t2(D.toString(),I)}else Jt(2);h.G=0,h.l&&h.l.sa(v),M_(h),A_(h)}t.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Jt(2)):(this.j.info("Failed to ping google.com"),Jt(1))};function M_(h){if(h.G=0,h.ka=[],h.l){const v=f_(h.h);(v.length!=0||h.i.length!=0)&&(x(h.ka,v),x(h.ka,h.i),h.h.i.length=0,g(h.i),h.i.length=0),h.l.ra()}}function L_(h,v,I){var D=I instanceof _i?Mr(I):new _i(I);if(D.g!="")v&&(D.g=v+"."+D.g),bu(D,D.s);else{var L=a.location;D=L.protocol,v=v?v+"."+L.hostname:L.hostname,L=+L.port;var V=new _i(null);D&&wu(V,D),v&&(V.g=v),L&&bu(V,L),I&&(V.l=I),D=V}return I=h.D,v=h.ya,I&&v&&ze(D,I,v),ze(D,"VER",h.la),cl(h,D),D}function F_(h,v,I){if(v&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Ca&&!h.pa?new Ze(new Su({eb:I})):new Ze(h.pa),v.Ha(h.J),v}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function V_(){}t=V_.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ru(){}Ru.prototype.g=function(h,v){return new gn(h,v)};function gn(h,v){Mt.call(this),this.g=new k_(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(h?h["X-WebChannel-Client-Profile"]=v.va:h={"X-WebChannel-Client-Profile":v.va}),this.g.S=h,(h=v&&v.Sb)&&!_(h)&&(this.g.m=h),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!_(v)&&(this.g.D=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new bo(this)}y(gn,Mt),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Rp(this.g)},gn.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var I={};I.__data__=h,h=I}else this.u&&(I={},I.__data__=vp(h),h=I);v.i.push(new qO(v.Ya++,h)),v.G==3&&ku(v)},gn.prototype.N=function(){this.g.l=null,delete this.j,Rp(this.g),delete this.g,gn.aa.N.call(this)};function U_(h){_p.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const I in v){h=I;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}y(U_,_p);function B_(){wp.call(this),this.status=1}y(B_,wp);function bo(h){this.g=h}y(bo,V_),bo.prototype.ua=function(){Xt(this.g,"a")},bo.prototype.ta=function(h){Xt(this.g,new U_(h))},bo.prototype.sa=function(h){Xt(this.g,new B_)},bo.prototype.ra=function(){Xt(this.g,"b")},Ru.prototype.createWebChannel=Ru.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,Fk=function(){return new Ru},Lk=function(){return yu()},Mk=vi,Jg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},vu.NO_ERROR=0,vu.TIMEOUT=8,vu.HTTP_ERROR=6,Fd=vu,r_.COMPLETE="complete",jk=r_,Jx.EventType=Ja,Ja.OPEN="a",Ja.CLOSE="b",Ja.ERROR="c",Ja.MESSAGE="d",Mt.prototype.listen=Mt.prototype.K,Pl=Jx,Ze.prototype.listenOnce=Ze.prototype.L,Ze.prototype.getLastError=Ze.prototype.Ka,Ze.prototype.getLastErrorCode=Ze.prototype.Ba,Ze.prototype.getStatus=Ze.prototype.Z,Ze.prototype.getResponseJson=Ze.prototype.Oa,Ze.prototype.getResponseText=Ze.prototype.oa,Ze.prototype.send=Ze.prototype.ea,Ze.prototype.setWithCredentials=Ze.prototype.Ha,Ok=Ze}).apply(typeof Qu<"u"?Qu:typeof self<"u"?self:typeof window<"u"?window:{});const fb="@firebase/firestore",pb="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$t.UNAUTHENTICATED=new $t(null),$t.GOOGLE_CREDENTIALS=new $t("google-credentials-uid"),$t.FIRST_PARTY=new $t("first-party-uid"),$t.MOCK_USER=new $t("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oa="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji=new Zv("@firebase/firestore");function Ro(){return Ji.logLevel}function J(t,...e){if(Ji.logLevel<=we.DEBUG){const n=e.map(n0);Ji.debug(`Firestore (${Oa}): ${t}`,...n)}}function ss(t,...e){if(Ji.logLevel<=we.ERROR){const n=e.map(n0);Ji.error(`Firestore (${Oa}): ${t}`,...n)}}function ma(t,...e){if(Ji.logLevel<=we.WARN){const n=e.map(n0);Ji.warn(`Firestore (${Oa}): ${t}`,...n)}}function n0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function de(t="Unexpected state"){const e=`FIRESTORE (${Oa}) INTERNAL ASSERTION FAILED: `+t;throw ss(e),new Error(e)}function De(t,e){t||de()}function pe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends Dr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $F{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n($t.UNAUTHENTICATED))}shutdown(){}}class qF{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class HF{constructor(e){this.t=e,this.currentUser=$t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){De(this.o===void 0);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new Qs;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Qs,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Qs)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(De(typeof r.accessToken=="string"),new Vk(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return De(e===null||typeof e=="string"),new $t(e)}}class WF{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=$t.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class KF{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new WF(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n($t.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class mb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class GF{constructor(e,n){this.A=n,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,_n(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,n){De(this.o===void 0);const r=i=>{i.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,J("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new mb(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(De(typeof n.token=="string"),this.R=n.token,new mb(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QF(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uk(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=QF(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function ye(t,e){return t<e?-1:t>e?1:0}function Zg(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return ye(r,s);{const i=Uk(),o=YF(i.encode(gb(t,n)),i.encode(gb(e,n)));return o!==0?o:ye(r,s)}}n+=r>65535?2:1}return ye(t.length,e.length)}function gb(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function YF(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return ye(t[n],e[n]);return ye(t.length,e.length)}function ga(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb=-62135596800,vb=1e6;class vt{static now(){return vt.fromMillis(Date.now())}static fromDate(e){return vt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*vb);return new vt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new le(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new le(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<yb)throw new le(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/vb}_compareTo(e){return this.seconds===e.seconds?ye(this.nanoseconds,e.nanoseconds):ye(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-yb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{static fromTimestamp(e){return new he(e)}static min(){return new he(new vt(0,0))}static max(){return new he(new vt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb="__name__";class gr{constructor(e,n,r){n===void 0?n=0:n>e.length&&de(),r===void 0?r=e.length-n:r>e.length-n&&de(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return gr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof gr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=gr.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return ye(e.length,n.length)}static compareSegments(e,n){const r=gr.isNumericId(e),s=gr.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?gr.extractNumericId(e).compare(gr.extractNumericId(n)):Zg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Gs.fromString(e.substring(4,e.length-2))}}class tt extends gr{construct(e,n,r){return new tt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new le(K.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new tt(n)}static emptyPath(){return new tt([])}}const XF=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class At extends gr{construct(e,n,r){return new At(e,n,r)}static isValidIdentifier(e){return XF.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),At.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===xb}static keyField(){return new At([xb])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new le(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new le(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new le(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new le(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new At(n)}static emptyPath(){return new At([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.path=e}static fromPath(e){return new ce(tt.fromString(e))}static fromName(e){return new ce(tt.fromString(e).popFirst(5))}static empty(){return new ce(tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return tt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ce(new tt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bc=-1;function JF(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=he.fromTimestamp(r===1e9?new vt(n+1,0):new vt(n,r));return new ti(s,ce.empty(),e)}function ZF(t){return new ti(t.readTime,t.key,bc)}class ti{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ti(he.min(),ce.empty(),bc)}static max(){return new ti(he.max(),ce.empty(),bc)}}function eV(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ce.comparator(t.documentKey,e.documentKey),n!==0?n:ye(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ja(t){if(t.code!==K.FAILED_PRECONDITION||t.message!==tV)throw t;J("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&de(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new q((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof q?n:q.resolve(n)}catch(n){return q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):q.reject(n)}static resolve(e){return new q((n,r)=>{n(e)})}static reject(e){return new q((n,r)=>{r(e)})}static waitFor(e){return new q((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=q.resolve(!1);for(const r of e)n=n.next(s=>s?q.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new q((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(u=>{o[c]=u,++a,a===i&&r(o)},u=>s(u))}})}static doWhile(e,n){return new q((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function rV(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ma(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.oe(r),this._e=r=>n.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Rf.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r0=-1;function Pf(t){return t==null}function Ah(t){return t===0&&1/t==-1/0}function sV(t){return typeof t=="number"&&Number.isInteger(t)&&!Ah(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zk="";function iV(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=_b(e)),e=oV(t.get(n),e);return _b(e)}function oV(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case zk:n+="";break;default:n+=i}}return n}function _b(t){return t+zk+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wb(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ho(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function $k(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e,n){this.comparator=e,this.root=n||Ct.EMPTY}insert(e,n){return new Je(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ct.BLACK,null,null))}remove(e){return new Je(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ct.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Yu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Yu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Yu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Yu(this.root,e,this.comparator,!0)}}class Yu{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ct{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Ct.RED,this.left=s??Ct.EMPTY,this.right=i??Ct.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Ct(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ct.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Ct.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ct.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ct.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw de();const e=this.left.check();if(e!==this.right.check())throw de();return e+(this.isRed()?0:1)}}Ct.EMPTY=null,Ct.RED=!0,Ct.BLACK=!1;Ct.EMPTY=new class{constructor(){this.size=0}get key(){throw de()}get value(){throw de()}get color(){throw de()}get left(){throw de()}get right(){throw de()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Ct(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.comparator=e,this.data=new Je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new bb(this.data.getIterator())}getIteratorFrom(e){return new bb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof xt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new xt(this.comparator);return n.data=e,n}}class bb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this.fields=e,e.sort(At.comparator)}static empty(){return new Yn([])}unionWith(e){let n=new xt(At.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Yn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ga(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new qk("Invalid base64 string: "+i):i}}(e);return new Dt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Dt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ye(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Dt.EMPTY_BYTE_STRING=new Dt("");const aV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ni(t){if(De(!!t),typeof t=="string"){let e=0;const n=aV.exec(t);if(De(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:nt(t.seconds),nanos:nt(t.nanos)}}function nt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ri(t){return typeof t=="string"?Dt.fromBase64String(t):Dt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hk="server_timestamp",Wk="__type__",Kk="__previous_value__",Gk="__local_write_time__";function s0(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Wk])===null||n===void 0?void 0:n.stringValue)===Hk}function Nf(t){const e=t.mapValue.fields[Kk];return s0(e)?Nf(e):e}function Ec(t){const e=ni(t.mapValue.fields[Gk].timestampValue);return new vt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lV{constructor(e,n,r,s,i,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}const Rh="(default)";class Sc{constructor(e,n){this.projectId=e,this.database=n||Rh}static empty(){return new Sc("","")}get isDefaultDatabase(){return this.database===Rh}isEqual(e){return e instanceof Sc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qk="__type__",cV="__max__",Xu={mapValue:{}},Yk="__vector__",Ph="value";function si(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?s0(t)?4:dV(t)?9007199254740991:uV(t)?10:11:de()}function Rr(t,e){if(t===e)return!0;const n=si(t);if(n!==si(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ec(t).isEqual(Ec(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=ni(s.timestampValue),a=ni(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return ri(s.bytesValue).isEqual(ri(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return nt(s.geoPointValue.latitude)===nt(i.geoPointValue.latitude)&&nt(s.geoPointValue.longitude)===nt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return nt(s.integerValue)===nt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=nt(s.doubleValue),a=nt(i.doubleValue);return o===a?Ah(o)===Ah(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return ga(t.arrayValue.values||[],e.arrayValue.values||[],Rr);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(wb(o)!==wb(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Rr(o[l],a[l])))return!1;return!0}(t,e);default:return de()}}function Tc(t,e){return(t.values||[]).find(n=>Rr(n,e))!==void 0}function ya(t,e){if(t===e)return 0;const n=si(t),r=si(e);if(n!==r)return ye(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ye(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=nt(i.integerValue||i.doubleValue),l=nt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return Eb(t.timestampValue,e.timestampValue);case 4:return Eb(Ec(t),Ec(e));case 5:return Zg(t.stringValue,e.stringValue);case 6:return function(i,o){const a=ri(i),l=ri(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=ye(a[c],l[c]);if(u!==0)return u}return ye(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=ye(nt(i.latitude),nt(o.latitude));return a!==0?a:ye(nt(i.longitude),nt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Sb(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,l,c,u;const f=i.fields||{},p=o.fields||{},m=(a=f[Ph])===null||a===void 0?void 0:a.arrayValue,y=(l=p[Ph])===null||l===void 0?void 0:l.arrayValue,g=ye(((c=m?.values)===null||c===void 0?void 0:c.length)||0,((u=y?.values)===null||u===void 0?void 0:u.length)||0);return g!==0?g:Sb(m,y)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Xu.mapValue&&o===Xu.mapValue)return 0;if(i===Xu.mapValue)return 1;if(o===Xu.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let f=0;f<l.length&&f<u.length;++f){const p=Zg(l[f],u[f]);if(p!==0)return p;const m=ya(a[l[f]],c[u[f]]);if(m!==0)return m}return ye(l.length,u.length)}(t.mapValue,e.mapValue);default:throw de()}}function Eb(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ye(t,e);const n=ni(t),r=ni(e),s=ye(n.seconds,r.seconds);return s!==0?s:ye(n.nanos,r.nanos)}function Sb(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=ya(n[s],r[s]);if(i)return i}return ye(n.length,r.length)}function va(t){return ey(t)}function ey(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ni(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ri(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ce.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=ey(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${ey(n.fields[o])}`;return s+"}"}(t.mapValue):de()}function Vd(t){switch(si(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Nf(t);return e?16+Vd(e):16;case 5:return 2*t.stringValue.length;case 6:return ri(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Vd(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return ho(r.fields,(i,o)=>{s+=i.length+Vd(o)}),s}(t.mapValue);default:throw de()}}function ty(t){return!!t&&"integerValue"in t}function i0(t){return!!t&&"arrayValue"in t}function Tb(t){return!!t&&"nullValue"in t}function Ib(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ud(t){return!!t&&"mapValue"in t}function uV(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Qk])===null||n===void 0?void 0:n.stringValue)===Yk}function Kl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ho(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Kl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Kl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function dV(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===cV}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.value=e}static empty(){return new On({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ud(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Kl(n)}setAll(e){let n=At.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Kl(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Ud(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Rr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Ud(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ho(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new On(Kl(this.value))}}function Xk(t){const e=[];return ho(t.fields,(n,r)=>{const s=new At([n]);if(Ud(r)){const i=Xk(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Yn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ht(e,0,he.min(),he.min(),he.min(),On.empty(),0)}static newFoundDocument(e,n,r,s){return new Ht(e,1,n,he.min(),r,s,0)}static newNoDocument(e,n){return new Ht(e,2,n,he.min(),he.min(),On.empty(),0)}static newUnknownDocument(e,n){return new Ht(e,3,n,he.min(),he.min(),On.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(he.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=On.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=On.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=he.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ht&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ht(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e,n){this.position=e,this.inclusive=n}}function Cb(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ce.comparator(ce.fromName(o.referenceValue),n.key):r=ya(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function kb(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Rr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,n="asc"){this.field=e,this.dir=n}}function hV(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{}class gt extends Jk{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new pV(e,n,r):n==="array-contains"?new yV(e,r):n==="in"?new vV(e,r):n==="not-in"?new xV(e,r):n==="array-contains-any"?new _V(e,r):new gt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new mV(e,r):new gV(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ya(n,this.value)):n!==null&&si(this.value)===si(n)&&this.matchesComparison(ya(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return de()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Pr extends Jk{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new Pr(e,n)}matches(e){return Zk(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function Zk(t){return t.op==="and"}function eA(t){return fV(t)&&Zk(t)}function fV(t){for(const e of t.filters)if(e instanceof Pr)return!1;return!0}function ny(t){if(t instanceof gt)return t.field.canonicalString()+t.op.toString()+va(t.value);if(eA(t))return t.filters.map(e=>ny(e)).join(",");{const e=t.filters.map(n=>ny(n)).join(",");return`${t.op}(${e})`}}function tA(t,e){return t instanceof gt?function(r,s){return s instanceof gt&&r.op===s.op&&r.field.isEqual(s.field)&&Rr(r.value,s.value)}(t,e):t instanceof Pr?function(r,s){return s instanceof Pr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&tA(o,s.filters[a]),!0):!1}(t,e):void de()}function nA(t){return t instanceof gt?function(n){return`${n.field.canonicalString()} ${n.op} ${va(n.value)}`}(t):t instanceof Pr?function(n){return n.op.toString()+" {"+n.getFilters().map(nA).join(" ,")+"}"}(t):"Filter"}class pV extends gt{constructor(e,n,r){super(e,n,r),this.key=ce.fromName(r.referenceValue)}matches(e){const n=ce.comparator(e.key,this.key);return this.matchesComparison(n)}}class mV extends gt{constructor(e,n){super(e,"in",n),this.keys=rA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class gV extends gt{constructor(e,n){super(e,"not-in",n),this.keys=rA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function rA(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ce.fromName(r.referenceValue))}class yV extends gt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return i0(n)&&Tc(n.arrayValue,this.value)}}class vV extends gt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Tc(this.value.arrayValue,n)}}class xV extends gt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Tc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Tc(this.value.arrayValue,n)}}class _V extends gt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!i0(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Tc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wV{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.le=null}}function Ab(t,e=null,n=[],r=[],s=null,i=null,o=null){return new wV(t,e,n,r,s,i,o)}function o0(t){const e=pe(t);if(e.le===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>ny(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Pf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>va(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>va(r)).join(",")),e.le=n}return e.le}function a0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!hV(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!tA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!kb(t.startAt,e.startAt)&&kb(t.endAt,e.endAt)}function ry(t){return ce.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function bV(t,e,n,r,s,i,o,a){return new Df(t,e,n,r,s,i,o,a)}function l0(t){return new Df(t)}function Rb(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function EV(t){return t.collectionGroup!==null}function Gl(t){const e=pe(t);if(e.he===null){e.he=[];const n=new Set;for(const i of e.explicitOrderBy)e.he.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new xt(At.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.he.push(new Dh(i,r))}),n.has(At.keyField().canonicalString())||e.he.push(new Dh(At.keyField(),r))}return e.he}function Sr(t){const e=pe(t);return e.Pe||(e.Pe=SV(e,Gl(t))),e.Pe}function SV(t,e){if(t.limitType==="F")return Ab(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Dh(s.field,i)});const n=t.endAt?new Nh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Nh(t.startAt.position,t.startAt.inclusive):null;return Ab(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function sy(t,e,n){return new Df(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Of(t,e){return a0(Sr(t),Sr(e))&&t.limitType===e.limitType}function sA(t){return`${o0(Sr(t))}|lt:${t.limitType}`}function Po(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>nA(s)).join(", ")}]`),Pf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>va(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>va(s)).join(",")),`Target(${r})`}(Sr(t))}; limitType=${t.limitType})`}function jf(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ce.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Gl(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=Cb(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Gl(r),s)||r.endAt&&!function(o,a,l){const c=Cb(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Gl(r),s))}(t,e)}function TV(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function iA(t){return(e,n)=>{let r=!1;for(const s of Gl(t)){const i=IV(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function IV(t,e,n){const r=t.field.isKeyField()?ce.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?ya(l,c):de()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return de()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ho(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return $k(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CV=new Je(ce.comparator);function is(){return CV}const oA=new Je(ce.comparator);function Nl(...t){let e=oA;for(const n of t)e=e.insert(n.key,n);return e}function aA(t){let e=oA;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Oi(){return Ql()}function lA(){return Ql()}function Ql(){return new fo(t=>t.toString(),(t,e)=>t.isEqual(e))}const kV=new Je(ce.comparator),AV=new xt(ce.comparator);function Ee(...t){let e=AV;for(const n of t)e=e.add(n);return e}const RV=new xt(ye);function PV(){return RV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ah(e)?"-0":e}}function cA(t){return{integerValue:""+t}}function NV(t,e){return sV(e)?cA(e):c0(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(){this._=void 0}}function DV(t,e,n){return t instanceof Ic?function(s,i){const o={fields:{[Wk]:{stringValue:Hk},[Gk]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&s0(i)&&(i=Nf(i)),i&&(o.fields[Kk]=i),{mapValue:o}}(n,e):t instanceof Cc?dA(t,e):t instanceof kc?hA(t,e):function(s,i){const o=uA(s,i),a=Pb(o)+Pb(s.Ie);return ty(o)&&ty(s.Ie)?cA(a):c0(s.serializer,a)}(t,e)}function OV(t,e,n){return t instanceof Cc?dA(t,e):t instanceof kc?hA(t,e):n}function uA(t,e){return t instanceof Oh?function(r){return ty(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Ic extends Mf{}class Cc extends Mf{constructor(e){super(),this.elements=e}}function dA(t,e){const n=fA(e);for(const r of t.elements)n.some(s=>Rr(s,r))||n.push(r);return{arrayValue:{values:n}}}class kc extends Mf{constructor(e){super(),this.elements=e}}function hA(t,e){let n=fA(e);for(const r of t.elements)n=n.filter(s=>!Rr(s,r));return{arrayValue:{values:n}}}class Oh extends Mf{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function Pb(t){return nt(t.integerValue||t.doubleValue)}function fA(t){return i0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jV{constructor(e,n){this.field=e,this.transform=n}}function MV(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Cc&&s instanceof Cc||r instanceof kc&&s instanceof kc?ga(r.elements,s.elements,Rr):r instanceof Oh&&s instanceof Oh?Rr(r.Ie,s.Ie):r instanceof Ic&&s instanceof Ic}(t.transform,e.transform)}class LV{constructor(e,n){this.version=e,this.transformResults=n}}class Xr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Xr}static exists(e){return new Xr(void 0,e)}static updateTime(e){return new Xr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Bd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}let Lf=class{};function pA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new gA(t.key,Xr.none()):new Xc(t.key,t.data,Xr.none());{const n=t.data,r=On.empty();let s=new xt(At.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new po(t.key,r,new Yn(s.toArray()),Xr.none())}}function FV(t,e,n){t instanceof Xc?function(s,i,o){const a=s.value.clone(),l=Db(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof po?function(s,i,o){if(!Bd(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=Db(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(mA(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Yl(t,e,n,r){return t instanceof Xc?function(i,o,a,l){if(!Bd(i.precondition,o))return a;const c=i.value.clone(),u=Ob(i.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof po?function(i,o,a,l){if(!Bd(i.precondition,o))return a;const c=Ob(i.fieldTransforms,l,o),u=o.data;return u.setAll(mA(i)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,a){return Bd(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function VV(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=uA(r.transform,s||null);i!=null&&(n===null&&(n=On.empty()),n.set(r.field,i))}return n||null}function Nb(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ga(r,s,(i,o)=>MV(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Xc extends Lf{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class po extends Lf{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function mA(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Db(t,e,n){const r=new Map;De(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,OV(o,a,n[s]))}return r}function Ob(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,DV(i,o,e))}return r}class gA extends Lf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class UV extends Lf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BV{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&FV(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Yl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Yl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=lA();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=pA(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(he.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ee())}isEqual(e){return this.batchId===e.batchId&&ga(this.mutations,e.mutations,(n,r)=>Nb(n,r))&&ga(this.baseMutations,e.baseMutations,(n,r)=>Nb(n,r))}}class u0{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){De(e.mutations.length===r.length);let s=function(){return kV}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new u0(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zV=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $V{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ct,Ie;function qV(t){switch(t){case K.OK:return de();case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0;default:return de()}}function yA(t){if(t===void 0)return ss("GRPC error has no .code"),K.UNKNOWN;switch(t){case ct.OK:return K.OK;case ct.CANCELLED:return K.CANCELLED;case ct.UNKNOWN:return K.UNKNOWN;case ct.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case ct.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case ct.INTERNAL:return K.INTERNAL;case ct.UNAVAILABLE:return K.UNAVAILABLE;case ct.UNAUTHENTICATED:return K.UNAUTHENTICATED;case ct.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case ct.NOT_FOUND:return K.NOT_FOUND;case ct.ALREADY_EXISTS:return K.ALREADY_EXISTS;case ct.PERMISSION_DENIED:return K.PERMISSION_DENIED;case ct.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case ct.ABORTED:return K.ABORTED;case ct.OUT_OF_RANGE:return K.OUT_OF_RANGE;case ct.UNIMPLEMENTED:return K.UNIMPLEMENTED;case ct.DATA_LOSS:return K.DATA_LOSS;default:return de()}}(Ie=ct||(ct={}))[Ie.OK=0]="OK",Ie[Ie.CANCELLED=1]="CANCELLED",Ie[Ie.UNKNOWN=2]="UNKNOWN",Ie[Ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ie[Ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ie[Ie.NOT_FOUND=5]="NOT_FOUND",Ie[Ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ie[Ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ie[Ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ie[Ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ie[Ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ie[Ie.ABORTED=10]="ABORTED",Ie[Ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ie[Ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ie[Ie.INTERNAL=13]="INTERNAL",Ie[Ie.UNAVAILABLE=14]="UNAVAILABLE",Ie[Ie.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HV=new Gs([4294967295,4294967295],0);function jb(t){const e=Uk().encode(t),n=new Dk;return n.update(e),new Uint8Array(n.digest())}function Mb(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Gs([n,r],0),new Gs([s,i],0)]}class d0{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Dl(`Invalid padding: ${n}`);if(r<0)throw new Dl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Dl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Dl(`Invalid padding when bitmap length is 0: ${n}`);this.Ee=8*e.length-n,this.de=Gs.fromNumber(this.Ee)}Ae(e,n,r){let s=e.add(n.multiply(Gs.fromNumber(r)));return s.compare(HV)===1&&(s=new Gs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const n=jb(e),[r,s]=Mb(n);for(let i=0;i<this.hashCount;i++){const o=this.Ae(r,s,i);if(!this.Re(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new d0(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ee===0)return;const n=jb(e),[r,s]=Mb(n);for(let i=0;i<this.hashCount;i++){const o=this.Ae(r,s,i);this.Ve(o)}}Ve(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Dl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Jc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ff(he.min(),s,new Je(ye),is(),Ee())}}class Jc{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Jc(r,n,Ee(),Ee(),Ee())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e,n,r,s){this.me=e,this.removedTargetIds=n,this.key=r,this.fe=s}}class vA{constructor(e,n){this.targetId=e,this.ge=n}}class xA{constructor(e,n,r=Dt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Lb{constructor(){this.pe=0,this.ye=Fb(),this.we=Dt.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Ee(),n=Ee(),r=Ee();return this.ye.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:de()}}),new Jc(this.we,this.Se,e,n,r)}Me(){this.be=!1,this.ye=Fb()}xe(e,n){this.be=!0,this.ye=this.ye.insert(e,n)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,De(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class WV{constructor(e){this.ke=e,this.qe=new Map,this.Qe=is(),this.$e=Ju(),this.Ue=Ju(),this.Ke=new Je(ye)}We(e){for(const n of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(n,e.fe):this.ze(n,e.key,e.fe);for(const n of e.removedTargetIds)this.ze(n,e.key,e.fe)}je(e){this.forEachTarget(e,n=>{const r=this.He(n);switch(e.state){case 0:this.Je(n)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(n);break;case 3:this.Je(n)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(n)&&(this.Ye(n),r.Ce(e.resumeToken));break;default:de()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.qe.forEach((r,s)=>{this.Je(s)&&n(s)})}Ze(e){const n=e.targetId,r=e.ge.count,s=this.Xe(n);if(s){const i=s.target;if(ry(i))if(r===0){const o=new ce(i.path);this.ze(n,o,Ht.newNoDocument(o,he.min()))}else De(r===1);else{const o=this.et(n);if(o!==r){const a=this.tt(e),l=a?this.nt(a,e,o):1;if(l!==0){this.Ye(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,c)}}}}}tt(e){const n=e.ge.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=ri(r).toUint8Array()}catch(l){if(l instanceof qk)return ma("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new d0(o,s,i)}catch(l){return ma(l instanceof Dl?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ee===0?null:a}nt(e,n,r){return n.ge.count===r-this.st(e,n.targetId)?0:2}st(e,n){const r=this.ke.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.ke.it(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.ze(n,i,null),s++)}),s}ot(e){const n=new Map;this.qe.forEach((i,o)=>{const a=this.Xe(o);if(a){if(i.current&&ry(a.target)){const l=new ce(a.target.path);this._t(l).has(o)||this.ut(o,l)||this.ze(o,l,Ht.newNoDocument(l,e))}i.ve&&(n.set(o,i.Fe()),i.Me())}});let r=Ee();this.Ue.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Xe(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.Qe.forEach((i,o)=>o.setReadTime(e));const s=new Ff(e,n,this.Ke,this.Qe,r);return this.Qe=is(),this.$e=Ju(),this.Ue=Ju(),this.Ke=new Je(ye),s}Ge(e,n){if(!this.Je(e))return;const r=this.ut(e,n.key)?2:0;this.He(e).xe(n.key,r),this.Qe=this.Qe.insert(n.key,n),this.$e=this.$e.insert(n.key,this._t(n.key).add(e)),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(e))}ze(e,n,r){if(!this.Je(e))return;const s=this.He(e);this.ut(e,n)?s.xe(n,1):s.Oe(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(e)),this.Ue=this.Ue.insert(n,this.ct(n).add(e)),r&&(this.Qe=this.Qe.insert(n,r))}removeTarget(e){this.qe.delete(e)}et(e){const n=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let n=this.qe.get(e);return n||(n=new Lb,this.qe.set(e,n)),n}ct(e){let n=this.Ue.get(e);return n||(n=new xt(ye),this.Ue=this.Ue.insert(e,n)),n}_t(e){let n=this.$e.get(e);return n||(n=new xt(ye),this.$e=this.$e.insert(e,n)),n}Je(e){const n=this.Xe(e)!==null;return n||J("WatchChangeAggregator","Detected inactive target",e),n}Xe(e){const n=this.qe.get(e);return n&&n.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new Lb),this.ke.getRemoteKeysForTarget(e).forEach(n=>{this.ze(e,n,null)})}ut(e,n){return this.ke.getRemoteKeysForTarget(e).has(n)}}function Ju(){return new Je(ce.comparator)}function Fb(){return new Je(ce.comparator)}const KV={asc:"ASCENDING",desc:"DESCENDING"},GV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},QV={and:"AND",or:"OR"};class YV{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function iy(t,e){return t.useProto3Json||Pf(e)?e:{value:e}}function jh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function _A(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function XV(t,e){return jh(t,e.toTimestamp())}function Tr(t){return De(!!t),he.fromTimestamp(function(n){const r=ni(n);return new vt(r.seconds,r.nanos)}(t))}function h0(t,e){return oy(t,e).canonicalString()}function oy(t,e){const n=function(s){return new tt(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function wA(t){const e=tt.fromString(t);return De(IA(e)),e}function ay(t,e){return h0(t.databaseId,e.path)}function hm(t,e){const n=wA(e);if(n.get(1)!==t.databaseId.projectId)throw new le(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new le(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ce(EA(n))}function bA(t,e){return h0(t.databaseId,e)}function JV(t){const e=wA(t);return e.length===4?tt.emptyPath():EA(e)}function ly(t){return new tt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function EA(t){return De(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Vb(t,e,n){return{name:ay(t,e),fields:n.value.mapValue.fields}}function ZV(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:de()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,u){return c.useProto3Json?(De(u===void 0||typeof u=="string"),Dt.fromBase64String(u||"")):(De(u===void 0||u instanceof Buffer||u instanceof Uint8Array),Dt.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?K.UNKNOWN:yA(c.code);return new le(u,c.message||"")}(o);n=new xA(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=hm(t,r.document.name),i=Tr(r.document.updateTime),o=r.document.createTime?Tr(r.document.createTime):he.min(),a=new On({mapValue:{fields:r.document.fields}}),l=Ht.newFoundDocument(s,i,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new zd(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=hm(t,r.document),i=r.readTime?Tr(r.readTime):he.min(),o=Ht.newNoDocument(s,i),a=r.removedTargetIds||[];n=new zd([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=hm(t,r.document),i=r.removedTargetIds||[];n=new zd([],i,s,null)}else{if(!("filter"in e))return de();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new $V(s,i),a=r.targetId;n=new vA(a,o)}}return n}function e4(t,e){let n;if(e instanceof Xc)n={update:Vb(t,e.key,e.value)};else if(e instanceof gA)n={delete:ay(t,e.key)};else if(e instanceof po)n={update:Vb(t,e.key,e.data),updateMask:c4(e.fieldMask)};else{if(!(e instanceof UV))return de();n={verify:ay(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Ic)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Cc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof kc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Oh)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw de()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:XV(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:de()}(t,e.precondition)),n}function t4(t,e){return t&&t.length>0?(De(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Tr(s.updateTime):Tr(i);return o.isEqual(he.min())&&(o=Tr(i)),new LV(o,s.transformResults||[])}(n,e))):[]}function n4(t,e){return{documents:[bA(t,e.path)]}}function r4(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=bA(t,s);const i=function(c){if(c.length!==0)return TA(Pr.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(u=>function(p){return{field:No(p.field),direction:o4(p.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=iy(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ht:n,parent:s}}function s4(t){let e=JV(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){De(r===1);const u=n.from[0];u.allDescendants?s=u.collectionId:e=e.child(u.collectionId)}let i=[];n.where&&(i=function(f){const p=SA(f);return p instanceof Pr&&eA(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(y){return new Dh(Do(y.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,Pf(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(f){const p=!!f.before,m=f.values||[];return new Nh(m,p)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const p=!f.before,m=f.values||[];return new Nh(m,p)}(n.endAt)),bV(e,s,o,i,a,"F",l,c)}function i4(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return de()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function SA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Do(n.unaryFilter.field);return gt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Do(n.unaryFilter.field);return gt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Do(n.unaryFilter.field);return gt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Do(n.unaryFilter.field);return gt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return de()}}(t):t.fieldFilter!==void 0?function(n){return gt.create(Do(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return de()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Pr.create(n.compositeFilter.filters.map(r=>SA(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return de()}}(n.compositeFilter.op))}(t):de()}function o4(t){return KV[t]}function a4(t){return GV[t]}function l4(t){return QV[t]}function No(t){return{fieldPath:t.canonicalString()}}function Do(t){return At.fromServerFormat(t.fieldPath)}function TA(t){return t instanceof gt?function(n){if(n.op==="=="){if(Ib(n.value))return{unaryFilter:{field:No(n.field),op:"IS_NAN"}};if(Tb(n.value))return{unaryFilter:{field:No(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Ib(n.value))return{unaryFilter:{field:No(n.field),op:"IS_NOT_NAN"}};if(Tb(n.value))return{unaryFilter:{field:No(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:No(n.field),op:a4(n.op),value:n.value}}}(t):t instanceof Pr?function(n){const r=n.getFilters().map(s=>TA(s));return r.length===1?r[0]:{compositeFilter:{op:l4(n.op),filters:r}}}(t):de()}function c4(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function IA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e,n,r,s,i=he.min(),o=he.min(),a=Dt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Rs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Rs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Rs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Rs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(e){this.Tt=e}}function d4(t){const e=s4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?sy(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h4{constructor(){this.Tn=new f4}addToCollectionParentIndex(e,n){return this.Tn.add(n),q.resolve()}getCollectionParents(e,n){return q.resolve(this.Tn.getEntries(n))}addFieldIndex(e,n){return q.resolve()}deleteFieldIndex(e,n){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,n){return q.resolve()}getDocumentsMatchingTarget(e,n){return q.resolve(null)}getIndexType(e,n){return q.resolve(0)}getFieldIndexes(e,n){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,n){return q.resolve(ti.min())}getMinOffsetFromCollectionGroup(e,n){return q.resolve(ti.min())}updateCollectionGroup(e,n,r){return q.resolve()}updateIndexEntries(e,n){return q.resolve()}}class f4{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new xt(tt.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new xt(tt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},CA=41943040;class sn{static withCacheSize(e){return new sn(e,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sn.DEFAULT_COLLECTION_PERCENTILE=10,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sn.DEFAULT=new sn(CA,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sn.DISABLED=new sn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new xa(0)}static Kn(){return new xa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bb="LruGarbageCollector",p4=1048576;function zb([t,e],[n,r]){const s=ye(t,n);return s===0?ye(e,r):s}class m4{constructor(e){this.Hn=e,this.buffer=new xt(zb),this.Jn=0}Yn(){return++this.Jn}Zn(e){const n=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();zb(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class g4{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){J(Bb,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ma(n)?J(Bb,"Ignoring IndexedDB error during garbage collection: ",n):await ja(n)}await this.er(3e5)})}}class y4{constructor(e,n){this.tr=e,this.params=n}calculateTargetCount(e,n){return this.tr.nr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return q.resolve(Rf.ae);const r=new m4(n);return this.tr.forEachTarget(e,s=>r.Zn(s.sequenceNumber)).next(()=>this.tr.rr(e,s=>r.Zn(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.tr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.tr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(J("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve(Ub)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(J("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ub):this.ir(e,n))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,n){let r,s,i,o,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(J("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(i=f,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(c=Date.now(),Ro()<=we.DEBUG&&J("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${f} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function v4(t,e){return new y4(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(){this.changes=new fo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ht.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?q.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w4{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Yl(r.mutation,s,Yn.empty(),vt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ee()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ee()){const s=Oi();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Nl();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Oi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ee()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=is();const o=Ql(),a=function(){return Ql()}();return n.forEach((l,c)=>{const u=r.get(c.key);s.has(c.key)&&(u===void 0||u.mutation instanceof po)?i=i.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),Yl(u.mutation,c,u.mutation.getFieldMask(),vt.now())):o.set(c.key,Yn.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var f;return a.set(c,new _4(u,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Ql();let s=new Je((o,a)=>o-a),i=Ee();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||Yn.empty();u=a.applyToLocalView(c,u),r.set(l,u);const f=(s.get(a.batchId)||Ee()).add(l);s=s.insert(a.batchId,f)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,f=lA();u.forEach(p=>{if(!i.has(p)){const m=pA(n.get(p),r.get(p));m!==null&&f.set(p,m),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return q.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return ce.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):EV(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):q.resolve(Oi());let a=bc,l=i;return o.next(c=>q.forEach(c,(u,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(u)?q.resolve():this.remoteDocumentCache.getEntry(e,u).next(p=>{l=l.insert(u,p)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,Ee())).next(u=>({batchId:a,changes:aA(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ce(n)).next(r=>{let s=Nl();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Nl();return this.indexManager.getCollectionParents(e,i).next(a=>q.forEach(a,l=>{const c=function(f,p){return new Df(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(u=>{u.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,Ht.newInvalidDocument(u)))});let a=Nl();return o.forEach((l,c)=>{const u=i.get(l);u!==void 0&&Yl(u.mutation,c,Yn.empty(),vt.now()),jf(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,n){return q.resolve(this.dr.get(n))}saveBundleMetadata(e,n){return this.dr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Tr(s.createTime)}}(n)),q.resolve()}getNamedQuery(e,n){return q.resolve(this.Ar.get(n))}saveNamedQuery(e,n){return this.Ar.set(n.name,function(s){return{name:s.name,query:d4(s.bundledQuery),readTime:Tr(s.readTime)}}(n)),q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E4{constructor(){this.overlays=new Je(ce.comparator),this.Rr=new Map}getOverlay(e,n){return q.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Oi();return q.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.Et(e,n,i)}),q.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Rr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Rr.delete(r)),q.resolve()}getOverlaysForCollection(e,n,r){const s=Oi(),i=n.length+1,o=new ce(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return q.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Je((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=i.get(c.largestBatchId);u===null&&(u=Oi(),i=i.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Oi(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=s)););return q.resolve(a)}Et(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Rr.get(s.largestBatchId).delete(r.key);this.Rr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new zV(n,r));let i=this.Rr.get(n);i===void 0&&(i=Ee(),this.Rr.set(n,i)),this.Rr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S4{constructor(){this.sessionToken=Dt.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(){this.Vr=new xt(wt.mr),this.gr=new xt(wt.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,n){const r=new wt(e,n);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.wr(new wt(e,n))}Sr(e,n){e.forEach(r=>this.removeReference(r,n))}br(e){const n=new ce(new tt([])),r=new wt(n,e),s=new wt(n,e+1),i=[];return this.gr.forEachInRange([r,s],o=>{this.wr(o),i.push(o.key)}),i}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const n=new ce(new tt([])),r=new wt(n,e),s=new wt(n,e+1);let i=Ee();return this.gr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new wt(e,0),r=this.Vr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class wt{constructor(e,n){this.key=e,this.Cr=n}static mr(e,n){return ce.comparator(e.key,n.key)||ye(e.Cr,n.Cr)}static pr(e,n){return ye(e.Cr,n.Cr)||ce.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T4{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Fr=1,this.Mr=new xt(wt.mr)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new BV(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Mr=this.Mr.add(new wt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return q.resolve(o)}lookupMutationBatch(e,n){return q.resolve(this.Or(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Nr(r),i=s<0?0:s;return q.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?r0:this.Fr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new wt(n,0),s=new wt(n,Number.POSITIVE_INFINITY),i=[];return this.Mr.forEachInRange([r,s],o=>{const a=this.Or(o.Cr);i.push(a)}),q.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new xt(ye);return n.forEach(s=>{const i=new wt(s,0),o=new wt(s,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([i,o],a=>{r=r.add(a.Cr)})}),q.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ce.isDocumentKey(i)||(i=i.child(""));const o=new wt(new ce(i),0);let a=new xt(ye);return this.Mr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.Cr)),!0)},o),q.resolve(this.Br(a))}Br(e){const n=[];return e.forEach(r=>{const s=this.Or(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){De(this.Lr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return q.forEach(n.mutations,s=>{const i=new wt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,n){const r=new wt(n,0),s=this.Mr.firstAfterOrEqual(r);return q.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}Lr(e,n){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const n=this.Nr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I4{constructor(e){this.kr=e,this.docs=function(){return new Je(ce.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.kr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return q.resolve(r?r.document.mutableCopy():Ht.newInvalidDocument(n))}getEntries(e,n){let r=is();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Ht.newInvalidDocument(s))}),q.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=is();const o=n.path,a=new ce(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||eV(ZF(u),r)<=0||(s.has(u.key)||jf(n,u))&&(i=i.insert(u.key,u.mutableCopy()))}return q.resolve(i)}getAllFromCollectionGroup(e,n,r,s){de()}qr(e,n){return q.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new C4(this)}getSize(e){return q.resolve(this.size)}}class C4 extends x4{constructor(e){super(),this.Ir=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Ir.addEntry(e,s)):this.Ir.removeEntry(r)}),q.waitFor(n)}getFromCache(e,n){return this.Ir.getEntry(e,n)}getAllFromCache(e,n){return this.Ir.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{constructor(e){this.persistence=e,this.Qr=new fo(n=>o0(n),a0),this.lastRemoteSnapshotVersion=he.min(),this.highestTargetId=0,this.$r=0,this.Ur=new f0,this.targetCount=0,this.Kr=xa.Un()}forEachTarget(e,n){return this.Qr.forEach((r,s)=>n(s)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.$r&&(this.$r=n),q.resolve()}zn(e){this.Qr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Kr=new xa(n),this.highestTargetId=n),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,n){return this.zn(n),this.targetCount+=1,q.resolve()}updateTargetData(e,n){return this.zn(n),q.resolve()}removeTargetData(e,n){return this.Qr.delete(n.target),this.Ur.br(n.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Qr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Qr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),q.waitFor(i).next(()=>s)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,n){const r=this.Qr.get(n)||null;return q.resolve(r)}addMatchingKeys(e,n,r){return this.Ur.yr(n,r),q.resolve()}removeMatchingKeys(e,n,r){this.Ur.Sr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),q.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Ur.br(n),q.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Ur.vr(n);return q.resolve(r)}containsKey(e,n){return q.resolve(this.Ur.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e,n){this.Wr={},this.overlays={},this.Gr=new Rf(0),this.zr=!1,this.zr=!0,this.jr=new S4,this.referenceDelegate=e(this),this.Hr=new k4(this),this.indexManager=new h4,this.remoteDocumentCache=function(s){return new I4(s)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new u4(n),this.Yr=new b4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new E4,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Wr[e.toKey()];return r||(r=new T4(n,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,n,r){J("MemoryPersistence","Starting transaction:",e);const s=new A4(this.Gr.next());return this.referenceDelegate.Zr(),r(s).next(i=>this.referenceDelegate.Xr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}ei(e,n){return q.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,n)))}}class A4 extends nV{constructor(e){super(),this.currentSequenceNumber=e}}class p0{constructor(e){this.persistence=e,this.ti=new f0,this.ni=null}static ri(e){return new p0(e)}get ii(){if(this.ni)return this.ni;throw de()}addReference(e,n,r){return this.ti.addReference(r,n),this.ii.delete(r.toString()),q.resolve()}removeReference(e,n,r){return this.ti.removeReference(r,n),this.ii.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,n){return this.ii.add(n.toString()),q.resolve()}removeTarget(e,n){this.ti.br(n.targetId).forEach(s=>this.ii.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.ii.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Zr(){this.ni=new Set}Xr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.ii,r=>{const s=ce.fromPath(r);return this.si(e,s).next(i=>{i||n.removeEntry(s,he.min())})}).next(()=>(this.ni=null,n.apply(e)))}updateLimboDocument(e,n){return this.si(e,n).next(r=>{r?this.ii.delete(n.toString()):this.ii.add(n.toString())})}Jr(e){return 0}si(e,n){return q.or([()=>q.resolve(this.ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.ei(e,n)])}}class Mh{constructor(e,n){this.persistence=e,this.oi=new fo(r=>iV(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=v4(this,n)}static ri(e,n){return new Mh(e,n)}Zr(){}Xr(e){return q.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}nr(e){const n=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}sr(e){let n=0;return this.rr(e,r=>{n++}).next(()=>n)}rr(e,n){return q.forEach(this.oi,(r,s)=>this.ar(e,r,s).next(i=>i?q.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.qr(e,o=>this.ar(e,o,n).next(a=>{a||(r++,i.removeEntry(o,he.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.oi.set(n,e.currentSequenceNumber),q.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.oi.set(r,e.currentSequenceNumber),q.resolve()}removeReference(e,n,r){return this.oi.set(r,e.currentSequenceNumber),q.resolve()}updateLimboDocument(e,n){return this.oi.set(n,e.currentSequenceNumber),q.resolve()}Jr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Vd(e.data.value)),n}ar(e,n,r){return q.or([()=>this.persistence.ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.oi.get(n);return q.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Hi=r,this.Ji=s}static Yi(e,n){let r=Ee(),s=Ee();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new m0(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return TL()?8:rV(Qt())>0?6:4}()}initialize(e,n){this.ns=e,this.indexManager=n,this.Zi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.rs(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ss(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new R4;return this._s(e,n,o).next(a=>{if(i.result=a,this.Xi)return this.us(e,n,o,a.size)})}).next(()=>i.result)}us(e,n,r,s){return r.documentReadCount<this.es?(Ro()<=we.DEBUG&&J("QueryEngine","SDK will not create cache indexes for query:",Po(n),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),q.resolve()):(Ro()<=we.DEBUG&&J("QueryEngine","Query:",Po(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ts*s?(Ro()<=we.DEBUG&&J("QueryEngine","The SDK decides to create cache indexes for query:",Po(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Sr(n))):q.resolve())}rs(e,n){if(Rb(n))return q.resolve(null);let r=Sr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=sy(n,null,"F"),r=Sr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Ee(...i);return this.ns.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.cs(n,a);return this.ls(n,c,o,l.readTime)?this.rs(e,sy(n,null,"F")):this.hs(e,c,n,l)}))})))}ss(e,n,r,s){return Rb(n)||s.isEqual(he.min())?q.resolve(null):this.ns.getDocuments(e,r).next(i=>{const o=this.cs(n,i);return this.ls(n,o,r,s)?q.resolve(null):(Ro()<=we.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Po(n)),this.hs(e,o,n,JF(s,bc)).next(a=>a))})}cs(e,n){let r=new xt(iA(e));return n.forEach((s,i)=>{jf(e,i)&&(r=r.add(i))}),r}ls(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}_s(e,n,r){return Ro()<=we.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",Po(n)),this.ns.getDocumentsMatchingQuery(e,n,ti.min(),r)}hs(e,n,r,s){return this.ns.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g0="LocalStore",N4=3e8;class D4{constructor(e,n,r,s){this.persistence=e,this.Ps=n,this.serializer=s,this.Ts=new Je(ye),this.Is=new fo(i=>o0(i),a0),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new w4(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ts))}}function O4(t,e,n,r){return new D4(t,e,n,r)}async function AA(t,e){const n=pe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.As(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=Ee();for(const c of s){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of i){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Rs:c,removedBatchIds:o,addedBatchIds:a}))})})}function j4(t,e){const n=pe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.ds.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const f=c.batch,p=f.keys();let m=q.resolve();return p.forEach(y=>{m=m.next(()=>u.getEntry(l,y)).next(g=>{const x=c.docVersions.get(y);De(x!==null),g.version.compareTo(x)<0&&(f.applyToRemoteDocument(g,c),g.isValidDocument()&&(g.setReadTime(c.commitVersion),u.addEntry(g)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Ee();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function RA(t){const e=pe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Hr.getLastRemoteSnapshotVersion(n))}function M4(t,e){const n=pe(t),r=e.snapshotVersion;let s=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.ds.newChangeBuffer({trackRemovals:!0});s=n.Ts;const a=[];e.targetChanges.forEach((u,f)=>{const p=s.get(f);if(!p)return;a.push(n.Hr.removeMatchingKeys(i,u.removedDocuments,f).next(()=>n.Hr.addMatchingKeys(i,u.addedDocuments,f)));let m=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(Dt.EMPTY_BYTE_STRING,he.min()).withLastLimboFreeSnapshotVersion(he.min()):u.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(u.resumeToken,r)),s=s.insert(f,m),function(g,x,b){return g.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=N4?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(p,m,u)&&a.push(n.Hr.updateTargetData(i,m))});let l=is(),c=Ee();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,u))}),a.push(L4(i,o,e.documentUpdates).next(u=>{l=u.Vs,c=u.fs})),!r.isEqual(he.min())){const u=n.Hr.getLastRemoteSnapshotVersion(i).next(f=>n.Hr.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(u)}return q.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.Ts=s,i))}function L4(t,e,n){let r=Ee(),s=Ee();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=is();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(he.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):J(g0,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Vs:o,fs:s}})}function F4(t,e){const n=pe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=r0),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function V4(t,e){const n=pe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Hr.getTargetData(r,e).next(i=>i?(s=i,q.resolve(s)):n.Hr.allocateTargetId(r).next(o=>(s=new Rs(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Hr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ts.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(r.targetId,r),n.Is.set(e,r.targetId)),r})}async function cy(t,e,n){const r=pe(t),s=r.Ts.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Ma(o))throw o;J(g0,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ts=r.Ts.remove(e),r.Is.delete(s.target)}function $b(t,e,n){const r=pe(t);let s=he.min(),i=Ee();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const f=pe(l),p=f.Is.get(u);return p!==void 0?q.resolve(f.Ts.get(p)):f.Hr.getTargetData(c,u)}(r,o,Sr(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Ps.getDocumentsMatchingQuery(o,e,n?s:he.min(),n?i:Ee())).next(a=>(U4(r,TV(e),a),{documents:a,gs:i})))}function U4(t,e,n){let r=t.Es.get(e)||he.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Es.set(e,r)}class qb{constructor(){this.activeTargetIds=PV()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class B4{constructor(){this.ho=new qb,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,n,r){this.Po[e]=n}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new qb,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hb="ConnectivityMonitor";class Wb{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){J(Hb,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){J(Hb,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zu=null;function uy(){return Zu===null?Zu=function(){return 268435456+Math.round(2147483648*Math.random())}():Zu++,"0x"+Zu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fm="RestConnection",$4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class q4{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.po=n+"://"+e.host,this.yo=`projects/${r}/databases/${s}`,this.wo=this.databaseId.database===Rh?`project_id=${r}`:`project_id=${r}&database_id=${s}`}So(e,n,r,s,i){const o=uy(),a=this.bo(e,n.toUriEncodedString());J(fm,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(l,s,i),this.vo(e,a,l,r).then(c=>(J(fm,`Received RPC '${e}' ${o}: `,c),c),c=>{throw ma(fm,`RPC '${e}' ${o} failed with error: `,c,"url: ",a,"request:",r),c})}Co(e,n,r,s,i,o){return this.So(e,n,r,s,i)}Do(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Oa}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}bo(e,n){const r=$4[e];return`${this.po}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bt="WebChannelConnection";class W4 extends q4{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,n,r,s){const i=uy();return new Promise((o,a)=>{const l=new Ok;l.setWithCredentials(!0),l.listenOnce(jk.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Fd.NO_ERROR:const u=l.getResponseJson();J(Bt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(u)),o(u);break;case Fd.TIMEOUT:J(Bt,`RPC '${e}' ${i} timed out`),a(new le(K.DEADLINE_EXCEEDED,"Request time out"));break;case Fd.HTTP_ERROR:const f=l.getStatus();if(J(Bt,`RPC '${e}' ${i} failed with status:`,f,"response text:",l.getResponseText()),f>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const m=p?.error;if(m&&m.status&&m.message){const y=function(x){const b=x.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(b)>=0?b:K.UNKNOWN}(m.status);a(new le(y,m.message))}else a(new le(K.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new le(K.UNAVAILABLE,"Connection failed."));break;default:de()}}finally{J(Bt,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);J(Bt,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}Wo(e,n,r){const s=uy(),i=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Fk(),a=Lk(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=i.join("");J(Bt,`Creating RPC '${e}' stream ${s}: ${u}`,l);const f=o.createWebChannel(u,l);let p=!1,m=!1;const y=new H4({Fo:x=>{m?J(Bt,`Not sending because RPC '${e}' stream ${s} is closed:`,x):(p||(J(Bt,`Opening RPC '${e}' stream ${s} transport.`),f.open(),p=!0),J(Bt,`RPC '${e}' stream ${s} sending:`,x),f.send(x))},Mo:()=>f.close()}),g=(x,b,_)=>{x.listen(b,T=>{try{_(T)}catch(k){setTimeout(()=>{throw k},0)}})};return g(f,Pl.EventType.OPEN,()=>{m||(J(Bt,`RPC '${e}' stream ${s} transport opened.`),y.Qo())}),g(f,Pl.EventType.CLOSE,()=>{m||(m=!0,J(Bt,`RPC '${e}' stream ${s} transport closed`),y.Uo())}),g(f,Pl.EventType.ERROR,x=>{m||(m=!0,ma(Bt,`RPC '${e}' stream ${s} transport errored:`,x),y.Uo(new le(K.UNAVAILABLE,"The operation could not be completed")))}),g(f,Pl.EventType.MESSAGE,x=>{var b;if(!m){const _=x.data[0];De(!!_);const T=_,k=T?.error||((b=T[0])===null||b===void 0?void 0:b.error);if(k){J(Bt,`RPC '${e}' stream ${s} received error:`,k);const N=k.status;let R=function(C){const A=ct[C];if(A!==void 0)return yA(A)}(N),S=k.message;R===void 0&&(R=K.INTERNAL,S="Unknown error status: "+N+" with message "+k.message),m=!0,y.Uo(new le(R,S)),f.close()}else J(Bt,`RPC '${e}' stream ${s} received:`,_),y.Ko(_)}}),g(a,Mk.STAT_EVENT,x=>{x.stat===Jg.PROXY?J(Bt,`RPC '${e}' stream ${s} detected buffering proxy`):x.stat===Jg.NOPROXY&&J(Bt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{y.$o()},0),y}}function pm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vf(t){return new YV(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Ti=e,this.timerId=n,this.Go=r,this.zo=s,this.jo=i,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const n=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),s=Math.max(0,n-r);s>0&&J("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ho} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,s,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb="PersistentStream";class NA{constructor(e,n,r,s,i,o,a,l){this.Ti=e,this.n_=r,this.r_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new PA(e,n)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,n){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():n&&n.code===K.RESOURCE_EXHAUSTED?(ss(n.toString()),ss("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):n&&n.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(n)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),n=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.i_===n&&this.V_(r,s)},r=>{e(()=>{const s=new le(K.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(s)})})}V_(e,n){const r=this.R_(this.i_);this.stream=this.f_(e,n),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(s=>{r(()=>this.m_(s))}),this.stream.onMessage(s=>{r(()=>++this.__==1?this.g_(s):this.onNext(s))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return J(Kb,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return n=>{this.Ti.enqueueAndForget(()=>this.i_===e?n():(J(Kb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class K4 extends NA{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}f_(e,n){return this.connection.Wo("Listen",e,n)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const n=ZV(this.serializer,e),r=function(i){if(!("targetChange"in i))return he.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?he.min():o.readTime?Tr(o.readTime):he.min()}(e);return this.listener.p_(n,r)}y_(e){const n={};n.database=ly(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=ry(l)?{documents:n4(i,l)}:{query:r4(i,l).ht},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=_A(i,o.resumeToken);const c=iy(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(he.min())>0){a.readTime=jh(i,o.snapshotVersion.toTimestamp());const c=iy(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=i4(this.serializer,e);r&&(n.labels=r),this.I_(n)}w_(e){const n={};n.database=ly(this.serializer),n.removeTarget=e,this.I_(n)}}class G4 extends NA{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,n){return this.connection.Wo("Write",e,n)}g_(e){return De(!!e.streamToken),this.lastStreamToken=e.streamToken,De(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){De(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const n=t4(e.writeResults,e.commitTime),r=Tr(e.commitTime);return this.listener.v_(r,n)}C_(){const e={};e.database=ly(this.serializer),this.I_(e)}b_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>e4(this.serializer,r))};this.I_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q4{}class Y4 extends Q4{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.F_=!1}M_(){if(this.F_)throw new le(K.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.So(e,oy(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new le(K.UNKNOWN,i.toString())})}Co(e,n,r,s,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Co(e,oy(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new le(K.UNKNOWN,o.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class X4{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(ss(n),this.N_=!1):J("OnlineStateTracker",n)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zi="RemoteStore";class J4{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=i,this.z_.To(o=>{r.enqueueAndForget(async()=>{mo(this)&&(J(Zi,"Restarting streams for network reachability change."),await async function(l){const c=pe(l);c.W_.add(4),await Zc(c),c.j_.set("Unknown"),c.W_.delete(4),await Uf(c)}(this))})}),this.j_=new X4(r,s)}}async function Uf(t){if(mo(t))for(const e of t.G_)await e(!0)}async function Zc(t){for(const e of t.G_)await e(!1)}function DA(t,e){const n=pe(t);n.K_.has(e.targetId)||(n.K_.set(e.targetId,e),_0(n)?x0(n):La(n).c_()&&v0(n,e))}function y0(t,e){const n=pe(t),r=La(n);n.K_.delete(e),r.c_()&&OA(n,e),n.K_.size===0&&(r.c_()?r.P_():mo(n)&&n.j_.set("Unknown"))}function v0(t,e){if(t.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(he.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}La(t).y_(e)}function OA(t,e){t.H_.Ne(e),La(t).w_(e)}function x0(t){t.H_=new WV({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.K_.get(e)||null,it:()=>t.datastore.serializer.databaseId}),La(t).start(),t.j_.B_()}function _0(t){return mo(t)&&!La(t).u_()&&t.K_.size>0}function mo(t){return pe(t).W_.size===0}function jA(t){t.H_=void 0}async function Z4(t){t.j_.set("Online")}async function eU(t){t.K_.forEach((e,n)=>{v0(t,e)})}async function tU(t,e){jA(t),_0(t)?(t.j_.q_(e),x0(t)):t.j_.set("Unknown")}async function nU(t,e,n){if(t.j_.set("Online"),e instanceof xA&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.K_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.K_.delete(a),s.H_.removeTarget(a))}(t,e)}catch(r){J(Zi,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Lh(t,r)}else if(e instanceof zd?t.H_.We(e):e instanceof vA?t.H_.Ze(e):t.H_.je(e),!n.isEqual(he.min()))try{const r=await RA(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.H_.ot(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=i.K_.get(c);u&&i.K_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=i.K_.get(l);if(!u)return;i.K_.set(l,u.withResumeToken(Dt.EMPTY_BYTE_STRING,u.snapshotVersion)),OA(i,l);const f=new Rs(u.target,l,c,u.sequenceNumber);v0(i,f)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){J(Zi,"Failed to raise snapshot:",r),await Lh(t,r)}}async function Lh(t,e,n){if(!Ma(e))throw e;t.W_.add(1),await Zc(t),t.j_.set("Offline"),n||(n=()=>RA(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{J(Zi,"Retrying IndexedDB access"),await n(),t.W_.delete(1),await Uf(t)})}function MA(t,e){return e().catch(n=>Lh(t,n,e))}async function Bf(t){const e=pe(t),n=ii(e);let r=e.U_.length>0?e.U_[e.U_.length-1].batchId:r0;for(;rU(e);)try{const s=await F4(e.localStore,r);if(s===null){e.U_.length===0&&n.P_();break}r=s.batchId,sU(e,s)}catch(s){await Lh(e,s)}LA(e)&&FA(e)}function rU(t){return mo(t)&&t.U_.length<10}function sU(t,e){t.U_.push(e);const n=ii(t);n.c_()&&n.S_&&n.b_(e.mutations)}function LA(t){return mo(t)&&!ii(t).u_()&&t.U_.length>0}function FA(t){ii(t).start()}async function iU(t){ii(t).C_()}async function oU(t){const e=ii(t);for(const n of t.U_)e.b_(n.mutations)}async function aU(t,e,n){const r=t.U_.shift(),s=u0.from(r,e,n);await MA(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Bf(t)}async function lU(t,e){e&&ii(t).S_&&await async function(r,s){if(function(o){return qV(o)&&o!==K.ABORTED}(s.code)){const i=r.U_.shift();ii(r).h_(),await MA(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Bf(r)}}(t,e),LA(t)&&FA(t)}async function Gb(t,e){const n=pe(t);n.asyncQueue.verifyOperationInProgress(),J(Zi,"RemoteStore received new credentials");const r=mo(n);n.W_.add(3),await Zc(n),r&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.W_.delete(3),await Uf(n)}async function cU(t,e){const n=pe(t);e?(n.W_.delete(2),await Uf(n)):e||(n.W_.add(2),await Zc(n),n.j_.set("Unknown"))}function La(t){return t.J_||(t.J_=function(n,r,s){const i=pe(n);return i.M_(),new K4(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{xo:Z4.bind(null,t),No:eU.bind(null,t),Lo:tU.bind(null,t),p_:nU.bind(null,t)}),t.G_.push(async e=>{e?(t.J_.h_(),_0(t)?x0(t):t.j_.set("Unknown")):(await t.J_.stop(),jA(t))})),t.J_}function ii(t){return t.Y_||(t.Y_=function(n,r,s){const i=pe(n);return i.M_(),new G4(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{xo:()=>Promise.resolve(),No:iU.bind(null,t),Lo:lU.bind(null,t),D_:oU.bind(null,t),v_:aU.bind(null,t)}),t.G_.push(async e=>{e?(t.Y_.h_(),await Bf(t)):(await t.Y_.stop(),t.U_.length>0&&(J(Zi,`Stopping write stream with ${t.U_.length} pending writes`),t.U_=[]))})),t.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Qs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new w0(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function b0(t,e){if(ss("AsyncQueue",`${e}: ${t}`),Ma(t))return new le(K.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{static emptySet(e){return new Zo(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ce.comparator(n.key,r.key):(n,r)=>ce.comparator(n.key,r.key),this.keyedMap=Nl(),this.sortedSet=new Je(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Zo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Zo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(){this.Z_=new Je(ce.comparator)}track(e){const n=e.doc.key,r=this.Z_.get(n);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(n,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(n):e.type===1&&r.type===2?this.Z_=this.Z_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):de():this.Z_=this.Z_.insert(n,e)}X_(){const e=[];return this.Z_.inorderTraversal((n,r)=>{e.push(r)}),e}}class _a{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new _a(e,n,Zo.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Of(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uU{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class dU{constructor(){this.queries=Yb(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(n,r){const s=pe(n),i=s.queries;s.queries=Yb(),i.forEach((o,a)=>{for(const l of a.ta)l.onError(r)})})(this,new le(K.ABORTED,"Firestore shutting down"))}}function Yb(){return new fo(t=>sA(t),Of)}async function hU(t,e){const n=pe(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.na()&&e.ra()&&(r=2):(i=new uU,r=e.ra()?0:1);try{switch(r){case 0:i.ea=await n.onListen(s,!0);break;case 1:i.ea=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=b0(o,`Initialization of query '${Po(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.ta.push(e),e.sa(n.onlineState),i.ea&&e.oa(i.ea)&&E0(n)}async function fU(t,e){const n=pe(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.ta.indexOf(e);o>=0&&(i.ta.splice(o,1),i.ta.length===0?s=e.ra()?0:1:!i.na()&&e.ra()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function pU(t,e){const n=pe(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.ta)a.oa(s)&&(r=!0);o.ea=s}}r&&E0(n)}function mU(t,e,n){const r=pe(t),s=r.queries.get(e);if(s)for(const i of s.ta)i.onError(n);r.queries.delete(e)}function E0(t){t.ia.forEach(e=>{e.next()})}var dy,Xb;(Xb=dy||(dy={}))._a="default",Xb.Cache="cache";class gU{constructor(e,n,r){this.query=e,this.aa=n,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new _a(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ua?this.la(e)&&(this.aa.next(e),n=!0):this.ha(e,this.onlineState)&&(this.Pa(e),n=!0),this.ca=e,n}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let n=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),n=!0),n}ha(e,n){if(!e.fromCache||!this.ra())return!0;const r=n!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}la(e){if(e.docChanges.length>0)return!0;const n=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Pa(e){e=_a.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==dy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e){this.key=e}}class UA{constructor(e){this.key=e}}class yU{constructor(e,n){this.query=e,this.fa=n,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Ee(),this.mutatedKeys=Ee(),this.ya=iA(e),this.wa=new Zo(this.ya)}get Sa(){return this.fa}ba(e,n){const r=n?n.Da:new Qb,s=n?n.wa:this.wa;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((u,f)=>{const p=s.get(u),m=jf(this.query,f)?f:null,y=!!p&&this.mutatedKeys.has(p.key),g=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let x=!1;p&&m?p.data.isEqual(m.data)?y!==g&&(r.track({type:3,doc:m}),x=!0):this.va(p,m)||(r.track({type:2,doc:m}),x=!0,(l&&this.ya(m,l)>0||c&&this.ya(m,c)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),x=!0):p&&!m&&(r.track({type:1,doc:p}),x=!0,(l||c)&&(a=!0)),x&&(m?(o=o.add(m),i=g?i.add(u):i.delete(u)):(o=o.delete(u),i=i.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),i=i.delete(u.key),r.track({type:1,doc:u})}return{wa:o,Da:r,ls:a,mutatedKeys:i}}va(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const o=e.Da.X_();o.sort((u,f)=>function(m,y){const g=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return de()}};return g(m)-g(y)}(u.type,f.type)||this.ya(u.doc,f.doc)),this.Ca(r),s=s!=null&&s;const a=n&&!s?this.Fa():[],l=this.pa.size===0&&this.current&&!s?1:0,c=l!==this.ga;return this.ga=l,o.length!==0||c?{snapshot:new _a(this.query,e.wa,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:a}:{Ma:a}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new Qb,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(n=>this.fa=this.fa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.fa=this.fa.delete(n)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Ee(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const n=[];return e.forEach(r=>{this.pa.has(r)||n.push(new UA(r))}),this.pa.forEach(r=>{e.has(r)||n.push(new VA(r))}),n}Oa(e){this.fa=e.gs,this.pa=Ee();const n=this.ba(e.documents);return this.applyChanges(n,!0)}Na(){return _a.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const S0="SyncEngine";class vU{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class xU{constructor(e){this.key=e,this.Ba=!1}}class _U{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.La={},this.ka=new fo(a=>sA(a),Of),this.qa=new Map,this.Qa=new Set,this.$a=new Je(ce.comparator),this.Ua=new Map,this.Ka=new f0,this.Wa={},this.Ga=new Map,this.za=xa.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function wU(t,e,n=!0){const r=WA(t);let s;const i=r.ka.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Na()):s=await BA(r,e,n,!0),s}async function bU(t,e){const n=WA(t);await BA(n,e,!0,!1)}async function BA(t,e,n,r){const s=await V4(t.localStore,Sr(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await EU(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&DA(t.remoteStore,s),a}async function EU(t,e,n,r,s){t.Ha=(f,p,m)=>async function(g,x,b,_){let T=x.view.ba(b);T.ls&&(T=await $b(g.localStore,x.query,!1).then(({documents:S})=>x.view.ba(S,T)));const k=_&&_.targetChanges.get(x.targetId),N=_&&_.targetMismatches.get(x.targetId)!=null,R=x.view.applyChanges(T,g.isPrimaryClient,k,N);return Zb(g,x.targetId,R.Ma),R.snapshot}(t,f,p,m);const i=await $b(t.localStore,e,!0),o=new yU(e,i.gs),a=o.ba(i.documents),l=Jc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);Zb(t,n,c.Ma);const u=new vU(e,n,o);return t.ka.set(e,u),t.qa.has(n)?t.qa.get(n).push(e):t.qa.set(n,[e]),c.snapshot}async function SU(t,e,n){const r=pe(t),s=r.ka.get(e),i=r.qa.get(s.targetId);if(i.length>1)return r.qa.set(s.targetId,i.filter(o=>!Of(o,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await cy(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&y0(r.remoteStore,s.targetId),hy(r,s.targetId)}).catch(ja)):(hy(r,s.targetId),await cy(r.localStore,s.targetId,!0))}async function TU(t,e){const n=pe(t),r=n.ka.get(e),s=n.qa.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),y0(n.remoteStore,r.targetId))}async function IU(t,e,n){const r=DU(t);try{const s=await function(o,a){const l=pe(o),c=vt.now(),u=a.reduce((m,y)=>m.add(y.key),Ee());let f,p;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let y=is(),g=Ee();return l.ds.getEntries(m,u).next(x=>{y=x,y.forEach((b,_)=>{_.isValidDocument()||(g=g.add(b))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,y)).next(x=>{f=x;const b=[];for(const _ of a){const T=VV(_,f.get(_.key).overlayedDocument);T!=null&&b.push(new po(_.key,T,Xk(T.value.mapValue),Xr.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,b,a)}).next(x=>{p=x;const b=x.applyToLocalDocumentSet(f,g);return l.documentOverlayCache.saveOverlays(m,x.batchId,b)})}).then(()=>({batchId:p.batchId,changes:aA(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Wa[o.currentUser.toKey()];c||(c=new Je(ye)),c=c.insert(a,l),o.Wa[o.currentUser.toKey()]=c}(r,s.batchId,n),await eu(r,s.changes),await Bf(r.remoteStore)}catch(s){const i=b0(s,"Failed to persist write");n.reject(i)}}async function zA(t,e){const n=pe(t);try{const r=await M4(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Ua.get(i);o&&(De(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.Ba=!0:s.modifiedDocuments.size>0?De(o.Ba):s.removedDocuments.size>0&&(De(o.Ba),o.Ba=!1))}),await eu(n,r,e)}catch(r){await ja(r)}}function Jb(t,e,n){const r=pe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.ka.forEach((i,o)=>{const a=o.view.sa(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=pe(o);l.onlineState=a;let c=!1;l.queries.forEach((u,f)=>{for(const p of f.ta)p.sa(a)&&(c=!0)}),c&&E0(l)}(r.eventManager,e),s.length&&r.La.p_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function CU(t,e,n){const r=pe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Ua.get(e),i=s&&s.key;if(i){let o=new Je(ce.comparator);o=o.insert(i,Ht.newNoDocument(i,he.min()));const a=Ee().add(i),l=new Ff(he.min(),new Map,new Je(ye),o,a);await zA(r,l),r.$a=r.$a.remove(i),r.Ua.delete(e),T0(r)}else await cy(r.localStore,e,!1).then(()=>hy(r,e,n)).catch(ja)}async function kU(t,e){const n=pe(t),r=e.batch.batchId;try{const s=await j4(n.localStore,e);qA(n,r,null),$A(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await eu(n,s)}catch(s){await ja(s)}}async function AU(t,e,n){const r=pe(t);try{const s=await function(o,a){const l=pe(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(f=>(De(f!==null),u=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);qA(r,e,n),$A(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await eu(r,s)}catch(s){await ja(s)}}function $A(t,e){(t.Ga.get(e)||[]).forEach(n=>{n.resolve()}),t.Ga.delete(e)}function qA(t,e,n){const r=pe(t);let s=r.Wa[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Wa[r.currentUser.toKey()]=s}}function hy(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.qa.get(e))t.ka.delete(r),n&&t.La.Ja(r,n);t.qa.delete(e),t.isPrimaryClient&&t.Ka.br(e).forEach(r=>{t.Ka.containsKey(r)||HA(t,r)})}function HA(t,e){t.Qa.delete(e.path.canonicalString());const n=t.$a.get(e);n!==null&&(y0(t.remoteStore,n),t.$a=t.$a.remove(e),t.Ua.delete(n),T0(t))}function Zb(t,e,n){for(const r of n)r instanceof VA?(t.Ka.addReference(r.key,e),RU(t,r)):r instanceof UA?(J(S0,"Document no longer in limbo: "+r.key),t.Ka.removeReference(r.key,e),t.Ka.containsKey(r.key)||HA(t,r.key)):de()}function RU(t,e){const n=e.key,r=n.path.canonicalString();t.$a.get(n)||t.Qa.has(r)||(J(S0,"New document in limbo: "+n),t.Qa.add(r),T0(t))}function T0(t){for(;t.Qa.size>0&&t.$a.size<t.maxConcurrentLimboResolutions;){const e=t.Qa.values().next().value;t.Qa.delete(e);const n=new ce(tt.fromString(e)),r=t.za.next();t.Ua.set(r,new xU(n)),t.$a=t.$a.insert(n,r),DA(t.remoteStore,new Rs(Sr(l0(n.path)),r,"TargetPurposeLimboResolution",Rf.ae))}}async function eu(t,e,n){const r=pe(t),s=[],i=[],o=[];r.ka.isEmpty()||(r.ka.forEach((a,l)=>{o.push(r.Ha(l,e,n).then(c=>{var u;if((c||n)&&r.isPrimaryClient){const f=c?!c.fromCache:(u=n?.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(c){s.push(c);const f=m0.Yi(l.targetId,c);i.push(f)}}))}),await Promise.all(o),r.La.p_(s),await async function(l,c){const u=pe(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>q.forEach(c,p=>q.forEach(p.Hi,m=>u.persistence.referenceDelegate.addReference(f,p.targetId,m)).next(()=>q.forEach(p.Ji,m=>u.persistence.referenceDelegate.removeReference(f,p.targetId,m)))))}catch(f){if(!Ma(f))throw f;J(g0,"Failed to update sequence numbers: "+f)}for(const f of c){const p=f.targetId;if(!f.fromCache){const m=u.Ts.get(p),y=m.snapshotVersion,g=m.withLastLimboFreeSnapshotVersion(y);u.Ts=u.Ts.insert(p,g)}}}(r.localStore,i))}async function PU(t,e){const n=pe(t);if(!n.currentUser.isEqual(e)){J(S0,"User change. New user:",e.toKey());const r=await AA(n.localStore,e);n.currentUser=e,function(i,o){i.Ga.forEach(a=>{a.forEach(l=>{l.reject(new le(K.CANCELLED,o))})}),i.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await eu(n,r.Rs)}}function NU(t,e){const n=pe(t),r=n.Ua.get(e);if(r&&r.Ba)return Ee().add(r.key);{let s=Ee();const i=n.qa.get(e);if(!i)return s;for(const o of i){const a=n.ka.get(o);s=s.unionWith(a.view.Sa)}return s}}function WA(t){const e=pe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=zA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=NU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=CU.bind(null,e),e.La.p_=pU.bind(null,e.eventManager),e.La.Ja=mU.bind(null,e.eventManager),e}function DU(t){const e=pe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=kU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=AU.bind(null,e),e}class Fh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Vf(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,n){return null}nu(e,n){return null}eu(e){return O4(this.persistence,new P4,e.initialUser,this.serializer)}Xa(e){return new kA(p0.ri,this.serializer)}Za(e){return new B4}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Fh.provider={build:()=>new Fh};class OU extends Fh{constructor(e){super(),this.cacheSizeBytes=e}tu(e,n){De(this.persistence.referenceDelegate instanceof Mh);const r=this.persistence.referenceDelegate.garbageCollector;return new g4(r,e.asyncQueue,n)}Xa(e){const n=this.cacheSizeBytes!==void 0?sn.withCacheSize(this.cacheSizeBytes):sn.DEFAULT;return new kA(r=>Mh.ri(r,n),this.serializer)}}class fy{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Jb(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=PU.bind(null,this.syncEngine),await cU(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new dU}()}createDatastore(e){const n=Vf(e.databaseInfo.databaseId),r=function(i){return new W4(i)}(e.databaseInfo);return function(i,o,a,l){return new Y4(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new J4(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Jb(this.syncEngine,n,0),function(){return Wb.D()?new Wb:new z4}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,u){const f=new _U(s,i,o,a,l,c);return u&&(f.ja=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=pe(s);J(Zi,"RemoteStore shutting down."),i.W_.add(5),await Zc(i),i.z_.shutdown(),i.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}fy.provider={build:()=>new fy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jU{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):ss("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oi="FirestoreClient";class MU{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=$t.UNAUTHENTICATED,this.clientId=Bk.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{J(oi,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(J(oi,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Qs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=b0(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function mm(t,e){t.asyncQueue.verifyOperationInProgress(),J(oi,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await AA(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function eE(t,e){t.asyncQueue.verifyOperationInProgress();const n=await LU(t);J(oi,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Gb(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Gb(e.remoteStore,s)),t._onlineComponents=e}async function LU(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){J(oi,"Using user provided OfflineComponentProvider");try{await mm(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===K.FAILED_PRECONDITION||s.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;ma("Error using user provided cache. Falling back to memory cache: "+n),await mm(t,new Fh)}}else J(oi,"Using default OfflineComponentProvider"),await mm(t,new OU(void 0));return t._offlineComponents}async function KA(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(J(oi,"Using user provided OnlineComponentProvider"),await eE(t,t._uninitializedComponentsProvider._online)):(J(oi,"Using default OnlineComponentProvider"),await eE(t,new fy))),t._onlineComponents}function FU(t){return KA(t).then(e=>e.syncEngine)}async function VU(t){const e=await KA(t),n=e.eventManager;return n.onListen=wU.bind(null,e.syncEngine),n.onUnlisten=SU.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=bU.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=TU.bind(null,e.syncEngine),n}function UU(t,e,n={}){const r=new Qs;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const u=new jU({next:p=>{u.su(),o.enqueueAndForget(()=>fU(i,f));const m=p.docs.has(a);!m&&p.fromCache?c.reject(new le(K.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&l&&l.source==="server"?c.reject(new le(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new gU(l0(a.path),u,{includeMetadataChanges:!0,Ta:!0});return hU(i,f)}(await VU(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BU(t,e,n){if(!n)throw new le(K.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function zU(t,e,n,r){if(e===!0&&r===!0)throw new le(K.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function nE(t){if(!ce.isDocumentKey(t))throw new le(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function I0(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":de()}function Ac(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new le(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=I0(t);throw new le(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA="firestore.googleapis.com",rE=!0;class sE{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new le(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=QA,this.ssl=rE}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:rE;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=CA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<p4)throw new le(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}zU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=GA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new le(K.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new le(K.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new le(K.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class C0{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new le(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new $F;switch(r.type){case"firstParty":return new KF(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new le(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=tE.get(n);r&&(J("ComponentProvider","Removing Datastore"),tE.delete(n),r.terminate())}(this),Promise.resolve()}}function $U(t,e,n,r={}){var s;const i=(t=Ac(t,C0))._getSettings(),o=Object.assign(Object.assign({},i),{emulatorOptions:t._getEmulatorOptions()}),a=`${e}:${n}`;i.host!==QA&&i.host!==a&&ma("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=Object.assign(Object.assign({},i),{host:a,ssl:!1,emulatorOptions:r});if(!Yi(l,o)&&(t._setSettings(l),r.mockUserToken)){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=$t.MOCK_USER;else{c=vL(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new le(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new $t(f)}t._authCredentials=new qF(new Vk(c,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qU=class YA{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new YA(this.firestore,e,this._query)}};class Fn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Fn(this.firestore,e,this._key)}}class Rc extends qU{constructor(e,n,r){super(e,n,l0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Fn(this.firestore,null,new ce(e))}withConverter(e){return new Rc(this.firestore,e,this._path)}}function XA(t,e,...n){if(t=Nt(t),arguments.length===1&&(e=Bk.newId()),BU("doc","path",e),t instanceof C0){const r=tt.fromString(e,...n);return nE(r),new Fn(t,null,new ce(r))}{if(!(t instanceof Fn||t instanceof Rc))throw new le(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(tt.fromString(e,...n));return nE(r),new Fn(t.firestore,t instanceof Rc?t.converter:null,new ce(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE="AsyncQueue";class oE{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new PA(this,"async_queue_retry"),this.Su=()=>{const r=pm();r&&J(iE,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.bu=e;const n=pm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const n=pm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const n=new Qs;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Ma(e))throw e;J(iE,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const n=this.bu.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw ss("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.pu=!1,r))));return this.bu=n,n}enqueueAfterDelay(e,n,r){this.Du(),this.wu.indexOf(e)>-1&&(n=0);const s=w0.createAndSchedule(this,e,n,r,i=>this.Fu(i));return this.fu.push(s),s}Du(){this.gu&&de()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const n of this.fu)if(n.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.fu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const n=this.fu.indexOf(e);this.fu.splice(n,1)}}class k0 extends C0{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new oE,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new oE(e),this._firestoreClient=void 0,await e}}}function JA(t,e){const n=typeof t=="object"?t:Af(),r=typeof t=="string"?t:Rh,s=kf(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Ik("firestore");i&&$U(s,...i)}return s}function ZA(t){if(t._terminated)throw new le(K.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||HU(t),t._firestoreClient}function HU(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,c,u){return new lV(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,GA(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new MU(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wa(Dt.fromBase64String(e))}catch(n){throw new le(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new wa(Dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new le(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new At(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new le(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new le(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ye(this._lat,e._lat)||ye(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WU=/^__.*__$/;class KU{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new po(e,this.data,this.fieldMask,n,this.fieldTransforms):new Xc(e,this.data,n,this.fieldTransforms)}}function eR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw de()}}class D0{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Bu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new D0(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.ku({path:r,Qu:!1});return s.$u(e),s}Uu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.ku({path:r,Qu:!1});return s.Bu(),s}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Vh(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(eR(this.Lu)&&WU.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class GU{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Vf(e)}ju(e,n,r,s=!1){return new D0({Lu:e,methodName:n,zu:r,path:At.emptyPath(),Qu:!1,Gu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function QU(t){const e=t._freezeSettings(),n=Vf(t._databaseId);return new GU(t._databaseId,!!e.ignoreUndefinedProperties,n)}function YU(t,e,n,r,s,i={}){const o=t.ju(i.merge||i.mergeFields?2:0,e,n,s);sR("Data must be an object, but it was:",o,r);const a=nR(r,o);let l,c;if(i.merge)l=new Yn(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const u=[];for(const f of i.mergeFields){const p=XU(e,f,n);if(!o.contains(p))throw new le(K.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);ZU(u,p)||u.push(p)}l=new Yn(u),c=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=o.fieldTransforms;return new KU(new On(a),l,c)}class O0 extends R0{_toFieldTransform(e){return new jV(e.path,new Ic)}isEqual(e){return e instanceof O0}}function tR(t,e){if(rR(t=Nt(t)))return sR("Unsupported field value:",e,t),nR(t,e);if(t instanceof R0)return function(r,s){if(!eR(s.Lu))throw s.Wu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Wu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=tR(a,s.Ku(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Nt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return NV(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=vt.fromDate(r);return{timestampValue:jh(s.serializer,i)}}if(r instanceof vt){const i=new vt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:jh(s.serializer,i)}}if(r instanceof P0)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof wa)return{bytesValue:_A(s.serializer,r._byteString)};if(r instanceof Fn){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Wu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:h0(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof N0)return function(o,a){return{mapValue:{fields:{[Qk]:{stringValue:Yk},[Ph]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Wu("VectorValues must only contain numeric values.");return c0(a.serializer,c)})}}}}}}(r,s);throw s.Wu(`Unsupported field value: ${I0(r)}`)}(t,e)}function nR(t,e){const n={};return $k(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ho(t,(r,s)=>{const i=tR(s,e.qu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function rR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof vt||t instanceof P0||t instanceof wa||t instanceof Fn||t instanceof R0||t instanceof N0)}function sR(t,e,n){if(!rR(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=I0(n);throw r==="an object"?e.Wu(t+" a custom object"):e.Wu(t+" "+r)}}function XU(t,e,n){if((e=Nt(e))instanceof A0)return e._internalPath;if(typeof e=="string")return iR(t,e);throw Vh("Field path arguments must be of type string or ",t,!1,void 0,n)}const JU=new RegExp("[~\\*/\\[\\]]");function iR(t,e,n){if(e.search(JU)>=0)throw Vh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new A0(...e.split("."))._internalPath}catch{throw Vh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Vh(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new le(K.INVALID_ARGUMENT,a+t+l)}function ZU(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Fn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new e5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(aR("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class e5 extends oR{data(){return super.data()}}function aR(t,e){return typeof e=="string"?iR(t,e):e instanceof A0?e._internalPath:e._delegate._internalPath}class t5{convertValue(e,n="none"){switch(si(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ri(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw de()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ho(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[Ph].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>nt(o.doubleValue));return new N0(i)}convertGeoPoint(e){return new P0(nt(e.latitude),nt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Nf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ec(e));default:return null}}convertTimestamp(e){const n=ni(e);return new vt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=tt.fromString(e);De(IA(r));const s=new Sc(r.get(1),r.get(3)),i=new ce(r.popFirst(5));return s.isEqual(n)||ss(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n5(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r5{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class lR extends oR{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new s5(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(aR("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class s5 extends lR{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i5(t){t=Ac(t,Fn);const e=Ac(t.firestore,k0);return UU(ZA(e),t._key).then(n=>c5(e,t,n))}class o5 extends t5{constructor(e){super(),this.firestore=e}convertBytes(e){return new wa(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Fn(this.firestore,null,n)}}function a5(t,e,n){t=Ac(t,Fn);const r=Ac(t.firestore,k0),s=n5(t.converter,e);return l5(r,[YU(QU(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Xr.none())])}function l5(t,e){return function(r,s){const i=new Qs;return r.asyncQueue.enqueueAndForget(async()=>IU(await FU(r),s,i)),i.promise}(ZA(t),e)}function c5(t,e,n){const r=n.docs.get(e._key),s=new o5(t);return new lR(t,s,e._key,r,new r5(n.hasPendingWrites,n.fromCache),e.converter)}function aE(){return new O0("serverTimestamp")}(function(e,n=!0){(function(s){Oa=s})(Da),Xi(new ei("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new k0(new HF(r.getProvider("auth-internal")),new GF(o,r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new le(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Sc(c.options.projectId,u)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Er(fb,pb,e),Er(fb,pb,"esm2017")})();var u5="firebase",d5="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Er(u5,d5,"app");var _r=function(){return _r=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_r.apply(this,arguments)};function tu(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function h5(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}function cR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const f5=cR,uR=new Qc("auth","Firebase",cR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uh=new Zv("@firebase/auth");function p5(t,...e){Uh.logLevel<=we.WARN&&Uh.warn(`Auth (${Da}): ${t}`,...e)}function $d(t,...e){Uh.logLevel<=we.ERROR&&Uh.error(`Auth (${Da}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rr(t,...e){throw j0(t,...e)}function Ir(t,...e){return j0(t,...e)}function dR(t,e,n){const r=Object.assign(Object.assign({},f5()),{[e]:n});return new Qc("auth","Firebase",r).create(e,{appName:t.name})}function Jr(t){return dR(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function j0(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return uR.create(t,...e)}function ue(t,e,...n){if(!t)throw j0(e,...n)}function Gr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw $d(e),new Error(e)}function os(t,e){t||Gr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function py(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function m5(){return lE()==="http:"||lE()==="https:"}function lE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g5(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(m5()||bL()||"connection"in navigator)?navigator.onLine:!0}function y5(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e,n){this.shortDelay=e,this.longDelay=n,os(n>e,"Short delay should be less than long delay!"),this.isMobile=xL()||EL()}get(){return g5()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M0(t,e){os(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Gr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Gr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Gr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v5={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x5=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],_5=new nu(3e4,6e4);function pi(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function us(t,e,n,r,s={}){return fR(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Yc(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},i);return wL()||(c.referrerPolicy="no-referrer"),hR.fetch()(await pR(t,t.config.apiHost,n,a),c)})}async function fR(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},v5),e);try{const s=new b5(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw ed(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw ed(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw ed(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw ed(t,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw dR(t,u,c);rr(t,u)}}catch(s){if(s instanceof Dr)throw s;rr(t,"network-request-failed",{message:String(s)})}}async function ru(t,e,n,r,s={}){const i=await us(t,e,n,r,s);return"mfaPendingCredential"in i&&rr(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function pR(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?M0(t.config,s):`${t.config.apiScheme}://${s}`;return x5.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function w5(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class b5{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ir(this.auth,"network-request-failed")),_5.get())})}}function ed(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Ir(t,e,r);return s.customData._tokenResponse=n,s}function cE(t){return t!==void 0&&t.enterprise!==void 0}class E5{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return w5(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function S5(t,e){return us(t,"GET","/v2/recaptchaConfig",pi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T5(t,e){return us(t,"POST","/v1/accounts:delete",e)}async function Bh(t,e){return us(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function I5(t,e=!1){const n=Nt(t),r=await n.getIdToken(e),s=L0(r);ue(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i?.sign_in_provider;return{claims:s,token:r,authTime:Xl(gm(s.auth_time)),issuedAtTime:Xl(gm(s.iat)),expirationTime:Xl(gm(s.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function gm(t){return Number(t)*1e3}function L0(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return $d("JWT malformed, contained fewer than 3 sections"),null;try{const s=Sk(n);return s?JSON.parse(s):($d("Failed to decode base64 JWT payload"),null)}catch(s){return $d("Caught error parsing JWT payload as JSON",s?.toString()),null}}function uE(t){const e=L0(t);return ue(e,"internal-error"),ue(typeof e.exp<"u","internal-error"),ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ba(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Dr&&C5(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function C5({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k5{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xl(this.lastLoginAt),this.creationTime=Xl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zh(t){var e;const n=t.auth,r=await t.getIdToken(),s=await ba(t,Bh(n,{idToken:r}));ue(s?.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?mR(i.providerUserInfo):[],a=R5(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!a?.length,u=l?c:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new my(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,f)}async function A5(t){const e=Nt(t);await zh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function R5(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function mR(t){return t.map(e=>{var{providerId:n}=e,r=tu(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P5(t,e){const n=await fR(t,{},async()=>{const r=Yc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await pR(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",hR.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function N5(t,e){return us(t,"POST","/v2/accounts:revokeToken",pi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ue(e.idToken,"internal-error"),ue(typeof e.idToken<"u","internal-error"),ue(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):uE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ue(e.length!==0,"internal-error");const n=uE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await P5(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new ea;return r&&(ue(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ue(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ue(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ea,this.toJSON())}_performRefresh(){return Gr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ms(t,e){ue(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Xn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=tu(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new k5(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new my(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await ba(this,this.stsTokenManager.getToken(this.auth,e));return ue(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return I5(this,e)}reload(){return A5(this)}_assign(e){this!==e&&(ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Xn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await zh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_n(this.auth.app))return Promise.reject(Jr(this.auth));const e=await this.getIdToken();return await ba(this,T5(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,c,u;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(s=n.email)!==null&&s!==void 0?s:void 0,m=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,y=(o=n.photoURL)!==null&&o!==void 0?o:void 0,g=(a=n.tenantId)!==null&&a!==void 0?a:void 0,x=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,b=(c=n.createdAt)!==null&&c!==void 0?c:void 0,_=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:T,emailVerified:k,isAnonymous:N,providerData:R,stsTokenManager:S}=n;ue(T&&S,e,"internal-error");const E=ea.fromJSON(this.name,S);ue(typeof T=="string",e,"internal-error"),ms(f,e.name),ms(p,e.name),ue(typeof k=="boolean",e,"internal-error"),ue(typeof N=="boolean",e,"internal-error"),ms(m,e.name),ms(y,e.name),ms(g,e.name),ms(x,e.name),ms(b,e.name),ms(_,e.name);const C=new Xn({uid:T,auth:e,email:p,emailVerified:k,displayName:f,isAnonymous:N,photoURL:y,phoneNumber:m,tenantId:g,stsTokenManager:E,createdAt:b,lastLoginAt:_});return R&&Array.isArray(R)&&(C.providerData=R.map(A=>Object.assign({},A))),x&&(C._redirectEventId=x),C}static async _fromIdTokenResponse(e,n,r=!1){const s=new ea;s.updateFromServerResponse(n);const i=new Xn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await zh(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ue(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?mR(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!i?.length,a=new ea;a.updateFromIdToken(r);const l=new Xn({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new my(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!i?.length};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dE=new Map;function Qr(t){os(t instanceof Function,"Expected a class definition");let e=dE.get(t);return e?(os(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,dE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}gR.type="NONE";const hE=gR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qd(t,e,n){return`firebase:${t}:${e}:${n}`}class ta{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=qd(this.userKey,s.apiKey,i),this.fullPersistenceKey=qd("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Bh(this.auth,{idToken:e}).catch(()=>{});return n?Xn._fromGetAccountInfoResponse(this.auth,n,e):null}return Xn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ta(Qr(hE),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Qr(hE);const o=qd(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){let f;if(typeof u=="string"){const p=await Bh(e,{idToken:u}).catch(()=>{});if(!p)break;f=await Xn._fromGetAccountInfoResponse(e,p,u)}else f=Xn._fromJSON(e,u);c!==i&&(a=f),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new ta(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new ta(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_R(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(yR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(bR(e))return"Blackberry";if(ER(e))return"Webos";if(vR(e))return"Safari";if((e.includes("chrome/")||xR(e))&&!e.includes("edge/"))return"Chrome";if(wR(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function yR(t=Qt()){return/firefox\//i.test(t)}function vR(t=Qt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function xR(t=Qt()){return/crios\//i.test(t)}function _R(t=Qt()){return/iemobile/i.test(t)}function wR(t=Qt()){return/android/i.test(t)}function bR(t=Qt()){return/blackberry/i.test(t)}function ER(t=Qt()){return/webos/i.test(t)}function F0(t=Qt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function D5(t=Qt()){var e;return F0(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function O5(){return SL()&&document.documentMode===10}function SR(t=Qt()){return F0(t)||wR(t)||ER(t)||bR(t)||/windows phone/i.test(t)||_R(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TR(t,e=[]){let n;switch(t){case"Browser":n=fE(Qt());break;case"Worker":n=`${fE(Qt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Da}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j5{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M5(t,e={}){return us(t,"GET","/v2/passwordPolicy",pi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L5=6;class F5{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:L5,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V5{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pE(this),this.idTokenSubscription=new pE(this),this.beforeStateQueue=new j5(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=uR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Qr(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await ta.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Bh(this,{idToken:e}),r=await Xn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(_n(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s?._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&l?.user&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await zh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=y5()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_n(this.app))return Promise.reject(Jr(this));const n=e?Nt(e):null;return n&&ue(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _n(this.app)?Promise.reject(Jr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _n(this.app)?Promise.reject(Jr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Qr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await M5(this),n=new F5(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Qc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await N5(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Qr(e)||this._popupRedirectResolver;ue(n,this,"argument-error"),this.redirectPersistenceManager=await ta.create(this,[Qr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ue(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=TR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(_n(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n?.error&&p5(`Error while retrieving App Check token: ${n.error}`),n?.token}}function go(t){return Nt(t)}class pE{constructor(e){this.auth=e,this.observer=null,this.addObserver=NL(n=>this.observer=n)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function U5(t){zf=t}function IR(t){return zf.loadJS(t)}function B5(){return zf.recaptchaEnterpriseScript}function z5(){return zf.gapiScript}function $5(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class q5{constructor(){this.enterprise=new H5}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class H5{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const W5="recaptcha-enterprise",CR="NO_RECAPTCHA";class K5{constructor(e){this.type=W5,this.auth=go(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{S5(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new E5(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;cE(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(CR)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new q5().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&cE(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=B5();l.length!==0&&(l+=a),IR(l).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function mE(t,e,n,r=!1,s=!1){const i=new K5(t);let o;if(s)o=CR;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function gy(t,e,n,r,s){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await mE(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await mE(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G5(t,e){const n=kf(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Yi(i,e??{}))return s;rr(s,"already-initialized")}return n.initialize({options:e})}function Q5(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Qr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function Y5(t,e,n){const r=go(t);ue(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=kR(e),{host:o,port:a}=X5(e),l=a===null?"":`:${a}`,c={url:`${i}//${o}${l}/`},u=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){ue(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ue(Yi(c,r.config.emulator)&&Yi(u,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,J5()}function kR(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function X5(t){const e=kR(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:gE(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:gE(o)}}}function gE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function J5(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Gr("not implemented")}_getIdTokenResponse(e){return Gr("not implemented")}_linkToIdToken(e,n){return Gr("not implemented")}_getReauthenticationResolver(e){return Gr("not implemented")}}async function Z5(t,e){return us(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e3(t,e){return ru(t,"POST","/v1/accounts:signInWithPassword",pi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t3(t,e){return ru(t,"POST","/v1/accounts:signInWithEmailLink",pi(t,e))}async function n3(t,e){return ru(t,"POST","/v1/accounts:signInWithEmailLink",pi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc extends V0{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Pc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Pc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return gy(e,n,"signInWithPassword",e3);case"emailLink":return t3(e,{email:this._email,oobCode:this._password});default:rr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return gy(e,r,"signUpPassword",Z5);case"emailLink":return n3(e,{idToken:n,email:this._email,oobCode:this._password});default:rr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function na(t,e){return ru(t,"POST","/v1/accounts:signInWithIdp",pi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r3="http://localhost";class eo extends V0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new eo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):rr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=tu(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new eo(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return na(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,na(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,na(e,n)}buildRequest(){const e={requestUri:r3,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Yc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s3(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function i3(t){const e=Al(Rl(t)).link,n=e?Al(Rl(e)).deep_link_id:null,r=Al(Rl(t)).deep_link_id;return(r?Al(Rl(r)).link:null)||r||n||e||t}class U0{constructor(e){var n,r,s,i,o,a;const l=Al(Rl(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,u=(r=l.oobCode)!==null&&r!==void 0?r:null,f=s3((s=l.mode)!==null&&s!==void 0?s:null);ue(c&&u&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=u,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=i3(e);try{return new U0(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(){this.providerId=Fa.PROVIDER_ID}static credential(e,n){return Pc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=U0.parseLink(n);return ue(r,"argument-error"),Pc._fromEmailAndCode(e,r.code,r.tenantId)}}Fa.PROVIDER_ID="password";Fa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Fa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su extends AR{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss extends su{constructor(){super("facebook.com")}static credential(e){return eo._fromParams({providerId:Ss.PROVIDER_ID,signInMethod:Ss.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ss.credentialFromTaggedObject(e)}static credentialFromError(e){return Ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ss.credential(e.oauthAccessToken)}catch{return null}}}Ss.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ss.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts extends su{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return eo._fromParams({providerId:Ts.PROVIDER_ID,signInMethod:Ts.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ts.credentialFromTaggedObject(e)}static credentialFromError(e){return Ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ts.credential(n,r)}catch{return null}}}Ts.GOOGLE_SIGN_IN_METHOD="google.com";Ts.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is extends su{constructor(){super("github.com")}static credential(e){return eo._fromParams({providerId:Is.PROVIDER_ID,signInMethod:Is.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Is.credentialFromTaggedObject(e)}static credentialFromError(e){return Is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Is.credential(e.oauthAccessToken)}catch{return null}}}Is.GITHUB_SIGN_IN_METHOD="github.com";Is.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs extends su{constructor(){super("twitter.com")}static credential(e,n){return eo._fromParams({providerId:Cs.PROVIDER_ID,signInMethod:Cs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Cs.credentialFromTaggedObject(e)}static credentialFromError(e){return Cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Cs.credential(n,r)}catch{return null}}}Cs.TWITTER_SIGN_IN_METHOD="twitter.com";Cs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o3(t,e){return ru(t,"POST","/v1/accounts:signUp",pi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Xn._fromIdTokenResponse(e,r,s),o=yE(r);return new to({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=yE(r);return new to({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function yE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h extends Dr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,$h.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new $h(e,n,r,s)}}function RR(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?$h._fromErrorAndOperation(t,i,e,r):i})}async function a3(t,e,n=!1){const r=await ba(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return to._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l3(t,e,n=!1){const{auth:r}=t;if(_n(r.app))return Promise.reject(Jr(r));const s="reauthenticate";try{const i=await ba(t,RR(r,s,e,t),n);ue(i.idToken,r,"internal-error");const o=L0(i.idToken);ue(o,r,"internal-error");const{sub:a}=o;return ue(t.uid===a,r,"user-mismatch"),to._forOperation(t,s,i)}catch(i){throw i?.code==="auth/user-not-found"&&rr(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PR(t,e,n=!1){if(_n(t.app))return Promise.reject(Jr(t));const r="signIn",s=await RR(t,r,e),i=await to._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function c3(t,e){return PR(go(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NR(t){const e=go(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function u3(t,e,n){if(_n(t.app))return Promise.reject(Jr(t));const r=go(t),o=await gy(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",o3).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&NR(t),l}),a=await to._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function d3(t,e,n){return _n(t.app)?Promise.reject(Jr(t)):c3(Nt(t),Fa.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&NR(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h3(t,e){return us(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f3(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Nt(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await ba(r,h3(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function p3(t,e,n,r){return Nt(t).onIdTokenChanged(e,n,r)}function m3(t,e,n){return Nt(t).beforeAuthStateChanged(e,n)}function g3(t,e,n,r){return Nt(t).onAuthStateChanged(e,n,r)}function y3(t){return Nt(t).signOut()}const qh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(qh,"1"),this.storage.removeItem(qh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v3=1e3,x3=10;class OR extends DR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=SR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);O5()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,x3):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},v3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}OR.type="LOCAL";const _3=OR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR extends DR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}jR.type="SESSION";const MR=jR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w3(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new $f(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await w3(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$f.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B0(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=B0("",20);s.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const p=f;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(u),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cr(){return window}function E3(t){Cr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LR(){return typeof Cr().WorkerGlobalScope<"u"&&typeof Cr().importScripts=="function"}async function S3(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function T3(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function I3(){return LR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR="firebaseLocalStorageDb",C3=1,Hh="firebaseLocalStorage",VR="fbase_key";class iu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function qf(t,e){return t.transaction([Hh],e?"readwrite":"readonly").objectStore(Hh)}function k3(){const t=indexedDB.deleteDatabase(FR);return new iu(t).toPromise()}function yy(){const t=indexedDB.open(FR,C3);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Hh,{keyPath:VR})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Hh)?e(r):(r.close(),await k3(),e(await yy()))})})}async function vE(t,e,n){const r=qf(t,!0).put({[VR]:e,value:n});return new iu(r).toPromise()}async function A3(t,e){const n=qf(t,!1).get(e),r=await new iu(n).toPromise();return r===void 0?null:r.value}function xE(t,e){const n=qf(t,!0).delete(e);return new iu(n).toPromise()}const R3=800,P3=3;class UR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await yy(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>P3)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return LR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$f._getInstance(I3()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await S3(),!this.activeServiceWorker)return;this.sender=new b3(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||T3()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await yy();return await vE(e,qh,"1"),await xE(e,qh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>vE(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>A3(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>xE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=qf(s,!1).getAll();return new iu(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),R3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}UR.type="LOCAL";const N3=UR;new nu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D3(t,e){return e?Qr(e):(ue(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0 extends V0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return na(e,this._buildIdpRequest())}_linkToIdToken(e,n){return na(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return na(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function O3(t){return PR(t.auth,new z0(t),t.bypassAuthState)}function j3(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),l3(n,new z0(t),t.bypassAuthState)}async function M3(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),a3(n,new z0(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return O3;case"linkViaPopup":case"linkViaRedirect":return M3;case"reauthViaPopup":case"reauthViaRedirect":return j3;default:rr(this.auth,"internal-error")}}resolve(e){os(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){os(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L3=new nu(2e3,1e4);class Wo extends BR{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Wo.currentPopupAction&&Wo.currentPopupAction.cancel(),Wo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ue(e,this.auth,"internal-error"),e}async onExecution(){os(this.filter.length===1,"Popup operations only handle one event");const e=B0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ir(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ir(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Wo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ir(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,L3.get())};e()}}Wo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F3="pendingRedirect",Hd=new Map;class V3 extends BR{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Hd.get(this.auth._key());if(!e){try{const r=await U3(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Hd.set(this.auth._key(),e)}return this.bypassAuthState||Hd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function U3(t,e){const n=$3(e),r=z3(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function B3(t,e){Hd.set(t._key(),e)}function z3(t){return Qr(t._redirectPersistence)}function $3(t){return qd(F3,t.config.apiKey,t.name)}async function q3(t,e,n=!1){if(_n(t.app))return Promise.reject(Jr(t));const r=go(t),s=D3(r,e),o=await new V3(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H3=10*60*1e3;class W3{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!K3(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!zR(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ir(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=H3&&this.cachedEventUids.clear(),this.cachedEventUids.has(_E(e))}saveEventToCache(e){this.cachedEventUids.add(_E(e)),this.lastProcessedEventTime=Date.now()}}function _E(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function zR({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function K3(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zR(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G3(t,e={}){return us(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Y3=/^https?/;async function X3(t){if(t.config.emulator)return;const{authorizedDomains:e}=await G3(t);for(const n of e)try{if(J3(n))return}catch{}rr(t,"unauthorized-domain")}function J3(t){const e=py(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!Y3.test(n))return!1;if(Q3.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z3=new nu(3e4,6e4);function wE(){const t=Cr().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function eB(t){return new Promise((e,n)=>{var r,s,i;function o(){wE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{wE(),n(Ir(t,"network-request-failed"))},timeout:Z3.get()})}if(!((s=(r=Cr().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Cr().gapi)===null||i===void 0)&&i.load)o();else{const a=$5("iframefcb");return Cr()[a]=()=>{gapi.load?o():n(Ir(t,"network-request-failed"))},IR(`${z5()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Wd=null,e})}let Wd=null;function tB(t){return Wd=Wd||eB(t),Wd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nB=new nu(5e3,15e3),rB="__/auth/iframe",sB="emulator/auth/iframe",iB={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},oB=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function aB(t){const e=t.config;ue(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?M0(e,sB):`https://${t.config.authDomain}/${rB}`,r={apiKey:e.apiKey,appName:t.name,v:Da},s=oB.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Yc(r).slice(1)}`}async function lB(t){const e=await tB(t),n=Cr().gapi;return ue(n,t,"internal-error"),e.open({where:document.body,url:aB(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:iB,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Ir(t,"network-request-failed"),a=Cr().setTimeout(()=>{i(o)},nB.get());function l(){Cr().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cB={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},uB=500,dB=600,hB="_blank",fB="http://localhost";class bE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function pB(t,e,n,r=uB,s=dB){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},cB),{width:r.toString(),height:s.toString(),top:i,left:o}),c=Qt().toLowerCase();n&&(a=xR(c)?hB:n),yR(c)&&(e=e||fB,l.scrollbars="yes");const u=Object.entries(l).reduce((p,[m,y])=>`${p}${m}=${y},`,"");if(D5(c)&&a!=="_self")return mB(e||"",a),new bE(null);const f=window.open(e||"",a,u);ue(f,t,"popup-blocked");try{f.focus()}catch{}return new bE(f)}function mB(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gB="__/auth/handler",yB="emulator/auth/handler",vB=encodeURIComponent("fac");async function EE(t,e,n,r,s,i){ue(t.config.authDomain,t,"auth-domain-config-required"),ue(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Da,eventId:s};if(e instanceof AR){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",PL(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,f]of Object.entries({}))o[u]=f}if(e instanceof su){const u=e.getScopes().filter(f=>f!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${vB}=${encodeURIComponent(l)}`:"";return`${xB(t)}?${Yc(a).slice(1)}${c}`}function xB({config:t}){return t.emulator?M0(t,yB):`https://${t.authDomain}/${gB}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ym="webStorageSupport";class _B{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=MR,this._completeRedirectFn=q3,this._overrideRedirectResult=B3}async _openPopup(e,n,r,s){var i;os((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await EE(e,n,r,py(),s);return pB(e,o,B0())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await EE(e,n,r,py(),s);return E3(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(os(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await lB(e),r=new W3(e);return n.register("authEvent",s=>(ue(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ym,{type:ym},s=>{var i;const o=(i=s?.[0])===null||i===void 0?void 0:i[ym];o!==void 0&&n(!!o),rr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=X3(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return SR()||vR()||F0()}}const wB=_B;var SE="@firebase/auth",TE="1.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bB{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EB(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function SB(t){Xi(new ei("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ue(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:TR(t)},c=new V5(r,s,i,l);return Q5(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Xi(new ei("auth-internal",e=>{const n=go(e.getProvider("auth").getImmediate());return(r=>new bB(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Er(SE,TE,EB(t)),Er(SE,TE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TB=5*60,IB=kk("authIdTokenMaxAge")||TB;let IE=null;const CB=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>IB)return;const s=n?.token;IE!==s&&(IE=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Hf(t=Af()){const e=kf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=G5(t,{popupRedirectResolver:wB,persistence:[N3,_3,MR]}),r=kk("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=CB(i.toString());m3(n,o,()=>o(n.currentUser)),p3(n,a=>o(a))}}const s=Tk("auth");return s&&Y5(n,`http://${s}`),n}function kB(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}U5({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Ir("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",kB().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});SB("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AB="type.googleapis.com/google.protobuf.Int64Value",RB="type.googleapis.com/google.protobuf.UInt64Value";function $R(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function Wh(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>Wh(e));if(typeof t=="function"||typeof t=="object")return $R(t,e=>Wh(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Ea(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case AB:case RB:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Ea(e)):typeof t=="function"||typeof t=="object"?$R(t,e=>Ea(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class cn extends Dr{constructor(e,n,r){super(`${$0}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,cn.prototype)}}function PB(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Kh(t,e){let n=PB(t),r=n,s;try{const i=e&&e.error;if(i){const o=i.status;if(typeof o=="string"){if(!CE[o])return new cn("internal","internal");n=CE[o],r=o}const a=i.message;typeof a=="string"&&(r=a),s=i.details,s!==void 0&&(s=Ea(s))}}catch{}return n==="ok"?null:new cn(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NB{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,_n(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(i=>this.auth=i,()=>{}),this.messaging||r.get().then(i=>this.messaging=i,()=>{}),this.appCheck||s?.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vy="us-central1",DB=/^data: (.*?)(?:\n|$)/;function OB(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new cn("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class jB{constructor(e,n,r,s,i=vy,o=(...a)=>fetch(...a)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new NB(e,n,r,s),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(i);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=vy}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function MB(t,e,n){t.emulatorOrigin=`http://${e}:${n}`}function LB(t,e,n){const r=s=>VB(t,e,s,{});return r.stream=(s,i)=>BB(t,e,s,i),r}async function FB(t,e,n,r){n["Content-Type"]="application/json";let s;try{s=await r(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let i=null;try{i=await s.json()}catch{}return{status:s.status,json:i}}async function qR(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function VB(t,e,n,r){const s=t._url(e);return UB(t,s,n,r)}async function UB(t,e,n,r){n=Wh(n);const s={data:n},i=await qR(t,r),o=r.timeout||7e4,a=OB(o),l=await Promise.race([FB(e,s,i,t.fetchImpl),a.promise,t.cancelAllRequests]);if(a.cancel(),!l)throw new cn("cancelled","Firebase Functions instance was deleted.");const c=Kh(l.status,l.json);if(c)throw c;if(!l.json)throw new cn("internal","Response is not valid JSON object.");let u=l.json.data;if(typeof u>"u"&&(u=l.json.result),typeof u>"u")throw new cn("internal","Response is missing data field.");return{data:Ea(u)}}function BB(t,e,n,r){const s=t._url(e);return zB(t,s,n,r||{})}async function zB(t,e,n,r){var s;n=Wh(n);const i={data:n},o=await qR(t,r);o["Content-Type"]="application/json",o.Accept="text/event-stream";let a;try{a=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(i),headers:o,signal:r?.signal})}catch(m){if(m instanceof Error&&m.name==="AbortError"){const g=new cn("cancelled","Request was cancelled.");return{data:Promise.reject(g),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(g)}}}}}}const y=Kh(0,null);return{data:Promise.reject(y),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(y)}}}}}}let l,c;const u=new Promise((m,y)=>{l=m,c=y});(s=r?.signal)===null||s===void 0||s.addEventListener("abort",()=>{const m=new cn("cancelled","Request was cancelled.");c(m)});const f=a.body.getReader(),p=$B(f,l,c,r?.signal);return{stream:{[Symbol.asyncIterator](){const m=p.getReader();return{async next(){const{value:y,done:g}=await m.read();return{value:y,done:g}},async return(){return await m.cancel(),{done:!0,value:void 0}}}}},data:u}}function $B(t,e,n,r){const s=(o,a)=>{const l=o.match(DB);if(!l)return;const c=l[1];try{const u=JSON.parse(c);if("result"in u){e(Ea(u.result));return}if("message"in u){a.enqueue(Ea(u.message));return}if("error"in u){const f=Kh(0,u);a.error(f),n(f);return}}catch(u){if(u instanceof cn){a.error(u),n(u);return}}},i=new TextDecoder;return new ReadableStream({start(o){let a="";return l();async function l(){if(r?.aborted){const c=new cn("cancelled","Request was cancelled");return o.error(c),n(c),Promise.resolve()}try{const{value:c,done:u}=await t.read();if(u){a.trim()&&s(a.trim(),o),o.close();return}if(r?.aborted){const p=new cn("cancelled","Request was cancelled");o.error(p),n(p),await t.cancel();return}a+=i.decode(c,{stream:!0});const f=a.split(`
`);a=f.pop()||"";for(const p of f)p.trim()&&s(p.trim(),o);return l()}catch(c){const u=c instanceof cn?c:Kh(0,null);o.error(u),n(u)}}},cancel(){return t.cancel()}})}const kE="@firebase/functions",AE="0.12.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qB="auth-internal",HB="app-check-internal",WB="messaging-internal";function KB(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),i=n.getProvider(qB),o=n.getProvider(WB),a=n.getProvider(HB);return new jB(s,i,o,a,r)};Xi(new ei($0,e,"PUBLIC").setMultipleInstances(!0)),Er(kE,AE,t),Er(kE,AE,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HR(t=Af(),e=vy){const r=kf(Nt(t),$0).getImmediate({identifier:e}),s=Ik("functions");return s&&GB(r,...s),r}function GB(t,e,n){MB(Nt(t),e,n)}function WR(t,e,n){return LB(Nt(t),e)}KB();const KR={apiKey:"AIzaSyCECE4RoYlRls-jED9DWI3HGvnOqC2VxQ4",authDomain:"humanitarianlogistics-d0b77.firebaseapp.com",projectId:"humanitarianlogistics-d0b77",storageBucket:"humanitarianlogistics-d0b77.firebasestorage.app",messagingSenderId:"874559986585",appId:"1:874559986585:web:cf16f3b1ed7a495f7bd108",measurementId:"G-G7CXG3Q4LL"},q0=Xg().length===0?t0(KR):Af();Hf(q0);JA(q0);HR(q0);const H0=Xg().length===0?t0(KR,"client-app"):Xg()[0];Hf(H0);const GR=JA(H0),QR=H0;class ou{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){const n={listener:e};return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}}const W0=typeof window>"u"||"Deno"in window;function Kn(){}function QB(t,e){return typeof t=="function"?t(e):t}function YB(t){return typeof t=="number"&&t>=0&&t!==1/0}function XB(t,e){return Math.max(t+(e||0)-Date.now(),0)}function td(t,e,n){return au(t)?typeof e=="function"?{...n,queryKey:t,queryFn:e}:{...e,queryKey:t}:t}function JB(t,e,n){return au(t)?{...e,mutationKey:t}:typeof t=="function"?{...e,mutationFn:t}:{...t}}function ws(t,e,n){return au(t)?[{...e,queryKey:t},n]:[t||{},e]}function RE(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(au(o)){if(r){if(e.queryHash!==K0(o,e.options))return!1}else if(!Gh(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||typeof s<"u"&&s!==e.state.fetchStatus||i&&!i(e))}function PE(t,e){const{exact:n,fetching:r,predicate:s,mutationKey:i}=t;if(au(i)){if(!e.options.mutationKey)return!1;if(n){if(ji(e.options.mutationKey)!==ji(i))return!1}else if(!Gh(e.options.mutationKey,i))return!1}return!(typeof r=="boolean"&&e.state.status==="loading"!==r||s&&!s(e))}function K0(t,e){return(e?.queryKeyHashFn||ji)(t)}function ji(t){return JSON.stringify(t,(e,n)=>xy(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Gh(t,e){return YR(t,e)}function YR(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!YR(t[n],e[n])):!1}function XR(t,e){if(t===e)return t;const n=NE(t)&&NE(e);if(n||xy(t)&&xy(e)){const r=n?t.length:Object.keys(t).length,s=n?e:Object.keys(e),i=s.length,o=n?[]:{};let a=0;for(let l=0;l<i;l++){const c=n?l:s[l];o[c]=XR(t[c],e[c]),o[c]===t[c]&&a++}return r===i&&a===r?t:o}return e}function ZB(t,e){if(t&&!e||e&&!t)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function NE(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function xy(t){if(!DE(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!DE(n)||!n.hasOwnProperty("isPrototypeOf"))}function DE(t){return Object.prototype.toString.call(t)==="[object Object]"}function au(t){return Array.isArray(t)}function JR(t){return new Promise(e=>{setTimeout(e,t)})}function OE(t){JR(0).then(t)}function ez(){if(typeof AbortController=="function")return new AbortController}function tz(t,e,n){return n.isDataEqual!=null&&n.isDataEqual(t,e)?t:typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?XR(t,e):e}class nz extends ou{constructor(){super(),this.setup=e=>{if(!W0&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),window.addEventListener("focus",n,!1),()=>{window.removeEventListener("visibilitychange",n),window.removeEventListener("focus",n)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.cleanup)==null||e.call(this),this.cleanup=void 0}}setEventListener(e){var n;this.setup=e,(n=this.cleanup)==null||n.call(this),this.cleanup=e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()})}setFocused(e){this.focused!==e&&(this.focused=e,this.onFocus())}onFocus(){this.listeners.forEach(({listener:e})=>{e()})}isFocused(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)}}const _y=new nz,jE=["online","offline"];class rz extends ou{constructor(){super(),this.setup=e=>{if(!W0&&window.addEventListener){const n=()=>e();return jE.forEach(r=>{window.addEventListener(r,n,!1)}),()=>{jE.forEach(r=>{window.removeEventListener(r,n)})}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.cleanup)==null||e.call(this),this.cleanup=void 0}}setEventListener(e){var n;this.setup=e,(n=this.cleanup)==null||n.call(this),this.cleanup=e(r=>{typeof r=="boolean"?this.setOnline(r):this.onOnline()})}setOnline(e){this.online!==e&&(this.online=e,this.onOnline())}onOnline(){this.listeners.forEach(({listener:e})=>{e()})}isOnline(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine}}const Qh=new rz;function sz(t){return Math.min(1e3*2**t,3e4)}function G0(t){return(t??"online")==="online"?Qh.isOnline():!0}class ZR{constructor(e){this.revert=e?.revert,this.silent=e?.silent}}function vm(t){return t instanceof ZR}function eP(t){let e=!1,n=0,r=!1,s,i,o;const a=new Promise((x,b)=>{i=x,o=b}),l=x=>{r||(m(new ZR(x)),t.abort==null||t.abort())},c=()=>{e=!0},u=()=>{e=!1},f=()=>!_y.isFocused()||t.networkMode!=="always"&&!Qh.isOnline(),p=x=>{r||(r=!0,t.onSuccess==null||t.onSuccess(x),s?.(),i(x))},m=x=>{r||(r=!0,t.onError==null||t.onError(x),s?.(),o(x))},y=()=>new Promise(x=>{s=b=>{const _=r||!f();return _&&x(b),_},t.onPause==null||t.onPause()}).then(()=>{s=void 0,r||t.onContinue==null||t.onContinue()}),g=()=>{if(r)return;let x;try{x=t.fn()}catch(b){x=Promise.reject(b)}Promise.resolve(x).then(p).catch(b=>{var _,T;if(r)return;const k=(_=t.retry)!=null?_:3,N=(T=t.retryDelay)!=null?T:sz,R=typeof N=="function"?N(n,b):N,S=k===!0||typeof k=="number"&&n<k||typeof k=="function"&&k(n,b);if(e||!S){m(b);return}n++,t.onFail==null||t.onFail(n,b),JR(R).then(()=>{if(f())return y()}).then(()=>{e?m(b):g()})})};return G0(t.networkMode)?g():y().then(g),{promise:a,cancel:l,continue:()=>s?.()?a:Promise.resolve(),cancelRetry:c,continueRetry:u}}const Q0=console;function iz(){let t=[],e=0,n=u=>{u()},r=u=>{u()};const s=u=>{let f;e++;try{f=u()}finally{e--,e||a()}return f},i=u=>{e?t.push(u):OE(()=>{n(u)})},o=u=>(...f)=>{i(()=>{u(...f)})},a=()=>{const u=t;t=[],u.length&&OE(()=>{r(()=>{u.forEach(f=>{n(f)})})})};return{batch:s,batchCalls:o,schedule:i,setNotifyFunction:u=>{n=u},setBatchNotifyFunction:u=>{r=u}}}const kt=iz();class tP{destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),YB(this.cacheTime)&&(this.gcTimeout=setTimeout(()=>{this.optionalRemove()},this.cacheTime))}updateCacheTime(e){this.cacheTime=Math.max(this.cacheTime||0,e??(W0?1/0:5*60*1e3))}clearGcTimeout(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)}}class oz extends tP{constructor(e){super(),this.abortSignalConsumed=!1,this.defaultOptions=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.cache=e.cache,this.logger=e.logger||Q0,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.initialState=e.state||az(this.options),this.state=this.initialState,this.scheduleGc()}get meta(){return this.options.meta}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.cache.remove(this)}setData(e,n){const r=tz(this.state.data,e,this.options);return this.dispatch({data:r,type:"success",dataUpdatedAt:n?.updatedAt,manual:n?.manual}),r}setState(e,n){this.dispatch({type:"setState",state:e,setStateOptions:n})}cancel(e){var n;const r=this.promise;return(n=this.retryer)==null||n.cancel(e),r?r.then(Kn).catch(Kn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.initialState)}isActive(){return this.observers.some(e=>e.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(e=>e.getCurrentResult().isStale)}isStaleByTime(e=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!XB(this.state.dataUpdatedAt,e)}onFocus(){var e;const n=this.observers.find(r=>r.shouldFetchOnWindowFocus());n&&n.refetch({cancelRefetch:!1}),(e=this.retryer)==null||e.continue()}onOnline(){var e;const n=this.observers.find(r=>r.shouldFetchOnReconnect());n&&n.refetch({cancelRefetch:!1}),(e=this.retryer)==null||e.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(this.retryer&&(this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.scheduleGc()),this.cache.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.dispatch({type:"invalidate"})}fetch(e,n){var r,s;if(this.state.fetchStatus!=="idle"){if(this.state.dataUpdatedAt&&n!=null&&n.cancelRefetch)this.cancel({silent:!0});else if(this.promise){var i;return(i=this.retryer)==null||i.continueRetry(),this.promise}}if(e&&this.setOptions(e),!this.options.queryFn){const m=this.observers.find(y=>y.options.queryFn);m&&this.setOptions(m.options)}const o=ez(),a={queryKey:this.queryKey,pageParam:void 0,meta:this.meta},l=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>{if(o)return this.abortSignalConsumed=!0,o.signal}})};l(a);const c=()=>this.options.queryFn?(this.abortSignalConsumed=!1,this.options.queryFn(a)):Promise.reject("Missing queryFn for queryKey '"+this.options.queryHash+"'"),u={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:c};if(l(u),(r=this.options.behavior)==null||r.onFetch(u),this.revertState=this.state,this.state.fetchStatus==="idle"||this.state.fetchMeta!==((s=u.fetchOptions)==null?void 0:s.meta)){var f;this.dispatch({type:"fetch",meta:(f=u.fetchOptions)==null?void 0:f.meta})}const p=m=>{if(vm(m)&&m.silent||this.dispatch({type:"error",error:m}),!vm(m)){var y,g,x,b;(y=(g=this.cache.config).onError)==null||y.call(g,m,this),(x=(b=this.cache.config).onSettled)==null||x.call(b,this.state.data,m,this)}this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return this.retryer=eP({fn:u.fetchFn,abort:o?.abort.bind(o),onSuccess:m=>{var y,g,x,b;if(typeof m>"u"){p(new Error(this.queryHash+" data is undefined"));return}this.setData(m),(y=(g=this.cache.config).onSuccess)==null||y.call(g,m,this),(x=(b=this.cache.config).onSettled)==null||x.call(b,m,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:p,onFail:(m,y)=>{this.dispatch({type:"failed",failureCount:m,error:y})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:u.options.retry,retryDelay:u.options.retryDelay,networkMode:u.options.networkMode}),this.promise=this.retryer.promise,this.promise}dispatch(e){const n=r=>{var s,i;switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:(s=e.meta)!=null?s:null,fetchStatus:G0(this.options.networkMode)?"fetching":"paused",...!r.dataUpdatedAt&&{error:null,status:"loading"}};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:(i=e.dataUpdatedAt)!=null?i:Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const o=e.error;return vm(o)&&o.revert&&this.revertState?{...this.revertState,fetchStatus:"idle"}:{...r,error:o,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),kt.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate(e)}),this.cache.notify({query:this,type:"updated",action:e})})}}function az(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=typeof e<"u",r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"loading",fetchStatus:"idle"}}class lz extends ou{constructor(e){super(),this.config=e||{},this.queries=[],this.queriesMap={}}build(e,n,r){var s;const i=n.queryKey,o=(s=n.queryHash)!=null?s:K0(i,n);let a=this.get(o);return a||(a=new oz({cache:this,logger:e.getLogger(),queryKey:i,queryHash:o,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(a)),a}add(e){this.queriesMap[e.queryHash]||(this.queriesMap[e.queryHash]=e,this.queries.push(e),this.notify({type:"added",query:e}))}remove(e){const n=this.queriesMap[e.queryHash];n&&(e.destroy(),this.queries=this.queries.filter(r=>r!==e),n===e&&delete this.queriesMap[e.queryHash],this.notify({type:"removed",query:e}))}clear(){kt.batch(()=>{this.queries.forEach(e=>{this.remove(e)})})}get(e){return this.queriesMap[e]}getAll(){return this.queries}find(e,n){const[r]=ws(e,n);return typeof r.exact>"u"&&(r.exact=!0),this.queries.find(s=>RE(r,s))}findAll(e,n){const[r]=ws(e,n);return Object.keys(r).length>0?this.queries.filter(s=>RE(r,s)):this.queries}notify(e){kt.batch(()=>{this.listeners.forEach(({listener:n})=>{n(e)})})}onFocus(){kt.batch(()=>{this.queries.forEach(e=>{e.onFocus()})})}onOnline(){kt.batch(()=>{this.queries.forEach(e=>{e.onOnline()})})}}class cz extends tP{constructor(e){super(),this.defaultOptions=e.defaultOptions,this.mutationId=e.mutationId,this.mutationCache=e.mutationCache,this.logger=e.logger||Q0,this.observers=[],this.state=e.state||nP(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}get meta(){return this.options.meta}setState(e){this.dispatch({type:"setState",state:e})}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.mutationCache.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.observers=this.observers.filter(n=>n!==e),this.scheduleGc(),this.mutationCache.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.observers.length||(this.state.status==="loading"?this.scheduleGc():this.mutationCache.remove(this))}continue(){var e,n;return(e=(n=this.retryer)==null?void 0:n.continue())!=null?e:this.execute()}async execute(){const e=()=>{var S;return this.retryer=eP({fn:()=>this.options.mutationFn?this.options.mutationFn(this.state.variables):Promise.reject("No mutationFn found"),onFail:(E,C)=>{this.dispatch({type:"failed",failureCount:E,error:C})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:(S=this.options.retry)!=null?S:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode}),this.retryer.promise},n=this.state.status==="loading";try{var r,s,i,o,a,l,c,u;if(!n){var f,p,m,y;this.dispatch({type:"loading",variables:this.options.variables}),await((f=(p=this.mutationCache.config).onMutate)==null?void 0:f.call(p,this.state.variables,this));const E=await((m=(y=this.options).onMutate)==null?void 0:m.call(y,this.state.variables));E!==this.state.context&&this.dispatch({type:"loading",context:E,variables:this.state.variables})}const S=await e();return await((r=(s=this.mutationCache.config).onSuccess)==null?void 0:r.call(s,S,this.state.variables,this.state.context,this)),await((i=(o=this.options).onSuccess)==null?void 0:i.call(o,S,this.state.variables,this.state.context)),await((a=(l=this.mutationCache.config).onSettled)==null?void 0:a.call(l,S,null,this.state.variables,this.state.context,this)),await((c=(u=this.options).onSettled)==null?void 0:c.call(u,S,null,this.state.variables,this.state.context)),this.dispatch({type:"success",data:S}),S}catch(S){try{var g,x,b,_,T,k,N,R;throw await((g=(x=this.mutationCache.config).onError)==null?void 0:g.call(x,S,this.state.variables,this.state.context,this)),await((b=(_=this.options).onError)==null?void 0:b.call(_,S,this.state.variables,this.state.context)),await((T=(k=this.mutationCache.config).onSettled)==null?void 0:T.call(k,void 0,S,this.state.variables,this.state.context,this)),await((N=(R=this.options).onSettled)==null?void 0:N.call(R,void 0,S,this.state.variables,this.state.context)),S}finally{this.dispatch({type:"error",error:S})}}}dispatch(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"loading":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!G0(this.options.networkMode),status:"loading",variables:e.variables};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"};case"setState":return{...r,...e.state}}};this.state=n(this.state),kt.batch(()=>{this.observers.forEach(r=>{r.onMutationUpdate(e)}),this.mutationCache.notify({mutation:this,type:"updated",action:e})})}}function nP(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0}}class uz extends ou{constructor(e){super(),this.config=e||{},this.mutations=[],this.mutationId=0}build(e,n,r){const s=new cz({mutationCache:this,logger:e.getLogger(),mutationId:++this.mutationId,options:e.defaultMutationOptions(n),state:r,defaultOptions:n.mutationKey?e.getMutationDefaults(n.mutationKey):void 0});return this.add(s),s}add(e){this.mutations.push(e),this.notify({type:"added",mutation:e})}remove(e){this.mutations=this.mutations.filter(n=>n!==e),this.notify({type:"removed",mutation:e})}clear(){kt.batch(()=>{this.mutations.forEach(e=>{this.remove(e)})})}getAll(){return this.mutations}find(e){return typeof e.exact>"u"&&(e.exact=!0),this.mutations.find(n=>PE(e,n))}findAll(e){return this.mutations.filter(n=>PE(e,n))}notify(e){kt.batch(()=>{this.listeners.forEach(({listener:n})=>{n(e)})})}resumePausedMutations(){var e;return this.resuming=((e=this.resuming)!=null?e:Promise.resolve()).then(()=>{const n=this.mutations.filter(r=>r.state.isPaused);return kt.batch(()=>n.reduce((r,s)=>r.then(()=>s.continue().catch(Kn)),Promise.resolve()))}).then(()=>{this.resuming=void 0}),this.resuming}}function dz(){return{onFetch:t=>{t.fetchFn=()=>{var e,n,r,s,i,o;const a=(e=t.fetchOptions)==null||(n=e.meta)==null?void 0:n.refetchPage,l=(r=t.fetchOptions)==null||(s=r.meta)==null?void 0:s.fetchMore,c=l?.pageParam,u=l?.direction==="forward",f=l?.direction==="backward",p=((i=t.state.data)==null?void 0:i.pages)||[],m=((o=t.state.data)==null?void 0:o.pageParams)||[];let y=m,g=!1;const x=R=>{Object.defineProperty(R,"signal",{enumerable:!0,get:()=>{var S;if((S=t.signal)!=null&&S.aborted)g=!0;else{var E;(E=t.signal)==null||E.addEventListener("abort",()=>{g=!0})}return t.signal}})},b=t.options.queryFn||(()=>Promise.reject("Missing queryFn for queryKey '"+t.options.queryHash+"'")),_=(R,S,E,C)=>(y=C?[S,...y]:[...y,S],C?[E,...R]:[...R,E]),T=(R,S,E,C)=>{if(g)return Promise.reject("Cancelled");if(typeof E>"u"&&!S&&R.length)return Promise.resolve(R);const A={queryKey:t.queryKey,pageParam:E,meta:t.options.meta};x(A);const P=b(A);return Promise.resolve(P).then(O=>_(R,E,O,C))};let k;if(!p.length)k=T([]);else if(u){const R=typeof c<"u",S=R?c:ME(t.options,p);k=T(p,R,S)}else if(f){const R=typeof c<"u",S=R?c:hz(t.options,p);k=T(p,R,S,!0)}else{y=[];const R=typeof t.options.getNextPageParam>"u";k=(a&&p[0]?a(p[0],0,p):!0)?T([],R,m[0]):Promise.resolve(_([],m[0],p[0]));for(let E=1;E<p.length;E++)k=k.then(C=>{if(a&&p[E]?a(p[E],E,p):!0){const P=R?m[E]:ME(t.options,C);return T(C,R,P)}return Promise.resolve(_(C,m[E],p[E]))})}return k.then(R=>({pages:R,pageParams:y}))}}}}function ME(t,e){return t.getNextPageParam==null?void 0:t.getNextPageParam(e[e.length-1],e)}function hz(t,e){return t.getPreviousPageParam==null?void 0:t.getPreviousPageParam(e[0],e)}class fz{constructor(e={}){this.queryCache=e.queryCache||new lz,this.mutationCache=e.mutationCache||new uz,this.logger=e.logger||Q0,this.defaultOptions=e.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[],this.mountCount=0}mount(){this.mountCount++,this.mountCount===1&&(this.unsubscribeFocus=_y.subscribe(()=>{_y.isFocused()&&(this.resumePausedMutations(),this.queryCache.onFocus())}),this.unsubscribeOnline=Qh.subscribe(()=>{Qh.isOnline()&&(this.resumePausedMutations(),this.queryCache.onOnline())}))}unmount(){var e,n;this.mountCount--,this.mountCount===0&&((e=this.unsubscribeFocus)==null||e.call(this),this.unsubscribeFocus=void 0,(n=this.unsubscribeOnline)==null||n.call(this),this.unsubscribeOnline=void 0)}isFetching(e,n){const[r]=ws(e,n);return r.fetchStatus="fetching",this.queryCache.findAll(r).length}isMutating(e){return this.mutationCache.findAll({...e,fetching:!0}).length}getQueryData(e,n){var r;return(r=this.queryCache.find(e,n))==null?void 0:r.state.data}ensureQueryData(e,n,r){const s=td(e,n,r),i=this.getQueryData(s.queryKey);return i?Promise.resolve(i):this.fetchQuery(s)}getQueriesData(e){return this.getQueryCache().findAll(e).map(({queryKey:n,state:r})=>{const s=r.data;return[n,s]})}setQueryData(e,n,r){const s=this.queryCache.find(e),i=s?.state.data,o=QB(n,i);if(typeof o>"u")return;const a=td(e),l=this.defaultQueryOptions(a);return this.queryCache.build(this,l).setData(o,{...r,manual:!0})}setQueriesData(e,n,r){return kt.batch(()=>this.getQueryCache().findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,n,r)]))}getQueryState(e,n){var r;return(r=this.queryCache.find(e,n))==null?void 0:r.state}removeQueries(e,n){const[r]=ws(e,n),s=this.queryCache;kt.batch(()=>{s.findAll(r).forEach(i=>{s.remove(i)})})}resetQueries(e,n,r){const[s,i]=ws(e,n,r),o=this.queryCache,a={type:"active",...s};return kt.batch(()=>(o.findAll(s).forEach(l=>{l.reset()}),this.refetchQueries(a,i)))}cancelQueries(e,n,r){const[s,i={}]=ws(e,n,r);typeof i.revert>"u"&&(i.revert=!0);const o=kt.batch(()=>this.queryCache.findAll(s).map(a=>a.cancel(i)));return Promise.all(o).then(Kn).catch(Kn)}invalidateQueries(e,n,r){const[s,i]=ws(e,n,r);return kt.batch(()=>{var o,a;if(this.queryCache.findAll(s).forEach(c=>{c.invalidate()}),s.refetchType==="none")return Promise.resolve();const l={...s,type:(o=(a=s.refetchType)!=null?a:s.type)!=null?o:"active"};return this.refetchQueries(l,i)})}refetchQueries(e,n,r){const[s,i]=ws(e,n,r),o=kt.batch(()=>this.queryCache.findAll(s).filter(l=>!l.isDisabled()).map(l=>{var c;return l.fetch(void 0,{...i,cancelRefetch:(c=i?.cancelRefetch)!=null?c:!0,meta:{refetchPage:s.refetchPage}})}));let a=Promise.all(o).then(Kn);return i!=null&&i.throwOnError||(a=a.catch(Kn)),a}fetchQuery(e,n,r){const s=td(e,n,r),i=this.defaultQueryOptions(s);typeof i.retry>"u"&&(i.retry=!1);const o=this.queryCache.build(this,i);return o.isStaleByTime(i.staleTime)?o.fetch(i):Promise.resolve(o.state.data)}prefetchQuery(e,n,r){return this.fetchQuery(e,n,r).then(Kn).catch(Kn)}fetchInfiniteQuery(e,n,r){const s=td(e,n,r);return s.behavior=dz(),this.fetchQuery(s)}prefetchInfiniteQuery(e,n,r){return this.fetchInfiniteQuery(e,n,r).then(Kn).catch(Kn)}resumePausedMutations(){return this.mutationCache.resumePausedMutations()}getQueryCache(){return this.queryCache}getMutationCache(){return this.mutationCache}getLogger(){return this.logger}getDefaultOptions(){return this.defaultOptions}setDefaultOptions(e){this.defaultOptions=e}setQueryDefaults(e,n){const r=this.queryDefaults.find(s=>ji(e)===ji(s.queryKey));r?r.defaultOptions=n:this.queryDefaults.push({queryKey:e,defaultOptions:n})}getQueryDefaults(e){if(!e)return;const n=this.queryDefaults.find(r=>Gh(e,r.queryKey));return n?.defaultOptions}setMutationDefaults(e,n){const r=this.mutationDefaults.find(s=>ji(e)===ji(s.mutationKey));r?r.defaultOptions=n:this.mutationDefaults.push({mutationKey:e,defaultOptions:n})}getMutationDefaults(e){if(!e)return;const n=this.mutationDefaults.find(r=>Gh(e,r.mutationKey));return n?.defaultOptions}defaultQueryOptions(e){if(e!=null&&e._defaulted)return e;const n={...this.defaultOptions.queries,...this.getQueryDefaults(e?.queryKey),...e,_defaulted:!0};return!n.queryHash&&n.queryKey&&(n.queryHash=K0(n.queryKey,n)),typeof n.refetchOnReconnect>"u"&&(n.refetchOnReconnect=n.networkMode!=="always"),typeof n.useErrorBoundary>"u"&&(n.useErrorBoundary=!!n.suspense),n}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...this.defaultOptions.mutations,...this.getMutationDefaults(e?.mutationKey),...e,_defaulted:!0}}clear(){this.queryCache.clear(),this.mutationCache.clear()}}let pz=class extends ou{constructor(e,n){super(),this.client=e,this.setOptions(n),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var n;const r=this.options;this.options=this.client.defaultMutationOptions(e),ZB(r,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this}),(n=this.currentMutation)==null||n.setOptions(this.options)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.currentMutation)==null||e.removeObserver(this)}}onMutationUpdate(e){this.updateResult();const n={listeners:!0};e.type==="success"?n.onSuccess=!0:e.type==="error"&&(n.onError=!0),this.notify(n)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(e,n){return this.mutateOptions=n,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:typeof e<"u"?e:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){const e=this.currentMutation?this.currentMutation.state:nP(),n={...e,isLoading:e.status==="loading",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset};this.currentResult=n}notify(e){kt.batch(()=>{if(this.mutateOptions&&this.hasListeners()){if(e.onSuccess){var n,r,s,i;(n=(r=this.mutateOptions).onSuccess)==null||n.call(r,this.currentResult.data,this.currentResult.variables,this.currentResult.context),(s=(i=this.mutateOptions).onSettled)==null||s.call(i,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context)}else if(e.onError){var o,a,l,c;(o=(a=this.mutateOptions).onError)==null||o.call(a,this.currentResult.error,this.currentResult.variables,this.currentResult.context),(l=(c=this.mutateOptions).onSettled)==null||l.call(c,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context)}}e.listeners&&this.listeners.forEach(({listener:u})=>{u(this.currentResult)})})}};const mz=hk.useSyncExternalStore,LE=w.createContext(void 0),rP=w.createContext(!1);function sP(t,e){return t||(e&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=LE),window.ReactQueryClientContext):LE)}const iP=({context:t}={})=>{const e=w.useContext(sP(t,w.useContext(rP)));if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},gz=({client:t,children:e,context:n,contextSharing:r=!1})=>{w.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]);const s=sP(n,r);return w.createElement(rP.Provider,{value:!n&&r},w.createElement(s.Provider,{value:t},e))};function yz(t,e){return typeof t=="function"?t(...e):!!t}function xm(t,e,n){const r=JB(t,e),s=iP({context:r.context}),[i]=w.useState(()=>new pz(s,r));w.useEffect(()=>{i.setOptions(r)},[i,r]);const o=mz(w.useCallback(l=>i.subscribe(kt.batchCalls(l)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),a=w.useCallback((l,c)=>{i.mutate(l,c).catch(vz)},[i]);if(o.error&&yz(i.options.useErrorBoundary,[o.error]))throw o.error;return{...o,mutate:a,mutateAsync:o.mutate}}function vz(){}const xz=1,_z=1e6;let _m=0;function wz(){return _m=(_m+1)%Number.MAX_SAFE_INTEGER,_m.toString()}const wm=new Map,FE=t=>{if(wm.has(t))return;const e=setTimeout(()=>{wm.delete(t),Jl({type:"REMOVE_TOAST",toastId:t})},_z);wm.set(t,e)},bz=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,xz)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?FE(n):t.toasts.forEach(r=>{FE(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Kd=[];let Gd={toasts:[]};function Jl(t){Gd=bz(Gd,t),Kd.forEach(e=>{e(Gd)})}function Ez({...t}){const e=wz(),n=s=>Jl({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>Jl({type:"DISMISS_TOAST",toastId:e});return Jl({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function ar(){const[t,e]=w.useState(Gd);return w.useEffect(()=>(Kd.push(e),()=>{const n=Kd.indexOf(e);n>-1&&Kd.splice(n,1)}),[t]),{...t,toast:Ez,dismiss:n=>Jl({type:"DISMISS_TOAST",toastId:n})}}function oP(t,e){return function(){return t.apply(e,arguments)}}const{toString:Sz}=Object.prototype,{getPrototypeOf:Y0}=Object,Wf=(t=>e=>{const n=Sz.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),lr=t=>(t=t.toLowerCase(),e=>Wf(e)===t),Kf=t=>e=>typeof e===t,{isArray:Va}=Array,Nc=Kf("undefined");function Tz(t){return t!==null&&!Nc(t)&&t.constructor!==null&&!Nc(t.constructor)&&Tn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const aP=lr("ArrayBuffer");function Iz(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&aP(t.buffer),e}const Cz=Kf("string"),Tn=Kf("function"),lP=Kf("number"),Gf=t=>t!==null&&typeof t=="object",kz=t=>t===!0||t===!1,Qd=t=>{if(Wf(t)!=="object")return!1;const e=Y0(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Az=lr("Date"),Rz=lr("File"),Pz=lr("Blob"),Nz=lr("FileList"),Dz=t=>Gf(t)&&Tn(t.pipe),Oz=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Tn(t.append)&&((e=Wf(t))==="formdata"||e==="object"&&Tn(t.toString)&&t.toString()==="[object FormData]"))},jz=lr("URLSearchParams"),[Mz,Lz,Fz,Vz]=["ReadableStream","Request","Response","Headers"].map(lr),Uz=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function lu(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),Va(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{const i=n?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let a;for(r=0;r<o;r++)a=i[r],e.call(null,t[a],a,t)}}function cP(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const Mi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,uP=t=>!Nc(t)&&t!==Mi;function wy(){const{caseless:t}=uP(this)&&this||{},e={},n=(r,s)=>{const i=t&&cP(e,s)||s;Qd(e[i])&&Qd(r)?e[i]=wy(e[i],r):Qd(r)?e[i]=wy({},r):Va(r)?e[i]=r.slice():e[i]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&lu(arguments[r],n);return e}const Bz=(t,e,n,{allOwnKeys:r}={})=>(lu(e,(s,i)=>{n&&Tn(s)?t[i]=oP(s,n):t[i]=s},{allOwnKeys:r}),t),zz=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),$z=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},qz=(t,e,n,r)=>{let s,i,o;const a={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)o=s[i],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&Y0(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},Hz=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},Wz=t=>{if(!t)return null;if(Va(t))return t;let e=t.length;if(!lP(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},Kz=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Y0(Uint8Array)),Gz=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let s;for(;(s=r.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},Qz=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},Yz=lr("HTMLFormElement"),Xz=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),VE=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),Jz=lr("RegExp"),dP=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};lu(n,(s,i)=>{let o;(o=e(s,i,t))!==!1&&(r[i]=o||s)}),Object.defineProperties(t,r)},Zz=t=>{dP(t,(e,n)=>{if(Tn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Tn(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},e6=(t,e)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return Va(t)?r(t):r(String(t).split(e)),n},t6=()=>{},n6=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function r6(t){return!!(t&&Tn(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const s6=t=>{const e=new Array(10),n=(r,s)=>{if(Gf(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[s]=r;const i=Va(r)?[]:{};return lu(r,(o,a)=>{const l=n(o,s+1);!Nc(l)&&(i[a]=l)}),e[s]=void 0,i}}return r};return n(t,0)},i6=lr("AsyncFunction"),o6=t=>t&&(Gf(t)||Tn(t))&&Tn(t.then)&&Tn(t.catch),hP=((t,e)=>t?setImmediate:e?((n,r)=>(Mi.addEventListener("message",({source:s,data:i})=>{s===Mi&&i===n&&r.length&&r.shift()()},!1),s=>{r.push(s),Mi.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Tn(Mi.postMessage)),a6=typeof queueMicrotask<"u"?queueMicrotask.bind(Mi):typeof process<"u"&&process.nextTick||hP,U={isArray:Va,isArrayBuffer:aP,isBuffer:Tz,isFormData:Oz,isArrayBufferView:Iz,isString:Cz,isNumber:lP,isBoolean:kz,isObject:Gf,isPlainObject:Qd,isReadableStream:Mz,isRequest:Lz,isResponse:Fz,isHeaders:Vz,isUndefined:Nc,isDate:Az,isFile:Rz,isBlob:Pz,isRegExp:Jz,isFunction:Tn,isStream:Dz,isURLSearchParams:jz,isTypedArray:Kz,isFileList:Nz,forEach:lu,merge:wy,extend:Bz,trim:Uz,stripBOM:zz,inherits:$z,toFlatObject:qz,kindOf:Wf,kindOfTest:lr,endsWith:Hz,toArray:Wz,forEachEntry:Gz,matchAll:Qz,isHTMLForm:Yz,hasOwnProperty:VE,hasOwnProp:VE,reduceDescriptors:dP,freezeMethods:Zz,toObjectSet:e6,toCamelCase:Xz,noop:t6,toFiniteNumber:n6,findKey:cP,global:Mi,isContextDefined:uP,isSpecCompliantForm:r6,toJSONObject:s6,isAsyncFn:i6,isThenable:o6,setImmediate:hP,asap:a6};function me(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}U.inherits(me,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:U.toJSONObject(this.config),code:this.code,status:this.status}}});const fP=me.prototype,pP={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{pP[t]={value:t}});Object.defineProperties(me,pP);Object.defineProperty(fP,"isAxiosError",{value:!0});me.from=(t,e,n,r,s,i)=>{const o=Object.create(fP);return U.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),me.call(o,t.message,e,n,r,s),o.cause=t,o.name=t.name,i&&Object.assign(o,i),o};const l6=null;function by(t){return U.isPlainObject(t)||U.isArray(t)}function mP(t){return U.endsWith(t,"[]")?t.slice(0,-2):t}function UE(t,e,n){return t?t.concat(e).map(function(s,i){return s=mP(s),!n&&i?"["+s+"]":s}).join(n?".":""):e}function c6(t){return U.isArray(t)&&!t.some(by)}const u6=U.toFlatObject(U,{},null,function(e){return/^is[A-Z]/.test(e)});function Qf(t,e,n){if(!U.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=U.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,x){return!U.isUndefined(x[g])});const r=n.metaTokens,s=n.visitor||u,i=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&U.isSpecCompliantForm(e);if(!U.isFunction(s))throw new TypeError("visitor must be a function");function c(y){if(y===null)return"";if(U.isDate(y))return y.toISOString();if(!l&&U.isBlob(y))throw new me("Blob is not supported. Use a Buffer instead.");return U.isArrayBuffer(y)||U.isTypedArray(y)?l&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function u(y,g,x){let b=y;if(y&&!x&&typeof y=="object"){if(U.endsWith(g,"{}"))g=r?g:g.slice(0,-2),y=JSON.stringify(y);else if(U.isArray(y)&&c6(y)||(U.isFileList(y)||U.endsWith(g,"[]"))&&(b=U.toArray(y)))return g=mP(g),b.forEach(function(T,k){!(U.isUndefined(T)||T===null)&&e.append(o===!0?UE([g],k,i):o===null?g:g+"[]",c(T))}),!1}return by(y)?!0:(e.append(UE(x,g,i),c(y)),!1)}const f=[],p=Object.assign(u6,{defaultVisitor:u,convertValue:c,isVisitable:by});function m(y,g){if(!U.isUndefined(y)){if(f.indexOf(y)!==-1)throw Error("Circular reference detected in "+g.join("."));f.push(y),U.forEach(y,function(b,_){(!(U.isUndefined(b)||b===null)&&s.call(e,b,U.isString(_)?_.trim():_,g,p))===!0&&m(b,g?g.concat(_):[_])}),f.pop()}}if(!U.isObject(t))throw new TypeError("data must be an object");return m(t),e}function BE(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function X0(t,e){this._pairs=[],t&&Qf(t,this,e)}const gP=X0.prototype;gP.append=function(e,n){this._pairs.push([e,n])};gP.toString=function(e){const n=e?function(r){return e.call(this,r,BE)}:BE;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function d6(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function yP(t,e,n){if(!e)return t;const r=n&&n.encode||d6;U.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let i;if(s?i=s(e,n):i=U.isURLSearchParams(e)?e.toString():new X0(e,n).toString(r),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class zE{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){U.forEach(this.handlers,function(r){r!==null&&e(r)})}}const vP={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},h6=typeof URLSearchParams<"u"?URLSearchParams:X0,f6=typeof FormData<"u"?FormData:null,p6=typeof Blob<"u"?Blob:null,m6={isBrowser:!0,classes:{URLSearchParams:h6,FormData:f6,Blob:p6},protocols:["http","https","file","blob","url","data"]},J0=typeof window<"u"&&typeof document<"u",Ey=typeof navigator=="object"&&navigator||void 0,g6=J0&&(!Ey||["ReactNative","NativeScript","NS"].indexOf(Ey.product)<0),y6=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",v6=J0&&window.location.href||"http://localhost",x6=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:J0,hasStandardBrowserEnv:g6,hasStandardBrowserWebWorkerEnv:y6,navigator:Ey,origin:v6},Symbol.toStringTag,{value:"Module"})),Wt={...x6,...m6};function _6(t,e){return Qf(t,new Wt.classes.URLSearchParams,Object.assign({visitor:function(n,r,s,i){return Wt.isNode&&U.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}function w6(t){return U.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function b6(t){const e={},n=Object.keys(t);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],e[i]=t[i];return e}function xP(t){function e(n,r,s,i){let o=n[i++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=i>=n.length;return o=!o&&U.isArray(s)?s.length:o,l?(U.hasOwnProp(s,o)?s[o]=[s[o],r]:s[o]=r,!a):((!s[o]||!U.isObject(s[o]))&&(s[o]=[]),e(n,r,s[o],i)&&U.isArray(s[o])&&(s[o]=b6(s[o])),!a)}if(U.isFormData(t)&&U.isFunction(t.entries)){const n={};return U.forEachEntry(t,(r,s)=>{e(w6(r),s,n,0)}),n}return null}function E6(t,e,n){if(U.isString(t))try{return(e||JSON.parse)(t),U.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const cu={transitional:vP,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=U.isObject(e);if(i&&U.isHTMLForm(e)&&(e=new FormData(e)),U.isFormData(e))return s?JSON.stringify(xP(e)):e;if(U.isArrayBuffer(e)||U.isBuffer(e)||U.isStream(e)||U.isFile(e)||U.isBlob(e)||U.isReadableStream(e))return e;if(U.isArrayBufferView(e))return e.buffer;if(U.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return _6(e,this.formSerializer).toString();if((a=U.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Qf(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),E6(e)):e}],transformResponse:[function(e){const n=this.transitional||cu.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(U.isResponse(e)||U.isReadableStream(e))return e;if(e&&U.isString(e)&&(r&&!this.responseType||s)){const o=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?me.from(a,me.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Wt.classes.FormData,Blob:Wt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};U.forEach(["delete","get","head","post","put","patch"],t=>{cu.headers[t]={}});const S6=U.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),T6=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(o){s=o.indexOf(":"),n=o.substring(0,s).trim().toLowerCase(),r=o.substring(s+1).trim(),!(!n||e[n]&&S6[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},$E=Symbol("internals");function vl(t){return t&&String(t).trim().toLowerCase()}function Yd(t){return t===!1||t==null?t:U.isArray(t)?t.map(Yd):String(t)}function I6(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const C6=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function bm(t,e,n,r,s){if(U.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!U.isString(e)){if(U.isString(r))return e.indexOf(r)!==-1;if(U.isRegExp(r))return r.test(e)}}function k6(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function A6(t,e){const n=U.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,i,o){return this[r].call(this,e,s,i,o)},configurable:!0})})}let fn=class{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function i(a,l,c){const u=vl(l);if(!u)throw new Error("header name must be a non-empty string");const f=U.findKey(s,u);(!f||s[f]===void 0||c===!0||c===void 0&&s[f]!==!1)&&(s[f||l]=Yd(a))}const o=(a,l)=>U.forEach(a,(c,u)=>i(c,u,l));if(U.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(U.isString(e)&&(e=e.trim())&&!C6(e))o(T6(e),n);else if(U.isHeaders(e))for(const[a,l]of e.entries())i(l,a,r);else e!=null&&i(n,e,r);return this}get(e,n){if(e=vl(e),e){const r=U.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return I6(s);if(U.isFunction(n))return n.call(this,s,r);if(U.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=vl(e),e){const r=U.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||bm(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function i(o){if(o=vl(o),o){const a=U.findKey(r,o);a&&(!n||bm(r,r[a],a,n))&&(delete r[a],s=!0)}}return U.isArray(e)?e.forEach(i):i(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!e||bm(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const n=this,r={};return U.forEach(this,(s,i)=>{const o=U.findKey(r,i);if(o){n[o]=Yd(s),delete n[i];return}const a=e?k6(i):String(i).trim();a!==i&&delete n[i],n[a]=Yd(s),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return U.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&U.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[$E]=this[$E]={accessors:{}}).accessors,s=this.prototype;function i(o){const a=vl(o);r[a]||(A6(s,o),r[a]=!0)}return U.isArray(e)?e.forEach(i):i(e),this}};fn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);U.reduceDescriptors(fn.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});U.freezeMethods(fn);function Em(t,e){const n=this||cu,r=e||n,s=fn.from(r.headers);let i=r.data;return U.forEach(t,function(a){i=a.call(n,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function _P(t){return!!(t&&t.__CANCEL__)}function Ua(t,e,n){me.call(this,t??"canceled",me.ERR_CANCELED,e,n),this.name="CanceledError"}U.inherits(Ua,me,{__CANCEL__:!0});function wP(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new me("Request failed with status code "+n.status,[me.ERR_BAD_REQUEST,me.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function R6(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function P6(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,i=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),u=r[i];o||(o=c),n[s]=l,r[s]=c;let f=i,p=0;for(;f!==s;)p+=n[f++],f=f%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),c-o<e)return;const m=u&&c-u;return m?Math.round(p*1e3/m):void 0}}function N6(t,e){let n=0,r=1e3/e,s,i;const o=(c,u=Date.now())=>{n=u,s=null,i&&(clearTimeout(i),i=null),t.apply(null,c)};return[(...c)=>{const u=Date.now(),f=u-n;f>=r?o(c,u):(s=c,i||(i=setTimeout(()=>{i=null,o(s)},r-f)))},()=>s&&o(s)]}const Yh=(t,e,n=3)=>{let r=0;const s=P6(50,250);return N6(i=>{const o=i.loaded,a=i.lengthComputable?i.total:void 0,l=o-r,c=s(l),u=o<=a;r=o;const f={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&u?(a-o)/c:void 0,event:i,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(f)},n)},qE=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},HE=t=>(...e)=>U.asap(()=>t(...e)),D6=Wt.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,Wt.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(Wt.origin),Wt.navigator&&/(msie|trident)/i.test(Wt.navigator.userAgent)):()=>!0,O6=Wt.hasStandardBrowserEnv?{write(t,e,n,r,s,i){const o=[t+"="+encodeURIComponent(e)];U.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),U.isString(r)&&o.push("path="+r),U.isString(s)&&o.push("domain="+s),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function j6(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function M6(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function bP(t,e,n){let r=!j6(e);return t&&(r||n==!1)?M6(t,e):e}const WE=t=>t instanceof fn?{...t}:t;function no(t,e){e=e||{};const n={};function r(c,u,f,p){return U.isPlainObject(c)&&U.isPlainObject(u)?U.merge.call({caseless:p},c,u):U.isPlainObject(u)?U.merge({},u):U.isArray(u)?u.slice():u}function s(c,u,f,p){if(U.isUndefined(u)){if(!U.isUndefined(c))return r(void 0,c,f,p)}else return r(c,u,f,p)}function i(c,u){if(!U.isUndefined(u))return r(void 0,u)}function o(c,u){if(U.isUndefined(u)){if(!U.isUndefined(c))return r(void 0,c)}else return r(void 0,u)}function a(c,u,f){if(f in e)return r(c,u);if(f in t)return r(void 0,c)}const l={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,u,f)=>s(WE(c),WE(u),f,!0)};return U.forEach(Object.keys(Object.assign({},t,e)),function(u){const f=l[u]||s,p=f(t[u],e[u],u);U.isUndefined(p)&&f!==a||(n[u]=p)}),n}const EP=t=>{const e=no({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:i,headers:o,auth:a}=e;e.headers=o=fn.from(o),e.url=yP(bP(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(U.isFormData(n)){if(Wt.hasStandardBrowserEnv||Wt.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[c,...u]=l?l.split(";").map(f=>f.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...u].join("; "))}}if(Wt.hasStandardBrowserEnv&&(r&&U.isFunction(r)&&(r=r(e)),r||r!==!1&&D6(e.url))){const c=s&&i&&O6.read(i);c&&o.set(s,c)}return e},L6=typeof XMLHttpRequest<"u",F6=L6&&function(t){return new Promise(function(n,r){const s=EP(t);let i=s.data;const o=fn.from(s.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=s,u,f,p,m,y;function g(){m&&m(),y&&y(),s.cancelToken&&s.cancelToken.unsubscribe(u),s.signal&&s.signal.removeEventListener("abort",u)}let x=new XMLHttpRequest;x.open(s.method.toUpperCase(),s.url,!0),x.timeout=s.timeout;function b(){if(!x)return;const T=fn.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders()),N={data:!a||a==="text"||a==="json"?x.responseText:x.response,status:x.status,statusText:x.statusText,headers:T,config:t,request:x};wP(function(S){n(S),g()},function(S){r(S),g()},N),x=null}"onloadend"in x?x.onloadend=b:x.onreadystatechange=function(){!x||x.readyState!==4||x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0)||setTimeout(b)},x.onabort=function(){x&&(r(new me("Request aborted",me.ECONNABORTED,t,x)),x=null)},x.onerror=function(){r(new me("Network Error",me.ERR_NETWORK,t,x)),x=null},x.ontimeout=function(){let k=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const N=s.transitional||vP;s.timeoutErrorMessage&&(k=s.timeoutErrorMessage),r(new me(k,N.clarifyTimeoutError?me.ETIMEDOUT:me.ECONNABORTED,t,x)),x=null},i===void 0&&o.setContentType(null),"setRequestHeader"in x&&U.forEach(o.toJSON(),function(k,N){x.setRequestHeader(N,k)}),U.isUndefined(s.withCredentials)||(x.withCredentials=!!s.withCredentials),a&&a!=="json"&&(x.responseType=s.responseType),c&&([p,y]=Yh(c,!0),x.addEventListener("progress",p)),l&&x.upload&&([f,m]=Yh(l),x.upload.addEventListener("progress",f),x.upload.addEventListener("loadend",m)),(s.cancelToken||s.signal)&&(u=T=>{x&&(r(!T||T.type?new Ua(null,t,x):T),x.abort(),x=null)},s.cancelToken&&s.cancelToken.subscribe(u),s.signal&&(s.signal.aborted?u():s.signal.addEventListener("abort",u)));const _=R6(s.url);if(_&&Wt.protocols.indexOf(_)===-1){r(new me("Unsupported protocol "+_+":",me.ERR_BAD_REQUEST,t));return}x.send(i||null)})},V6=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,s;const i=function(c){if(!s){s=!0,a();const u=c instanceof Error?c:this.reason;r.abort(u instanceof me?u:new Ua(u instanceof Error?u.message:u))}};let o=e&&setTimeout(()=>{o=null,i(new me(`timeout ${e} of ms exceeded`,me.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(i):c.removeEventListener("abort",i)}),t=null)};t.forEach(c=>c.addEventListener("abort",i));const{signal:l}=r;return l.unsubscribe=()=>U.asap(a),l}},U6=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,s;for(;r<n;)s=r+e,yield t.slice(r,s),r=s},B6=async function*(t,e){for await(const n of z6(t))yield*U6(n,e)},z6=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},KE=(t,e,n,r)=>{const s=B6(t,e);let i=0,o,a=l=>{o||(o=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:c,value:u}=await s.next();if(c){a(),l.close();return}let f=u.byteLength;if(n){let p=i+=f;n(p)}l.enqueue(new Uint8Array(u))}catch(c){throw a(c),c}},cancel(l){return a(l),s.return()}},{highWaterMark:2})},Yf=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",SP=Yf&&typeof ReadableStream=="function",$6=Yf&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),TP=(t,...e)=>{try{return!!t(...e)}catch{return!1}},q6=SP&&TP(()=>{let t=!1;const e=new Request(Wt.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),GE=64*1024,Sy=SP&&TP(()=>U.isReadableStream(new Response("").body)),Xh={stream:Sy&&(t=>t.body)};Yf&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Xh[e]&&(Xh[e]=U.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new me(`Response type '${e}' is not supported`,me.ERR_NOT_SUPPORT,r)})})})(new Response);const H6=async t=>{if(t==null)return 0;if(U.isBlob(t))return t.size;if(U.isSpecCompliantForm(t))return(await new Request(Wt.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(U.isArrayBufferView(t)||U.isArrayBuffer(t))return t.byteLength;if(U.isURLSearchParams(t)&&(t=t+""),U.isString(t))return(await $6(t)).byteLength},W6=async(t,e)=>{const n=U.toFiniteNumber(t.getContentLength());return n??H6(e)},K6=Yf&&(async t=>{let{url:e,method:n,data:r,signal:s,cancelToken:i,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:u,withCredentials:f="same-origin",fetchOptions:p}=EP(t);c=c?(c+"").toLowerCase():"text";let m=V6([s,i&&i.toAbortSignal()],o),y;const g=m&&m.unsubscribe&&(()=>{m.unsubscribe()});let x;try{if(l&&q6&&n!=="get"&&n!=="head"&&(x=await W6(u,r))!==0){let N=new Request(e,{method:"POST",body:r,duplex:"half"}),R;if(U.isFormData(r)&&(R=N.headers.get("content-type"))&&u.setContentType(R),N.body){const[S,E]=qE(x,Yh(HE(l)));r=KE(N.body,GE,S,E)}}U.isString(f)||(f=f?"include":"omit");const b="credentials"in Request.prototype;y=new Request(e,{...p,signal:m,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:b?f:void 0});let _=await fetch(y);const T=Sy&&(c==="stream"||c==="response");if(Sy&&(a||T&&g)){const N={};["status","statusText","headers"].forEach(C=>{N[C]=_[C]});const R=U.toFiniteNumber(_.headers.get("content-length")),[S,E]=a&&qE(R,Yh(HE(a),!0))||[];_=new Response(KE(_.body,GE,S,()=>{E&&E(),g&&g()}),N)}c=c||"text";let k=await Xh[U.findKey(Xh,c)||"text"](_,t);return!T&&g&&g(),await new Promise((N,R)=>{wP(N,R,{data:k,headers:fn.from(_.headers),status:_.status,statusText:_.statusText,config:t,request:y})})}catch(b){throw g&&g(),b&&b.name==="TypeError"&&/fetch/i.test(b.message)?Object.assign(new me("Network Error",me.ERR_NETWORK,t,y),{cause:b.cause||b}):me.from(b,b&&b.code,t,y)}}),Ty={http:l6,xhr:F6,fetch:K6};U.forEach(Ty,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const QE=t=>`- ${t}`,G6=t=>U.isFunction(t)||t===null||t===!1,IP={getAdapter:t=>{t=U.isArray(t)?t:[t];const{length:e}=t;let n,r;const s={};for(let i=0;i<e;i++){n=t[i];let o;if(r=n,!G6(n)&&(r=Ty[(o=String(n)).toLowerCase()],r===void 0))throw new me(`Unknown adapter '${o}'`);if(r)break;s[o||"#"+i]=r}if(!r){const i=Object.entries(s).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?i.length>1?`since :
`+i.map(QE).join(`
`):" "+QE(i[0]):"as no adapter specified";throw new me("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:Ty};function Sm(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Ua(null,t)}function YE(t){return Sm(t),t.headers=fn.from(t.headers),t.data=Em.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),IP.getAdapter(t.adapter||cu.adapter)(t).then(function(r){return Sm(t),r.data=Em.call(t,t.transformResponse,r),r.headers=fn.from(r.headers),r},function(r){return _P(r)||(Sm(t),r&&r.response&&(r.response.data=Em.call(t,t.transformResponse,r.response),r.response.headers=fn.from(r.response.headers))),Promise.reject(r)})}const CP="1.8.4",Xf={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Xf[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const XE={};Xf.transitional=function(e,n,r){function s(i,o){return"[Axios v"+CP+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,a)=>{if(e===!1)throw new me(s(o," has been removed"+(n?" in "+n:"")),me.ERR_DEPRECATED);return n&&!XE[o]&&(XE[o]=!0,console.warn(s(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,o,a):!0}};Xf.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function Q6(t,e,n){if(typeof t!="object")throw new me("options must be an object",me.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const i=r[s],o=e[i];if(o){const a=t[i],l=a===void 0||o(a,i,t);if(l!==!0)throw new me("option "+i+" must be "+l,me.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new me("Unknown option "+i,me.ERR_BAD_OPTION)}}const Xd={assertOptions:Q6,validators:Xf},dr=Xd.validators;let zi=class{constructor(e){this.defaults=e,this.interceptors={request:new zE,response:new zE}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=no(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&Xd.assertOptions(r,{silentJSONParsing:dr.transitional(dr.boolean),forcedJSONParsing:dr.transitional(dr.boolean),clarifyTimeoutError:dr.transitional(dr.boolean)},!1),s!=null&&(U.isFunction(s)?n.paramsSerializer={serialize:s}:Xd.assertOptions(s,{encode:dr.function,serialize:dr.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Xd.assertOptions(n,{baseUrl:dr.spelling("baseURL"),withXsrfToken:dr.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&U.merge(i.common,i[n.method]);i&&U.forEach(["delete","get","head","post","put","patch","common"],y=>{delete i[y]}),n.headers=fn.concat(o,i);const a=[];let l=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(n)===!1||(l=l&&g.synchronous,a.unshift(g.fulfilled,g.rejected))});const c=[];this.interceptors.response.forEach(function(g){c.push(g.fulfilled,g.rejected)});let u,f=0,p;if(!l){const y=[YE.bind(this),void 0];for(y.unshift.apply(y,a),y.push.apply(y,c),p=y.length,u=Promise.resolve(n);f<p;)u=u.then(y[f++],y[f++]);return u}p=a.length;let m=n;for(f=0;f<p;){const y=a[f++],g=a[f++];try{m=y(m)}catch(x){g.call(this,x);break}}try{u=YE.call(this,m)}catch(y){return Promise.reject(y)}for(f=0,p=c.length;f<p;)u=u.then(c[f++],c[f++]);return u}getUri(e){e=no(this.defaults,e);const n=bP(e.baseURL,e.url,e.allowAbsoluteUrls);return yP(n,e.params,e.paramsSerializer)}};U.forEach(["delete","get","head","options"],function(e){zi.prototype[e]=function(n,r){return this.request(no(r||{},{method:e,url:n,data:(r||{}).data}))}});U.forEach(["post","put","patch"],function(e){function n(r){return function(i,o,a){return this.request(no(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}zi.prototype[e]=n(),zi.prototype[e+"Form"]=n(!0)});let Y6=class kP{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(a=>{r.subscribe(a),i=a}).then(s);return o.cancel=function(){r.unsubscribe(i)},o},e(function(i,o,a){r.reason||(r.reason=new Ua(i,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new kP(function(s){e=s}),cancel:e}}};function X6(t){return function(n){return t.apply(null,n)}}function J6(t){return U.isObject(t)&&t.isAxiosError===!0}const Iy={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Iy).forEach(([t,e])=>{Iy[e]=t});function AP(t){const e=new zi(t),n=oP(zi.prototype.request,e);return U.extend(n,zi.prototype,e,{allOwnKeys:!0}),U.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return AP(no(t,s))},n}const it=AP(cu);it.Axios=zi;it.CanceledError=Ua;it.CancelToken=Y6;it.isCancel=_P;it.VERSION=CP;it.toFormData=Qf;it.AxiosError=me;it.Cancel=it.CanceledError;it.all=function(e){return Promise.all(e)};it.spread=X6;it.isAxiosError=J6;it.mergeConfig=no;it.AxiosHeaders=fn;it.formToJSON=t=>xP(U.isHTMLForm(t)?new FormData(t):t);it.getAdapter=IP.getAdapter;it.HttpStatusCode=Iy;it.default=it;const{Axios:nX,AxiosError:rX,CanceledError:sX,isCancel:iX,CancelToken:oX,VERSION:aX,all:lX,Cancel:cX,isAxiosError:uX,spread:dX,toFormData:hX,AxiosHeaders:fX,HttpStatusCode:pX,formToJSON:mX,getAdapter:gX,mergeConfig:yX}=it,Z6=["donor","beneficiary","volunteer"],RP=w.createContext(null);function e$({children:t}){const{toast:e}=ar();iP();const[,n]=or(),r=w.useMemo(()=>Hf(QR),[]),[s,i]=w.useState(null),[o,a]=w.useState(!0),[l,c]=w.useState(null);w.useEffect(()=>{let _=!0;console.log("AuthProvider: Setting up auth state listener");const T=g3(r,k=>{_&&(k?.uid!==s?.uid&&(console.log("AuthProvider: Auth state changed:",{currentUser:k}),i(k)),a(!1))},k=>{_&&(c(k),a(!1))});return()=>{_=!1,console.log("AuthProvider: Cleaning up auth state listener"),T()}},[r,s?.uid]);const u=xm({mutationFn:async({email:_,password:T})=>{try{console.log("Attempting login with email:",_);const k=await d3(r,_,T);return console.log("Login successful:",k.user),k.user}catch(k){if(console.error("Login error:",k),k instanceof Error){if(k.message.includes("auth/invalid-login-credentials"))throw new Error("Invalid email or password. Please check your credentials and try again.");if(k.message.includes("auth/user-not-found"))throw new Error("No account found with this email. Please register first.");if(k.message.includes("auth/wrong-password"))throw new Error("Incorrect password. Please try again.")}throw new Error(k instanceof Error?k.message:"Login failed")}},onSuccess:_=>{e({title:"Login successful",description:`Welcome back, ${_.email}!`});const T=sessionStorage.getItem("redirectAfterLogin")||"/home";sessionStorage.removeItem("redirectAfterLogin"),n(T)},onError:_=>{c(_),e({title:"Login failed",description:_.message,variant:"destructive"})}}),f=xm({mutationFn:async({email:_,password:T,name:k,role:N})=>{try{if(!Z6.includes(N))throw new Error("Invalid role selected. Please choose a valid role.");console.log("Attempting registration with email:",_);const R=await u3(r,_,T);return console.log("Registration successful:",R.user),await f3(R.user,{displayName:`${k}:${N}`}),console.log("Profile updated successfully"),await a5(XA(GR,"users",R.user.uid),{email:R.user.email,name:k,role:N,createdAt:aE(),lastLogin:aE(),permissions:t$(N)}),console.log("Firestore document created successfully"),R.user}catch(R){if(console.error("Registration error:",R),R instanceof Error){if(R.message.includes("auth/email-already-in-use"))throw new Error("An account with this email already exists. Please login instead.");if(R.message.includes("auth/weak-password"))throw new Error("Password is too weak. Please use a stronger password.")}throw new Error(R instanceof Error?R.message:"Registration failed")}},onSuccess:_=>{e({title:"Registration successful",description:"Your account has been created successfully."});const T=sessionStorage.getItem("redirectAfterLogin")||"/home";sessionStorage.removeItem("redirectAfterLogin"),n(T)},onError:_=>{c(_),e({title:"Registration failed",description:_.message,variant:"destructive"})}}),p=xm({mutationFn:async()=>{try{await y3(r),i(null)}catch(_){throw new Error(_ instanceof Error?_.message:"Logout failed")}},onSuccess:()=>{e({title:"Logout successful",description:"You have been logged out."}),n("/")},onError:_=>{e({title:"Logout failed",description:_.message,variant:"destructive"})}}),m=w.useCallback(_=>{if(!s?.displayName)return!1;const[,T]=s.displayName.split(":");return T===_},[s]),y=w.useCallback(async(_,T)=>{await u.mutateAsync({email:_,password:T})},[u]),g=w.useCallback(async(_,T,k)=>{await f.mutateAsync({email:_,password:T,name:"",role:k})},[f]),x=w.useCallback(async()=>{await p.mutateAsync()},[p]),b=w.useMemo(()=>({user:s,loading:o,error:l,loginMutation:u,registerMutation:f,logoutMutation:p,hasRole:m,login:y,register:g,logout:x}),[s,o,l,u,f,p,m,y,g,x]);return d.jsx(RP.Provider,{value:b,children:t})}function yo(){const t=w.useContext(RP);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t}function t$(t){switch(t){case"admin":return["*"];case"staff":return["read","write","manage_inventory","manage_distributions"];case"donor":return["read","create_donation","view_donations"];case"volunteer":return["read","create_distribution","view_distributions","manage_distributions"];case"beneficiary":return["read","view_aid_requests","create_aid_request"];default:return["read"]}}it.interceptors.request.use(async t=>{const n=Hf(QR).currentUser;if(n){const r=await n.getIdToken();t.headers.Authorization=`Bearer ${r}`}return t});const ut={ADMIN:"admin",STAFF:"staff",DONOR:"donor",BENEFICIARY:"beneficiary",VOLUNTEER:"volunteer",GUEST:"guest"},PP=w.createContext(void 0),n$=({children:t})=>{const{user:e,loading:n,error:r}=yo(),[s,i]=w.useState(null),[o,a]=w.useState(!0),[l,c]=w.useState(null);w.useEffect(()=>{c(r||null)},[r]),w.useEffect(()=>{let m=!0;return(async()=>{if(!n){if(!e){m&&(i(null),a(!1));return}try{const g=await i5(XA(GR,"users",e.uid));if(!m)return;if(g.exists()){const x=g.data(),b={...e,role:x.role||"donor",createdAt:x.createdAt?.toDate()||new Date,lastLogin:x.lastLogin?.toDate()||new Date,permissions:x.permissions||[]};i(b),c(null)}else console.error("User document not found in Firestore"),c(new Error("User data not found")),i(null)}catch(g){console.error("Error fetching user data:",g),m&&(c(g instanceof Error?g:new Error("Failed to fetch user data")),i(null))}finally{m&&a(!1)}}})(),()=>{m=!1}},[e,n]);const u=w.useMemo(()=>m=>s?.role===m,[s]),f=w.useMemo(()=>m=>{if(!s)return!1;if(s.permissions?.includes(m))return!0;switch(s.role){case"admin":return!0;case"staff":return["read","write","manage_inventory","manage_distributions"].includes(m);case"donor":return["read","create_donation","view_donations"].includes(m);case"volunteer":return["read","create_distribution","view_distributions","manage_distributions"].includes(m);case"beneficiary":return["read","view_aid_requests","create_aid_request"].includes(m);default:return!1}},[s]),p=w.useMemo(()=>({user:s,loading:o,error:l,hasRole:u,hasPermission:f}),[s,o,l,u,f]);return d.jsx(PP.Provider,{value:p,children:t})},jt=()=>{const t=w.useContext(PP);if(t===void 0)throw new Error("useUser must be used within a UserProvider");return t},NP=w.createContext();function r$({children:t}){const{currentUser:e}=jt();ar();const[n,r]=w.useState([]),[s,i]=w.useState(!0),[o,a]=w.useState(null),[l,c]=w.useState(null),[u,f]=w.useState([]),[p,m]=w.useState(null),[y,g]=w.useState(!1),x=w.useCallback(()=>{p&&p.readyState===WebSocket.OPEN&&p.close();const F=new WebSocket("ws://localhost:3000/ws");return F.onopen=()=>{console.log("WebSocket connection established"),g(!0)},F.onmessage=B=>{try{JSON.parse(B.data).type==="inventory_updated"&&(b(),_())}catch(z){console.error("Error parsing WebSocket message:",z)}},F.onclose=()=>{console.log("WebSocket connection closed"),g(!1),setTimeout(()=>{document.visibilityState==="visible"&&x()},5e3)},F.onerror=B=>{console.error("WebSocket error:",B)},m(F),()=>{F&&F.close()}},[]),b=w.useCallback(async()=>{try{i(!0);const F=await fetch("/api/inventory");if(!F.ok)throw new Error(`API Error: ${F.status} ${F.statusText}`);const B=await F.json();r(B.items||[]),c(new Date),a(null)}catch(F){console.error("Error fetching inventory:",F),a("Failed to load inventory. Please try again later.");const B=JSON.parse(localStorage.getItem("inventory"))||[];B.length>0&&r(B)}finally{i(!1)}},[]),_=w.useCallback(async()=>{try{const F=await fetch("/api/aid-items");if(!F.ok)throw new Error(`API Error: ${F.status} ${F.statusText}`);const B=await F.json();f(B.items||[])}catch(F){console.error("Error fetching aid items:",F)}},[]);w.useEffect(()=>{b(),_(),x()},[b,_,x]),w.useEffect(()=>{const F=()=>{document.visibilityState==="visible"&&(!p||p.readyState!==WebSocket.OPEN)&&x()};return document.addEventListener("visibilitychange",F),()=>{document.removeEventListener("visibilitychange",F)}},[x]);const T=w.useCallback(async F=>{const B=n.find(z=>z.id===parseInt(F));if(B)return B;try{const z=await fetch(`/api/inventory/${F}`);if(!z.ok)throw new Error("Item not found");return(await z.json()).item}catch(z){return console.error("Error fetching inventory item:",z),null}},[n]),k=w.useCallback(async F=>{try{const B=await fetch("/api/inventory",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(F)});if(!B.ok){const W=await B.json();throw new Error(W.message||"Failed to create inventory item")}const z=await B.json();return r(W=>[...W,z.item]),c(new Date),{success:!0,item:z.item}}catch(B){return console.error("Error adding inventory item:",B),{success:!1,error:B.message||"Failed to add inventory item. Please try again."}}},[]),N=w.useCallback(async(F,B)=>{try{const z=await fetch(`/api/inventory/${F}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(B)});if(!z.ok){const M=await z.json();throw new Error(M.message||"Failed to update inventory item")}const W=await z.json();return r(M=>M.map(H=>H.id===parseInt(F)?W.item:H)),c(new Date),{success:!0,item:W.item}}catch(z){return console.error("Error updating inventory item:",z),{success:!1,error:z.message||"Failed to update inventory item. Please try again."}}},[]),R=w.useCallback(async F=>{try{const B=await fetch(`/api/inventory/${F}`,{method:"DELETE"});if(!B.ok){const z=await B.json();throw new Error(z.message||"Failed to delete inventory item")}return r(z=>z.filter(W=>W.id!==parseInt(F))),c(new Date),{success:!0}}catch(B){return console.error("Error removing inventory item:",B),{success:!1,error:B.message||"Failed to remove inventory item. Please try again."}}},[]),S=w.useCallback(async(F,B,z)=>{try{const W=await T(F);if(!W)return{success:!1,error:"Inventory item not found"};const M=W.quantity+B;if(M<0)return{success:!1,error:"Insufficient quantity available"};const H={timestamp:new Date().toISOString(),previousQuantity:W.quantity,newQuantity:M,change:B,reason:z};return await N(F,{quantity:M,lastAdjustment:H})}catch(W){return console.error("Error adjusting inventory quantity:",W),{success:!1,error:"Failed to adjust inventory quantity. Please try again."}}},[T,N]),E=w.useCallback(F=>n.filter(B=>B.category===F),[n]),C=w.useCallback(F=>n.filter(B=>B.locationId===F),[n]),A=w.useCallback(()=>n.filter(F=>F.quantity<10),[n]),P=w.useCallback((F=30)=>{const B=new Date;return B.setDate(B.getDate()+F),n.filter(z=>z.expiryDate&&new Date(z.expiryDate)<=B)},[n]),j=w.useCallback(()=>e?["admin","staff"].includes(e.role):!1,[e]),O={inventory:n,aidItems:u,loading:s,error:o,lastUpdate:l,getInventoryItem:T,addInventoryItem:k,updateInventoryItem:N,removeInventoryItem:R,adjustQuantity:S,getItemsByCategory:E,getItemsByLocation:C,getItemsBelowThreshold:A,getExpiringItems:P,canManageInventory:j,refresh:b,socket:p,isConnected:y};return d.jsx(NP.Provider,{value:O,children:t})}function uu(){const t=w.useContext(NP);if(!t)throw new Error("useInventory must be used within an InventoryProvider");return t}const ae={PENDING:"pending",APPROVED:"approved",IN_PROGRESS:"in_progress",READY_FOR_PICKUP:"ready_for_pickup",IN_TRANSIT:"in_transit",DELIVERED:"delivered",DENIED:"denied",CANCELLED:"cancelled"},DP=w.createContext();function s$({children:t}){const{user:e}=jt();ar();const[n,r]=w.useState([]),[s,i]=w.useState(!0),[o,a]=w.useState(null),[l,c]=w.useState(null),[u,f]=w.useState(null),[p,m]=w.useState(!1),y=w.useCallback(()=>{u&&u.readyState===WebSocket.OPEN&&u.close();const C=new WebSocket("ws://localhost:3000/ws");return C.onopen=()=>{console.log("WebSocket connection established"),m(!0)},C.onmessage=A=>{try{JSON.parse(A.data).type==="aid_request_updated"&&g()}catch(P){console.error("Error parsing WebSocket message:",P)}},C.onclose=()=>{console.log("WebSocket connection closed"),m(!1),setTimeout(()=>{document.visibilityState==="visible"&&y()},5e3)},C.onerror=A=>{console.error("WebSocket error:",A)},f(C),()=>{C&&C.close()}},[]),g=w.useCallback(async()=>{if(!e){r([]),i(!1);return}try{i(!0),a(null);const C=await fetch("/api/aid-requests",{headers:{Authorization:`Bearer ${await e.getIdToken()}`}});if(!C.ok)throw new Error(`API Error: ${C.status} ${C.statusText}`);const A=await C.json();r(A.requests||[]),c(new Date),localStorage.setItem("aidRequests",JSON.stringify(A.requests||[]))}catch(C){console.error("Error fetching aid requests:",C),a("Failed to load aid requests. Please try again later.");try{const A=JSON.parse(localStorage.getItem("aidRequests"));A&&Array.isArray(A)&&r(A)}catch(A){console.error("Error reading cached requests:",A),r([])}}finally{i(!1)}},[e]);w.useEffect(()=>{g(),e&&y()},[g,e]),w.useEffect(()=>{const C=()=>{document.visibilityState==="visible"&&(!u||u.readyState!==WebSocket.OPEN)&&y()};return document.addEventListener("visibilitychange",C),()=>{document.removeEventListener("visibilitychange",C)}},[y]);const x=w.useCallback(async C=>{const A=n.find(P=>P.id===parseInt(C));if(A)return A;try{const P=await fetch(`/api/aid-requests/${C}`);if(!P.ok)throw new Error("Request not found");return(await P.json()).request}catch(P){return console.error("Error fetching aid request:",P),null}},[n]),b=w.useCallback(async C=>{try{const A=await fetch("/api/aid-requests",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(C)});if(!A.ok){const j=await A.json();throw new Error(j.message||"Failed to create aid request")}const P=await A.json();return r(j=>[...j,P.request]),c(new Date),{success:!0,request:P.request}}catch(A){return console.error("Error creating aid request:",A),{success:!1,error:A.message||"Failed to create aid request. Please try again."}}},[]),_=w.useCallback(async(C,A)=>{try{return console.warn("Full aid request updates not implemented in API yet"),A.status?await T(C,A.status):{success:!1,error:"Full request updates not implemented"}}catch(P){return console.error("Error updating aid request:",P),{success:!1,error:P.message||"Failed to update aid request. Please try again."}}},[]),T=w.useCallback(async(C,A)=>{try{const P=await fetch(`/api/aid-requests/${C}/status`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:A})});if(!P.ok){const O=await P.json();throw new Error(O.message||"Failed to update request status")}const j=await P.json();return r(O=>O.map(F=>F.id===parseInt(C)?j.request:F)),c(new Date),{success:!0,request:j.request}}catch(P){return console.error("Error updating request status:",P),{success:!1,error:P.message||"Failed to update request status. Please try again."}}},[]),k=w.useCallback(async C=>(console.warn("Delete aid request not implemented in API yet"),{success:!1,error:"Delete requests not implemented"}),[]),N=w.useCallback(C=>n.filter(A=>A.userId===C),[n]),R=w.useCallback(C=>n.filter(A=>A.status===C),[n]),S=w.useCallback(()=>e?["admin","staff"].includes(e.role):!1,[e]),E={aidRequests:n,loading:s,error:o,lastUpdate:l,getAidRequestById:x,createAidRequest:b,updateAidRequest:_,updateRequestStatus:T,deleteAidRequest:k,getRequestsByBeneficiary:N,getRequestsByStatus:R,canManageRequests:S,refresh:g,socket:u,isConnected:p};return d.jsx(DP.Provider,{value:E,children:t})}function Ba(){const t=w.useContext(DP);if(!t)throw new Error("useAidRequest must be used within an AidRequestProvider");return t}const Fr={PENDING:"pending",PREPARING:"preparing",READY_FOR_PICKUP:"ready_for_pickup",IN_TRANSIT:"in_transit",DELIVERED:"delivered",CANCELLED:"cancelled"},OP=w.createContext(),i$=({children:t})=>{const{currentUser:e}=jt(),{inventory:n,adjustQuantity:r}=uu(),{updateRequestStatus:s}=Ba();ar();const[i,o]=w.useState([]),[a,l]=w.useState(!0),[c,u]=w.useState(null),[f,p]=w.useState(null),m=w.useCallback(async()=>{try{l(!0),await new Promise(S=>setTimeout(S,1e3));const R=JSON.parse(localStorage.getItem("distributions"))||[];o(R),p(new Date),u(null)}catch(R){console.error("Error fetching distributions:",R),u("Failed to load distributions. Please try again later.")}finally{l(!1)}},[]);w.useEffect(()=>{m();const R=setInterval(()=>{m()},3e4);return()=>clearInterval(R)},[m]);const y=w.useCallback(R=>i.find(S=>S.id===parseInt(R)),[i]),g=w.useCallback(R=>i.filter(S=>S.requestId===parseInt(R)),[i]),x=w.useCallback(async R=>{try{const S=R.items.filter(A=>{const P=n.find(j=>j.id===A.itemId);return!P||P.quantity<A.quantity});if(S.length>0)return{success:!1,error:`Insufficient inventory for: ${S.map(P=>P.name).join(", ")}`};const E={id:Date.now(),...R,status:Fr.PENDING,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},C=[...i,E];return o(C),localStorage.setItem("distributions",JSON.stringify(C)),await s(R.requestId,ae.IN_PROGRESS),R.items.forEach(A=>{r(A.itemId,-A.quantity,`Reserved for distribution #${E.id}`)}),p(new Date),{success:!0,distribution:E}}catch(S){return console.error("Error creating distribution:",S),{success:!1,error:"Failed to create distribution. Please try again."}}},[i,n,s,r]),b=w.useCallback(async(R,S)=>{try{const E=y(R);if(!E)return{success:!1,error:"Distribution not found"};const C={...E,status:S,updatedAt:new Date().toISOString()},A=i.map(j=>j.id===parseInt(R)?C:j);o(A),localStorage.setItem("distributions",JSON.stringify(A));let P;switch(S){case Fr.PREPARING:P=ae.IN_PROGRESS;break;case Fr.READY_FOR_PICKUP:P=ae.READY_FOR_PICKUP;break;case Fr.IN_TRANSIT:P=ae.IN_TRANSIT;break;case Fr.DELIVERED:P=ae.DELIVERED;break;case Fr.CANCELLED:P=ae.CANCELLED;break;default:P=null}return P&&await s(E.requestId,P),p(new Date),{success:!0,distribution:C}}catch(E){return console.error("Error updating distribution status:",E),{success:!1,error:"Failed to update distribution status. Please try again."}}},[i,y,s]),_=w.useCallback(async R=>{try{const S=y(R);if(!S)return{success:!1,error:"Distribution not found"};if(S.status===Fr.DELIVERED)return{success:!1,error:"Cannot cancel a delivered distribution"};const E=await b(R,Fr.CANCELLED);return E.success&&S.status!==Fr.DELIVERED&&S.items.forEach(C=>{r(C.itemId,C.quantity,`Returned from cancelled distribution #${R}`)}),E}catch(S){return console.error("Error cancelling distribution:",S),{success:!1,error:"Failed to cancel distribution. Please try again."}}},[y,b,r]),T=w.useCallback(R=>i.filter(S=>S.status===R),[i]),k=w.useCallback(()=>e?["admin","staff"].includes(e.role):!1,[e]),N={distributions:i,loading:a,error:c,lastUpdate:f,getDistributionById:y,getDistributionsByRequestId:g,getDistributionsByStatus:T,createDistribution:x,updateDistributionStatus:b,cancelDistribution:_,canCreateDistribution:k,refresh:m};return d.jsx(OP.Provider,{value:N,children:t})},jP=()=>{const t=w.useContext(OP);if(!t)throw new Error("useDistribution must be used within a DistributionProvider");return t};/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o$=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),a$=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),JE=t=>{const e=a$(t);return e.charAt(0).toUpperCase()+e.slice(1)},MP=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),l$=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var c$={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u$=w.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},l)=>w.createElement("svg",{ref:l,...c$,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:MP("lucide",s),...!i&&!l$(a)&&{"aria-hidden":"true"},...a},[...o.map(([c,u])=>w.createElement(c,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=(t,e)=>{const n=w.forwardRef(({className:r,...s},i)=>w.createElement(u$,{ref:i,iconNode:e,className:MP(`lucide-${o$(JE(t))}`,`lucide-${t}`,r),...s}));return n.displayName=JE(t),n};/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d$=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],h$=ot("arrow-right",d$);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f$=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],p$=ot("chart-column",f$);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m$=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],g$=ot("chart-no-axes-column",m$);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y$=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],v$=ot("check",y$);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x$=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],LP=ot("chevron-down",x$);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _$=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],w$=ot("chevron-up",_$);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b$=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],E$=ot("file-text",b$);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S$=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],FP=ot("globe",S$);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T$=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],Z0=ot("heart",T$);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I$=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],C$=ot("house",I$);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k$=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],A$=ot("info",k$);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R$=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Ys=ot("loader-circle",R$);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P$=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],VP=ot("log-out",P$);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N$=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],UP=ot("message-square",N$);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D$=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Cy=ot("package",D$);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O$=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],j$=ot("settings",O$);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M$=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],BP=ot("shield-alert",M$);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L$=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],zP=ot("shield",L$);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F$=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],V$=ot("truck",F$);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U$=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],ex=ot("users",U$);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B$=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],$P=ot("x",B$),yn=({component:t,requiredRoles:e,...n})=>{const{user:r,loading:s}=jt();return or(),w.useEffect(()=>{if(!r&&!s){const i=window.location.pathname;i!=="/auth"&&i!=="/login"&&i!=="/register"&&sessionStorage.setItem("redirectAfterLogin",i)}},[r,s]),s?d.jsx("div",{className:"flex justify-center items-center h-screen",children:"Loading..."}):r?e&&e.length>0&&!e.includes(r.role)?(sessionStorage.setItem("unauthorizedFrom",window.location.pathname),d.jsx(Qi,{to:"/unauthorized"})):d.jsx(t,{...n}):d.jsx(Qi,{to:"/login"})},ZE=({component:t,...e})=>{const{user:n,loading:r}=jt(),[s]=or(),[i,o]=w.useState(!1),[a,l]=w.useState(""),[c,u]=w.useState(!0);return console.log("UnauthenticatedRoute:",{user:n,loading:r,location:s}),w.useEffect(()=>{if(r){u(!0);return}if(u(!1),n&&!i){if(console.log("UnauthenticatedRoute: User is authenticated, setting redirect"),s==="/login"||s==="/register"){console.log("UnauthenticatedRoute: Allowing access to auth pages even when authenticated");return}const f=sessionStorage.getItem("redirectAfterLogin")||"/home";sessionStorage.removeItem("redirectAfterLogin"),l(f),o(!0)}},[n,r,s,i]),c?(console.log("UnauthenticatedRoute: Loading state"),d.jsx("div",{className:"flex justify-center items-center h-screen",children:d.jsx(Ys,{className:"h-8 w-8 animate-spin text-primary"})})):s==="/auth"?(console.log("UnauthenticatedRoute: Redirecting from /auth to /login"),d.jsx(Qi,{to:"/login"})):i?(console.log("UnauthenticatedRoute: Redirecting to",a),d.jsx(Qi,{to:a})):(console.log("UnauthenticatedRoute: Rendering component for unauthenticated user"),d.jsx(t,{...e}))},z$=()=>{const[t]=or(),{user:e}=jt(),{logout:n}=yo(),r=o=>t===o,s=[{path:"/home",icon:d.jsx(C$,{className:"w-5 h-5"}),label:"Home"},{path:"/distribution",icon:d.jsx(V$,{className:"w-5 h-5"}),label:"Distribution"},{path:"/beneficiaries",icon:d.jsx(ex,{className:"w-5 h-5"}),label:"Beneficiaries"},{path:"/analytics",icon:d.jsx(g$,{className:"w-5 h-5"}),label:"Reports & Analytics"},{path:"/inventory",icon:d.jsx(Cy,{className:"w-5 h-5"}),label:"Inventory"},{path:"/settings",icon:d.jsx(j$,{className:"w-5 h-5"}),label:"Settings"}],i=[{path:"/feedback",icon:d.jsx(UP,{className:"w-5 h-5"}),label:"Feedback"},{path:"/about",icon:d.jsx(A$,{className:"w-5 h-5"}),label:"About Us"}];return d.jsxs("div",{className:"flex flex-col w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700",children:[d.jsx("div",{className:"flex items-center justify-center h-16 border-b border-gray-200 dark:border-gray-700",children:d.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"HADS"})}),d.jsx("div",{className:"flex-1 overflow-y-auto py-4",children:d.jsx("nav",{className:"space-y-1 px-2",children:s.map(o=>d.jsxs(bn,{to:o.path,className:`flex items-center px-4 py-2 text-sm font-medium rounded-md ${r(o.path)?"bg-primary-50 text-primary-600 dark:bg-primary-900 dark:text-primary-100":"text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700"}`,children:[o.icon,d.jsx("span",{className:"ml-3",children:o.label})]},o.path))})}),d.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 p-4",children:[d.jsx("div",{className:"space-y-1",children:i.map(o=>d.jsxs(bn,{to:o.path,className:`flex items-center px-4 py-2 text-sm font-medium rounded-md ${r(o.path)?"bg-primary-50 text-primary-600 dark:bg-primary-900 dark:text-primary-100":"text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700"}`,children:[o.icon,d.jsx("span",{className:"ml-3",children:o.label})]},o.path))}),d.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[d.jsxs("div",{className:"flex items-center px-4 py-2",children:[d.jsx("div",{className:"flex-shrink-0",children:d.jsx("div",{className:"h-8 w-8 rounded-full bg-primary-500 flex items-center justify-center text-white",children:e?.name?.charAt(0)||"U"})}),d.jsxs("div",{className:"ml-3",children:[d.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:e?.name||"User"}),d.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e?.role||"Guest"})]})]}),d.jsxs("button",{onClick:n,className:"w-full flex items-center px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700 rounded-md mt-2",children:[d.jsx(VP,{className:"w-5 h-5 mr-3"}),"Logout"]})]})]})]})},$$=()=>{const[t]=or(),{user:e}=jt(),{logout:n}=yo(),[r,s]=w.useState(!1),i=w.useRef(null),o=u=>t===u,a=[{path:"/dashboard",label:"Dashboard"},{path:"/distribution",label:"Distribution"},{path:"/request",label:"Requests"},{path:"/inventory",label:"Inventory"}];w.useEffect(()=>{const u=f=>{i.current&&!i.current.contains(f.target)&&s(!1)};return document.addEventListener("mousedown",u),()=>{document.removeEventListener("mousedown",u)}},[]);const l=()=>{n(),s(!1)},c=u=>{if(!u)return"?";try{return u.split(" ").map(f=>f[0]).join("").toUpperCase()}catch{return u.charAt(0).toUpperCase()}};return d.jsx("header",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:d.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:d.jsxs("div",{className:"flex justify-between h-16",children:[d.jsx("div",{className:"flex",children:d.jsx("nav",{className:"hidden sm:ml-6 sm:flex sm:space-x-8",children:a.map(u=>d.jsx(bn,{to:u.path,className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium ${o(u.path)?"border-primary-500 text-gray-900 dark:text-white":"border-transparent text-gray-500 dark:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600 hover:text-gray-700 dark:hover:text-gray-200"}`,children:u.label},u.path))})}),d.jsx("div",{className:"hidden sm:ml-6 sm:flex sm:items-center",children:d.jsxs("div",{className:"ml-3 relative",ref:i,children:[d.jsx("div",{children:d.jsxs("button",{onClick:()=>s(!r),className:"max-w-xs bg-white dark:bg-gray-800 rounded-full flex items-center text-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:[d.jsx("span",{className:"sr-only",children:"Open user menu"}),d.jsx("div",{className:"h-8 w-8 rounded-full bg-primary-500 flex items-center justify-center text-white",children:c(e?.name||e?.email||"")})]})}),r&&d.jsxs("div",{className:"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg py-1 bg-white dark:bg-gray-800 ring-1 ring-black ring-opacity-5 focus:outline-none",children:[d.jsx(bn,{to:"/profile",className:"block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",children:"Your Profile"}),d.jsx(bn,{to:"/settings",className:"block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",children:"Settings"}),d.jsx("button",{onClick:l,className:"block w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",children:"Sign out"})]})]})})]})})})},q$=({children:t})=>{const[e]=or();return["/login","/register","/"].includes(e)?d.jsx(d.Fragment,{children:t}):d.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:d.jsxs("div",{className:"flex h-screen overflow-hidden",children:[d.jsx(z$,{}),d.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden",children:[d.jsx($$,{}),d.jsx("main",{className:"flex-1 overflow-y-auto bg-gray-50 dark:bg-gray-900 p-4 md:p-6",children:d.jsx("div",{className:"max-w-7xl mx-auto",children:t})})]})]})})};function fe(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t?.(s),n===!1||!s.defaultPrevented)return e?.(s)}}function H$(t,e){const n=w.createContext(e),r=i=>{const{children:o,...a}=i,l=w.useMemo(()=>a,Object.values(a));return d.jsx(n.Provider,{value:l,children:o})};r.displayName=t+"Provider";function s(i){const o=w.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function vo(t,e=[]){let n=[];function r(i,o){const a=w.createContext(o),l=n.length;n=[...n,o];const c=f=>{const{scope:p,children:m,...y}=f,g=p?.[t]?.[l]||a,x=w.useMemo(()=>y,Object.values(y));return d.jsx(g.Provider,{value:x,children:m})};c.displayName=i+"Provider";function u(f,p){const m=p?.[t]?.[l]||a,y=w.useContext(m);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[c,u]}const s=()=>{const i=n.map(o=>w.createContext(o));return function(a){const l=a?.[t]||i;return w.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,W$(s,...e)]}function W$(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const f=l(i)[`__scope${c}`];return{...a,...f}},{});return w.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function eS(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function qP(...t){return e=>{let n=!1;const r=t.map(s=>{const i=eS(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():eS(t[s],null)}}}}function Ge(...t){return w.useCallback(qP(...t),t)}function Sa(t){const e=G$(t),n=w.forwardRef((r,s)=>{const{children:i,...o}=r,a=w.Children.toArray(i),l=a.find(Y$);if(l){const c=l.props.children,u=a.map(f=>f===l?w.Children.count(c)>1?w.Children.only(null):w.isValidElement(c)?c.props.children:null:f);return d.jsx(e,{...o,ref:s,children:w.isValidElement(c)?w.cloneElement(c,void 0,u):null})}return d.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var K$=Sa("Slot");function G$(t){const e=w.forwardRef((n,r)=>{const{children:s,...i}=n;if(w.isValidElement(s)){const o=J$(s),a=X$(i,s.props);return s.type!==w.Fragment&&(a.ref=r?qP(r,o):o),w.cloneElement(s,a)}return w.Children.count(s)>1?w.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var Q$=Symbol("radix.slottable");function Y$(t){return w.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Q$}function X$(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{i(...a),s(...a)}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function J$(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function tx(t){const e=t+"CollectionProvider",[n,r]=vo(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:x,children:b}=g,_=Pn.useRef(null),T=Pn.useRef(new Map).current;return d.jsx(s,{scope:x,itemMap:T,collectionRef:_,children:b})};o.displayName=e;const a=t+"CollectionSlot",l=Sa(a),c=Pn.forwardRef((g,x)=>{const{scope:b,children:_}=g,T=i(a,b),k=Ge(x,T.collectionRef);return d.jsx(l,{ref:k,children:_})});c.displayName=a;const u=t+"CollectionItemSlot",f="data-radix-collection-item",p=Sa(u),m=Pn.forwardRef((g,x)=>{const{scope:b,children:_,...T}=g,k=Pn.useRef(null),N=Ge(x,k),R=i(u,b);return Pn.useEffect(()=>(R.itemMap.set(k,{ref:k,...T}),()=>void R.itemMap.delete(k))),d.jsx(p,{[f]:"",ref:N,children:_})});m.displayName=u;function y(g){const x=i(t+"CollectionConsumer",g);return Pn.useCallback(()=>{const _=x.collectionRef.current;if(!_)return[];const T=Array.from(_.querySelectorAll(`[${f}]`));return Array.from(x.itemMap.values()).sort((R,S)=>T.indexOf(R.ref.current)-T.indexOf(S.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:o,Slot:c,ItemSlot:m},y,r]}var Ot=globalThis?.document?w.useLayoutEffect:()=>{},Z$=iv[" useId ".trim().toString()]||(()=>{}),e9=0;function du(t){const[e,n]=w.useState(Z$());return Ot(()=>{n(r=>r??String(e9++))},[t]),e?`radix-${e}`:""}var t9=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ve=t9.reduce((t,e)=>{const n=Sa(`Primitive.${e}`),r=w.forwardRef((s,i)=>{const{asChild:o,...a}=s,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),d.jsx(l,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function HP(t,e){t&&uo.flushSync(()=>t.dispatchEvent(e))}function Bn(t){const e=w.useRef(t);return w.useEffect(()=>{e.current=t}),w.useMemo(()=>(...n)=>e.current?.(...n),[])}var n9=iv[" useInsertionEffect ".trim().toString()]||Ot;function Dc({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,o]=r9({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:s;{const u=w.useRef(t!==void 0);w.useEffect(()=>{const f=u.current;f!==a&&console.warn(`${r} is changing from ${f?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,r])}const c=w.useCallback(u=>{if(a){const f=s9(u)?u(t):u;f!==t&&o.current?.(f)}else i(u)},[a,t,i,o]);return[l,c]}function r9({defaultProp:t,onChange:e}){const[n,r]=w.useState(t),s=w.useRef(n),i=w.useRef(e);return n9(()=>{i.current=e},[e]),w.useEffect(()=>{s.current!==n&&(i.current?.(n),s.current=n)},[n,s]),[n,r,i]}function s9(t){return typeof t=="function"}var i9=w.createContext(void 0);function nx(t){const e=w.useContext(i9);return t||e||"ltr"}var Tm="rovingFocusGroup.onEntryFocus",o9={bubbles:!1,cancelable:!0},hu="RovingFocusGroup",[ky,WP,a9]=tx(hu),[l9,KP]=vo(hu,[a9]),[c9,u9]=l9(hu),GP=w.forwardRef((t,e)=>d.jsx(ky.Provider,{scope:t.__scopeRovingFocusGroup,children:d.jsx(ky.Slot,{scope:t.__scopeRovingFocusGroup,children:d.jsx(d9,{...t,ref:e})})}));GP.displayName=hu;var d9=w.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...f}=t,p=w.useRef(null),m=Ge(e,p),y=nx(i),[g,x]=Dc({prop:o,defaultProp:a??null,onChange:l,caller:hu}),[b,_]=w.useState(!1),T=Bn(c),k=WP(n),N=w.useRef(!1),[R,S]=w.useState(0);return w.useEffect(()=>{const E=p.current;if(E)return E.addEventListener(Tm,T),()=>E.removeEventListener(Tm,T)},[T]),d.jsx(c9,{scope:n,orientation:r,dir:y,loop:s,currentTabStopId:g,onItemFocus:w.useCallback(E=>x(E),[x]),onItemShiftTab:w.useCallback(()=>_(!0),[]),onFocusableItemAdd:w.useCallback(()=>S(E=>E+1),[]),onFocusableItemRemove:w.useCallback(()=>S(E=>E-1),[]),children:d.jsx(ve.div,{tabIndex:b||R===0?-1:0,"data-orientation":r,...f,ref:m,style:{outline:"none",...t.style},onMouseDown:fe(t.onMouseDown,()=>{N.current=!0}),onFocus:fe(t.onFocus,E=>{const C=!N.current;if(E.target===E.currentTarget&&C&&!b){const A=new CustomEvent(Tm,o9);if(E.currentTarget.dispatchEvent(A),!A.defaultPrevented){const P=k().filter(z=>z.focusable),j=P.find(z=>z.active),O=P.find(z=>z.id===g),B=[j,O,...P].filter(Boolean).map(z=>z.ref.current);XP(B,u)}}N.current=!1}),onBlur:fe(t.onBlur,()=>_(!1))})})}),QP="RovingFocusGroupItem",YP=w.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,children:o,...a}=t,l=du(),c=i||l,u=u9(QP,n),f=u.currentTabStopId===c,p=WP(n),{onFocusableItemAdd:m,onFocusableItemRemove:y,currentTabStopId:g}=u;return w.useEffect(()=>{if(r)return m(),()=>y()},[r,m,y]),d.jsx(ky.ItemSlot,{scope:n,id:c,focusable:r,active:s,children:d.jsx(ve.span,{tabIndex:f?0:-1,"data-orientation":u.orientation,...a,ref:e,onMouseDown:fe(t.onMouseDown,x=>{r?u.onItemFocus(c):x.preventDefault()}),onFocus:fe(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:fe(t.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){u.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const b=p9(x,u.orientation,u.dir);if(b!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let T=p().filter(k=>k.focusable).map(k=>k.ref.current);if(b==="last")T.reverse();else if(b==="prev"||b==="next"){b==="prev"&&T.reverse();const k=T.indexOf(x.currentTarget);T=u.loop?m9(T,k+1):T.slice(k+1)}setTimeout(()=>XP(T))}}),children:typeof o=="function"?o({isCurrentTabStop:f,hasTabStop:g!=null}):o})})});YP.displayName=QP;var h9={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function f9(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function p9(t,e,n){const r=f9(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return h9[r]}function XP(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function m9(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var g9=GP,y9=YP;function v9(t,e){return w.useReducer((n,r)=>e[n][r]??n,t)}var za=t=>{const{present:e,children:n}=t,r=x9(e),s=typeof n=="function"?n({present:r.isPresent}):w.Children.only(n),i=Ge(r.ref,_9(s));return typeof n=="function"||r.isPresent?w.cloneElement(s,{ref:i}):null};za.displayName="Presence";function x9(t){const[e,n]=w.useState(),r=w.useRef({}),s=w.useRef(t),i=w.useRef("none"),o=t?"mounted":"unmounted",[a,l]=v9(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return w.useEffect(()=>{const c=nd(r.current);i.current=a==="mounted"?c:"none"},[a]),Ot(()=>{const c=r.current,u=s.current;if(u!==t){const p=i.current,m=nd(c);t?l("MOUNT"):m==="none"||c?.display==="none"?l("UNMOUNT"):l(u&&p!==m?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,l]),Ot(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,f=m=>{const g=nd(r.current).includes(m.animationName);if(m.target===e&&g&&(l("ANIMATION_END"),!s.current)){const x=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=x)})}},p=m=>{m.target===e&&(i.current=nd(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:w.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function nd(t){return t?.animationName||"none"}function _9(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Jf="Tabs",[w9,vX]=vo(Jf,[KP]),JP=KP(),[b9,rx]=w9(Jf),ZP=w.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:i,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=t,u=nx(a),[f,p]=Dc({prop:r,onChange:s,defaultProp:i??"",caller:Jf});return d.jsx(b9,{scope:n,baseId:du(),value:f,onValueChange:p,orientation:o,dir:u,activationMode:l,children:d.jsx(ve.div,{dir:u,"data-orientation":o,...c,ref:e})})});ZP.displayName=Jf;var eN="TabsList",tN=w.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,i=rx(eN,n),o=JP(n);return d.jsx(g9,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:d.jsx(ve.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});tN.displayName=eN;var nN="TabsTrigger",rN=w.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...i}=t,o=rx(nN,n),a=JP(n),l=oN(o.baseId,r),c=aN(o.baseId,r),u=r===o.value;return d.jsx(y9,{asChild:!0,...a,focusable:!s,active:u,children:d.jsx(ve.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:l,...i,ref:e,onMouseDown:fe(t.onMouseDown,f=>{!s&&f.button===0&&f.ctrlKey===!1?o.onValueChange(r):f.preventDefault()}),onKeyDown:fe(t.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(r)}),onFocus:fe(t.onFocus,()=>{const f=o.activationMode!=="manual";!u&&!s&&f&&o.onValueChange(r)})})})});rN.displayName=nN;var sN="TabsContent",iN=w.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:i,...o}=t,a=rx(sN,n),l=oN(a.baseId,r),c=aN(a.baseId,r),u=r===a.value,f=w.useRef(u);return w.useEffect(()=>{const p=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(p)},[]),d.jsx(za,{present:s||u,children:({present:p})=>d.jsx(ve.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!p,id:c,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:f.current?"0s":void 0},children:p&&i})})});iN.displayName=sN;function oN(t,e){return`${t}-trigger-${e}`}function aN(t,e){return`${t}-content-${e}`}var E9=ZP,lN=tN,cN=rN,uN=iN;function dN(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=dN(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function hN(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=dN(t))&&(r&&(r+=" "),r+=e);return r}const sx="-",S9=t=>{const e=I9(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(sx);return a[0]===""&&a.length!==1&&a.shift(),fN(a,e)||T9(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},fN=(t,e)=>{if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?fN(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(sx);return e.validators.find(({validator:o})=>o(i))?.classGroupId},tS=/^\[(.+)\]$/,T9=t=>{if(tS.test(t)){const e=tS.exec(t)[1],n=e?.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},I9=t=>{const{theme:e,classGroups:n}=t,r={nextPart:new Map,validators:[]};for(const s in n)Ay(n[s],r,s,e);return r},Ay=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:nS(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(C9(s)){Ay(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{Ay(o,nS(e,i),n,r)})})},nS=(t,e)=>{let n=t;return e.split(sx).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},C9=t=>t.isThemeGetter,k9=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},Ry="!",Py=":",A9=Py.length,R9=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=s=>{const i=[];let o=0,a=0,l=0,c;for(let y=0;y<s.length;y++){let g=s[y];if(o===0&&a===0){if(g===Py){i.push(s.slice(l,y)),l=y+A9;continue}if(g==="/"){c=y;continue}}g==="["?o++:g==="]"?o--:g==="("?a++:g===")"&&a--}const u=i.length===0?s:s.substring(l),f=P9(u),p=f!==u,m=c&&c>l?c-l:void 0;return{modifiers:i,hasImportantModifier:p,baseClassName:f,maybePostfixModifierPosition:m}};if(e){const s=e+Py,i=r;r=o=>o.startsWith(s)?i(o.substring(s.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:o,maybePostfixModifierPosition:void 0}}if(n){const s=r;r=i=>n({className:i,parseClassName:s})}return r},P9=t=>t.endsWith(Ry)?t.substring(0,t.length-1):t.startsWith(Ry)?t.substring(1):t,N9=t=>{const e=Object.fromEntries(t.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const s=[];let i=[];return r.forEach(o=>{o[0]==="["||e[o]?(s.push(...i.sort(),o),i=[]):i.push(o)}),s.push(...i.sort()),s}},D9=t=>({cache:k9(t.cacheSize),parseClassName:R9(t),sortModifiers:N9(t),...S9(t)}),O9=/\s+/,j9=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:i}=e,o=[],a=t.trim().split(O9);let l="";for(let c=a.length-1;c>=0;c-=1){const u=a[c],{isExternal:f,modifiers:p,hasImportantModifier:m,baseClassName:y,maybePostfixModifierPosition:g}=n(u);if(f){l=u+(l.length>0?" "+l:l);continue}let x=!!g,b=r(x?y.substring(0,g):y);if(!b){if(!x){l=u+(l.length>0?" "+l:l);continue}if(b=r(y),!b){l=u+(l.length>0?" "+l:l);continue}x=!1}const _=i(p).join(":"),T=m?_+Ry:_,k=T+b;if(o.includes(k))continue;o.push(k);const N=s(b,x);for(let R=0;R<N.length;++R){const S=N[R];o.push(T+S)}l=u+(l.length>0?" "+l:l)}return l};function M9(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=pN(e))&&(r&&(r+=" "),r+=n);return r}const pN=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=pN(t[r]))&&(n&&(n+=" "),n+=e);return n};function L9(t,...e){let n,r,s,i=o;function o(l){const c=e.reduce((u,f)=>f(u),t());return n=D9(c),r=n.cache.get,s=n.cache.set,i=a,a(l)}function a(l){const c=r(l);if(c)return c;const u=j9(l,n);return s(l,u),u}return function(){return i(M9.apply(null,arguments))}}const pt=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},mN=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,gN=/^\((?:(\w[\w-]*):)?(.+)\)$/i,F9=/^\d+\/\d+$/,V9=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,U9=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,B9=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,z9=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,$9=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,To=t=>F9.test(t),ge=t=>!!t&&!Number.isNaN(Number(t)),gs=t=>!!t&&Number.isInteger(Number(t)),Im=t=>t.endsWith("%")&&ge(t.slice(0,-1)),Vr=t=>V9.test(t),q9=()=>!0,H9=t=>U9.test(t)&&!B9.test(t),yN=()=>!1,W9=t=>z9.test(t),K9=t=>$9.test(t),G9=t=>!ee(t)&&!te(t),Q9=t=>$a(t,_N,yN),ee=t=>mN.test(t),bi=t=>$a(t,wN,H9),Cm=t=>$a(t,eq,ge),rS=t=>$a(t,vN,yN),Y9=t=>$a(t,xN,K9),rd=t=>$a(t,bN,W9),te=t=>gN.test(t),xl=t=>qa(t,wN),X9=t=>qa(t,tq),sS=t=>qa(t,vN),J9=t=>qa(t,_N),Z9=t=>qa(t,xN),sd=t=>qa(t,bN,!0),$a=(t,e,n)=>{const r=mN.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},qa=(t,e,n=!1)=>{const r=gN.exec(t);return r?r[1]?e(r[1]):n:!1},vN=t=>t==="position"||t==="percentage",xN=t=>t==="image"||t==="url",_N=t=>t==="length"||t==="size"||t==="bg-size",wN=t=>t==="length",eq=t=>t==="number",tq=t=>t==="family-name",bN=t=>t==="shadow",nq=()=>{const t=pt("color"),e=pt("font"),n=pt("text"),r=pt("font-weight"),s=pt("tracking"),i=pt("leading"),o=pt("breakpoint"),a=pt("container"),l=pt("spacing"),c=pt("radius"),u=pt("shadow"),f=pt("inset-shadow"),p=pt("text-shadow"),m=pt("drop-shadow"),y=pt("blur"),g=pt("perspective"),x=pt("aspect"),b=pt("ease"),_=pt("animate"),T=()=>["auto","avoid","all","avoid-page","page","left","right","column"],k=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],N=()=>[...k(),te,ee],R=()=>["auto","hidden","clip","visible","scroll"],S=()=>["auto","contain","none"],E=()=>[te,ee,l],C=()=>[To,"full","auto",...E()],A=()=>[gs,"none","subgrid",te,ee],P=()=>["auto",{span:["full",gs,te,ee]},gs,te,ee],j=()=>[gs,"auto",te,ee],O=()=>["auto","min","max","fr",te,ee],F=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],B=()=>["start","end","center","stretch","center-safe","end-safe"],z=()=>["auto",...E()],W=()=>[To,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...E()],M=()=>[t,te,ee],H=()=>[...k(),sS,rS,{position:[te,ee]}],Q=()=>["no-repeat",{repeat:["","x","y","space","round"]}],ie=()=>["auto","cover","contain",J9,Q9,{size:[te,ee]}],re=()=>[Im,xl,bi],ne=()=>["","none","full",c,te,ee],se=()=>["",ge,xl,bi],je=()=>["solid","dashed","dotted","double"],Pe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],X=()=>[ge,Im,sS,rS],Me=()=>["","none",y,te,ee],We=()=>["none",ge,te,ee],xe=()=>["none",ge,te,ee],Se=()=>[ge,te,ee],Re=()=>[To,"full",...E()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Vr],breakpoint:[Vr],color:[q9],container:[Vr],"drop-shadow":[Vr],ease:["in","out","in-out"],font:[G9],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Vr],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Vr],shadow:[Vr],spacing:["px",ge],text:[Vr],"text-shadow":[Vr],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",To,ee,te,x]}],container:["container"],columns:[{columns:[ge,ee,te,a]}],"break-after":[{"break-after":T()}],"break-before":[{"break-before":T()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:N()}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:S()}],"overscroll-x":[{"overscroll-x":S()}],"overscroll-y":[{"overscroll-y":S()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:C()}],"inset-x":[{"inset-x":C()}],"inset-y":[{"inset-y":C()}],start:[{start:C()}],end:[{end:C()}],top:[{top:C()}],right:[{right:C()}],bottom:[{bottom:C()}],left:[{left:C()}],visibility:["visible","invisible","collapse"],z:[{z:[gs,"auto",te,ee]}],basis:[{basis:[To,"full","auto",a,...E()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[ge,To,"auto","initial","none",ee]}],grow:[{grow:["",ge,te,ee]}],shrink:[{shrink:["",ge,te,ee]}],order:[{order:[gs,"first","last","none",te,ee]}],"grid-cols":[{"grid-cols":A()}],"col-start-end":[{col:P()}],"col-start":[{"col-start":j()}],"col-end":[{"col-end":j()}],"grid-rows":[{"grid-rows":A()}],"row-start-end":[{row:P()}],"row-start":[{"row-start":j()}],"row-end":[{"row-end":j()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":O()}],"auto-rows":[{"auto-rows":O()}],gap:[{gap:E()}],"gap-x":[{"gap-x":E()}],"gap-y":[{"gap-y":E()}],"justify-content":[{justify:[...F(),"normal"]}],"justify-items":[{"justify-items":[...B(),"normal"]}],"justify-self":[{"justify-self":["auto",...B()]}],"align-content":[{content:["normal",...F()]}],"align-items":[{items:[...B(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...B(),{baseline:["","last"]}]}],"place-content":[{"place-content":F()}],"place-items":[{"place-items":[...B(),"baseline"]}],"place-self":[{"place-self":["auto",...B()]}],p:[{p:E()}],px:[{px:E()}],py:[{py:E()}],ps:[{ps:E()}],pe:[{pe:E()}],pt:[{pt:E()}],pr:[{pr:E()}],pb:[{pb:E()}],pl:[{pl:E()}],m:[{m:z()}],mx:[{mx:z()}],my:[{my:z()}],ms:[{ms:z()}],me:[{me:z()}],mt:[{mt:z()}],mr:[{mr:z()}],mb:[{mb:z()}],ml:[{ml:z()}],"space-x":[{"space-x":E()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":E()}],"space-y-reverse":["space-y-reverse"],size:[{size:W()}],w:[{w:[a,"screen",...W()]}],"min-w":[{"min-w":[a,"screen","none",...W()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[o]},...W()]}],h:[{h:["screen",...W()]}],"min-h":[{"min-h":["screen","none",...W()]}],"max-h":[{"max-h":["screen",...W()]}],"font-size":[{text:["base",n,xl,bi]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,te,Cm]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Im,ee]}],"font-family":[{font:[X9,ee,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,te,ee]}],"line-clamp":[{"line-clamp":[ge,"none",te,Cm]}],leading:[{leading:[i,...E()]}],"list-image":[{"list-image":["none",te,ee]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",te,ee]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:M()}],"text-color":[{text:M()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...je(),"wavy"]}],"text-decoration-thickness":[{decoration:[ge,"from-font","auto",te,bi]}],"text-decoration-color":[{decoration:M()}],"underline-offset":[{"underline-offset":[ge,"auto",te,ee]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:E()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",te,ee]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",te,ee]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:H()}],"bg-repeat":[{bg:Q()}],"bg-size":[{bg:ie()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},gs,te,ee],radial:["",te,ee],conic:[gs,te,ee]},Z9,Y9]}],"bg-color":[{bg:M()}],"gradient-from-pos":[{from:re()}],"gradient-via-pos":[{via:re()}],"gradient-to-pos":[{to:re()}],"gradient-from":[{from:M()}],"gradient-via":[{via:M()}],"gradient-to":[{to:M()}],rounded:[{rounded:ne()}],"rounded-s":[{"rounded-s":ne()}],"rounded-e":[{"rounded-e":ne()}],"rounded-t":[{"rounded-t":ne()}],"rounded-r":[{"rounded-r":ne()}],"rounded-b":[{"rounded-b":ne()}],"rounded-l":[{"rounded-l":ne()}],"rounded-ss":[{"rounded-ss":ne()}],"rounded-se":[{"rounded-se":ne()}],"rounded-ee":[{"rounded-ee":ne()}],"rounded-es":[{"rounded-es":ne()}],"rounded-tl":[{"rounded-tl":ne()}],"rounded-tr":[{"rounded-tr":ne()}],"rounded-br":[{"rounded-br":ne()}],"rounded-bl":[{"rounded-bl":ne()}],"border-w":[{border:se()}],"border-w-x":[{"border-x":se()}],"border-w-y":[{"border-y":se()}],"border-w-s":[{"border-s":se()}],"border-w-e":[{"border-e":se()}],"border-w-t":[{"border-t":se()}],"border-w-r":[{"border-r":se()}],"border-w-b":[{"border-b":se()}],"border-w-l":[{"border-l":se()}],"divide-x":[{"divide-x":se()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":se()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...je(),"hidden","none"]}],"divide-style":[{divide:[...je(),"hidden","none"]}],"border-color":[{border:M()}],"border-color-x":[{"border-x":M()}],"border-color-y":[{"border-y":M()}],"border-color-s":[{"border-s":M()}],"border-color-e":[{"border-e":M()}],"border-color-t":[{"border-t":M()}],"border-color-r":[{"border-r":M()}],"border-color-b":[{"border-b":M()}],"border-color-l":[{"border-l":M()}],"divide-color":[{divide:M()}],"outline-style":[{outline:[...je(),"none","hidden"]}],"outline-offset":[{"outline-offset":[ge,te,ee]}],"outline-w":[{outline:["",ge,xl,bi]}],"outline-color":[{outline:M()}],shadow:[{shadow:["","none",u,sd,rd]}],"shadow-color":[{shadow:M()}],"inset-shadow":[{"inset-shadow":["none",f,sd,rd]}],"inset-shadow-color":[{"inset-shadow":M()}],"ring-w":[{ring:se()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:M()}],"ring-offset-w":[{"ring-offset":[ge,bi]}],"ring-offset-color":[{"ring-offset":M()}],"inset-ring-w":[{"inset-ring":se()}],"inset-ring-color":[{"inset-ring":M()}],"text-shadow":[{"text-shadow":["none",p,sd,rd]}],"text-shadow-color":[{"text-shadow":M()}],opacity:[{opacity:[ge,te,ee]}],"mix-blend":[{"mix-blend":[...Pe(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Pe()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[ge]}],"mask-image-linear-from-pos":[{"mask-linear-from":X()}],"mask-image-linear-to-pos":[{"mask-linear-to":X()}],"mask-image-linear-from-color":[{"mask-linear-from":M()}],"mask-image-linear-to-color":[{"mask-linear-to":M()}],"mask-image-t-from-pos":[{"mask-t-from":X()}],"mask-image-t-to-pos":[{"mask-t-to":X()}],"mask-image-t-from-color":[{"mask-t-from":M()}],"mask-image-t-to-color":[{"mask-t-to":M()}],"mask-image-r-from-pos":[{"mask-r-from":X()}],"mask-image-r-to-pos":[{"mask-r-to":X()}],"mask-image-r-from-color":[{"mask-r-from":M()}],"mask-image-r-to-color":[{"mask-r-to":M()}],"mask-image-b-from-pos":[{"mask-b-from":X()}],"mask-image-b-to-pos":[{"mask-b-to":X()}],"mask-image-b-from-color":[{"mask-b-from":M()}],"mask-image-b-to-color":[{"mask-b-to":M()}],"mask-image-l-from-pos":[{"mask-l-from":X()}],"mask-image-l-to-pos":[{"mask-l-to":X()}],"mask-image-l-from-color":[{"mask-l-from":M()}],"mask-image-l-to-color":[{"mask-l-to":M()}],"mask-image-x-from-pos":[{"mask-x-from":X()}],"mask-image-x-to-pos":[{"mask-x-to":X()}],"mask-image-x-from-color":[{"mask-x-from":M()}],"mask-image-x-to-color":[{"mask-x-to":M()}],"mask-image-y-from-pos":[{"mask-y-from":X()}],"mask-image-y-to-pos":[{"mask-y-to":X()}],"mask-image-y-from-color":[{"mask-y-from":M()}],"mask-image-y-to-color":[{"mask-y-to":M()}],"mask-image-radial":[{"mask-radial":[te,ee]}],"mask-image-radial-from-pos":[{"mask-radial-from":X()}],"mask-image-radial-to-pos":[{"mask-radial-to":X()}],"mask-image-radial-from-color":[{"mask-radial-from":M()}],"mask-image-radial-to-color":[{"mask-radial-to":M()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":k()}],"mask-image-conic-pos":[{"mask-conic":[ge]}],"mask-image-conic-from-pos":[{"mask-conic-from":X()}],"mask-image-conic-to-pos":[{"mask-conic-to":X()}],"mask-image-conic-from-color":[{"mask-conic-from":M()}],"mask-image-conic-to-color":[{"mask-conic-to":M()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:H()}],"mask-repeat":[{mask:Q()}],"mask-size":[{mask:ie()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",te,ee]}],filter:[{filter:["","none",te,ee]}],blur:[{blur:Me()}],brightness:[{brightness:[ge,te,ee]}],contrast:[{contrast:[ge,te,ee]}],"drop-shadow":[{"drop-shadow":["","none",m,sd,rd]}],"drop-shadow-color":[{"drop-shadow":M()}],grayscale:[{grayscale:["",ge,te,ee]}],"hue-rotate":[{"hue-rotate":[ge,te,ee]}],invert:[{invert:["",ge,te,ee]}],saturate:[{saturate:[ge,te,ee]}],sepia:[{sepia:["",ge,te,ee]}],"backdrop-filter":[{"backdrop-filter":["","none",te,ee]}],"backdrop-blur":[{"backdrop-blur":Me()}],"backdrop-brightness":[{"backdrop-brightness":[ge,te,ee]}],"backdrop-contrast":[{"backdrop-contrast":[ge,te,ee]}],"backdrop-grayscale":[{"backdrop-grayscale":["",ge,te,ee]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ge,te,ee]}],"backdrop-invert":[{"backdrop-invert":["",ge,te,ee]}],"backdrop-opacity":[{"backdrop-opacity":[ge,te,ee]}],"backdrop-saturate":[{"backdrop-saturate":[ge,te,ee]}],"backdrop-sepia":[{"backdrop-sepia":["",ge,te,ee]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":E()}],"border-spacing-x":[{"border-spacing-x":E()}],"border-spacing-y":[{"border-spacing-y":E()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",te,ee]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[ge,"initial",te,ee]}],ease:[{ease:["linear","initial",b,te,ee]}],delay:[{delay:[ge,te,ee]}],animate:[{animate:["none",_,te,ee]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[g,te,ee]}],"perspective-origin":[{"perspective-origin":N()}],rotate:[{rotate:We()}],"rotate-x":[{"rotate-x":We()}],"rotate-y":[{"rotate-y":We()}],"rotate-z":[{"rotate-z":We()}],scale:[{scale:xe()}],"scale-x":[{"scale-x":xe()}],"scale-y":[{"scale-y":xe()}],"scale-z":[{"scale-z":xe()}],"scale-3d":["scale-3d"],skew:[{skew:Se()}],"skew-x":[{"skew-x":Se()}],"skew-y":[{"skew-y":Se()}],transform:[{transform:[te,ee,"","none","gpu","cpu"]}],"transform-origin":[{origin:N()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Re()}],"translate-x":[{"translate-x":Re()}],"translate-y":[{"translate-y":Re()}],"translate-z":[{"translate-z":Re()}],"translate-none":["translate-none"],accent:[{accent:M()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:M()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",te,ee]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":E()}],"scroll-mx":[{"scroll-mx":E()}],"scroll-my":[{"scroll-my":E()}],"scroll-ms":[{"scroll-ms":E()}],"scroll-me":[{"scroll-me":E()}],"scroll-mt":[{"scroll-mt":E()}],"scroll-mr":[{"scroll-mr":E()}],"scroll-mb":[{"scroll-mb":E()}],"scroll-ml":[{"scroll-ml":E()}],"scroll-p":[{"scroll-p":E()}],"scroll-px":[{"scroll-px":E()}],"scroll-py":[{"scroll-py":E()}],"scroll-ps":[{"scroll-ps":E()}],"scroll-pe":[{"scroll-pe":E()}],"scroll-pt":[{"scroll-pt":E()}],"scroll-pr":[{"scroll-pr":E()}],"scroll-pb":[{"scroll-pb":E()}],"scroll-pl":[{"scroll-pl":E()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",te,ee]}],fill:[{fill:["none",...M()]}],"stroke-w":[{stroke:[ge,xl,bi,Cm]}],stroke:[{stroke:["none",...M()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},rq=L9(nq);function Oe(...t){return rq(hN(t))}const sq=E9,EN=w.forwardRef(({className:t,...e},n)=>d.jsx(lN,{ref:n,className:Oe("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));EN.displayName=lN.displayName;const Ny=w.forwardRef(({className:t,...e},n)=>d.jsx(cN,{ref:n,className:Oe("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));Ny.displayName=cN.displayName;const Dy=w.forwardRef(({className:t,...e},n)=>d.jsx(uN,{ref:n,className:Oe("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Dy.displayName=uN.displayName;const iS=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,oS=hN,ix=(t,e)=>n=>{var r;if(e?.variants==null)return oS(t,n?.class,n?.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const u=n?.[c],f=i?.[c];if(u===null)return null;const p=iS(u)||iS(f);return s[c][p]}),a=n&&Object.entries(n).reduce((c,u)=>{let[f,p]=u;return p===void 0||(c[f]=p),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:f,className:p,...m}=u;return Object.entries(m).every(y=>{let[g,x]=y;return Array.isArray(x)?x.includes({...i,...a}[g]):{...i,...a}[g]===x})?[...c,f,p]:c},[]);return oS(t,o,l,n?.class,n?.className)},iq=ix("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Ue=w.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?K$:"button";return d.jsx(o,{className:Oe(iq({variant:e,size:n,className:t})),ref:i,...s})});Ue.displayName="Button";const vr=w.forwardRef(({className:t,type:e,...n},r)=>d.jsx("input",{type:e,className:Oe("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n}));vr.displayName="Input";var oq="Label",SN=w.forwardRef((t,e)=>d.jsx(ve.label,{...t,ref:e,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(t.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));SN.displayName=oq;var TN=SN;const aq=ix("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ys=w.forwardRef(({className:t,...e},n)=>d.jsx(TN,{ref:n,className:Oe(aq(),t),...e}));ys.displayName=TN.displayName;const Ps=w.forwardRef(({className:t,...e},n)=>d.jsx("div",{ref:n,className:Oe("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));Ps.displayName="Card";const Ns=w.forwardRef(({className:t,...e},n)=>d.jsx("div",{ref:n,className:Oe("flex flex-col space-y-1.5 p-6",t),...e}));Ns.displayName="CardHeader";const Ds=w.forwardRef(({className:t,...e},n)=>d.jsx("h3",{ref:n,className:Oe("text-2xl font-semibold leading-none tracking-tight",t),...e}));Ds.displayName="CardTitle";const Os=w.forwardRef(({className:t,...e},n)=>d.jsx("p",{ref:n,className:Oe("text-sm text-muted-foreground",t),...e}));Os.displayName="CardDescription";const Li=w.forwardRef(({className:t,...e},n)=>d.jsx("div",{ref:n,className:Oe("p-6 pt-0",t),...e}));Li.displayName="CardContent";const lq=w.forwardRef(({className:t,...e},n)=>d.jsx("div",{ref:n,className:Oe("flex items-center p-6 pt-0",t),...e}));lq.displayName="CardFooter";function aS(t,[e,n]){return Math.min(n,Math.max(e,t))}function cq(t,e=globalThis?.document){const n=Bn(t);w.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var uq="DismissableLayer",Oy="dismissableLayer.update",dq="dismissableLayer.pointerDownOutside",hq="dismissableLayer.focusOutside",lS,IN=w.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Zf=w.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=t,c=w.useContext(IN),[u,f]=w.useState(null),p=u?.ownerDocument??globalThis?.document,[,m]=w.useState({}),y=Ge(e,S=>f(S)),g=Array.from(c.layers),[x]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),b=g.indexOf(x),_=u?g.indexOf(u):-1,T=c.layersWithOutsidePointerEventsDisabled.size>0,k=_>=b,N=pq(S=>{const E=S.target,C=[...c.branches].some(A=>A.contains(E));!k||C||(s?.(S),o?.(S),S.defaultPrevented||a?.())},p),R=mq(S=>{const E=S.target;[...c.branches].some(A=>A.contains(E))||(i?.(S),o?.(S),S.defaultPrevented||a?.())},p);return cq(S=>{_===c.layers.size-1&&(r?.(S),!S.defaultPrevented&&a&&(S.preventDefault(),a()))},p),w.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(lS=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),cS(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=lS)}},[u,p,n,c]),w.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),cS())},[u,c]),w.useEffect(()=>{const S=()=>m({});return document.addEventListener(Oy,S),()=>document.removeEventListener(Oy,S)},[]),d.jsx(ve.div,{...l,ref:y,style:{pointerEvents:T?k?"auto":"none":void 0,...t.style},onFocusCapture:fe(t.onFocusCapture,R.onFocusCapture),onBlurCapture:fe(t.onBlurCapture,R.onBlurCapture),onPointerDownCapture:fe(t.onPointerDownCapture,N.onPointerDownCapture)})});Zf.displayName=uq;var fq="DismissableLayerBranch",CN=w.forwardRef((t,e)=>{const n=w.useContext(IN),r=w.useRef(null),s=Ge(e,r);return w.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),d.jsx(ve.div,{...t,ref:s})});CN.displayName=fq;function pq(t,e=globalThis?.document){const n=Bn(t),r=w.useRef(!1),s=w.useRef(()=>{});return w.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){kN(dq,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function mq(t,e=globalThis?.document){const n=Bn(t),r=w.useRef(!1);return w.useEffect(()=>{const s=i=>{i.target&&!r.current&&kN(hq,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function cS(){const t=new CustomEvent(Oy);document.dispatchEvent(t)}function kN(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?HP(s,i):s.dispatchEvent(i)}var gq=Zf,yq=CN,km=0;function AN(){w.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??uS()),document.body.insertAdjacentElement("beforeend",t[1]??uS()),km++,()=>{km===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),km--}},[])}function uS(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Am="focusScope.autoFocusOnMount",Rm="focusScope.autoFocusOnUnmount",dS={bubbles:!1,cancelable:!0},vq="FocusScope",ox=w.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[a,l]=w.useState(null),c=Bn(s),u=Bn(i),f=w.useRef(null),p=Ge(e,g=>l(g)),m=w.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;w.useEffect(()=>{if(r){let g=function(T){if(m.paused||!a)return;const k=T.target;a.contains(k)?f.current=k:vs(f.current,{select:!0})},x=function(T){if(m.paused||!a)return;const k=T.relatedTarget;k!==null&&(a.contains(k)||vs(f.current,{select:!0}))},b=function(T){if(document.activeElement===document.body)for(const N of T)N.removedNodes.length>0&&vs(a)};document.addEventListener("focusin",g),document.addEventListener("focusout",x);const _=new MutationObserver(b);return a&&_.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",x),_.disconnect()}}},[r,a,m.paused]),w.useEffect(()=>{if(a){fS.add(m);const g=document.activeElement;if(!a.contains(g)){const b=new CustomEvent(Am,dS);a.addEventListener(Am,c),a.dispatchEvent(b),b.defaultPrevented||(xq(Sq(RN(a)),{select:!0}),document.activeElement===g&&vs(a))}return()=>{a.removeEventListener(Am,c),setTimeout(()=>{const b=new CustomEvent(Rm,dS);a.addEventListener(Rm,u),a.dispatchEvent(b),b.defaultPrevented||vs(g??document.body,{select:!0}),a.removeEventListener(Rm,u),fS.remove(m)},0)}}},[a,c,u,m]);const y=w.useCallback(g=>{if(!n&&!r||m.paused)return;const x=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,b=document.activeElement;if(x&&b){const _=g.currentTarget,[T,k]=_q(_);T&&k?!g.shiftKey&&b===k?(g.preventDefault(),n&&vs(T,{select:!0})):g.shiftKey&&b===T&&(g.preventDefault(),n&&vs(k,{select:!0})):b===_&&g.preventDefault()}},[n,r,m.paused]);return d.jsx(ve.div,{tabIndex:-1,...o,ref:p,onKeyDown:y})});ox.displayName=vq;function xq(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(vs(r,{select:e}),document.activeElement!==n)return}function _q(t){const e=RN(t),n=hS(e,t),r=hS(e.reverse(),t);return[n,r]}function RN(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function hS(t,e){for(const n of t)if(!wq(n,{upTo:e}))return n}function wq(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function bq(t){return t instanceof HTMLInputElement&&"select"in t}function vs(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&bq(t)&&e&&t.select()}}var fS=Eq();function Eq(){let t=[];return{add(e){const n=t[0];e!==n&&n?.pause(),t=pS(t,e),t.unshift(e)},remove(e){t=pS(t,e),t[0]?.resume()}}}function pS(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function Sq(t){return t.filter(e=>e.tagName!=="A")}const Tq=["top","right","bottom","left"],ai=Math.min,xn=Math.max,Jh=Math.round,id=Math.floor,kr=t=>({x:t,y:t}),Iq={left:"right",right:"left",bottom:"top",top:"bottom"},Cq={start:"end",end:"start"};function jy(t,e,n){return xn(t,ai(e,n))}function as(t,e){return typeof t=="function"?t(e):t}function ls(t){return t.split("-")[0]}function Ha(t){return t.split("-")[1]}function ax(t){return t==="x"?"y":"x"}function lx(t){return t==="y"?"height":"width"}function li(t){return["top","bottom"].includes(ls(t))?"y":"x"}function cx(t){return ax(li(t))}function kq(t,e,n){n===void 0&&(n=!1);const r=Ha(t),s=cx(t),i=lx(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=Zh(o)),[o,Zh(o)]}function Aq(t){const e=Zh(t);return[My(t),e,My(e)]}function My(t){return t.replace(/start|end/g,e=>Cq[e])}function Rq(t,e,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?i:o;default:return[]}}function Pq(t,e,n,r){const s=Ha(t);let i=Rq(ls(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(My)))),i}function Zh(t){return t.replace(/left|right|bottom|top/g,e=>Iq[e])}function Nq(t){return{top:0,right:0,bottom:0,left:0,...t}}function PN(t){return typeof t!="number"?Nq(t):{top:t,right:t,bottom:t,left:t}}function ef(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function mS(t,e,n){let{reference:r,floating:s}=t;const i=li(e),o=cx(e),a=lx(o),l=ls(e),c=i==="y",u=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,p=r[a]/2-s[a]/2;let m;switch(l){case"top":m={x:u,y:r.y-s.height};break;case"bottom":m={x:u,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:f};break;case"left":m={x:r.x-s.width,y:f};break;default:m={x:r.x,y:r.y}}switch(Ha(e)){case"start":m[o]-=p*(n&&c?-1:1);break;case"end":m[o]+=p*(n&&c?-1:1);break}return m}const Dq=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:u,y:f}=mS(c,r,l),p=r,m={},y=0;for(let g=0;g<a.length;g++){const{name:x,fn:b}=a[g],{x:_,y:T,data:k,reset:N}=await b({x:u,y:f,initialPlacement:r,placement:p,strategy:s,middlewareData:m,rects:c,platform:o,elements:{reference:t,floating:e}});u=_??u,f=T??f,m={...m,[x]:{...m[x],...k}},N&&y<=50&&(y++,typeof N=="object"&&(N.placement&&(p=N.placement),N.rects&&(c=N.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):N.rects),{x:u,y:f}=mS(c,p,l)),g=-1)}return{x:u,y:f,placement:p,strategy:s,middlewareData:m}};async function Oc(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:p=!1,padding:m=0}=as(e,t),y=PN(m),x=a[p?f==="floating"?"reference":"floating":f],b=ef(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(x)))==null||n?x:x.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),_=f==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,T=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),k=await(i.isElement==null?void 0:i.isElement(T))?await(i.getScale==null?void 0:i.getScale(T))||{x:1,y:1}:{x:1,y:1},N=ef(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:_,offsetParent:T,strategy:l}):_);return{top:(b.top-N.top+y.top)/k.y,bottom:(N.bottom-b.bottom+y.bottom)/k.y,left:(b.left-N.left+y.left)/k.x,right:(N.right-b.right+y.right)/k.x}}const Oq=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=as(t,e)||{};if(c==null)return{};const f=PN(u),p={x:n,y:r},m=cx(s),y=lx(m),g=await o.getDimensions(c),x=m==="y",b=x?"top":"left",_=x?"bottom":"right",T=x?"clientHeight":"clientWidth",k=i.reference[y]+i.reference[m]-p[m]-i.floating[y],N=p[m]-i.reference[m],R=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let S=R?R[T]:0;(!S||!await(o.isElement==null?void 0:o.isElement(R)))&&(S=a.floating[T]||i.floating[y]);const E=k/2-N/2,C=S/2-g[y]/2-1,A=ai(f[b],C),P=ai(f[_],C),j=A,O=S-g[y]-P,F=S/2-g[y]/2+E,B=jy(j,F,O),z=!l.arrow&&Ha(s)!=null&&F!==B&&i.reference[y]/2-(F<j?A:P)-g[y]/2<0,W=z?F<j?F-j:F-O:0;return{[m]:p[m]+W,data:{[m]:B,centerOffset:F-B-W,...z&&{alignmentOffset:W}},reset:z}}}),jq=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:g=!0,...x}=as(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const b=ls(s),_=li(a),T=ls(a)===a,k=await(l.isRTL==null?void 0:l.isRTL(c.floating)),N=p||(T||!g?[Zh(a)]:Aq(a)),R=y!=="none";!p&&R&&N.push(...Pq(a,g,y,k));const S=[a,...N],E=await Oc(e,x),C=[];let A=((r=i.flip)==null?void 0:r.overflows)||[];if(u&&C.push(E[b]),f){const F=kq(s,o,k);C.push(E[F[0]],E[F[1]])}if(A=[...A,{placement:s,overflows:C}],!C.every(F=>F<=0)){var P,j;const F=(((P=i.flip)==null?void 0:P.index)||0)+1,B=S[F];if(B)return{data:{index:F,overflows:A},reset:{placement:B}};let z=(j=A.filter(W=>W.overflows[0]<=0).sort((W,M)=>W.overflows[1]-M.overflows[1])[0])==null?void 0:j.placement;if(!z)switch(m){case"bestFit":{var O;const W=(O=A.filter(M=>{if(R){const H=li(M.placement);return H===_||H==="y"}return!0}).map(M=>[M.placement,M.overflows.filter(H=>H>0).reduce((H,Q)=>H+Q,0)]).sort((M,H)=>M[1]-H[1])[0])==null?void 0:O[0];W&&(z=W);break}case"initialPlacement":z=a;break}if(s!==z)return{reset:{placement:z}}}return{}}}};function gS(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function yS(t){return Tq.some(e=>t[e]>=0)}const Mq=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=as(t,e);switch(r){case"referenceHidden":{const i=await Oc(e,{...s,elementContext:"reference"}),o=gS(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:yS(o)}}}case"escaped":{const i=await Oc(e,{...s,altBoundary:!0}),o=gS(i,n.floating);return{data:{escapedOffsets:o,escaped:yS(o)}}}default:return{}}}}};async function Lq(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=ls(n),a=Ha(n),l=li(n)==="y",c=["left","top"].includes(o)?-1:1,u=i&&l?-1:1,f=as(e,t);let{mainAxis:p,crossAxis:m,alignmentAxis:y}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof y=="number"&&(m=a==="end"?y*-1:y),l?{x:m*u,y:p*c}:{x:p*c,y:m*u}}const Fq=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=e,l=await Lq(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},Vq=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:x=>{let{x:b,y:_}=x;return{x:b,y:_}}},...l}=as(t,e),c={x:n,y:r},u=await Oc(e,l),f=li(ls(s)),p=ax(f);let m=c[p],y=c[f];if(i){const x=p==="y"?"top":"left",b=p==="y"?"bottom":"right",_=m+u[x],T=m-u[b];m=jy(_,m,T)}if(o){const x=f==="y"?"top":"left",b=f==="y"?"bottom":"right",_=y+u[x],T=y-u[b];y=jy(_,y,T)}const g=a.fn({...e,[p]:m,[f]:y});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[p]:i,[f]:o}}}}}},Uq=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=as(t,e),u={x:n,y:r},f=li(s),p=ax(f);let m=u[p],y=u[f];const g=as(a,e),x=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const T=p==="y"?"height":"width",k=i.reference[p]-i.floating[T]+x.mainAxis,N=i.reference[p]+i.reference[T]-x.mainAxis;m<k?m=k:m>N&&(m=N)}if(c){var b,_;const T=p==="y"?"width":"height",k=["top","left"].includes(ls(s)),N=i.reference[f]-i.floating[T]+(k&&((b=o.offset)==null?void 0:b[f])||0)+(k?0:x.crossAxis),R=i.reference[f]+i.reference[T]+(k?0:((_=o.offset)==null?void 0:_[f])||0)-(k?x.crossAxis:0);y<N?y=N:y>R&&(y=R)}return{[p]:m,[f]:y}}}},Bq=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...c}=as(t,e),u=await Oc(e,c),f=ls(s),p=Ha(s),m=li(s)==="y",{width:y,height:g}=i.floating;let x,b;f==="top"||f==="bottom"?(x=f,b=p===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(b=f,x=p==="end"?"top":"bottom");const _=g-u.top-u.bottom,T=y-u.left-u.right,k=ai(g-u[x],_),N=ai(y-u[b],T),R=!e.middlewareData.shift;let S=k,E=N;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(E=T),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(S=_),R&&!p){const A=xn(u.left,0),P=xn(u.right,0),j=xn(u.top,0),O=xn(u.bottom,0);m?E=y-2*(A!==0||P!==0?A+P:xn(u.left,u.right)):S=g-2*(j!==0||O!==0?j+O:xn(u.top,u.bottom))}await l({...e,availableWidth:E,availableHeight:S});const C=await o.getDimensions(a.floating);return y!==C.width||g!==C.height?{reset:{rects:!0}}:{}}}};function ep(){return typeof window<"u"}function Wa(t){return NN(t)?(t.nodeName||"").toLowerCase():"#document"}function In(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Or(t){var e;return(e=(NN(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function NN(t){return ep()?t instanceof Node||t instanceof In(t).Node:!1}function sr(t){return ep()?t instanceof Element||t instanceof In(t).Element:!1}function Nr(t){return ep()?t instanceof HTMLElement||t instanceof In(t).HTMLElement:!1}function vS(t){return!ep()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof In(t).ShadowRoot}function fu(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=ir(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function zq(t){return["table","td","th"].includes(Wa(t))}function tp(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function ux(t){const e=dx(),n=sr(t)?ir(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function $q(t){let e=ci(t);for(;Nr(e)&&!Ta(e);){if(ux(e))return e;if(tp(e))return null;e=ci(e)}return null}function dx(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ta(t){return["html","body","#document"].includes(Wa(t))}function ir(t){return In(t).getComputedStyle(t)}function np(t){return sr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ci(t){if(Wa(t)==="html")return t;const e=t.assignedSlot||t.parentNode||vS(t)&&t.host||Or(t);return vS(e)?e.host:e}function DN(t){const e=ci(t);return Ta(e)?t.ownerDocument?t.ownerDocument.body:t.body:Nr(e)&&fu(e)?e:DN(e)}function jc(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=DN(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=In(s);if(i){const a=Ly(o);return e.concat(o,o.visualViewport||[],fu(s)?s:[],a&&n?jc(a):[])}return e.concat(s,jc(s,[],n))}function Ly(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function ON(t){const e=ir(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Nr(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=Jh(n)!==i||Jh(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function hx(t){return sr(t)?t:t.contextElement}function ra(t){const e=hx(t);if(!Nr(e))return kr(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=ON(e);let o=(i?Jh(n.width):n.width)/r,a=(i?Jh(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const qq=kr(0);function jN(t){const e=In(t);return!dx()||!e.visualViewport?qq:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Hq(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==In(t)?!1:e}function ro(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=hx(t);let o=kr(1);e&&(r?sr(r)&&(o=ra(r)):o=ra(t));const a=Hq(i,n,r)?jN(i):kr(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,u=s.width/o.x,f=s.height/o.y;if(i){const p=In(i),m=r&&sr(r)?In(r):r;let y=p,g=Ly(y);for(;g&&r&&m!==y;){const x=ra(g),b=g.getBoundingClientRect(),_=ir(g),T=b.left+(g.clientLeft+parseFloat(_.paddingLeft))*x.x,k=b.top+(g.clientTop+parseFloat(_.paddingTop))*x.y;l*=x.x,c*=x.y,u*=x.x,f*=x.y,l+=T,c+=k,y=In(g),g=Ly(y)}}return ef({width:u,height:f,x:l,y:c})}function fx(t,e){const n=np(t).scrollLeft;return e?e.left+n:ro(Or(t)).left+n}function MN(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:fx(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function Wq(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=Or(r),a=e?tp(e.floating):!1;if(r===o||a&&i)return n;let l={scrollLeft:0,scrollTop:0},c=kr(1);const u=kr(0),f=Nr(r);if((f||!f&&!i)&&((Wa(r)!=="body"||fu(o))&&(l=np(r)),Nr(r))){const m=ro(r);c=ra(r),u.x=m.x+r.clientLeft,u.y=m.y+r.clientTop}const p=o&&!f&&!i?MN(o,l,!0):kr(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+p.x,y:n.y*c.y-l.scrollTop*c.y+u.y+p.y}}function Kq(t){return Array.from(t.getClientRects())}function Gq(t){const e=Or(t),n=np(t),r=t.ownerDocument.body,s=xn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=xn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+fx(t);const a=-n.scrollTop;return ir(r).direction==="rtl"&&(o+=xn(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function Qq(t,e){const n=In(t),r=Or(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const c=dx();(!c||c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:a,y:l}}function Yq(t,e){const n=ro(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Nr(t)?ra(t):kr(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function xS(t,e,n){let r;if(e==="viewport")r=Qq(t,n);else if(e==="document")r=Gq(Or(t));else if(sr(e))r=Yq(e,n);else{const s=jN(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return ef(r)}function LN(t,e){const n=ci(t);return n===e||!sr(n)||Ta(n)?!1:ir(n).position==="fixed"||LN(n,e)}function Xq(t,e){const n=e.get(t);if(n)return n;let r=jc(t,[],!1).filter(a=>sr(a)&&Wa(a)!=="body"),s=null;const i=ir(t).position==="fixed";let o=i?ci(t):t;for(;sr(o)&&!Ta(o);){const a=ir(o),l=ux(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||fu(o)&&!l&&LN(t,o))?r=r.filter(u=>u!==o):s=a,o=ci(o)}return e.set(t,r),r}function Jq(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?tp(e)?[]:Xq(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,u)=>{const f=xS(e,u,s);return c.top=xn(f.top,c.top),c.right=ai(f.right,c.right),c.bottom=ai(f.bottom,c.bottom),c.left=xn(f.left,c.left),c},xS(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Zq(t){const{width:e,height:n}=ON(t);return{width:e,height:n}}function eH(t,e,n){const r=Nr(e),s=Or(e),i=n==="fixed",o=ro(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=kr(0);if(r||!r&&!i)if((Wa(e)!=="body"||fu(s))&&(a=np(e)),r){const p=ro(e,!0,i,e);l.x=p.x+e.clientLeft,l.y=p.y+e.clientTop}else s&&(l.x=fx(s));const c=s&&!r&&!i?MN(s,a):kr(0),u=o.left+a.scrollLeft-l.x-c.x,f=o.top+a.scrollTop-l.y-c.y;return{x:u,y:f,width:o.width,height:o.height}}function Pm(t){return ir(t).position==="static"}function _S(t,e){if(!Nr(t)||ir(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Or(t)===n&&(n=n.ownerDocument.body),n}function FN(t,e){const n=In(t);if(tp(t))return n;if(!Nr(t)){let s=ci(t);for(;s&&!Ta(s);){if(sr(s)&&!Pm(s))return s;s=ci(s)}return n}let r=_S(t,e);for(;r&&zq(r)&&Pm(r);)r=_S(r,e);return r&&Ta(r)&&Pm(r)&&!ux(r)?n:r||$q(t)||n}const tH=async function(t){const e=this.getOffsetParent||FN,n=this.getDimensions,r=await n(t.floating);return{reference:eH(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function nH(t){return ir(t).direction==="rtl"}const rH={convertOffsetParentRelativeRectToViewportRelativeRect:Wq,getDocumentElement:Or,getClippingRect:Jq,getOffsetParent:FN,getElementRects:tH,getClientRects:Kq,getDimensions:Zq,getScale:ra,isElement:sr,isRTL:nH};function VN(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function sH(t,e){let n=null,r;const s=Or(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const c=t.getBoundingClientRect(),{left:u,top:f,width:p,height:m}=c;if(a||e(),!p||!m)return;const y=id(f),g=id(s.clientWidth-(u+p)),x=id(s.clientHeight-(f+m)),b=id(u),T={rootMargin:-y+"px "+-g+"px "+-x+"px "+-b+"px",threshold:xn(0,ai(1,l))||1};let k=!0;function N(R){const S=R[0].intersectionRatio;if(S!==l){if(!k)return o();S?o(!1,S):r=setTimeout(()=>{o(!1,1e-7)},1e3)}S===1&&!VN(c,t.getBoundingClientRect())&&o(),k=!1}try{n=new IntersectionObserver(N,{...T,root:s.ownerDocument})}catch{n=new IntersectionObserver(N,T)}n.observe(t)}return o(!0),i}function iH(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=hx(t),u=s||i?[...c?jc(c):[],...jc(e)]:[];u.forEach(b=>{s&&b.addEventListener("scroll",n,{passive:!0}),i&&b.addEventListener("resize",n)});const f=c&&a?sH(c,n):null;let p=-1,m=null;o&&(m=new ResizeObserver(b=>{let[_]=b;_&&_.target===c&&m&&(m.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var T;(T=m)==null||T.observe(e)})),n()}),c&&!l&&m.observe(c),m.observe(e));let y,g=l?ro(t):null;l&&x();function x(){const b=ro(t);g&&!VN(g,b)&&n(),g=b,y=requestAnimationFrame(x)}return n(),()=>{var b;u.forEach(_=>{s&&_.removeEventListener("scroll",n),i&&_.removeEventListener("resize",n)}),f?.(),(b=m)==null||b.disconnect(),m=null,l&&cancelAnimationFrame(y)}}const oH=Fq,aH=Vq,lH=jq,cH=Bq,uH=Mq,wS=Oq,dH=Uq,hH=(t,e,n)=>{const r=new Map,s={platform:rH,...n},i={...s.platform,_c:r};return Dq(t,e,{...s,platform:i})};var Jd=typeof document<"u"?w.useLayoutEffect:w.useEffect;function tf(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!tf(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!tf(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function UN(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function bS(t,e){const n=UN(t);return Math.round(e*n)/n}function Nm(t){const e=w.useRef(t);return Jd(()=>{e.current=t}),e}function fH(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,f]=w.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,m]=w.useState(r);tf(p,r)||m(r);const[y,g]=w.useState(null),[x,b]=w.useState(null),_=w.useCallback(M=>{M!==R.current&&(R.current=M,g(M))},[]),T=w.useCallback(M=>{M!==S.current&&(S.current=M,b(M))},[]),k=i||y,N=o||x,R=w.useRef(null),S=w.useRef(null),E=w.useRef(u),C=l!=null,A=Nm(l),P=Nm(s),j=Nm(c),O=w.useCallback(()=>{if(!R.current||!S.current)return;const M={placement:e,strategy:n,middleware:p};P.current&&(M.platform=P.current),hH(R.current,S.current,M).then(H=>{const Q={...H,isPositioned:j.current!==!1};F.current&&!tf(E.current,Q)&&(E.current=Q,uo.flushSync(()=>{f(Q)}))})},[p,e,n,P,j]);Jd(()=>{c===!1&&E.current.isPositioned&&(E.current.isPositioned=!1,f(M=>({...M,isPositioned:!1})))},[c]);const F=w.useRef(!1);Jd(()=>(F.current=!0,()=>{F.current=!1}),[]),Jd(()=>{if(k&&(R.current=k),N&&(S.current=N),k&&N){if(A.current)return A.current(k,N,O);O()}},[k,N,O,A,C]);const B=w.useMemo(()=>({reference:R,floating:S,setReference:_,setFloating:T}),[_,T]),z=w.useMemo(()=>({reference:k,floating:N}),[k,N]),W=w.useMemo(()=>{const M={position:n,left:0,top:0};if(!z.floating)return M;const H=bS(z.floating,u.x),Q=bS(z.floating,u.y);return a?{...M,transform:"translate("+H+"px, "+Q+"px)",...UN(z.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:H,top:Q}},[n,a,z.floating,u.x,u.y]);return w.useMemo(()=>({...u,update:O,refs:B,elements:z,floatingStyles:W}),[u,O,B,z,W])}const pH=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?wS({element:r.current,padding:s}).fn(n):{}:r?wS({element:r,padding:s}).fn(n):{}}}},mH=(t,e)=>({...oH(t),options:[t,e]}),gH=(t,e)=>({...aH(t),options:[t,e]}),yH=(t,e)=>({...dH(t),options:[t,e]}),vH=(t,e)=>({...lH(t),options:[t,e]}),xH=(t,e)=>({...cH(t),options:[t,e]}),_H=(t,e)=>({...uH(t),options:[t,e]}),wH=(t,e)=>({...pH(t),options:[t,e]});var bH="Arrow",BN=w.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return d.jsx(ve.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:d.jsx("polygon",{points:"0,0 30,0 15,10"})})});BN.displayName=bH;var EH=BN;function SH(t){const[e,n]=w.useState(void 0);return Ot(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var px="Popper",[zN,$N]=vo(px),[TH,qN]=zN(px),HN=t=>{const{__scopePopper:e,children:n}=t,[r,s]=w.useState(null);return d.jsx(TH,{scope:e,anchor:r,onAnchorChange:s,children:n})};HN.displayName=px;var WN="PopperAnchor",KN=w.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=qN(WN,n),o=w.useRef(null),a=Ge(e,o);return w.useEffect(()=>{i.onAnchorChange(r?.current||o.current)}),r?null:d.jsx(ve.div,{...s,ref:a})});KN.displayName=WN;var mx="PopperContent",[IH,CH]=zN(mx),GN=w.forwardRef((t,e)=>{const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:f="partial",hideWhenDetached:p=!1,updatePositionStrategy:m="optimized",onPlaced:y,...g}=t,x=qN(mx,n),[b,_]=w.useState(null),T=Ge(e,X=>_(X)),[k,N]=w.useState(null),R=SH(k),S=R?.width??0,E=R?.height??0,C=r+(i!=="center"?"-"+i:""),A=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},P=Array.isArray(c)?c:[c],j=P.length>0,O={padding:A,boundary:P.filter(AH),altBoundary:j},{refs:F,floatingStyles:B,placement:z,isPositioned:W,middlewareData:M}=fH({strategy:"fixed",placement:C,whileElementsMounted:(...X)=>iH(...X,{animationFrame:m==="always"}),elements:{reference:x.anchor},middleware:[mH({mainAxis:s+E,alignmentAxis:o}),l&&gH({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?yH():void 0,...O}),l&&vH({...O}),xH({...O,apply:({elements:X,rects:Me,availableWidth:We,availableHeight:xe})=>{const{width:Se,height:Re}=Me.reference,_t=X.floating.style;_t.setProperty("--radix-popper-available-width",`${We}px`),_t.setProperty("--radix-popper-available-height",`${xe}px`),_t.setProperty("--radix-popper-anchor-width",`${Se}px`),_t.setProperty("--radix-popper-anchor-height",`${Re}px`)}}),k&&wH({element:k,padding:a}),RH({arrowWidth:S,arrowHeight:E}),p&&_H({strategy:"referenceHidden",...O})]}),[H,Q]=XN(z),ie=Bn(y);Ot(()=>{W&&ie?.()},[W,ie]);const re=M.arrow?.x,ne=M.arrow?.y,se=M.arrow?.centerOffset!==0,[je,Pe]=w.useState();return Ot(()=>{b&&Pe(window.getComputedStyle(b).zIndex)},[b]),d.jsx("div",{ref:F.setFloating,"data-radix-popper-content-wrapper":"",style:{...B,transform:W?B.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:je,"--radix-popper-transform-origin":[M.transformOrigin?.x,M.transformOrigin?.y].join(" "),...M.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:d.jsx(IH,{scope:n,placedSide:H,onArrowChange:N,arrowX:re,arrowY:ne,shouldHideArrow:se,children:d.jsx(ve.div,{"data-side":H,"data-align":Q,...g,ref:T,style:{...g.style,animation:W?void 0:"none"}})})})});GN.displayName=mx;var QN="PopperArrow",kH={top:"bottom",right:"left",bottom:"top",left:"right"},YN=w.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=CH(QN,r),o=kH[i.placedSide];return d.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:d.jsx(EH,{...s,ref:n,style:{...s.style,display:"block"}})})});YN.displayName=QN;function AH(t){return t!==null}var RH=t=>({name:"transformOrigin",options:t,fn(e){const{placement:n,rects:r,middlewareData:s}=e,o=s.arrow?.centerOffset!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,u]=XN(n),f={start:"0%",center:"50%",end:"100%"}[u],p=(s.arrow?.x??0)+a/2,m=(s.arrow?.y??0)+l/2;let y="",g="";return c==="bottom"?(y=o?f:`${p}px`,g=`${-l}px`):c==="top"?(y=o?f:`${p}px`,g=`${r.floating.height+l}px`):c==="right"?(y=`${-l}px`,g=o?f:`${m}px`):c==="left"&&(y=`${r.floating.width+l}px`,g=o?f:`${m}px`),{data:{x:y,y:g}}}});function XN(t){const[e,n="center"]=t.split("-");return[e,n]}var PH=HN,NH=KN,DH=GN,OH=YN,jH="Portal",rp=w.forwardRef((t,e)=>{const{container:n,...r}=t,[s,i]=w.useState(!1);Ot(()=>i(!0),[]);const o=n||s&&globalThis?.document?.body;return o?OM.createPortal(d.jsx(ve.div,{...r,ref:e}),o):null});rp.displayName=jH;function MH(t){const e=w.useRef({value:t,previous:t});return w.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var JN=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),LH="VisuallyHidden",gx=w.forwardRef((t,e)=>d.jsx(ve.span,{...t,ref:e,style:{...JN,...t.style}}));gx.displayName=LH;var FH=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Io=new WeakMap,od=new WeakMap,ad={},Dm=0,ZN=function(t){return t&&(t.host||ZN(t.parentNode))},VH=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=ZN(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},UH=function(t,e,n,r){var s=VH(e,Array.isArray(t)?t:[t]);ad[n]||(ad[n]=new WeakMap);var i=ad[n],o=[],a=new Set,l=new Set(s),c=function(f){!f||a.has(f)||(a.add(f),c(f.parentNode))};s.forEach(c);var u=function(f){!f||l.has(f)||Array.prototype.forEach.call(f.children,function(p){if(a.has(p))u(p);else try{var m=p.getAttribute(r),y=m!==null&&m!=="false",g=(Io.get(p)||0)+1,x=(i.get(p)||0)+1;Io.set(p,g),i.set(p,x),o.push(p),g===1&&y&&od.set(p,!0),x===1&&p.setAttribute(n,"true"),y||p.setAttribute(r,"true")}catch(b){console.error("aria-hidden: cannot operate on ",p,b)}})};return u(e),a.clear(),Dm++,function(){o.forEach(function(f){var p=Io.get(f)-1,m=i.get(f)-1;Io.set(f,p),i.set(f,m),p||(od.has(f)||f.removeAttribute(r),od.delete(f)),m||f.removeAttribute(n)}),Dm--,Dm||(Io=new WeakMap,Io=new WeakMap,od=new WeakMap,ad={})}},e1=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=FH(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),UH(r,s,n,"aria-hidden")):function(){return null}},Zd="right-scroll-bar-position",eh="width-before-scroll-bar",BH="with-scroll-bars-hidden",zH="--removed-body-scroll-bar-size";function Om(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function $H(t,e){var n=w.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var qH=typeof window<"u"?w.useLayoutEffect:w.useEffect,ES=new WeakMap;function HH(t,e){var n=$H(null,function(r){return t.forEach(function(s){return Om(s,r)})});return qH(function(){var r=ES.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(a){i.has(a)||Om(a,null)}),i.forEach(function(a){s.has(a)||Om(a,o)})}ES.set(n,t)},[t]),n}function WH(t){return t}function KH(t,e){e===void 0&&(e=WH);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(i),o=n}var l=function(){var u=o;o=[],u.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),n}}}};return s}function GH(t){t===void 0&&(t={});var e=KH(null);return e.options=_r({async:!0,ssr:!1},t),e}var t1=function(t){var e=t.sideCar,n=tu(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return w.createElement(r,_r({},n))};t1.isSideCarExport=!0;function QH(t,e){return t.useMedium(e),t1}var n1=GH(),jm=function(){},sp=w.forwardRef(function(t,e){var n=w.useRef(null),r=w.useState({onScrollCapture:jm,onWheelCapture:jm,onTouchMoveCapture:jm}),s=r[0],i=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,f=t.shards,p=t.sideCar,m=t.noIsolation,y=t.inert,g=t.allowPinchZoom,x=t.as,b=x===void 0?"div":x,_=t.gapMode,T=tu(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=p,N=HH([n,e]),R=_r(_r({},T),s);return w.createElement(w.Fragment,null,u&&w.createElement(k,{sideCar:n1,removeScrollBar:c,shards:f,noIsolation:m,inert:y,setCallbacks:i,allowPinchZoom:!!g,lockRef:n,gapMode:_}),o?w.cloneElement(w.Children.only(a),_r(_r({},R),{ref:N})):w.createElement(b,_r({},R,{className:l,ref:N}),a))});sp.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};sp.classNames={fullWidth:eh,zeroRight:Zd};var YH=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function XH(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=YH();return e&&t.setAttribute("nonce",e),t}function JH(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function ZH(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var eW=function(){var t=0,e=null;return{add:function(n){t==0&&(e=XH())&&(JH(e,n),ZH(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},tW=function(){var t=eW();return function(e,n){w.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},r1=function(){var t=tW(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},nW={left:0,top:0,right:0,gap:0},Mm=function(t){return parseInt(t||"",10)||0},rW=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[Mm(n),Mm(r),Mm(s)]},sW=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return nW;var e=rW(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},iW=r1(),sa="data-scroll-locked",oW=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(BH,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(sa,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Zd,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(eh,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Zd," .").concat(Zd,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(eh," .").concat(eh,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(sa,`] {
    `).concat(zH,": ").concat(a,`px;
  }
`)},SS=function(){var t=parseInt(document.body.getAttribute(sa)||"0",10);return isFinite(t)?t:0},aW=function(){w.useEffect(function(){return document.body.setAttribute(sa,(SS()+1).toString()),function(){var t=SS()-1;t<=0?document.body.removeAttribute(sa):document.body.setAttribute(sa,t.toString())}},[])},lW=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;aW();var i=w.useMemo(function(){return sW(s)},[s]);return w.createElement(iW,{styles:oW(i,!e,s,n?"":"!important")})},Fy=!1;if(typeof window<"u")try{var ld=Object.defineProperty({},"passive",{get:function(){return Fy=!0,!0}});window.addEventListener("test",ld,ld),window.removeEventListener("test",ld,ld)}catch{Fy=!1}var Co=Fy?{passive:!1}:!1,cW=function(t){return t.tagName==="TEXTAREA"},s1=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!cW(t)&&n[e]==="visible")},uW=function(t){return s1(t,"overflowY")},dW=function(t){return s1(t,"overflowX")},TS=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=i1(t,r);if(s){var i=o1(t,r),o=i[1],a=i[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},hW=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},fW=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},i1=function(t,e){return t==="v"?uW(e):dW(e)},o1=function(t,e){return t==="v"?hW(e):fW(e)},pW=function(t,e){return t==="h"&&e==="rtl"?-1:1},mW=function(t,e,n,r,s){var i=pW(t,window.getComputedStyle(e).direction),o=i*r,a=n.target,l=e.contains(a),c=!1,u=o>0,f=0,p=0;do{var m=o1(t,a),y=m[0],g=m[1],x=m[2],b=g-x-i*y;(y||b)&&i1(t,a)&&(f+=b,p+=y),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&Math.abs(f)<1||!u&&Math.abs(p)<1)&&(c=!0),c},cd=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},IS=function(t){return[t.deltaX,t.deltaY]},CS=function(t){return t&&"current"in t?t.current:t},gW=function(t,e){return t[0]===e[0]&&t[1]===e[1]},yW=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},vW=0,ko=[];function xW(t){var e=w.useRef([]),n=w.useRef([0,0]),r=w.useRef(),s=w.useState(vW++)[0],i=w.useState(r1)[0],o=w.useRef(t);w.useEffect(function(){o.current=t},[t]),w.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var g=h5([t.lockRef.current],(t.shards||[]).map(CS),!0).filter(Boolean);return g.forEach(function(x){return x.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),g.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var a=w.useCallback(function(g,x){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!o.current.allowPinchZoom;var b=cd(g),_=n.current,T="deltaX"in g?g.deltaX:_[0]-b[0],k="deltaY"in g?g.deltaY:_[1]-b[1],N,R=g.target,S=Math.abs(T)>Math.abs(k)?"h":"v";if("touches"in g&&S==="h"&&R.type==="range")return!1;var E=TS(S,R);if(!E)return!0;if(E?N=S:(N=S==="v"?"h":"v",E=TS(S,R)),!E)return!1;if(!r.current&&"changedTouches"in g&&(T||k)&&(r.current=N),!N)return!0;var C=r.current||N;return mW(C,x,g,C==="h"?T:k)},[]),l=w.useCallback(function(g){var x=g;if(!(!ko.length||ko[ko.length-1]!==i)){var b="deltaY"in x?IS(x):cd(x),_=e.current.filter(function(N){return N.name===x.type&&(N.target===x.target||x.target===N.shadowParent)&&gW(N.delta,b)})[0];if(_&&_.should){x.cancelable&&x.preventDefault();return}if(!_){var T=(o.current.shards||[]).map(CS).filter(Boolean).filter(function(N){return N.contains(x.target)}),k=T.length>0?a(x,T[0]):!o.current.noIsolation;k&&x.cancelable&&x.preventDefault()}}},[]),c=w.useCallback(function(g,x,b,_){var T={name:g,delta:x,target:b,should:_,shadowParent:_W(b)};e.current.push(T),setTimeout(function(){e.current=e.current.filter(function(k){return k!==T})},1)},[]),u=w.useCallback(function(g){n.current=cd(g),r.current=void 0},[]),f=w.useCallback(function(g){c(g.type,IS(g),g.target,a(g,t.lockRef.current))},[]),p=w.useCallback(function(g){c(g.type,cd(g),g.target,a(g,t.lockRef.current))},[]);w.useEffect(function(){return ko.push(i),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:p}),document.addEventListener("wheel",l,Co),document.addEventListener("touchmove",l,Co),document.addEventListener("touchstart",u,Co),function(){ko=ko.filter(function(g){return g!==i}),document.removeEventListener("wheel",l,Co),document.removeEventListener("touchmove",l,Co),document.removeEventListener("touchstart",u,Co)}},[]);var m=t.removeScrollBar,y=t.inert;return w.createElement(w.Fragment,null,y?w.createElement(i,{styles:yW(s)}):null,m?w.createElement(lW,{gapMode:t.gapMode}):null)}function _W(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const wW=QH(n1,xW);var yx=w.forwardRef(function(t,e){return w.createElement(sp,_r({},t,{ref:e,sideCar:wW}))});yx.classNames=sp.classNames;var bW=[" ","Enter","ArrowUp","ArrowDown"],EW=[" ","Enter"],so="Select",[ip,op,SW]=tx(so),[Ka,xX]=vo(so,[SW,$N]),ap=$N(),[TW,mi]=Ka(so),[IW,CW]=Ka(so),a1=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:o,defaultValue:a,onValueChange:l,dir:c,name:u,autoComplete:f,disabled:p,required:m,form:y}=t,g=ap(e),[x,b]=w.useState(null),[_,T]=w.useState(null),[k,N]=w.useState(!1),R=nx(c),[S,E]=Dc({prop:r,defaultProp:s??!1,onChange:i,caller:so}),[C,A]=Dc({prop:o,defaultProp:a,onChange:l,caller:so}),P=w.useRef(null),j=x?y||!!x.closest("form"):!0,[O,F]=w.useState(new Set),B=Array.from(O).map(z=>z.props.value).join(";");return d.jsx(PH,{...g,children:d.jsxs(TW,{required:m,scope:e,trigger:x,onTriggerChange:b,valueNode:_,onValueNodeChange:T,valueNodeHasChildren:k,onValueNodeHasChildrenChange:N,contentId:du(),value:C,onValueChange:A,open:S,onOpenChange:E,dir:R,triggerPointerDownPosRef:P,disabled:p,children:[d.jsx(ip.Provider,{scope:e,children:d.jsx(IW,{scope:t.__scopeSelect,onNativeOptionAdd:w.useCallback(z=>{F(W=>new Set(W).add(z))},[]),onNativeOptionRemove:w.useCallback(z=>{F(W=>{const M=new Set(W);return M.delete(z),M})},[]),children:n})}),j?d.jsxs(P1,{"aria-hidden":!0,required:m,tabIndex:-1,name:u,autoComplete:f,value:C,onChange:z=>A(z.target.value),disabled:p,form:y,children:[C===void 0?d.jsx("option",{value:""}):null,Array.from(O)]},B):null]})})};a1.displayName=so;var l1="SelectTrigger",c1=w.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,i=ap(n),o=mi(l1,n),a=o.disabled||r,l=Ge(e,o.onTriggerChange),c=op(n),u=w.useRef("touch"),[f,p,m]=D1(g=>{const x=c().filter(T=>!T.disabled),b=x.find(T=>T.value===o.value),_=O1(x,g,b);_!==void 0&&o.onValueChange(_.value)}),y=g=>{a||(o.onOpenChange(!0),m()),g&&(o.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return d.jsx(NH,{asChild:!0,...i,children:d.jsx(ve.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":N1(o.value)?"":void 0,...s,ref:l,onClick:fe(s.onClick,g=>{g.currentTarget.focus(),u.current!=="mouse"&&y(g)}),onPointerDown:fe(s.onPointerDown,g=>{u.current=g.pointerType;const x=g.target;x.hasPointerCapture(g.pointerId)&&x.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(y(g),g.preventDefault())}),onKeyDown:fe(s.onKeyDown,g=>{const x=f.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&p(g.key),!(x&&g.key===" ")&&bW.includes(g.key)&&(y(),g.preventDefault())})})})});c1.displayName=l1;var u1="SelectValue",d1=w.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:o="",...a}=t,l=mi(u1,n),{onValueNodeHasChildrenChange:c}=l,u=i!==void 0,f=Ge(e,l.onValueNodeChange);return Ot(()=>{c(u)},[c,u]),d.jsx(ve.span,{...a,ref:f,style:{pointerEvents:"none"},children:N1(l.value)?d.jsx(d.Fragment,{children:o}):i})});d1.displayName=u1;var kW="SelectIcon",h1=w.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return d.jsx(ve.span,{"aria-hidden":!0,...s,ref:e,children:r||"▼"})});h1.displayName=kW;var AW="SelectPortal",f1=t=>d.jsx(rp,{asChild:!0,...t});f1.displayName=AW;var io="SelectContent",p1=w.forwardRef((t,e)=>{const n=mi(io,t.__scopeSelect),[r,s]=w.useState();if(Ot(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?uo.createPortal(d.jsx(m1,{scope:t.__scopeSelect,children:d.jsx(ip.Slot,{scope:t.__scopeSelect,children:d.jsx("div",{children:t.children})})}),i):null}return d.jsx(g1,{...t,ref:e})});p1.displayName=io;var Hn=10,[m1,gi]=Ka(io),RW="SelectContentImpl",PW=Sa("SelectContent.RemoveScroll"),g1=w.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:f,collisionBoundary:p,collisionPadding:m,sticky:y,hideWhenDetached:g,avoidCollisions:x,...b}=t,_=mi(io,n),[T,k]=w.useState(null),[N,R]=w.useState(null),S=Ge(e,X=>k(X)),[E,C]=w.useState(null),[A,P]=w.useState(null),j=op(n),[O,F]=w.useState(!1),B=w.useRef(!1);w.useEffect(()=>{if(T)return e1(T)},[T]),AN();const z=w.useCallback(X=>{const[Me,...We]=j().map(Re=>Re.ref.current),[xe]=We.slice(-1),Se=document.activeElement;for(const Re of X)if(Re===Se||(Re?.scrollIntoView({block:"nearest"}),Re===Me&&N&&(N.scrollTop=0),Re===xe&&N&&(N.scrollTop=N.scrollHeight),Re?.focus(),document.activeElement!==Se))return},[j,N]),W=w.useCallback(()=>z([E,T]),[z,E,T]);w.useEffect(()=>{O&&W()},[O,W]);const{onOpenChange:M,triggerPointerDownPosRef:H}=_;w.useEffect(()=>{if(T){let X={x:0,y:0};const Me=xe=>{X={x:Math.abs(Math.round(xe.pageX)-(H.current?.x??0)),y:Math.abs(Math.round(xe.pageY)-(H.current?.y??0))}},We=xe=>{X.x<=10&&X.y<=10?xe.preventDefault():T.contains(xe.target)||M(!1),document.removeEventListener("pointermove",Me),H.current=null};return H.current!==null&&(document.addEventListener("pointermove",Me),document.addEventListener("pointerup",We,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Me),document.removeEventListener("pointerup",We,{capture:!0})}}},[T,M,H]),w.useEffect(()=>{const X=()=>M(!1);return window.addEventListener("blur",X),window.addEventListener("resize",X),()=>{window.removeEventListener("blur",X),window.removeEventListener("resize",X)}},[M]);const[Q,ie]=D1(X=>{const Me=j().filter(Se=>!Se.disabled),We=Me.find(Se=>Se.ref.current===document.activeElement),xe=O1(Me,X,We);xe&&setTimeout(()=>xe.ref.current.focus())}),re=w.useCallback((X,Me,We)=>{const xe=!B.current&&!We;(_.value!==void 0&&_.value===Me||xe)&&(C(X),xe&&(B.current=!0))},[_.value]),ne=w.useCallback(()=>T?.focus(),[T]),se=w.useCallback((X,Me,We)=>{const xe=!B.current&&!We;(_.value!==void 0&&_.value===Me||xe)&&P(X)},[_.value]),je=r==="popper"?Vy:y1,Pe=je===Vy?{side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:f,collisionBoundary:p,collisionPadding:m,sticky:y,hideWhenDetached:g,avoidCollisions:x}:{};return d.jsx(m1,{scope:n,content:T,viewport:N,onViewportChange:R,itemRefCallback:re,selectedItem:E,onItemLeave:ne,itemTextRefCallback:se,focusSelectedItem:W,selectedItemText:A,position:r,isPositioned:O,searchRef:Q,children:d.jsx(yx,{as:PW,allowPinchZoom:!0,children:d.jsx(ox,{asChild:!0,trapped:_.open,onMountAutoFocus:X=>{X.preventDefault()},onUnmountAutoFocus:fe(s,X=>{_.trigger?.focus({preventScroll:!0}),X.preventDefault()}),children:d.jsx(Zf,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:X=>X.preventDefault(),onDismiss:()=>_.onOpenChange(!1),children:d.jsx(je,{role:"listbox",id:_.contentId,"data-state":_.open?"open":"closed",dir:_.dir,onContextMenu:X=>X.preventDefault(),...b,...Pe,onPlaced:()=>F(!0),ref:S,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:fe(b.onKeyDown,X=>{const Me=X.ctrlKey||X.altKey||X.metaKey;if(X.key==="Tab"&&X.preventDefault(),!Me&&X.key.length===1&&ie(X.key),["ArrowUp","ArrowDown","Home","End"].includes(X.key)){let xe=j().filter(Se=>!Se.disabled).map(Se=>Se.ref.current);if(["ArrowUp","End"].includes(X.key)&&(xe=xe.slice().reverse()),["ArrowUp","ArrowDown"].includes(X.key)){const Se=X.target,Re=xe.indexOf(Se);xe=xe.slice(Re+1)}setTimeout(()=>z(xe)),X.preventDefault()}})})})})})})});g1.displayName=RW;var NW="SelectItemAlignedPosition",y1=w.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,i=mi(io,n),o=gi(io,n),[a,l]=w.useState(null),[c,u]=w.useState(null),f=Ge(e,S=>u(S)),p=op(n),m=w.useRef(!1),y=w.useRef(!0),{viewport:g,selectedItem:x,selectedItemText:b,focusSelectedItem:_}=o,T=w.useCallback(()=>{if(i.trigger&&i.valueNode&&a&&c&&g&&x&&b){const S=i.trigger.getBoundingClientRect(),E=c.getBoundingClientRect(),C=i.valueNode.getBoundingClientRect(),A=b.getBoundingClientRect();if(i.dir!=="rtl"){const Se=A.left-E.left,Re=C.left-Se,_t=S.left-Re,pn=S.width+_t,jr=Math.max(pn,E.width),$=window.innerWidth-Hn,oe=aS(Re,[Hn,Math.max(Hn,$-jr)]);a.style.minWidth=pn+"px",a.style.left=oe+"px"}else{const Se=E.right-A.right,Re=window.innerWidth-C.right-Se,_t=window.innerWidth-S.right-Re,pn=S.width+_t,jr=Math.max(pn,E.width),$=window.innerWidth-Hn,oe=aS(Re,[Hn,Math.max(Hn,$-jr)]);a.style.minWidth=pn+"px",a.style.right=oe+"px"}const P=p(),j=window.innerHeight-Hn*2,O=g.scrollHeight,F=window.getComputedStyle(c),B=parseInt(F.borderTopWidth,10),z=parseInt(F.paddingTop,10),W=parseInt(F.borderBottomWidth,10),M=parseInt(F.paddingBottom,10),H=B+z+O+M+W,Q=Math.min(x.offsetHeight*5,H),ie=window.getComputedStyle(g),re=parseInt(ie.paddingTop,10),ne=parseInt(ie.paddingBottom,10),se=S.top+S.height/2-Hn,je=j-se,Pe=x.offsetHeight/2,X=x.offsetTop+Pe,Me=B+z+X,We=H-Me;if(Me<=se){const Se=P.length>0&&x===P[P.length-1].ref.current;a.style.bottom="0px";const Re=c.clientHeight-g.offsetTop-g.offsetHeight,_t=Math.max(je,Pe+(Se?ne:0)+Re+W),pn=Me+_t;a.style.height=pn+"px"}else{const Se=P.length>0&&x===P[0].ref.current;a.style.top="0px";const _t=Math.max(se,B+g.offsetTop+(Se?re:0)+Pe)+We;a.style.height=_t+"px",g.scrollTop=Me-se+g.offsetTop}a.style.margin=`${Hn}px 0`,a.style.minHeight=Q+"px",a.style.maxHeight=j+"px",r?.(),requestAnimationFrame(()=>m.current=!0)}},[p,i.trigger,i.valueNode,a,c,g,x,b,i.dir,r]);Ot(()=>T(),[T]);const[k,N]=w.useState();Ot(()=>{c&&N(window.getComputedStyle(c).zIndex)},[c]);const R=w.useCallback(S=>{S&&y.current===!0&&(T(),_?.(),y.current=!1)},[T,_]);return d.jsx(OW,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:m,onScrollButtonChange:R,children:d.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:k},children:d.jsx(ve.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});y1.displayName=NW;var DW="SelectPopperPosition",Vy=w.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=Hn,...i}=t,o=ap(n);return d.jsx(DH,{...o,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Vy.displayName=DW;var[OW,vx]=Ka(io,{}),Uy="SelectViewport",v1=w.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,i=gi(Uy,n),o=vx(Uy,n),a=Ge(e,i.onViewportChange),l=w.useRef(0);return d.jsxs(d.Fragment,{children:[d.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),d.jsx(ip.Slot,{scope:n,children:d.jsx(ve.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:fe(s.onScroll,c=>{const u=c.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:p}=o;if(p?.current&&f){const m=Math.abs(l.current-u.scrollTop);if(m>0){const y=window.innerHeight-Hn*2,g=parseFloat(f.style.minHeight),x=parseFloat(f.style.height),b=Math.max(g,x);if(b<y){const _=b+m,T=Math.min(y,_),k=_-T;f.style.height=T+"px",f.style.bottom==="0px"&&(u.scrollTop=k>0?k:0,f.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});v1.displayName=Uy;var x1="SelectGroup",[jW,MW]=Ka(x1),LW=w.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=du();return d.jsx(jW,{scope:n,id:s,children:d.jsx(ve.div,{role:"group","aria-labelledby":s,...r,ref:e})})});LW.displayName=x1;var _1="SelectLabel",w1=w.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=MW(_1,n);return d.jsx(ve.div,{id:s.id,...r,ref:e})});w1.displayName=_1;var nf="SelectItem",[FW,b1]=Ka(nf),E1=w.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...o}=t,a=mi(nf,n),l=gi(nf,n),c=a.value===r,[u,f]=w.useState(i??""),[p,m]=w.useState(!1),y=Ge(e,_=>l.itemRefCallback?.(_,r,s)),g=du(),x=w.useRef("touch"),b=()=>{s||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return d.jsx(FW,{scope:n,value:r,disabled:s,textId:g,isSelected:c,onItemTextChange:w.useCallback(_=>{f(T=>T||(_?.textContent??"").trim())},[]),children:d.jsx(ip.ItemSlot,{scope:n,value:r,disabled:s,textValue:u,children:d.jsx(ve.div,{role:"option","aria-labelledby":g,"data-highlighted":p?"":void 0,"aria-selected":c&&p,"data-state":c?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:y,onFocus:fe(o.onFocus,()=>m(!0)),onBlur:fe(o.onBlur,()=>m(!1)),onClick:fe(o.onClick,()=>{x.current!=="mouse"&&b()}),onPointerUp:fe(o.onPointerUp,()=>{x.current==="mouse"&&b()}),onPointerDown:fe(o.onPointerDown,_=>{x.current=_.pointerType}),onPointerMove:fe(o.onPointerMove,_=>{x.current=_.pointerType,s?l.onItemLeave?.():x.current==="mouse"&&_.currentTarget.focus({preventScroll:!0})}),onPointerLeave:fe(o.onPointerLeave,_=>{_.currentTarget===document.activeElement&&l.onItemLeave?.()}),onKeyDown:fe(o.onKeyDown,_=>{l.searchRef?.current!==""&&_.key===" "||(EW.includes(_.key)&&b(),_.key===" "&&_.preventDefault())})})})})});E1.displayName=nf;var Ol="SelectItemText",S1=w.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...i}=t,o=mi(Ol,n),a=gi(Ol,n),l=b1(Ol,n),c=CW(Ol,n),[u,f]=w.useState(null),p=Ge(e,b=>f(b),l.onItemTextChange,b=>a.itemTextRefCallback?.(b,l.value,l.disabled)),m=u?.textContent,y=w.useMemo(()=>d.jsx("option",{value:l.value,disabled:l.disabled,children:m},l.value),[l.disabled,l.value,m]),{onNativeOptionAdd:g,onNativeOptionRemove:x}=c;return Ot(()=>(g(y),()=>x(y)),[g,x,y]),d.jsxs(d.Fragment,{children:[d.jsx(ve.span,{id:l.textId,...i,ref:p}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?uo.createPortal(i.children,o.valueNode):null]})});S1.displayName=Ol;var T1="SelectItemIndicator",I1=w.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return b1(T1,n).isSelected?d.jsx(ve.span,{"aria-hidden":!0,...r,ref:e}):null});I1.displayName=T1;var By="SelectScrollUpButton",C1=w.forwardRef((t,e)=>{const n=gi(By,t.__scopeSelect),r=vx(By,t.__scopeSelect),[s,i]=w.useState(!1),o=Ge(e,r.onScrollButtonChange);return Ot(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollTop>0;i(c)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),s?d.jsx(A1,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});C1.displayName=By;var zy="SelectScrollDownButton",k1=w.forwardRef((t,e)=>{const n=gi(zy,t.__scopeSelect),r=vx(zy,t.__scopeSelect),[s,i]=w.useState(!1),o=Ge(e,r.onScrollButtonChange);return Ot(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;i(u)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),s?d.jsx(A1,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});k1.displayName=zy;var A1=w.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,i=gi("SelectScrollButton",n),o=w.useRef(null),a=op(n),l=w.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return w.useEffect(()=>()=>l(),[l]),Ot(()=>{a().find(u=>u.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[a]),d.jsx(ve.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:fe(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:fe(s.onPointerMove,()=>{i.onItemLeave?.(),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:fe(s.onPointerLeave,()=>{l()})})}),VW="SelectSeparator",R1=w.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return d.jsx(ve.div,{"aria-hidden":!0,...r,ref:e})});R1.displayName=VW;var $y="SelectArrow",UW=w.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=ap(n),i=mi($y,n),o=gi($y,n);return i.open&&o.position==="popper"?d.jsx(OH,{...s,...r,ref:e}):null});UW.displayName=$y;var BW="SelectBubbleInput",P1=w.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const s=w.useRef(null),i=Ge(r,s),o=MH(e);return w.useEffect(()=>{const a=s.current;if(!a)return;const l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&u){const f=new Event("change",{bubbles:!0});u.call(a,e),a.dispatchEvent(f)}},[o,e]),d.jsx(ve.select,{...n,style:{...JN,...n.style},ref:i,defaultValue:e})});P1.displayName=BW;function N1(t){return t===""||t===void 0}function D1(t){const e=Bn(t),n=w.useRef(""),r=w.useRef(0),s=w.useCallback(o=>{const a=n.current+o;e(a),function l(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),i=w.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return w.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function O1(t,e,n){const s=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=zW(t,Math.max(i,0));s.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.textValue.toLowerCase().startsWith(s.toLowerCase()));return l!==n?l:void 0}function zW(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var $W=a1,j1=c1,qW=d1,HW=h1,WW=f1,M1=p1,KW=v1,L1=w1,F1=E1,GW=S1,QW=I1,V1=C1,U1=k1,B1=R1;const YW=$W,XW=qW,z1=w.forwardRef(({className:t,children:e,...n},r)=>d.jsxs(j1,{ref:r,className:Oe("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,d.jsx(HW,{asChild:!0,children:d.jsx(LP,{className:"h-4 w-4 opacity-50"})})]}));z1.displayName=j1.displayName;const $1=w.forwardRef(({className:t,...e},n)=>d.jsx(V1,{ref:n,className:Oe("flex cursor-default items-center justify-center py-1",t),...e,children:d.jsx(w$,{className:"h-4 w-4"})}));$1.displayName=V1.displayName;const q1=w.forwardRef(({className:t,...e},n)=>d.jsx(U1,{ref:n,className:Oe("flex cursor-default items-center justify-center py-1",t),...e,children:d.jsx(LP,{className:"h-4 w-4"})}));q1.displayName=U1.displayName;const H1=w.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>d.jsx(WW,{children:d.jsxs(M1,{ref:s,className:Oe("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[d.jsx($1,{}),d.jsx(KW,{className:Oe("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),d.jsx(q1,{})]})}));H1.displayName=M1.displayName;const JW=w.forwardRef(({className:t,...e},n)=>d.jsx(L1,{ref:n,className:Oe("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));JW.displayName=L1.displayName;const th=w.forwardRef(({className:t,children:e,...n},r)=>d.jsxs(F1,{ref:r,className:Oe("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[d.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:d.jsx(QW,{children:d.jsx(v$,{className:"h-4 w-4"})})}),d.jsx(GW,{children:e})]}));th.displayName=F1.displayName;const ZW=w.forwardRef(({className:t,...e},n)=>d.jsx(B1,{ref:n,className:Oe("-mx-1 my-1 h-px bg-muted",t),...e}));ZW.displayName=B1.displayName;function kS(){const{user:t,loginMutation:e,registerMutation:n,loading:r,logout:s}=yo(),[i,o]=or(),[a,l]=w.useState("login"),[c,u]=w.useState(!1),[f,p]=w.useState(!1);console.log("AuthPage:",{user:t,loading:r,location:i,activeTab:a}),w.useEffect(()=>{t&&!f&&(console.log("AuthPage: User is authenticated, setting redirect flag"),p(!0))},[t,f]),w.useEffect(()=>{const C=i.split("/")[1];console.log("AuthPage: Setting active tab based on path:",C),(C==="login"||C==="register")&&l(C)},[i]);const m=w.useCallback(C=>{console.log("AuthPage: Tab changed to:",C),l(C),o(`/${C}`)},[o]),[y,g]=w.useState({email:"",password:""}),[x,b]=w.useState({email:"",username:"",password:"",confirmPassword:"",role:ut.BENEFICIARY,organization:""}),[_,T]=w.useState({}),k=w.useCallback(async C=>{C.preventDefault(),u(!0),T({});try{await e.mutateAsync({email:y.email,password:y.password})}catch(A){T(P=>({...P,login:A.message}))}finally{u(!1)}},[y,e]),N=w.useCallback(async C=>{if(C.preventDefault(),u(!0),T({}),x.password!==x.confirmPassword){T(A=>({...A,confirmPassword:"Passwords do not match"})),u(!1);return}try{await n.mutateAsync({email:x.email,password:x.password,name:x.username,role:x.role})}catch(A){T(P=>({...P,register:A.message}))}finally{u(!1)}},[x,n]),R=w.useCallback(C=>A=>{g(P=>({...P,[C]:A.target.value}))},[]),S=w.useCallback(C=>A=>{b(P=>({...P,[C]:A.target.value}))},[]),E=w.useCallback(C=>{b(A=>({...A,role:C}))},[]);return r?(console.log("AuthPage: Loading state"),d.jsx("div",{className:"min-h-screen flex items-center justify-center",children:d.jsx(Ys,{className:"h-8 w-8 animate-spin text-primary"})})):f?(console.log("AuthPage: Redirecting to home"),d.jsx(Qi,{to:"/home"})):(console.log("AuthPage: Rendering auth form"),d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:d.jsxs(Ps,{className:"w-full max-w-md",children:[d.jsxs(Ns,{className:"space-y-1",children:[d.jsx("div",{className:"flex items-center justify-center mb-4",children:d.jsx(BP,{className:"h-12 w-12 text-primary"})}),d.jsx(Ds,{className:"text-2xl text-center",children:"Welcome to HumanitarianAid"}),d.jsx(Os,{className:"text-center",children:a==="login"?"Sign in to your account to continue":"Create a new account to get started"})]}),d.jsx(Li,{children:d.jsxs(sq,{value:a,onValueChange:m,className:"w-full",children:[d.jsxs(EN,{className:"grid w-full grid-cols-2",children:[d.jsx(Ny,{value:"login",children:"Login"}),d.jsx(Ny,{value:"register",children:"Register"})]}),d.jsx(Dy,{value:"login",children:d.jsxs("form",{onSubmit:k,className:"space-y-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(ys,{htmlFor:"email",children:"Email"}),d.jsx(vr,{id:"email",type:"email",placeholder:"Enter your email",value:y.email,onChange:R("email"),required:!0})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(ys,{htmlFor:"password",children:"Password"}),d.jsx(vr,{id:"password",type:"password",placeholder:"Enter your password",value:y.password,onChange:R("password"),required:!0})]}),_.login&&d.jsx("div",{className:"text-sm text-red-500",children:_.login}),d.jsx(Ue,{type:"submit",className:"w-full",disabled:c||e.isLoading,children:c||e.isLoading?d.jsxs(d.Fragment,{children:[d.jsx(Ys,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):"Sign in"})]})}),d.jsx(Dy,{value:"register",children:d.jsxs("form",{onSubmit:N,className:"space-y-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(ys,{htmlFor:"username",children:"Username"}),d.jsx(vr,{id:"username",type:"text",placeholder:"Choose a username",value:x.username,onChange:S("username"),required:!0})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(ys,{htmlFor:"register-email",children:"Email"}),d.jsx(vr,{id:"register-email",type:"email",placeholder:"Enter your email",value:x.email,onChange:S("email"),required:!0})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(ys,{htmlFor:"role",children:"Role"}),d.jsxs(YW,{value:x.role,onValueChange:E,children:[d.jsx(z1,{children:d.jsx(XW,{placeholder:"Select your role"})}),d.jsxs(H1,{children:[d.jsx(th,{value:ut.BENEFICIARY,children:"Beneficiary"}),d.jsx(th,{value:ut.DONOR,children:"Donor"}),d.jsx(th,{value:ut.VOLUNTEER,children:"Volunteer"})]})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(ys,{htmlFor:"password",children:"Password"}),d.jsx(vr,{id:"password",type:"password",placeholder:"Enter your password",value:x.password,onChange:S("password"),required:!0})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(ys,{htmlFor:"confirmPassword",children:"Confirm Password"}),d.jsx(vr,{id:"confirmPassword",type:"password",placeholder:"Confirm your password",value:x.confirmPassword,onChange:S("confirmPassword"),required:!0})]}),_.confirmPassword&&d.jsx("div",{className:"text-sm text-red-500",children:_.confirmPassword}),_.register&&d.jsx("div",{className:"text-sm text-red-500",children:_.register}),d.jsx(Ue,{type:"submit",className:"w-full",disabled:c||n.isLoading,children:c||n.isLoading?d.jsxs(d.Fragment,{children:[d.jsx(Ys,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating account..."]}):"Create account"})]})})]})})]})}))}const e7="modulepreload",t7=function(t){return"/"+t},AS={},lp=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");s=Promise.allSettled(n.map(l=>{if(l=t7(l),l in AS)return;AS[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":e7,c||(f.as="script"),f.crossOrigin="",f.href=l,a&&f.setAttribute("nonce",a),document.head.appendChild(f),c)return new Promise((p,m)=>{f.addEventListener("load",p),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},n7=w.lazy(()=>lp(()=>import("./AidRequests-C5LEsXS3.js"),[])),r7=w.lazy(()=>lp(()=>import("./Distributions-CqrG7n5Z.js"),[])),s7=w.lazy(()=>lp(()=>import("./Inventory-BaPlftCp.js"),[])),i7=w.lazy(()=>lp(()=>import("./Analytics-c49GHdsL.js"),[])),ud=()=>d.jsx("div",{className:"flex items-center justify-center p-4",children:d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}),o7=()=>{const{user:t,hasPermission:e}=jt(),n=()=>{const s=[];return e("view_aid_requests")&&s.push({title:"Aid Requests",icon:d.jsx(E$,{className:"h-6 w-6 text-primary"}),description:"View and manage aid requests",path:"/request",component:d.jsx(w.Suspense,{fallback:d.jsx(ud,{}),children:d.jsx(n7,{})})}),e("view_distributions")&&s.push({title:"Distributions",icon:d.jsx(Cy,{className:"h-6 w-6 text-primary"}),description:"Track aid distributions",path:"/distribution",component:d.jsx(w.Suspense,{fallback:d.jsx(ud,{}),children:d.jsx(r7,{})})}),e("manage_inventory")&&s.push({title:"Inventory",icon:d.jsx(Cy,{className:"h-6 w-6 text-primary"}),description:"Manage aid inventory",path:"/inventory",component:d.jsx(w.Suspense,{fallback:d.jsx(ud,{}),children:d.jsx(s7,{})})}),(t?.role==="admin"||t?.role==="staff")&&s.push({title:"Analytics",icon:d.jsx(p$,{className:"h-6 w-6 text-primary"}),description:"View system analytics",path:"/analytics",component:d.jsx(w.Suspense,{fallback:d.jsx(ud,{}),children:d.jsx(i7,{})})}),s},r=()=>[{label:"Aid Requests",value:"150+",description:"Active requests"},{label:"Beneficiaries",value:"2,000+",description:"People helped"},{label:"Volunteers",value:"500+",description:"Active volunteers"},{label:"Aid Distributed",value:"$1.2M",description:"Total value"}];return d.jsx("div",{className:"min-h-screen bg-gray-50",children:d.jsxs("div",{className:"max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8",children:[d.jsxs("div",{className:"text-center mb-12",children:[d.jsx("div",{className:"flex items-center justify-center mb-6",children:d.jsx(Z0,{className:"h-12 w-12 text-primary"})}),d.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Welcome to HumanitarianAid"}),d.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:t?`Welcome back, ${t.displayName||"User"}!`:"Connecting those who need help with those who can help"})]}),t?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"mb-12",children:[d.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Quick Actions"}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n().map((s,i)=>d.jsx(bn,{href:s.path,children:d.jsx(Ps,{className:"cursor-pointer hover:shadow-lg transition-shadow",children:d.jsx(Ns,{children:d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:s.icon}),d.jsxs("div",{children:[d.jsx(Ds,{children:s.title}),d.jsx(Os,{children:s.description})]})]})})})},i))})]}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Overview"}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:r().map((s,i)=>d.jsxs(Ps,{children:[d.jsxs(Ns,{children:[d.jsx(Ds,{className:"text-3xl font-bold text-primary",children:s.value}),d.jsx(Os,{className:"text-lg font-medium",children:s.label})]}),d.jsx(Li,{children:d.jsx("p",{className:"text-sm text-gray-500",children:s.description})})]},i))})]})]}):d.jsxs("div",{className:"flex flex-col items-center space-y-6",children:[d.jsx("p",{className:"text-lg text-gray-600 max-w-2xl text-center",children:"Join our platform to make a difference in your community."}),d.jsxs("div",{className:"flex gap-4",children:[d.jsx(bn,{href:"/auth?type=login",children:d.jsx(Ue,{size:"lg",children:"Sign In"})}),d.jsx(bn,{href:"/auth?type=register",children:d.jsx(Ue,{size:"lg",variant:"outline",children:"Register"})})]})]})]})})};function a7(){const[,t]=or(),{user:e,logout:n}=yo(),r=a=>{t(`/${a}`)},s=()=>{t("/about")},i=()=>{n()},o=()=>{t("/home")};return d.jsxs("div",{className:"min-h-screen flex flex-col",children:[d.jsx("header",{className:"bg-white border-b",children:d.jsxs("div",{className:"container mx-auto px-4 py-4 flex justify-between items-center",children:[d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(Z0,{className:"h-8 w-8 text-primary"}),d.jsx("span",{className:"text-xl font-bold",children:"HumanitarianAid"})]}),d.jsxs("nav",{className:"flex items-center space-x-4",children:[d.jsx(Ue,{variant:"ghost",onClick:s,children:"About Us"}),e?d.jsxs(d.Fragment,{children:[d.jsx(Ue,{variant:"outline",onClick:o,children:"Dashboard"}),d.jsxs(Ue,{variant:"destructive",onClick:i,children:[d.jsx(VP,{className:"mr-2 h-4 w-4"}),"Logout"]})]}):d.jsxs(d.Fragment,{children:[d.jsx(Ue,{variant:"secondary",onClick:()=>r("login"),children:"Sign In"}),d.jsx(Ue,{variant:"default",onClick:()=>r("register"),children:"Create Account"})]})]})]})}),d.jsxs("main",{className:"flex-grow",children:[d.jsx("section",{className:"bg-gradient-to-b from-primary/5 to-background py-20",children:d.jsx("div",{className:"container mx-auto px-4",children:d.jsxs("div",{className:"max-w-3xl mx-auto text-center",children:[d.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-6",children:"Connecting Those Who Need Help with Those Who Want to Help"}),d.jsx("p",{className:"text-xl text-muted-foreground mb-8",children:"HumanitarianAid is a platform that brings together beneficiaries, donors, and volunteers to create positive change in communities worldwide."}),d.jsxs("div",{className:"flex justify-center space-x-4",children:[d.jsxs(Ue,{size:"lg",onClick:()=>r("register"),children:["Get Started",d.jsx(h$,{className:"ml-2 h-4 w-4"})]}),d.jsx(Ue,{variant:"outline",size:"lg",onClick:s,children:"Learn More"})]})]})})}),d.jsx("section",{className:"py-20",children:d.jsxs("div",{className:"container mx-auto px-4",children:[d.jsx("h2",{className:"text-3xl font-bold text-center mb-12",children:"How It Works"}),d.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[d.jsxs("div",{className:"text-center p-6",children:[d.jsx(ex,{className:"h-12 w-12 text-primary mx-auto mb-4"}),d.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Connect"}),d.jsx("p",{className:"text-muted-foreground",children:"Join our community of beneficiaries, donors, and volunteers."})]}),d.jsxs("div",{className:"text-center p-6",children:[d.jsx(FP,{className:"h-12 w-12 text-primary mx-auto mb-4"}),d.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Collaborate"}),d.jsx("p",{className:"text-muted-foreground",children:"Work together to address humanitarian needs in your community."})]}),d.jsxs("div",{className:"text-center p-6",children:[d.jsx(zP,{className:"h-12 w-12 text-primary mx-auto mb-4"}),d.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Create Change"}),d.jsx("p",{className:"text-muted-foreground",children:"Make a real difference in people's lives through coordinated efforts."})]})]})]})})]}),d.jsx("footer",{className:"bg-gray-50 border-t",children:d.jsx("div",{className:"container mx-auto px-4 py-8",children:d.jsx("div",{className:"text-center text-muted-foreground",children:"© 2024 HumanitarianAid. All rights reserved."})})})]})}function l7(){const{user:t,isLoading:e}=jt(),{user:n,isLoading:r}=yo(),[,s]=or();return w.useEffect(()=>{!r&&!n&&s("/auth?type=login")},[n,r,s]),e||r?d.jsx("div",{className:"min-h-screen flex items-center justify-center",children:d.jsx(Ys,{className:"h-8 w-8 animate-spin text-primary"})}):!t||!n?d.jsx("div",{className:"min-h-screen flex items-center justify-center",children:d.jsxs(Ps,{className:"w-full max-w-md",children:[d.jsxs(Ns,{children:[d.jsx("div",{className:"flex items-center justify-center mb-4",children:d.jsx(BP,{className:"h-12 w-12 text-red-500"})}),d.jsx(Ds,{className:"text-2xl text-center",children:"Access Denied"}),d.jsx(Os,{className:"text-center",children:"You must be logged in to access this page"})]}),d.jsx(Li,{className:"flex justify-center",children:d.jsx(Ue,{onClick:()=>s("/auth?type=login"),children:"Go to Login"})})]})}):d.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:d.jsxs("div",{className:"max-w-7xl mx-auto",children:[d.jsxs("div",{className:"text-center mb-12",children:[d.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:["Welcome, ",t.name,"!"]}),d.jsxs("p",{className:"mt-2 text-gray-600",children:["Role: ",t.role]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[d.jsxs(Ps,{children:[d.jsxs(Ns,{children:[d.jsx(Ds,{children:"Quick Actions"}),d.jsx(Os,{children:"Common tasks and operations"})]}),d.jsxs(Li,{className:"space-y-4",children:[d.jsx(Ue,{className:"w-full",variant:"outline",children:"View Profile"}),d.jsx(Ue,{className:"w-full",variant:"outline",children:"Update Settings"}),d.jsx(Ue,{className:"w-full",variant:"outline",children:"View Notifications"})]})]}),d.jsxs(Ps,{children:[d.jsxs(Ns,{children:[d.jsx(Ds,{children:"Role Dashboard"}),d.jsx(Os,{children:"Features specific to your role"})]}),d.jsxs(Li,{className:"space-y-4",children:[t.role==="admin"&&d.jsxs(d.Fragment,{children:[d.jsx(Ue,{className:"w-full",variant:"outline",children:"Manage Users"}),d.jsx(Ue,{className:"w-full",variant:"outline",children:"System Settings"})]}),t.role==="beneficiary"&&d.jsxs(d.Fragment,{children:[d.jsx(Ue,{className:"w-full",variant:"outline",children:"View Aid Requests"}),d.jsx(Ue,{className:"w-full",variant:"outline",children:"Track Shipments"})]}),t.role==="donor"&&d.jsxs(d.Fragment,{children:[d.jsx(Ue,{className:"w-full",variant:"outline",children:"Manage Donations"}),d.jsx(Ue,{className:"w-full",variant:"outline",children:"View Impact"})]}),t.role==="volunteer"&&d.jsxs(d.Fragment,{children:[d.jsx(Ue,{className:"w-full",variant:"outline",children:"View Assignments"}),d.jsx(Ue,{className:"w-full",variant:"outline",children:"Report Hours"})]})]})]}),d.jsxs(Ps,{children:[d.jsxs(Ns,{children:[d.jsx(Ds,{children:"System Status"}),d.jsx(Os,{children:"Current system information"})]}),d.jsxs(Li,{className:"space-y-4",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-gray-600",children:"Last Login"}),d.jsx("span",{className:"text-gray-900",children:new Date().toLocaleString()})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-gray-600",children:"Account Status"}),d.jsx("span",{className:"text-green-500",children:"Active"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-gray-600",children:"Notifications"}),d.jsx("span",{className:"text-gray-900",children:"0 unread"})]})]})]})]})]})})}var W1="Dialog",[K1,_X]=vo(W1),[wX,cr]=K1(W1),G1="DialogTrigger",c7=w.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=cr(G1,n),i=Ge(e,s.triggerRef);return d.jsx(ve.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":wx(s.open),...r,ref:i,onClick:fe(t.onClick,s.onOpenToggle)})});c7.displayName=G1;var xx="DialogPortal",[u7,Q1]=K1(xx,{forceMount:void 0}),Y1=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=cr(xx,e);return d.jsx(u7,{scope:e,forceMount:n,children:w.Children.map(r,o=>d.jsx(za,{present:n||i.open,children:d.jsx(rp,{asChild:!0,container:s,children:o})}))})};Y1.displayName=xx;var rf="DialogOverlay",X1=w.forwardRef((t,e)=>{const n=Q1(rf,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=cr(rf,t.__scopeDialog);return i.modal?d.jsx(za,{present:r||i.open,children:d.jsx(h7,{...s,ref:e})}):null});X1.displayName=rf;var d7=Sa("DialogOverlay.RemoveScroll"),h7=w.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=cr(rf,n);return d.jsx(yx,{as:d7,allowPinchZoom:!0,shards:[s.contentRef],children:d.jsx(ve.div,{"data-state":wx(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),oo="DialogContent",J1=w.forwardRef((t,e)=>{const n=Q1(oo,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=cr(oo,t.__scopeDialog);return d.jsx(za,{present:r||i.open,children:i.modal?d.jsx(f7,{...s,ref:e}):d.jsx(p7,{...s,ref:e})})});J1.displayName=oo;var f7=w.forwardRef((t,e)=>{const n=cr(oo,t.__scopeDialog),r=w.useRef(null),s=Ge(e,n.contentRef,r);return w.useEffect(()=>{const i=r.current;if(i)return e1(i)},[]),d.jsx(Z1,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:fe(t.onCloseAutoFocus,i=>{i.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:fe(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&i.preventDefault()}),onFocusOutside:fe(t.onFocusOutside,i=>i.preventDefault())})}),p7=w.forwardRef((t,e)=>{const n=cr(oo,t.__scopeDialog),r=w.useRef(!1),s=w.useRef(!1);return d.jsx(Z1,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{t.onCloseAutoFocus?.(i),i.defaultPrevented||(r.current||n.triggerRef.current?.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{t.onInteractOutside?.(i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;n.triggerRef.current?.contains(o)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),Z1=w.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,a=cr(oo,n),l=w.useRef(null),c=Ge(e,l);return AN(),d.jsxs(d.Fragment,{children:[d.jsx(ox,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:d.jsx(Zf,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":wx(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),d.jsxs(d.Fragment,{children:[d.jsx(m7,{titleId:a.titleId}),d.jsx(y7,{contentRef:l,descriptionId:a.descriptionId})]})]})}),_x="DialogTitle",eD=w.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=cr(_x,n);return d.jsx(ve.h2,{id:s.titleId,...r,ref:e})});eD.displayName=_x;var tD="DialogDescription",nD=w.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=cr(tD,n);return d.jsx(ve.p,{id:s.descriptionId,...r,ref:e})});nD.displayName=tD;var rD="DialogClose",sD=w.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=cr(rD,n);return d.jsx(ve.button,{type:"button",...r,ref:e,onClick:fe(t.onClick,()=>s.onOpenChange(!1))})});sD.displayName=rD;function wx(t){return t?"open":"closed"}var iD="DialogTitleWarning",[bX,oD]=H$(iD,{contentName:oo,titleName:_x,docsSlug:"dialog"}),m7=({titleId:t})=>{const e=oD(iD),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return w.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},g7="DialogDescriptionWarning",y7=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${oD(g7).contentName}}.`;return w.useEffect(()=>{const s=t.current?.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},v7=Y1,aD=X1,lD=J1,cD=eD,uD=nD,x7=sD;const _7=v7,dD=w.forwardRef(({className:t,...e},n)=>d.jsx(aD,{ref:n,className:Oe("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));dD.displayName=aD.displayName;const w7=w.forwardRef(({className:t,children:e,...n},r)=>d.jsxs(_7,{children:[d.jsx(dD,{}),d.jsxs(lD,{ref:r,className:Oe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,d.jsxs(x7,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[d.jsx($P,{className:"h-4 w-4"}),d.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));w7.displayName=lD.displayName;const b7=w.forwardRef(({className:t,...e},n)=>d.jsx(cD,{ref:n,className:Oe("text-lg font-semibold leading-none tracking-tight",t),...e}));b7.displayName=cD.displayName;const E7=w.forwardRef(({className:t,...e},n)=>d.jsx(uD,{ref:n,className:Oe("text-sm text-muted-foreground",t),...e}));E7.displayName=uD.displayName;const S7=()=>{const{user:t}=yo(),{inventory:e,loading:n,error:r,lastUpdate:s,addInventoryItem:i,updateInventoryItem:o,removeInventoryItem:a,getItemsBelowThreshold:l,canManageInventory:c}=uu();t&&["admin","worker"].includes(t.role),ar();const[u,f]=w.useState([]),[p,m]=w.useState(""),[y,g]=w.useState("all"),[x,b]=w.useState("name"),[_,T]=w.useState("asc"),[k,N]=w.useState(!1),[R,S]=w.useState(null),[E,C]=w.useState({name:"",category:"",quantity:0,unit:"",location:"",expiryDate:"",threshold:0}),[A,P]=w.useState(!1),[j,O]=w.useState(!1),[F,B]=w.useState([]),[z,W]=w.useState([]),[M,H]=w.useState({});return w.useEffect(()=>{if(e.length>0){const Q=[...new Set(e.map(re=>re.category))],ie=[...new Set(e.map(re=>re.location))];B(Q),W(ie)}},[e]),w.useEffect(()=>{let Q=[...e];if(y!=="all"&&(Q=Q.filter(ie=>ie.category===y)),p){const ie=p.toLowerCase();Q=Q.filter(re=>re.name.toLowerCase().includes(ie)||re.category.toLowerCase().includes(ie)||re.location.toLowerCase().includes(ie))}k&&(Q=Q.filter(ie=>ie.quantity<=ie.threshold)),Q.sort((ie,re)=>{let ne=ie[x],se=re[x];return(x==="lastUpdated"||x==="expiryDate")&&(ne=ne?new Date(ne).getTime():0,se=se?new Date(se).getTime():0),_==="asc"?ne>se?1:-1:ne<se?1:-1}),f(Q)},[e,y,p,k,x,_]),n?d.jsx("div",{children:"Loading..."}):r?d.jsxs("div",{children:["Error: ",r]}):d.jsx("div",{className:"container mx-auto px-4 py-8"})},T7=()=>{const{loading:t,error:e}=uu();return d.jsxs("div",{className:"space-y-6",children:[d.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-bold",children:"Inventory Management"}),d.jsx("p",{className:"text-sm text-gray-500",children:"Manage inventory items, track stock levels, and monitor expiring items"})]})}),t?d.jsx("div",{className:"flex justify-center items-center h-64",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):e?d.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4",children:d.jsx("p",{className:"text-red-700",children:e})}):d.jsx(S7,{})]})},bx=()=>{const{user:t}=jt(),e=t?.role||ut.GUEST;return{canManageUsers:e===ut.ADMIN,canManageInventory:[ut.ADMIN,ut.STAFF,ut.VOLUNTEER].includes(e),canManageDonations:[ut.ADMIN,ut.STAFF,ut.DONOR].includes(e),canRequestAid:[ut.ADMIN,ut.STAFF,ut.BENEFICIARY].includes(e),canViewAnalytics:[ut.ADMIN,ut.STAFF].includes(e),canManageDistributions:[ut.ADMIN,ut.STAFF].includes(e),canViewSettings:e===ut.ADMIN}},I7=()=>{const{user:t}=jt(),{canManageDonations:e}=bx();return d.jsxs("div",{className:"p-6",children:[d.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Donations"}),d.jsxs("div",{className:"grid gap-6",children:[t?.role==="donor"&&d.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[d.jsx("h2",{className:"text-xl font-semibold mb-4",children:"My Donations"}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("button",{className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"Make New Donation"}),d.jsxs("div",{className:"border rounded p-4",children:[d.jsx("h3",{className:"font-medium mb-2",children:"Donation History"}),d.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Your past donations will appear here."})]})]})]}),e&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[d.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Donation Management"}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("button",{className:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600",children:"Process New Donation"}),d.jsxs("div",{className:"border rounded p-4",children:[d.jsx("h3",{className:"font-medium mb-2",children:"Recent Donations"}),d.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Recent donations will be listed here."})]})]})]}),d.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[d.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Donation Analytics"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[d.jsxs("div",{className:"border rounded p-4",children:[d.jsx("h3",{className:"font-medium mb-2",children:"Total Donations"}),d.jsx("p",{className:"text-2xl font-bold",children:"0"})]}),d.jsxs("div",{className:"border rounded p-4",children:[d.jsx("h3",{className:"font-medium mb-2",children:"This Month"}),d.jsx("p",{className:"text-2xl font-bold",children:"0"})]}),d.jsxs("div",{className:"border rounded p-4",children:[d.jsx("h3",{className:"font-medium mb-2",children:"Pending"}),d.jsx("p",{className:"text-2xl font-bold",children:"0"})]})]})]})]})]})]})},C7=()=>{const{user:t}=jt(),{canManageDistributions:e}=bx();return d.jsxs("div",{className:"p-6",children:[d.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Beneficiary Dashboard"}),d.jsxs("div",{className:"grid gap-6",children:[t?.role==="beneficiary"&&d.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[d.jsx("h2",{className:"text-xl font-semibold mb-4",children:"My Aid Requests"}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("button",{className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"Request Aid"}),d.jsxs("div",{className:"border rounded p-4",children:[d.jsx("h3",{className:"font-medium mb-2",children:"Request History"}),d.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Your aid request history will appear here."})]}),d.jsxs("div",{className:"border rounded p-4",children:[d.jsx("h3",{className:"font-medium mb-2",children:"Active Requests"}),d.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Your active requests will be shown here."})]})]})]}),e&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[d.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Beneficiary Management"}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("button",{className:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600",children:"Register New Beneficiary"}),d.jsxs("div",{className:"border rounded p-4",children:[d.jsx("h3",{className:"font-medium mb-2",children:"Recent Aid Requests"}),d.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Recent aid requests will be listed here."})]})]})]}),d.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[d.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Distribution Analytics"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[d.jsxs("div",{className:"border rounded p-4",children:[d.jsx("h3",{className:"font-medium mb-2",children:"Total Beneficiaries"}),d.jsx("p",{className:"text-2xl font-bold",children:"0"})]}),d.jsxs("div",{className:"border rounded p-4",children:[d.jsx("h3",{className:"font-medium mb-2",children:"Active Requests"}),d.jsx("p",{className:"text-2xl font-bold",children:"0"})]}),d.jsxs("div",{className:"border rounded p-4",children:[d.jsx("h3",{className:"font-medium mb-2",children:"Completed Distributions"}),d.jsx("p",{className:"text-2xl font-bold",children:"0"})]})]})]})]})]})]})},Lm={distributionTrends:[25,30,35,40,35,30],aidTypes:[65,40,55,30,70],serviceEfficiency:[1.2,2.3,2.8,2.5,3.5]},k7=[{value:"usa",label:"United States"},{value:"uk",label:"United Kingdom"},{value:"canada",label:"Canada"},{value:"australia",label:"Australia"},{value:"germany",label:"Germany"},{value:"france",label:"France"},{value:"other",label:"Other"}],A7=()=>{const{user:t,updateProfile:e,logout:n,loading:r}=jt(),{toast:s}=ar(),[,i]=or(),[o,a]=w.useState(!1),[l,c]=w.useState({displayName:"",email:"",phoneNumber:"",country:"",bio:""});if(Pn.useEffect(()=>{t&&c({displayName:t.displayName||"",email:t.email||"",phoneNumber:t.phoneNumber||"",country:t.country||"",bio:t.bio||""})},[t]),r)return d.jsx("div",{className:"flex justify-center items-center h-[calc(100vh-200px)]",children:d.jsx(Ys,{className:"h-8 w-8 animate-spin text-primary"})});if(!t&&!r)return i("/login"),null;const u=m=>{const{name:y,value:g}=m.target;c(x=>({...x,[y]:g}))},f=m=>{m.preventDefault();const y=e(l);y.success?(s({title:"Profile updated",description:"Your profile has been successfully updated"}),a(!1)):s({title:"Update failed",description:y.message,variant:"destructive"})},p=()=>{n(),s({title:"Logged out",description:"You have been successfully logged out"}),i("/login")};return d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[d.jsx("h2",{className:"text-xl font-semibold mb-6",children:"PROFILE"}),d.jsx("div",{className:"max-w-xl mx-auto",children:o?d.jsxs("form",{onSubmit:f,className:"space-y-4",children:[d.jsxs("div",{className:"text-center mb-6",children:[d.jsx("div",{className:"h-24 w-24 bg-secondary rounded-full flex items-center justify-center text-white text-3xl mb-4 mx-auto",children:t.photoURL?d.jsx("img",{src:t.photoURL,alt:t.displayName,className:"h-24 w-24 rounded-full object-cover"}):d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),d.jsx("h3",{className:"text-xl font-medium text-gray-900 mb-4 capitalize",children:t.role}),d.jsxs("p",{className:"text-gray-600 mb-2",children:["User ID: ",t.uid]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),d.jsx("input",{type:"text",id:"displayName",name:"displayName",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary",value:l.displayName,onChange:u,required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),d.jsx("input",{type:"email",id:"email",name:"email",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary",value:l.email,onChange:u,required:!0,disabled:!0})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"phoneNumber",className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),d.jsx("input",{type:"tel",id:"phoneNumber",name:"phoneNumber",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary",value:l.phoneNumber,onChange:u})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"country",className:"block text-sm font-medium text-gray-700 mb-1",children:"Country"}),d.jsxs("select",{id:"country",name:"country",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary",value:l.country,onChange:u,required:!0,children:[d.jsx("option",{value:"",disabled:!0,children:"Select country"}),k7.map(m=>d.jsx("option",{value:m.value,children:m.label},m.value))]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"bio",className:"block text-sm font-medium text-gray-700 mb-1",children:"Bio"}),d.jsx("textarea",{id:"bio",name:"bio",rows:"4",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary",value:l.bio,onChange:u})]}),d.jsxs("div",{className:"flex justify-end space-x-3",children:[d.jsx("button",{type:"button",className:"py-2 px-4 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",onClick:()=>a(!1),children:"Cancel"}),d.jsx("button",{type:"submit",className:"bg-primary hover:bg-primary/90 text-white py-2 px-4 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:"Save Changes"})]})]}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex flex-col items-center mb-6",children:[d.jsx("div",{className:"h-24 w-24 bg-secondary rounded-full flex items-center justify-center text-white text-3xl mb-4",children:t.photoURL?d.jsx("img",{src:t.photoURL,alt:t.displayName,className:"h-24 w-24 rounded-full object-cover"}):d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),d.jsx("h3",{className:"text-xl font-medium text-gray-900 mb-1",children:t.displayName||"No name set"}),d.jsx("p",{className:"text-gray-600 mb-1 capitalize",children:t.role}),d.jsx("p",{className:"text-gray-600 mb-1",children:t.email}),t.phoneNumber&&d.jsx("p",{className:"text-gray-600 mb-1",children:t.phoneNumber}),t.country&&d.jsx("p",{className:"text-gray-600 mb-1",children:t.country}),d.jsxs("p",{className:"text-gray-500 text-sm",children:["ID: ",t.uid]})]}),d.jsxs("div",{className:"mb-6",children:[d.jsx("h4",{className:"text-sm font-medium text-gray-500 mb-2",children:"BIO"}),d.jsx("div",{className:"bg-gray-50 rounded-lg p-4 min-h-[100px]",children:t.bio?t.bio:d.jsx("p",{className:"text-gray-400 italic",children:"No bio information provided"})})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("button",{onClick:p,className:"bg-gray-100 hover:bg-gray-200 text-gray-800 py-2 px-4 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:"Logout"}),d.jsx("button",{onClick:()=>a(!0),className:"bg-primary hover:bg-primary/90 text-white py-2 px-4 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:"Modify Profile"})]})]})})]})},hD=HR(),R7=async(t,e)=>{const n=WR(hD,"updateUserRole");try{return(await n({userId:t,newRole:e})).data}catch(r){throw console.error("Error updating user role:",r),r}},P7=async()=>{const t=WR(hD,"getAllUsers");try{return(await t()).data}catch(e){throw console.error("Error getting users:",e),e}},N7=()=>{const{user:t}=jt(),{canViewSettings:e}=bx(),[n,r]=w.useState([]),[s,i]=w.useState(!0),[o,a]=w.useState(null);w.useEffect(()=>{e&&(async()=>{try{const u=await P7();r(u.users)}catch(u){a("Failed to fetch users"),console.error(u)}finally{i(!1)}})()},[e]);const l=async(c,u)=>{try{await R7(c,u),r(n.map(f=>f.id===c?{...f,role:u}:f))}catch(f){a("Failed to update user role"),console.error(f)}};return e?d.jsxs("div",{className:"p-6",children:[d.jsx("h1",{className:"text-2xl font-bold mb-4",children:"System Settings"}),d.jsxs("div",{className:"grid gap-6",children:[d.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[d.jsx("h2",{className:"text-xl font-semibold mb-4",children:"System Configuration"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"border rounded p-4",children:[d.jsx("h3",{className:"font-medium mb-2",children:"Email Settings"}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{type:"checkbox",className:"mr-2",id:"emailNotifications"}),d.jsx("label",{htmlFor:"emailNotifications",children:"Enable Email Notifications"})]}),d.jsx("input",{type:"email",placeholder:"System Email Address",className:"w-full p-2 border rounded"})]})]}),d.jsxs("div",{className:"border rounded p-4",children:[d.jsx("h3",{className:"font-medium mb-2",children:"Security Settings"}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{type:"checkbox",className:"mr-2",id:"twoFactor"}),d.jsx("label",{htmlFor:"twoFactor",children:"Require Two-Factor Authentication"})]}),d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{type:"checkbox",className:"mr-2",id:"passwordExpiry"}),d.jsx("label",{htmlFor:"passwordExpiry",children:"Enable Password Expiry"})]})]})]})]})]}),d.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 mb-6",children:[d.jsx("h2",{className:"text-xl font-semibold mb-4",children:"User Management"}),o&&d.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:o}),s?d.jsx("p",{children:"Loading users..."}):d.jsx("div",{className:"space-y-4",children:d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[d.jsx("thead",{className:"bg-gray-50",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),d.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(c=>d.jsxs("tr",{children:[d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.name}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.email}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsxs("select",{value:c.role,onChange:u=>l(c.id,u.target.value),className:"border rounded px-2 py-1",children:[d.jsx("option",{value:"admin",children:"Admin"}),d.jsx("option",{value:"staff",children:"Staff"}),d.jsx("option",{value:"donor",children:"Donor"}),d.jsx("option",{value:"beneficiary",children:"Beneficiary"})]})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsx("button",{onClick:()=>l(c.id,c.role),className:"bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600",children:"Update"})})]},c.id))})]})})})]}),d.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[d.jsx("h2",{className:"text-xl font-semibold mb-4",children:"System Logs"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"border rounded p-4",children:[d.jsx("h3",{className:"font-medium mb-2",children:"Recent Activity"}),d.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"System logs will appear here."})]}),d.jsx("button",{className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600",children:"Download Logs"})]})]})]})]}):d.jsx("div",{className:"p-6",children:d.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:d.jsx("p",{children:"You do not have permission to access this page."})})})},D7=()=>{const t=[{icon:d.jsx(Z0,{className:"h-8 w-8 text-primary"}),title:"Compassion",description:"We approach our work with empathy and care for the dignity of those we serve."},{icon:d.jsx(FP,{className:"h-8 w-8 text-primary"}),title:"Global Reach",description:"Our network spans across continents to deliver aid wherever it is needed most."},{icon:d.jsx(ex,{className:"h-8 w-8 text-primary"}),title:"Community Focus",description:"We believe in empowering communities to participate in their own recovery and development."},{icon:d.jsx(zP,{className:"h-8 w-8 text-primary"}),title:"Accountability",description:"We maintain transparency in our operations and responsible stewardship of resources."}];return d.jsx("div",{className:"min-h-screen bg-gray-50",children:d.jsx("div",{className:"max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8",children:d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[d.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-8",children:"About Us"}),d.jsxs("div",{className:"max-w-4xl mx-auto",children:[d.jsxs("section",{className:"mb-10",children:[d.jsx("h3",{className:"text-2xl font-semibold mb-4 text-gray-900",children:"Our Mission"}),d.jsx("p",{className:"text-gray-700 mb-4 text-lg",children:"The Humanitarian Aid Distribution System (HADS) was founded to efficiently and transparently distribute humanitarian aid to those in need by leveraging technology, ensuring equitable access, and minimizing logistical challenges."}),d.jsx("p",{className:"text-gray-700 text-lg",children:"We work with local and international partners to coordinate relief efforts in disaster-affected areas, conflict zones, and regions experiencing acute poverty or food insecurity."})]}),d.jsxs("section",{className:"mb-10",children:[d.jsx("h3",{className:"text-2xl font-semibold mb-4 text-gray-900",children:"Our Vision"}),d.jsx("p",{className:"text-gray-700 text-lg",children:"We envision a world where humanitarian assistance reaches all those in need quickly, efficiently, and with dignity. By leveraging technology and data-driven approaches, we aim to create a global, technology-driven aid distribution system that enhances transparency, promotes fairness, and ensures timely assistance to vulnerable communities worldwide."})]}),d.jsxs("section",{className:"mb-10",children:[d.jsx("h3",{className:"text-2xl font-semibold mb-5 text-gray-900",children:"Our Core Values"}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.map((e,n)=>d.jsxs("div",{className:"flex p-6 border border-gray-100 rounded-lg shadow-sm hover:shadow-md transition-shadow",children:[d.jsx("div",{className:"mr-4 flex-shrink-0",children:e.icon}),d.jsxs("div",{children:[d.jsx("h4",{className:"font-semibold text-gray-900 mb-2 text-lg",children:e.title}),d.jsx("p",{className:"text-gray-600",children:e.description})]})]},n))})]}),d.jsxs("section",{className:"mb-8",children:[d.jsx("h3",{className:"text-2xl font-semibold mb-4 text-gray-900",children:"Our Team"}),d.jsx("p",{className:"text-gray-700 mb-4 text-lg",children:"HADS is powered by a dedicated team of humanitarian professionals, technologists, logistics experts, and volunteers committed to improving aid delivery systems worldwide."}),d.jsx("p",{className:"text-gray-700 text-lg",children:"We collaborate with local governments, NGOs, community organizations, and donors to ensure that our aid distribution efforts are coordinated, efficient, and responsive to the specific needs of each community we serve."})]}),d.jsxs("div",{className:"mt-8 p-8 bg-gray-50 rounded-lg border border-gray-100 text-center",children:[d.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center justify-center text-xl",children:[d.jsx(UP,{className:"h-6 w-6 mr-2 text-primary"}),"Get in Touch"]}),d.jsx("p",{className:"text-gray-700 mb-3 text-lg",children:"For partnerships, volunteer opportunities, or general inquiries:"}),d.jsx("p",{className:"font-medium text-lg",children:"contact@hads.org | +1 (123) 456-7890"})]})]})]})})})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function pu(t){return t+.5|0}const js=(t,e,n)=>Math.max(Math.min(t,n),e);function jl(t){return js(pu(t*2.55),0,255)}function Xs(t){return js(pu(t*255),0,255)}function Hr(t){return js(pu(t/2.55)/100,0,1)}function RS(t){return js(pu(t*100),0,100)}const Rn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},qy=[..."0123456789ABCDEF"],O7=t=>qy[t&15],j7=t=>qy[(t&240)>>4]+qy[t&15],dd=t=>(t&240)>>4===(t&15),M7=t=>dd(t.r)&&dd(t.g)&&dd(t.b)&&dd(t.a);function L7(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Rn[t[1]]*17,g:255&Rn[t[2]]*17,b:255&Rn[t[3]]*17,a:e===5?Rn[t[4]]*17:255}:(e===7||e===9)&&(n={r:Rn[t[1]]<<4|Rn[t[2]],g:Rn[t[3]]<<4|Rn[t[4]],b:Rn[t[5]]<<4|Rn[t[6]],a:e===9?Rn[t[7]]<<4|Rn[t[8]]:255})),n}const F7=(t,e)=>t<255?e(t):"";function V7(t){var e=M7(t)?O7:j7;return t?"#"+e(t.r)+e(t.g)+e(t.b)+F7(t.a,e):void 0}const U7=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function fD(t,e,n){const r=e*Math.min(n,1-n),s=(i,o=(i+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function B7(t,e,n){const r=(s,i=(s+t/60)%6)=>n-n*e*Math.max(Math.min(i,4-i,1),0);return[r(5),r(3),r(1)]}function z7(t,e,n){const r=fD(t,1,.5);let s;for(e+n>1&&(s=1/(e+n),e*=s,n*=s),s=0;s<3;s++)r[s]*=1-e-n,r[s]+=e;return r}function $7(t,e,n,r,s){return t===s?(e-n)/r+(e<n?6:0):e===s?(n-t)/r+2:(t-e)/r+4}function Ex(t){const n=t.r/255,r=t.g/255,s=t.b/255,i=Math.max(n,r,s),o=Math.min(n,r,s),a=(i+o)/2;let l,c,u;return i!==o&&(u=i-o,c=a>.5?u/(2-i-o):u/(i+o),l=$7(n,r,s,u,i),l=l*60+.5),[l|0,c||0,a]}function Sx(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(Xs)}function Tx(t,e,n){return Sx(fD,t,e,n)}function q7(t,e,n){return Sx(z7,t,e,n)}function H7(t,e,n){return Sx(B7,t,e,n)}function pD(t){return(t%360+360)%360}function W7(t){const e=U7.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?jl(+e[5]):Xs(+e[5]));const s=pD(+e[2]),i=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=q7(s,i,o):e[1]==="hsv"?r=H7(s,i,o):r=Tx(s,i,o),{r:r[0],g:r[1],b:r[2],a:n}}function K7(t,e){var n=Ex(t);n[0]=pD(n[0]+e),n=Tx(n),t.r=n[0],t.g=n[1],t.b=n[2]}function G7(t){if(!t)return;const e=Ex(t),n=e[0],r=RS(e[1]),s=RS(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${s}%, ${Hr(t.a)})`:`hsl(${n}, ${r}%, ${s}%)`}const PS={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},NS={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Q7(){const t={},e=Object.keys(NS),n=Object.keys(PS);let r,s,i,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],s=0;s<n.length;s++)i=n[s],a=a.replace(i,PS[i]);i=parseInt(NS[o],16),t[a]=[i>>16&255,i>>8&255,i&255]}return t}let hd;function Y7(t){hd||(hd=Q7(),hd.transparent=[0,0,0,0]);const e=hd[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const X7=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function J7(t){const e=X7.exec(t);let n=255,r,s,i;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?jl(o):js(o*255,0,255)}return r=+e[1],s=+e[3],i=+e[5],r=255&(e[2]?jl(r):js(r,0,255)),s=255&(e[4]?jl(s):js(s,0,255)),i=255&(e[6]?jl(i):js(i,0,255)),{r,g:s,b:i,a:n}}}function Z7(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Hr(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Fm=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Ao=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function e8(t,e,n){const r=Ao(Hr(t.r)),s=Ao(Hr(t.g)),i=Ao(Hr(t.b));return{r:Xs(Fm(r+n*(Ao(Hr(e.r))-r))),g:Xs(Fm(s+n*(Ao(Hr(e.g))-s))),b:Xs(Fm(i+n*(Ao(Hr(e.b))-i))),a:t.a+n*(e.a-t.a)}}function fd(t,e,n){if(t){let r=Ex(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=Tx(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function mD(t,e){return t&&Object.assign(e||{},t)}function DS(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Xs(t[3]))):(e=mD(t,{r:0,g:0,b:0,a:1}),e.a=Xs(e.a)),e}function t8(t){return t.charAt(0)==="r"?J7(t):W7(t)}class Mc{constructor(e){if(e instanceof Mc)return e;const n=typeof e;let r;n==="object"?r=DS(e):n==="string"&&(r=L7(e)||Y7(e)||t8(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=mD(this._rgb);return e&&(e.a=Hr(e.a)),e}set rgb(e){this._rgb=DS(e)}rgbString(){return this._valid?Z7(this._rgb):void 0}hexString(){return this._valid?V7(this._rgb):void 0}hslString(){return this._valid?G7(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,s=e.rgb;let i;const o=n===i?.5:n,a=2*o-1,l=r.a-s.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;i=1-c,r.r=255&c*r.r+i*s.r+.5,r.g=255&c*r.g+i*s.g+.5,r.b=255&c*r.b+i*s.b+.5,r.a=o*r.a+(1-o)*s.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=e8(this._rgb,e._rgb,n)),this}clone(){return new Mc(this.rgb)}alpha(e){return this._rgb.a=Xs(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=pu(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return fd(this._rgb,2,e),this}darken(e){return fd(this._rgb,2,-e),this}saturate(e){return fd(this._rgb,1,e),this}desaturate(e){return fd(this._rgb,1,-e),this}rotate(e){return K7(this._rgb,e),this}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Ur(){}const n8=(()=>{let t=0;return()=>t++})();function Ne(t){return t==null}function ht(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Te(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Yt(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function hr(t,e){return Yt(t)?t:e}function be(t,e){return typeof t>"u"?e:t}const r8=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function qe(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function Le(t,e,n,r){let s,i,o;if(ht(t))for(i=t.length,s=0;s<i;s++)e.call(n,t[s],s);else if(Te(t))for(o=Object.keys(t),i=o.length,s=0;s<i;s++)e.call(n,t[o[s]],o[s])}function sf(t,e){let n,r,s,i;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(s=t[n],i=e[n],s.datasetIndex!==i.datasetIndex||s.index!==i.index)return!1;return!0}function of(t){if(ht(t))return t.map(of);if(Te(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let s=0;for(;s<r;++s)e[n[s]]=of(t[n[s]]);return e}return t}function gD(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function s8(t,e,n,r){if(!gD(t))return;const s=e[t],i=n[t];Te(s)&&Te(i)?Lc(s,i,r):e[t]=of(i)}function Lc(t,e,n){const r=ht(e)?e:[e],s=r.length;if(!Te(t))return t;n=n||{};const i=n.merger||s8;let o;for(let a=0;a<s;++a){if(o=r[a],!Te(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)i(l[c],t,o,n)}return t}function Zl(t,e){return Lc(t,e,{merger:i8})}function i8(t,e,n){if(!gD(t))return;const r=e[t],s=n[t];Te(r)&&Te(s)?Zl(r,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=of(s))}const OS={"":t=>t,x:t=>t.x,y:t=>t.y};function o8(t){const e=t.split("."),n=[];let r="";for(const s of e)r+=s,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function a8(t){const e=o8(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function Ia(t,e){return(OS[e]||(OS[e]=a8(e)))(t)}function Ix(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Fc=t=>typeof t<"u",ui=t=>typeof t=="function",jS=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function l8(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const St=Math.PI,tr=2*St,c8=tr+St,af=Number.POSITIVE_INFINITY,u8=St/180,Jn=St/2,Ei=St/4,MS=St*2/3,yD=Math.log10,Ar=Math.sign;function ec(t,e,n){return Math.abs(t-e)<n}function LS(t){const e=Math.round(t);t=ec(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(yD(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function d8(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((s,i)=>s-i).pop(),e}function h8(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Vc(t){return!h8(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function f8(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function p8(t,e,n){let r,s,i;for(r=0,s=t.length;r<s;r++)i=t[r][n],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function Fi(t){return t*(St/180)}function m8(t){return t*(180/St)}function FS(t){if(!Yt(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function g8(t,e){const n=e.x-t.x,r=e.y-t.y,s=Math.sqrt(n*n+r*r);let i=Math.atan2(r,n);return i<-.5*St&&(i+=tr),{angle:i,distance:s}}function Hy(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function y8(t,e){return(t-e+c8)%tr-St}function yr(t){return(t%tr+tr)%tr}function vD(t,e,n,r){const s=yr(t),i=yr(e),o=yr(n),a=yr(i-s),l=yr(o-s),c=yr(s-i),u=yr(s-o);return s===i||s===o||r&&i===o||a>l&&c<u}function En(t,e,n){return Math.max(e,Math.min(n,t))}function v8(t){return En(t,-32768,32767)}function Ms(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function Cx(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,s=0,i;for(;r-s>1;)i=s+r>>1,n(i)?s=i:r=i;return{lo:s,hi:r}}const Vi=(t,e,n,r)=>Cx(t,n,r?s=>{const i=t[s][e];return i<n||i===n&&t[s+1][e]===n}:s=>t[s][e]<n),x8=(t,e,n)=>Cx(t,n,r=>t[r][e]>=n);function _8(t,e,n){let r=0,s=t.length;for(;r<s&&t[r]<e;)r++;for(;s>r&&t[s-1]>n;)s--;return r>0||s<t.length?t.slice(r,s):t}const xD=["push","pop","shift","splice","unshift"];function w8(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),xD.forEach(n=>{const r="_onData"+Ix(n),s=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...i){const o=s.apply(this,i);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...i)}),o}})})}function VS(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,s=r.indexOf(e);s!==-1&&r.splice(s,1),!(r.length>0)&&(xD.forEach(i=>{delete t[i]}),delete t._chartjs)}function _D(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const wD=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function bD(t,e){let n=[],r=!1;return function(...s){n=s,r||(r=!0,wD.call(window,()=>{r=!1,t.apply(e,n)}))}}function b8(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const kx=t=>t==="start"?"left":t==="end"?"right":"center",zt=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,E8=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function S8(t,e,n){const r=e.length;let s=0,i=r;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=o.axis,{min:f,max:p,minDefined:m,maxDefined:y}=o.getUserBounds();if(m){if(s=Math.min(Vi(l,u,f).lo,n?r:Vi(e,u,o.getPixelForValue(f)).lo),c){const g=l.slice(0,s+1).reverse().findIndex(x=>!Ne(x[a.axis]));s-=Math.max(0,g)}s=En(s,0,r-1)}if(y){let g=Math.max(Vi(l,o.axis,p,!0).hi+1,n?0:Vi(e,u,o.getPixelForValue(p),!0).hi+1);if(c){const x=l.slice(g-1).findIndex(b=>!Ne(b[a.axis]));g+=Math.max(0,x)}i=En(g,s,r)-s}else i=r-s}return{start:s,count:i}}function T8(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,s={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=s,!0;const i=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,s),i}const pd=t=>t===0||t===1,US=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*tr/n)),BS=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*tr/n)+1,tc={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Jn)+1,easeOutSine:t=>Math.sin(t*Jn),easeInOutSine:t=>-.5*(Math.cos(St*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>pd(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>pd(t)?t:US(t,.075,.3),easeOutElastic:t=>pd(t)?t:BS(t,.075,.3),easeInOutElastic(t){return pd(t)?t:t<.5?.5*US(t*2,.1125,.45):.5+.5*BS(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-tc.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?tc.easeInBounce(t*2)*.5:tc.easeOutBounce(t*2-1)*.5+.5};function Ax(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function zS(t){return Ax(t)?t:new Mc(t)}function Vm(t){return Ax(t)?t:new Mc(t).saturate(.5).darken(.1).hexString()}const I8=["x","y","borderWidth","radius","tension"],C8=["color","borderColor","backgroundColor"];function k8(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:C8},numbers:{type:"number",properties:I8}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function A8(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const $S=new Map;function R8(t,e){e=e||{};const n=t+JSON.stringify(e);let r=$S.get(n);return r||(r=new Intl.NumberFormat(t,e),$S.set(n,r)),r}function ED(t,e,n){return R8(e,n).format(t)}const P8={values(t){return ht(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let s,i=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),i=N8(t,n)}const o=yD(Math.abs(i)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),ED(t,r,l)}};function N8(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var SD={formatters:P8};function D8(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:SD.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const ao=Object.create(null),Wy=Object.create(null);function nc(t,e){if(!e)return t;const n=e.split(".");for(let r=0,s=n.length;r<s;++r){const i=n[r];t=t[i]||(t[i]=Object.create(null))}return t}function Um(t,e,n){return typeof e=="string"?Lc(nc(t,e),n):Lc(nc(t,""),e)}class O8{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,s)=>Vm(s.backgroundColor),this.hoverBorderColor=(r,s)=>Vm(s.borderColor),this.hoverColor=(r,s)=>Vm(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return Um(this,e,n)}get(e){return nc(this,e)}describe(e,n){return Um(Wy,e,n)}override(e,n){return Um(ao,e,n)}route(e,n,r,s){const i=nc(this,e),o=nc(this,r),a="_"+n;Object.defineProperties(i,{[a]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[s];return Te(l)?Object.assign({},c,l):be(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var st=new O8({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[k8,A8,D8]);function j8(t){return!t||Ne(t.size)||Ne(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function qS(t,e,n,r,s){let i=e[s];return i||(i=e[s]=t.measureText(s).width,n.push(s)),i>r&&(r=i),r}function Si(t,e,n){const r=t.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((e-s)*r)/r+s}function HS(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Ky(t,e,n,r){TD(t,e,n,r,null)}function TD(t,e,n,r,s){let i,o,a,l,c,u,f,p;const m=e.pointStyle,y=e.rotation,g=e.radius;let x=(y||0)*u8;if(m&&typeof m=="object"&&(i=m.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(x),t.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),t.restore();return}if(!(isNaN(g)||g<=0)){switch(t.beginPath(),m){default:s?t.ellipse(n,r,s/2,g,0,0,tr):t.arc(n,r,g,0,tr),t.closePath();break;case"triangle":u=s?s/2:g,t.moveTo(n+Math.sin(x)*u,r-Math.cos(x)*g),x+=MS,t.lineTo(n+Math.sin(x)*u,r-Math.cos(x)*g),x+=MS,t.lineTo(n+Math.sin(x)*u,r-Math.cos(x)*g),t.closePath();break;case"rectRounded":c=g*.516,l=g-c,o=Math.cos(x+Ei)*l,f=Math.cos(x+Ei)*(s?s/2-c:l),a=Math.sin(x+Ei)*l,p=Math.sin(x+Ei)*(s?s/2-c:l),t.arc(n-f,r-a,c,x-St,x-Jn),t.arc(n+p,r-o,c,x-Jn,x),t.arc(n+f,r+a,c,x,x+Jn),t.arc(n-p,r+o,c,x+Jn,x+St),t.closePath();break;case"rect":if(!y){l=Math.SQRT1_2*g,u=s?s/2:l,t.rect(n-u,r-l,2*u,2*l);break}x+=Ei;case"rectRot":f=Math.cos(x)*(s?s/2:g),o=Math.cos(x)*g,a=Math.sin(x)*g,p=Math.sin(x)*(s?s/2:g),t.moveTo(n-f,r-a),t.lineTo(n+p,r-o),t.lineTo(n+f,r+a),t.lineTo(n-p,r+o),t.closePath();break;case"crossRot":x+=Ei;case"cross":f=Math.cos(x)*(s?s/2:g),o=Math.cos(x)*g,a=Math.sin(x)*g,p=Math.sin(x)*(s?s/2:g),t.moveTo(n-f,r-a),t.lineTo(n+f,r+a),t.moveTo(n+p,r-o),t.lineTo(n-p,r+o);break;case"star":f=Math.cos(x)*(s?s/2:g),o=Math.cos(x)*g,a=Math.sin(x)*g,p=Math.sin(x)*(s?s/2:g),t.moveTo(n-f,r-a),t.lineTo(n+f,r+a),t.moveTo(n+p,r-o),t.lineTo(n-p,r+o),x+=Ei,f=Math.cos(x)*(s?s/2:g),o=Math.cos(x)*g,a=Math.sin(x)*g,p=Math.sin(x)*(s?s/2:g),t.moveTo(n-f,r-a),t.lineTo(n+f,r+a),t.moveTo(n+p,r-o),t.lineTo(n-p,r+o);break;case"line":o=s?s/2:Math.cos(x)*g,a=Math.sin(x)*g,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(x)*(s?s/2:g),r+Math.sin(x)*g);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Uc(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function cp(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function up(t){t.restore()}function M8(t,e,n,r,s){if(!e)return t.lineTo(n.x,n.y);if(s==="middle"){const i=(e.x+n.x)/2;t.lineTo(i,e.y),t.lineTo(i,n.y)}else s==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function L8(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function F8(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Ne(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function V8(t,e,n,r,s){if(s.strikethrough||s.underline){const i=t.measureText(r),o=e-i.actualBoundingBoxLeft,a=e+i.actualBoundingBoxRight,l=n-i.actualBoundingBoxAscent,c=n+i.actualBoundingBoxDescent,u=s.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function U8(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Bc(t,e,n,r,s,i={}){const o=ht(e)?e:[e],a=i.strokeWidth>0&&i.strokeColor!=="";let l,c;for(t.save(),t.font=s.string,F8(t,i),l=0;l<o.length;++l)c=o[l],i.backdrop&&U8(t,i.backdrop),a&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),Ne(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(c,n,r,i.maxWidth)),t.fillText(c,n,r,i.maxWidth),V8(t,n,r,c,i),r+=Number(s.lineHeight);t.restore()}function lf(t,e){const{x:n,y:r,w:s,h:i,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*St,St,!0),t.lineTo(n,r+i-o.bottomLeft),t.arc(n+o.bottomLeft,r+i-o.bottomLeft,o.bottomLeft,St,Jn,!0),t.lineTo(n+s-o.bottomRight,r+i),t.arc(n+s-o.bottomRight,r+i-o.bottomRight,o.bottomRight,Jn,0,!0),t.lineTo(n+s,r+o.topRight),t.arc(n+s-o.topRight,r+o.topRight,o.topRight,0,-Jn,!0),t.lineTo(n+o.topLeft,r)}const B8=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,z8=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function $8(t,e){const n=(""+t).match(B8);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const q8=t=>+t||0;function ID(t,e){const n={},r=Te(e),s=r?Object.keys(e):e,i=Te(t)?r?o=>be(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of s)n[o]=q8(i(o));return n}function CD(t){return ID(t,{top:"y",right:"x",bottom:"y",left:"x"})}function ia(t){return ID(t,["topLeft","topRight","bottomLeft","bottomRight"])}function zn(t){const e=CD(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Kt(t,e){t=t||{},e=e||st.font;let n=be(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=be(t.style,e.style);r&&!(""+r).match(z8)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const s={family:be(t.family,e.family),lineHeight:$8(be(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:be(t.weight,e.weight),string:""};return s.string=j8(s),s}function md(t,e,n,r){let s,i,o;for(s=0,i=t.length;s<i;++s)if(o=t[s],o!==void 0&&o!==void 0)return o}function H8(t,e,n){const{min:r,max:s}=t,i=r8(e,(s-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(i)),max:o(s,i)}}function xo(t,e){return Object.assign(Object.create(t),e)}function Rx(t,e=[""],n,r,s=()=>t[0]){const i=n||t;typeof r>"u"&&(r=PD("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:r,_getTarget:s,override:a=>Rx([a,...t],e,i,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return AD(a,l,()=>Z8(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return KS(a).includes(l)},ownKeys(a){return KS(a)},set(a,l,c){const u=a._storage||(a._storage=s());return a[l]=u[l]=c,delete a._keys,!0}})}function Ca(t,e,n,r){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:kD(t,r),setContext:i=>Ca(t,i,n,r),override:i=>Ca(t.override(i),e,n,r)};return new Proxy(s,{deleteProperty(i,o){return delete i[o],delete t[o],!0},get(i,o,a){return AD(i,o,()=>K8(i,o,a))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(i,o,a){return t[o]=a,delete i[o],!0}})}function kD(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:n,indexable:r,isScriptable:ui(n)?n:()=>n,isIndexable:ui(r)?r:()=>r}}const W8=(t,e)=>t?t+Ix(e):e,Px=(t,e)=>Te(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function AD(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function K8(t,e,n){const{_proxy:r,_context:s,_subProxy:i,_descriptors:o}=t;let a=r[e];return ui(a)&&o.isScriptable(e)&&(a=G8(e,a,t,n)),ht(a)&&a.length&&(a=Q8(e,a,t,o.isIndexable)),Px(e,a)&&(a=Ca(a,s,i&&i[e],o)),a}function G8(t,e,n,r){const{_proxy:s,_context:i,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(i,o||r);return a.delete(t),Px(t,l)&&(l=Nx(s._scopes,s,t,l)),l}function Q8(t,e,n,r){const{_proxy:s,_context:i,_subProxy:o,_descriptors:a}=n;if(typeof i.index<"u"&&r(t))return e[i.index%e.length];if(Te(e[0])){const l=e,c=s._scopes.filter(u=>u!==l);e=[];for(const u of l){const f=Nx(c,s,t,u);e.push(Ca(f,i,o&&o[t],a))}}return e}function RD(t,e,n){return ui(t)?t(e,n):t}const Y8=(t,e)=>t===!0?e:typeof t=="string"?Ia(e,t):void 0;function X8(t,e,n,r,s){for(const i of e){const o=Y8(n,i);if(o){t.add(o);const a=RD(o._fallback,n,s);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function Nx(t,e,n,r){const s=e._rootScopes,i=RD(e._fallback,n,r),o=[...t,...s],a=new Set;a.add(r);let l=WS(a,o,n,i||n,r);return l===null||typeof i<"u"&&i!==n&&(l=WS(a,o,i,l,r),l===null)?!1:Rx(Array.from(a),[""],s,i,()=>J8(e,n,r))}function WS(t,e,n,r,s){for(;n;)n=X8(t,e,n,r,s);return n}function J8(t,e,n){const r=t._getTarget();e in r||(r[e]={});const s=r[e];return ht(s)&&Te(n)?n:s||{}}function Z8(t,e,n,r){let s;for(const i of e)if(s=PD(W8(i,t),n),typeof s<"u")return Px(t,s)?Nx(n,r,t,s):s}function PD(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function KS(t){let e=t._keys;return e||(e=t._keys=eK(t._scopes)),e}function eK(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(s=>!s.startsWith("_")))e.add(r);return Array.from(e)}const tK=Number.EPSILON||1e-14,ka=(t,e)=>e<t.length&&!t[e].skip&&t[e],ND=t=>t==="x"?"y":"x";function nK(t,e,n,r){const s=t.skip?e:t,i=e,o=n.skip?e:n,a=Hy(i,s),l=Hy(o,i);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const f=r*c,p=r*u;return{previous:{x:i.x-f*(o.x-s.x),y:i.y-f*(o.y-s.y)},next:{x:i.x+p*(o.x-s.x),y:i.y+p*(o.y-s.y)}}}function rK(t,e,n){const r=t.length;let s,i,o,a,l,c=ka(t,0);for(let u=0;u<r-1;++u)if(l=c,c=ka(t,u+1),!(!l||!c)){if(ec(e[u],0,tK)){n[u]=n[u+1]=0;continue}s=n[u]/e[u],i=n[u+1]/e[u],a=Math.pow(s,2)+Math.pow(i,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=s*o*e[u],n[u+1]=i*o*e[u])}}function sK(t,e,n="x"){const r=ND(n),s=t.length;let i,o,a,l=ka(t,0);for(let c=0;c<s;++c){if(o=a,a=l,l=ka(t,c+1),!a)continue;const u=a[n],f=a[r];o&&(i=(u-o[n])/3,a[`cp1${n}`]=u-i,a[`cp1${r}`]=f-i*e[c]),l&&(i=(l[n]-u)/3,a[`cp2${n}`]=u+i,a[`cp2${r}`]=f+i*e[c])}}function iK(t,e="x"){const n=ND(e),r=t.length,s=Array(r).fill(0),i=Array(r);let o,a,l,c=ka(t,0);for(o=0;o<r;++o)if(a=l,l=c,c=ka(t,o+1),!!l){if(c){const u=c[e]-l[e];s[o]=u!==0?(c[n]-l[n])/u:0}i[o]=a?c?Ar(s[o-1])!==Ar(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}rK(t,s,i),sK(t,i,e)}function gd(t,e,n){return Math.max(Math.min(t,n),e)}function oK(t,e){let n,r,s,i,o,a=Uc(t[0],e);for(n=0,r=t.length;n<r;++n)o=i,i=a,a=n<r-1&&Uc(t[n+1],e),i&&(s=t[n],o&&(s.cp1x=gd(s.cp1x,e.left,e.right),s.cp1y=gd(s.cp1y,e.top,e.bottom)),a&&(s.cp2x=gd(s.cp2x,e.left,e.right),s.cp2y=gd(s.cp2y,e.top,e.bottom)))}function aK(t,e,n,r,s){let i,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")iK(t,s);else{let c=r?t[t.length-1]:t[0];for(i=0,o=t.length;i<o;++i)a=t[i],l=nK(c,a,t[Math.min(i+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&oK(t,n)}function Dx(){return typeof window<"u"&&typeof document<"u"}function Ox(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function cf(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const dp=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function lK(t,e){return dp(t).getPropertyValue(e)}const cK=["top","right","bottom","left"];function $i(t,e,n){const r={};n=n?"-"+n:"";for(let s=0;s<4;s++){const i=cK[s];r[i]=parseFloat(t[e+"-"+i+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const uK=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function dK(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:s,offsetY:i}=r;let o=!1,a,l;if(uK(s,i,t.target))a=s,l=i;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Ai(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,s=dp(n),i=s.boxSizing==="border-box",o=$i(s,"padding"),a=$i(s,"border","width"),{x:l,y:c,box:u}=dK(t,n),f=o.left+(u&&a.left),p=o.top+(u&&a.top);let{width:m,height:y}=e;return i&&(m-=o.width+a.width,y-=o.height+a.height),{x:Math.round((l-f)/m*n.width/r),y:Math.round((c-p)/y*n.height/r)}}function hK(t,e,n){let r,s;if(e===void 0||n===void 0){const i=t&&Ox(t);if(!i)e=t.clientWidth,n=t.clientHeight;else{const o=i.getBoundingClientRect(),a=dp(i),l=$i(a,"border","width"),c=$i(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,r=cf(a.maxWidth,i,"clientWidth"),s=cf(a.maxHeight,i,"clientHeight")}}return{width:e,height:n,maxWidth:r||af,maxHeight:s||af}}const yd=t=>Math.round(t*10)/10;function fK(t,e,n,r){const s=dp(t),i=$i(s,"margin"),o=cf(s.maxWidth,t,"clientWidth")||af,a=cf(s.maxHeight,t,"clientHeight")||af,l=hK(t,e,n);let{width:c,height:u}=l;if(s.boxSizing==="content-box"){const p=$i(s,"border","width"),m=$i(s,"padding");c-=m.width+p.width,u-=m.height+p.height}return c=Math.max(0,c-i.width),u=Math.max(0,r?c/r:u-i.height),c=yd(Math.min(c,o,l.maxWidth)),u=yd(Math.min(u,a,l.maxHeight)),c&&!u&&(u=yd(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&u>l.height&&(u=l.height,c=yd(Math.floor(u*r))),{width:c,height:u}}function GS(t,e,n){const r=e||1,s=Math.floor(t.height*r),i=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==s||o.width!==i?(t.currentDevicePixelRatio=r,o.height=s,o.width=i,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const pK=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Dx()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function QS(t,e){const n=lK(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Ri(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function mK(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function gK(t,e,n,r){const s={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},o=Ri(t,s,n),a=Ri(s,i,n),l=Ri(i,e,n),c=Ri(o,a,n),u=Ri(a,l,n);return Ri(c,u,n)}const yK=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},vK=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function oa(t,e,n){return t?yK(e,n):vK()}function DD(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function OD(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function jD(t){return t==="angle"?{between:vD,compare:y8,normalize:yr}:{between:Ms,compare:(e,n)=>e-n,normalize:e=>e}}function YS({start:t,end:e,count:n,loop:r,style:s}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:s}}function xK(t,e,n){const{property:r,start:s,end:i}=n,{between:o,normalize:a}=jD(r),l=e.length;let{start:c,end:u,loop:f}=t,p,m;if(f){for(c+=l,u+=l,p=0,m=l;p<m&&o(a(e[c%l][r]),s,i);++p)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:f,style:t.style}}function MD(t,e,n){if(!n)return[t];const{property:r,start:s,end:i}=n,o=e.length,{compare:a,between:l,normalize:c}=jD(r),{start:u,end:f,loop:p,style:m}=xK(t,e,n),y=[];let g=!1,x=null,b,_,T;const k=()=>l(s,T,b)&&a(s,T)!==0,N=()=>a(i,b)===0||l(i,T,b),R=()=>g||k(),S=()=>!g||N();for(let E=u,C=u;E<=f;++E)_=e[E%o],!_.skip&&(b=c(_[r]),b!==T&&(g=l(b,s,i),x===null&&R()&&(x=a(b,s)===0?E:C),x!==null&&S()&&(y.push(YS({start:x,end:E,loop:p,count:o,style:m})),x=null),C=E,T=b));return x!==null&&y.push(YS({start:x,end:f,loop:p,count:o,style:m})),y}function LD(t,e){const n=[],r=t.segments;for(let s=0;s<r.length;s++){const i=MD(r[s],t.points,e);i.length&&n.push(...i)}return n}function _K(t,e,n,r){let s=0,i=e-1;if(n&&!r)for(;s<e&&!t[s].skip;)s++;for(;s<e&&t[s].skip;)s++;for(s%=e,n&&(i+=s);i>s&&t[i%e].skip;)i--;return i%=e,{start:s,end:i}}function wK(t,e,n,r){const s=t.length,i=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%s];c.skip||c.stop?a.skip||(r=!1,i.push({start:e%s,end:(l-1)%s,loop:r}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&i.push({start:e%s,end:o%s,loop:r}),i}function bK(t,e){const n=t.points,r=t.options.spanGaps,s=n.length;if(!s)return[];const i=!!t._loop,{start:o,end:a}=_K(n,s,i,r);if(r===!0)return XS(t,[{start:o,end:a,loop:i}],n,e);const l=a<o?a+s:a,c=!!t._fullLoop&&o===0&&a===s-1;return XS(t,wK(n,o,l,c),n,e)}function XS(t,e,n,r){return!r||!r.setContext||!n?e:EK(t,e,n,r)}function EK(t,e,n,r){const s=t._chart.getContext(),i=JS(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let u=i,f=e[0].start,p=f;function m(y,g,x,b){const _=a?-1:1;if(y!==g){for(y+=l;n[y%l].skip;)y-=_;for(;n[g%l].skip;)g+=_;y%l!==g%l&&(c.push({start:y%l,end:g%l,loop:x,style:b}),u=b,f=g%l)}}for(const y of e){f=a?f:y.start;let g=n[f%l],x;for(p=f+1;p<=y.end;p++){const b=n[p%l];x=JS(r.setContext(xo(s,{type:"segment",p0:g,p1:b,p0DataIndex:(p-1)%l,p1DataIndex:p%l,datasetIndex:o}))),SK(x,u)&&m(f,p-1,y.loop,u),g=b,u=x}f<p-1&&m(f,p-1,y.loop,u)}return c}function JS(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function SK(t,e){if(!e)return!1;const n=[],r=function(s,i){return Ax(i)?(n.includes(i)||n.push(i),n.indexOf(i)):i};return JSON.stringify(t,r)!==JSON.stringify(e,r)}function vd(t,e,n){return t.options.clip?t[n]:e[n]}function TK(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:vd(n,e,"left"),right:vd(n,e,"right"),top:vd(r,e,"top"),bottom:vd(r,e,"bottom")}:e}function FD(t,e){const n=e._clip;if(n.disabled)return!1;const r=TK(e,t.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class IK{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,s){const i=n.listeners[s],o=n.duration;i.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=wD.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,s)=>{if(!r.running||!r.items.length)return;const i=r.items;let o=i.length-1,a=!1,l;for(;o>=0;--o)l=i[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(i[o]=i[i.length-1],i.pop());a&&(s.draw(),this._notify(s,r,e,"progress")),i.length||(r.running=!1,this._notify(s,r,e,"complete"),r.initial=!1),n+=i.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,s)=>Math.max(r,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let s=r.length-1;for(;s>=0;--s)r[s].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Br=new IK;const ZS="transparent",CK={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=zS(t||ZS),s=r.valid&&zS(e||ZS);return s&&s.valid?s.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class kK{constructor(e,n,r,s){const i=n[r];s=md([e.to,s,i,e.from]);const o=md([e.from,i,s]);this._active=!0,this._fn=e.fn||CK[e.type||typeof o],this._easing=tc[e.easing]||tc.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const s=this._target[this._prop],i=r-this._start,o=this._duration-i;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=md([e.to,n,s,e.from]),this._from=md([e.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,s=this._prop,i=this._from,o=this._loop,a=this._to;let l;if(this._active=i!==a&&(o||n<r),!this._active){this._target[s]=a,this._notify(!0);return}if(n<0){this._target[s]=i;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(i,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let s=0;s<r.length;s++)r[s][n]()}}class VD{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Te(e))return;const n=Object.keys(st.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const i=e[s];if(!Te(i))return;const o={};for(const a of n)o[a]=i[a];(ht(i.properties)&&i.properties||[s]).forEach(a=>{(a===s||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,s=RK(e,r);if(!s)return[];const i=this._createAnimations(s,r);return r.$shared&&AK(e.options.$animations,r).then(()=>{e.options=r},()=>{}),i}_createAnimations(e,n){const r=this._properties,s=[],i=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(e,n));continue}const u=n[c];let f=i[c];const p=r.get(c);if(f)if(p&&f.active()){f.update(p,u,a);continue}else f.cancel();if(!p||!p.duration){e[c]=u;continue}i[c]=f=new kK(p,e,c,u),s.push(f)}return s}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return Br.add(this._chart,r),!0}}function AK(t,e){const n=[],r=Object.keys(e);for(let s=0;s<r.length;s++){const i=t[r[s]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function RK(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function eT(t,e){const n=t&&t.options||{},r=n.reverse,s=n.min===void 0?e:0,i=n.max===void 0?e:0;return{start:r?i:s,end:r?s:i}}function PK(t,e,n){if(n===!1)return!1;const r=eT(t,n),s=eT(e,n);return{top:s.end,right:r.end,bottom:s.start,left:r.start}}function NK(t){let e,n,r,s;return Te(t)?(e=t.top,n=t.right,r=t.bottom,s=t.left):e=n=r=s=t,{top:e,right:n,bottom:r,left:s,disabled:t===!1}}function UD(t,e){const n=[],r=t._getSortedDatasetMetas(e);let s,i;for(s=0,i=r.length;s<i;++s)n.push(r[s].index);return n}function tT(t,e,n,r={}){const s=t.keys,i=r.mode==="single";let o,a,l,c;if(e===null)return;let u=!1;for(o=0,a=s.length;o<a;++o){if(l=+s[o],l===n){if(u=!0,r.all)continue;break}c=t.values[l],Yt(c)&&(i||e===0||Ar(e)===Ar(c))&&(e+=c)}return!u&&!r.all?0:e}function DK(t,e){const{iScale:n,vScale:r}=e,s=n.axis==="x"?"x":"y",i=r.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[s]:u,[i]:t[u]};return a}function Bm(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function OK(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function jK(t){const{min:e,max:n,minDefined:r,maxDefined:s}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function MK(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function nT(t,e,n,r){for(const s of e.getMatchingVisibleMetas(r).reverse()){const i=t[s.index];if(n&&i>0||!n&&i<0)return s.index}return null}function rT(t,e){const{chart:n,_cachedMeta:r}=t,s=n._stacks||(n._stacks={}),{iScale:i,vScale:o,index:a}=r,l=i.axis,c=o.axis,u=OK(i,o,r),f=e.length;let p;for(let m=0;m<f;++m){const y=e[m],{[l]:g,[c]:x}=y,b=y._stacks||(y._stacks={});p=b[c]=MK(s,u,g),p[a]=x,p._top=nT(p,o,!0,r.type),p._bottom=nT(p,o,!1,r.type);const _=p._visualValues||(p._visualValues={});_[a]=x}}function zm(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function LK(t,e){return xo(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function FK(t,e,n){return xo(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function _l(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const s of e){const i=s._stacks;if(!i||i[r]===void 0||i[r][n]===void 0)return;delete i[r][n],i[r]._visualValues!==void 0&&i[r]._visualValues[n]!==void 0&&delete i[r]._visualValues[n]}}}const $m=t=>t==="reset"||t==="none",sT=(t,e)=>e?t:Object.assign({},t),VK=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:UD(n,!0),values:null};class jx{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Bm(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&_l(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),s=(f,p,m,y)=>f==="x"?p:f==="r"?y:m,i=n.xAxisID=be(r.xAxisID,zm(e,"x")),o=n.yAxisID=be(r.yAxisID,zm(e,"y")),a=n.rAxisID=be(r.rAxisID,zm(e,"r")),l=n.indexAxis,c=n.iAxisID=s(l,i,o,a),u=n.vAxisID=s(l,o,i,a);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&VS(this._data,this),e._stacked&&_l(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(Te(n)){const s=this._cachedMeta;this._data=DK(n,s)}else if(r!==n){if(r){VS(r,this);const s=this._cachedMeta;_l(s),s._parsed=[]}n&&Object.isExtensible(n)&&w8(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let s=!1;this._dataCheck();const i=n._stacked;n._stacked=Bm(n.vScale,n),n.stack!==r.stack&&(s=!0,_l(n),n.stack=r.stack),this._resyncElements(e),(s||i!==n._stacked)&&(rT(this,n._parsed),n._stacked=Bm(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:s}=this,{iScale:i,_stacked:o}=r,a=i.axis;let l=e===0&&n===s.length?!0:r._sorted,c=e>0&&r._parsed[e-1],u,f,p;if(this._parsing===!1)r._parsed=s,r._sorted=!0,p=s;else{ht(s[e])?p=this.parseArrayData(r,s,e,n):Te(s[e])?p=this.parseObjectData(r,s,e,n):p=this.parsePrimitiveData(r,s,e,n);const m=()=>f[a]===null||c&&f[a]<c[a];for(u=0;u<n;++u)r._parsed[u+e]=f=p[u],l&&(m()&&(l=!1),c=f);r._sorted=l}o&&rT(this,p)}parsePrimitiveData(e,n,r,s){const{iScale:i,vScale:o}=e,a=i.axis,l=o.axis,c=i.getLabels(),u=i===o,f=new Array(s);let p,m,y;for(p=0,m=s;p<m;++p)y=p+r,f[p]={[a]:u||i.parse(c[y],y),[l]:o.parse(n[y],y)};return f}parseArrayData(e,n,r,s){const{xScale:i,yScale:o}=e,a=new Array(s);let l,c,u,f;for(l=0,c=s;l<c;++l)u=l+r,f=n[u],a[l]={x:i.parse(f[0],u),y:o.parse(f[1],u)};return a}parseObjectData(e,n,r,s){const{xScale:i,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(s);let u,f,p,m;for(u=0,f=s;u<f;++u)p=u+r,m=n[p],c[u]={x:i.parse(Ia(m,a),p),y:o.parse(Ia(m,l),p)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const s=this.chart,i=this._cachedMeta,o=n[e.axis],a={keys:UD(s,!0),values:n._stacks[e.axis]._visualValues};return tT(a,o,i.index,{mode:r})}updateRangeFromParsed(e,n,r,s){const i=r[n.axis];let o=i===null?NaN:i;const a=s&&r._stacks[n.axis];s&&a&&(s.values=a,o=tT(s,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,s=r._parsed,i=r._sorted&&e===r.iScale,o=s.length,a=this._getOtherScale(e),l=VK(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:f}=jK(a);let p,m;function y(){m=s[p];const g=m[a.axis];return!Yt(m[e.axis])||u>g||f<g}for(p=0;p<o&&!(!y()&&(this.updateRangeFromParsed(c,e,m,l),i));++p);if(i){for(p=o-1;p>=0;--p)if(!y()){this.updateRangeFromParsed(c,e,m,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let s,i,o;for(s=0,i=n.length;s<i;++s)o=n[s][e.axis],Yt(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,s=n.vScale,i=this.getParsed(e);return{label:r?""+r.getLabelForValue(i[r.axis]):"",value:s?""+s.getLabelForValue(i[s.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=NK(be(this.options.clip,PK(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,s=r.data||[],i=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||s.length-a,c=this.options.drawActiveElementsOnTop;let u;for(r.dataset&&r.dataset.draw(e,i,a,l),u=a;u<a+l;++u){const f=s[u];f.hidden||(f.active&&c?o.push(f):f.draw(e,i))}for(u=0;u<o.length;++u)o[u].draw(e,i)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const s=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];i=o.$context||(o.$context=FK(this.getContext(),e,o)),i.parsed=this.getParsed(e),i.raw=s.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=LK(this.chart.getContext(),this.index)),i.dataset=s,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=r,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const s=n==="active",i=this._cachedDataOpts,o=e+"-"+n,a=i[o],l=this.enableOptionSharing&&Fc(r);if(a)return sT(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),f=s?[`${e}Hover`,"hover",e,""]:[e,""],p=c.getOptionScopes(this.getDataset(),u),m=Object.keys(st.elements[e]),y=()=>this.getContext(r,s,n),g=c.resolveNamedOptions(p,m,y,f);return g.$shared&&(g.$shared=l,i[o]=Object.freeze(sT(g,l))),g}_resolveAnimations(e,n,r){const s=this.chart,i=this._cachedDataOpts,o=`animation-${n}`,a=i[o];if(a)return a;let l;if(s.options.animation!==!1){const u=this.chart.config,f=u.datasetAnimationScopeKeys(this._type,n),p=u.getOptionScopes(this.getDataset(),f);l=u.createResolver(p,this.getContext(e,r,n))}const c=new VD(s,l&&l.animations);return l&&l._cacheable&&(i[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||$m(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),s=this._sharedOptions,i=this.getSharedOptions(r),o=this.includeOptions(n,i)||i!==s;return this.updateSharedOptions(i,n,r),{sharedOptions:i,includeOptions:o}}updateElement(e,n,r,s){$m(s)?Object.assign(e,r):this._resolveAnimations(n,s).update(e,r)}updateSharedOptions(e,n,r){e&&!$m(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,s){e.active=s;const i=this.getStyle(n,s);this._resolveAnimations(n,r,s).update(e,{options:!s&&this.getSharedOptions(i)||i})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const s=r.length,i=n.length,o=Math.min(i,s);o&&this.parse(0,o),i>s?this._insertElements(s,i-s,e):i<s&&this._removeElements(i,s-i)}_insertElements(e,n,r=!0){const s=this._cachedMeta,i=s.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(i),a=e;a<o;++a)i[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(e,n),r&&this.updateElements(i,e,n,"reset")}updateElements(e,n,r,s){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const s=r._parsed.splice(e,n);r._stacked&&_l(r,s)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,s]=e;this[n](r,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function UK(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let r=[];for(let s=0,i=n.length;s<i;s++)r=r.concat(n[s].controller.getAllParsedValues(t));t._cache.$bar=_D(r.sort((s,i)=>s-i))}return t._cache.$bar}function BK(t){const e=t.iScale,n=UK(e,t.type);let r=e._length,s,i,o,a;const l=()=>{o===32767||o===-32768||(Fc(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(s=0,i=n.length;s<i;++s)o=e.getPixelForValue(n[s]),l();for(a=void 0,s=0,i=e.ticks.length;s<i;++s)o=e.getPixelForTick(s),l();return r}function zK(t,e,n,r){const s=n.barThickness;let i,o;return Ne(s)?(i=e.min*n.categoryPercentage,o=n.barPercentage):(i=s*r,o=1),{chunk:i/r,ratio:o,start:e.pixels[t]-i/2}}function $K(t,e,n,r){const s=e.pixels,i=s[t];let o=t>0?s[t-1]:null,a=t<s.length-1?s[t+1]:null;const l=n.categoryPercentage;o===null&&(o=i-(a===null?e.end-e.start:a-i)),a===null&&(a=i+i-o);const c=i-(i-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/r,ratio:n.barPercentage,start:c}}function qK(t,e,n,r){const s=n.parse(t[0],r),i=n.parse(t[1],r),o=Math.min(s,i),a=Math.max(s,i);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:s,end:i,min:o,max:a}}function BD(t,e,n,r){return ht(t)?qK(t,e,n,r):e[n.axis]=n.parse(t,r),e}function iT(t,e,n,r){const s=t.iScale,i=t.vScale,o=s.getLabels(),a=s===i,l=[];let c,u,f,p;for(c=n,u=n+r;c<u;++c)p=e[c],f={},f[s.axis]=a||s.parse(o[c],c),l.push(BD(p,f,i,c));return l}function qm(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function HK(t,e,n){return t!==0?Ar(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function WK(t){let e,n,r,s,i;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(s="end",i="start"):(s="start",i="end"),{start:n,end:r,reverse:e,top:s,bottom:i}}function KK(t,e,n,r){let s=e.borderSkipped;const i={};if(!s){t.borderSkipped=i;return}if(s===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:u}=WK(t);s==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?s=c:(n._bottom||0)===r?s=u:(i[oT(u,o,a,l)]=!0,s=c)),i[oT(s,o,a,l)]=!0,t.borderSkipped=i}function oT(t,e,n,r){return r?(t=GK(t,e,n),t=aT(t,n,e)):t=aT(t,e,n),t}function GK(t,e,n){return t===e?n:t===n?e:t}function aT(t,e,n){return t==="start"?e:t==="end"?n:t}function QK(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class YK extends jx{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,n,r,s){return iT(e,n,r,s)}parseArrayData(e,n,r,s){return iT(e,n,r,s)}parseObjectData(e,n,r,s){const{iScale:i,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=i.axis==="x"?a:l,u=o.axis==="x"?a:l,f=[];let p,m,y,g;for(p=r,m=r+s;p<m;++p)g=n[p],y={},y[i.axis]=i.parse(Ia(g,c),p),f.push(BD(Ia(g,u),y,o,p));return f}updateRangeFromParsed(e,n,r,s){super.updateRangeFromParsed(e,n,r,s);const i=r._custom;i&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:r,vScale:s}=n,i=this.getParsed(e),o=i._custom,a=qm(o)?"["+o.start+", "+o.end+"]":""+s.getLabelForValue(i[s.axis]);return{label:""+r.getLabelForValue(i[r.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,r,s){const i=s==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:f,includeOptions:p}=this._getSharedOptions(n,s);for(let m=n;m<n+r;m++){const y=this.getParsed(m),g=i||Ne(y[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(m),x=this._calculateBarIndexPixels(m,u),b=(y._stacks||{})[a.axis],_={horizontal:c,base:g.base,enableBorderRadius:!b||qm(y._custom)||o===b._top||o===b._bottom,x:c?g.head:x.center,y:c?x.center:g.head,height:c?x.size:Math.abs(g.size),width:c?Math.abs(g.size):x.size};p&&(_.options=f||this.resolveDataElementOptions(m,e[m].active?"active":s));const T=_.options||e[m].options;KK(_,T,b,o),QK(_,T,u.ratio),this.updateElement(e[m],m,_,s)}}_getStacks(e,n){const{iScale:r}=this._cachedMeta,s=r.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),i=r.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(n),l=a&&a[r.axis],c=u=>{const f=u._parsed.find(m=>m[r.axis]===l),p=f&&f[u.vScale.axis];if(Ne(p)||isNaN(p))return!0};for(const u of s)if(!(n!==void 0&&c(u))&&((i===!1||o.indexOf(u.stack)===-1||i===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,r){const s=this._getStacks(e,r),i=n!==void 0?s.indexOf(n):-1;return i===-1?s.length-1:i}_getRuler(){const e=this.options,n=this._cachedMeta,r=n.iScale,s=[];let i,o;for(i=0,o=n.data.length;i<o;++i)s.push(r.getPixelForValue(this.getParsed(i)[r.axis],i));const a=e.barThickness;return{min:a||BK(n),pixels:s,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:r,index:s},options:{base:i,minBarLength:o}}=this,a=i||0,l=this.getParsed(e),c=l._custom,u=qm(c);let f=l[n.axis],p=0,m=r?this.applyStack(n,l,r):f,y,g;m!==f&&(p=m-f,m=f),u&&(f=c.barStart,m=c.barEnd-c.barStart,f!==0&&Ar(f)!==Ar(c.barEnd)&&(p=0),p+=f);const x=!Ne(i)&&!u?i:p;let b=n.getPixelForValue(x);if(this.chart.getDataVisibility(e)?y=n.getPixelForValue(p+m):y=b,g=y-b,Math.abs(g)<o){g=HK(g,n,a)*o,f===a&&(b-=g/2);const _=n.getPixelForDecimal(0),T=n.getPixelForDecimal(1),k=Math.min(_,T),N=Math.max(_,T);b=Math.max(Math.min(b,N),k),y=b+g,r&&!u&&(l._stacks[n.axis]._visualValues[s]=n.getValueForPixel(y)-n.getValueForPixel(b))}if(b===n.getPixelForValue(a)){const _=Ar(g)*n.getLineWidthForValue(a)/2;b+=_,g-=_}return{size:g,base:b,head:y,center:y+g/2}}_calculateBarIndexPixels(e,n){const r=n.scale,s=this.options,i=s.skipNull,o=be(s.maxBarThickness,1/0);let a,l;if(n.grouped){const c=i?this._getStackCount(e):n.stackCount,u=s.barThickness==="flex"?$K(e,n,s,c):zK(e,n,s,c),f=this._getStackIndex(this.index,this._cachedMeta.stack,i?e:void 0);a=u.start+u.chunk*f+u.chunk/2,l=Math.min(o,u.chunk*u.ratio)}else a=r.getPixelForValue(this.getParsed(e)[r.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,r=e.data,s=r.length;let i=0;for(;i<s;++i)this.getParsed(i)[n.axis]!==null&&!r[i].hidden&&r[i].draw(this._ctx)}}class XK extends jx{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:s=[],_dataset:i}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=S8(n,s,o);this._drawStart=a,this._drawCount=l,T8(n)&&(a=0,l=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!i._decimated,r.points=s;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:c},e),this.updateElements(s,a,l,e)}updateElements(e,n,r,s){const i=s==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:f}=this._getSharedOptions(n,s),p=o.axis,m=a.axis,{spanGaps:y,segment:g}=this.options,x=Vc(y)?y:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||i||s==="none",_=n+r,T=e.length;let k=n>0&&this.getParsed(n-1);for(let N=0;N<T;++N){const R=e[N],S=b?R:{};if(N<n||N>=_){S.skip=!0;continue}const E=this.getParsed(N),C=Ne(E[m]),A=S[p]=o.getPixelForValue(E[p],N),P=S[m]=i||C?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,E,l):E[m],N);S.skip=isNaN(A)||isNaN(P)||C,S.stop=N>0&&Math.abs(E[p]-k[p])>x,g&&(S.parsed=E,S.raw=c.data[N]),f&&(S.options=u||this.resolveDataElementOptions(N,R.active?"active":s)),b||this.updateElement(R,N,S,s),k=E}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,s=e.data||[];if(!s.length)return r;const i=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,i,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}function Ti(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Mx{static override(e){Object.assign(Mx.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return Ti()}parse(){return Ti()}format(){return Ti()}add(){return Ti()}diff(){return Ti()}startOf(){return Ti()}endOf(){return Ti()}}var JK={_date:Mx};function ZK(t,e,n,r){const{controller:s,data:i,_sorted:o}=t,a=s._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&i.length){const c=a._reversePixels?x8:Vi;if(r){if(s._sharedOptions){const u=i[0],f=typeof u.getRange=="function"&&u.getRange(e);if(f){const p=c(i,e,n-f),m=c(i,e,n+f);return{lo:p.lo,hi:m.hi}}}}else{const u=c(i,e,n);if(l){const{vScale:f}=s._cachedMeta,{_parsed:p}=t,m=p.slice(0,u.lo+1).reverse().findIndex(g=>!Ne(g[f.axis]));u.lo-=Math.max(0,m);const y=p.slice(u.hi).findIndex(g=>!Ne(g[f.axis]));u.hi+=Math.max(0,y)}return u}}return{lo:0,hi:i.length-1}}function hp(t,e,n,r,s){const i=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=i.length;a<l;++a){const{index:c,data:u}=i[a],{lo:f,hi:p}=ZK(i[a],e,o,s);for(let m=f;m<=p;++m){const y=u[m];y.skip||r(y,c,m)}}}function eG(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,s){const i=e?Math.abs(r.x-s.x):0,o=n?Math.abs(r.y-s.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function Hm(t,e,n,r,s){const i=[];return!s&&!t.isPointInArea(e)||hp(t,n,e,function(a,l,c){!s&&!Uc(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&i.push({element:a,datasetIndex:l,index:c})},!0),i}function tG(t,e,n,r){let s=[];function i(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],r),{angle:f}=g8(o,{x:e.x,y:e.y});vD(f,c,u)&&s.push({element:o,datasetIndex:a,index:l})}return hp(t,n,e,i),s}function nG(t,e,n,r,s,i){let o=[];const a=eG(n);let l=Number.POSITIVE_INFINITY;function c(u,f,p){const m=u.inRange(e.x,e.y,s);if(r&&!m)return;const y=u.getCenterPoint(s);if(!(!!i||t.isPointInArea(y))&&!m)return;const x=a(e,y);x<l?(o=[{element:u,datasetIndex:f,index:p}],l=x):x===l&&o.push({element:u,datasetIndex:f,index:p})}return hp(t,n,e,c),o}function Wm(t,e,n,r,s,i){return!i&&!t.isPointInArea(e)?[]:n==="r"&&!r?tG(t,e,n,s):nG(t,e,n,r,s,i)}function lT(t,e,n,r,s){const i=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return hp(t,n,e,(l,c,u)=>{l[o]&&l[o](e[n],s)&&(i.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,s))}),r&&!a?[]:i}var rG={modes:{index(t,e,n,r){const s=Ai(e,t),i=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?Hm(t,s,i,r,o):Wm(t,s,i,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,f=c.data[u];f&&!f.skip&&l.push({element:f,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,r){const s=Ai(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?Hm(t,s,i,r,o):Wm(t,s,i,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,r){const s=Ai(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return Hm(t,s,i,r,o)},nearest(t,e,n,r){const s=Ai(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return Wm(t,s,i,n.intersect,r,o)},x(t,e,n,r){const s=Ai(e,t);return lT(t,s,"x",n.intersect,r)},y(t,e,n,r){const s=Ai(e,t);return lT(t,s,"y",n.intersect,r)}}};const zD=["left","top","right","bottom"];function wl(t,e){return t.filter(n=>n.pos===e)}function cT(t,e){return t.filter(n=>zD.indexOf(n.pos)===-1&&n.box.axis===e)}function bl(t,e){return t.sort((n,r)=>{const s=e?r:n,i=e?n:r;return s.weight===i.weight?s.index-i.index:s.weight-i.weight})}function sG(t){const e=[];let n,r,s,i,o,a;for(n=0,r=(t||[]).length;n<r;++n)s=t[n],{position:i,options:{stack:o,stackWeight:a=1}}=s,e.push({index:n,box:s,pos:i,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&i+o,stackWeight:a});return e}function iG(t){const e={};for(const n of t){const{stack:r,pos:s,stackWeight:i}=n;if(!r||!zD.includes(s))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}function oG(t,e){const n=iG(t),{vBoxMaxWidth:r,hBoxMaxHeight:s}=e;let i,o,a;for(i=0,o=t.length;i<o;++i){a=t[i];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*r:l&&e.availableWidth,a.height=s):(a.width=r,a.height=u?u*s:l&&e.availableHeight)}return n}function aG(t){const e=sG(t),n=bl(e.filter(c=>c.box.fullSize),!0),r=bl(wl(e,"left"),!0),s=bl(wl(e,"right")),i=bl(wl(e,"top"),!0),o=bl(wl(e,"bottom")),a=cT(e,"x"),l=cT(e,"y");return{fullSize:n,leftAndTop:r.concat(i),rightAndBottom:s.concat(l).concat(o).concat(a),chartArea:wl(e,"chartArea"),vertical:r.concat(s).concat(l),horizontal:i.concat(o).concat(a)}}function uT(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function $D(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function lG(t,e,n,r){const{pos:s,box:i}=n,o=t.maxPadding;if(!Te(s)){n.size&&(t[s]-=n.size);const f=r[n.stack]||{size:0,count:1};f.size=Math.max(f.size,n.horizontal?i.height:i.width),n.size=f.size/f.count,t[s]+=n.size}i.getPadding&&$D(o,i.getPadding());const a=Math.max(0,e.outerWidth-uT(o,t,"left","right")),l=Math.max(0,e.outerHeight-uT(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function cG(t){const e=t.maxPadding;function n(r){const s=Math.max(e[r]-t[r],0);return t[r]+=s,s}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function uG(t,e){const n=e.maxPadding;function r(s){const i={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{i[o]=Math.max(e[o],n[o])}),i}return r(t?["left","right"]:["top","bottom"])}function Ml(t,e,n,r){const s=[];let i,o,a,l,c,u;for(i=0,o=t.length,c=0;i<o;++i){a=t[i],l=a.box,l.update(a.width||e.w,a.height||e.h,uG(a.horizontal,e));const{same:f,other:p}=lG(e,n,a,r);c|=f&&s.length,u=u||p,l.fullSize||s.push(a)}return c&&Ml(s,e,n,r)||u}function xd(t,e,n,r,s){t.top=n,t.left=e,t.right=e+r,t.bottom=n+s,t.width=r,t.height=s}function dT(t,e,n,r){const s=n.padding;let{x:i,y:o}=e;for(const a of t){const l=a.box,c=r[a.stack]||{placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const f=e.w*u,p=c.size||l.height;Fc(c.start)&&(o=c.start),l.fullSize?xd(l,s.left,o,n.outerWidth-s.right-s.left,p):xd(l,e.left+c.placed,o,f,p),c.start=o,c.placed+=f,o=l.bottom}else{const f=e.h*u,p=c.size||l.width;Fc(c.start)&&(i=c.start),l.fullSize?xd(l,i,s.top,p,n.outerHeight-s.bottom-s.top):xd(l,i,e.top+c.placed,p,f),c.start=i,c.placed+=f,i=l.right}}e.x=i,e.y=o}var Mn={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const s=zn(t.options.layout.padding),i=Math.max(e-s.width,0),o=Math.max(n-s.height,0),a=aG(t.boxes),l=a.vertical,c=a.horizontal;Le(t.boxes,g=>{typeof g.beforeLayout=="function"&&g.beforeLayout()});const u=l.reduce((g,x)=>x.box.options&&x.box.options.display===!1?g:g+1,0)||1,f=Object.freeze({outerWidth:e,outerHeight:n,padding:s,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/u,hBoxMaxHeight:o/2}),p=Object.assign({},s);$D(p,zn(r));const m=Object.assign({maxPadding:p,w:i,h:o,x:s.left,y:s.top},s),y=oG(l.concat(c),f);Ml(a.fullSize,m,f,y),Ml(l,m,f,y),Ml(c,m,f,y)&&Ml(l,m,f,y),cG(m),dT(a.leftAndTop,m,f,y),m.x+=m.w,m.y+=m.h,dT(a.rightAndBottom,m,f,y),t.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},Le(a.chartArea,g=>{const x=g.box;Object.assign(x,t.chartArea),x.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class qD{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,s){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,s?Math.floor(n/s):r)}}isAttached(e){return!0}updateConfig(e){}}class dG extends qD{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const nh="$chartjs",hG={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},hT=t=>t===null||t==="";function fG(t,e){const n=t.style,r=t.getAttribute("height"),s=t.getAttribute("width");if(t[nh]={initial:{height:r,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",hT(s)){const i=QS(t,"width");i!==void 0&&(t.width=i)}if(hT(r))if(t.style.height==="")t.height=t.width/(e||2);else{const i=QS(t,"height");i!==void 0&&(t.height=i)}return t}const HD=pK?{passive:!0}:!1;function pG(t,e,n){t&&t.addEventListener(e,n,HD)}function mG(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,HD)}function gG(t,e){const n=hG[t.type]||t.type,{x:r,y:s}=Ai(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:s!==void 0?s:null}}function uf(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function yG(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||uf(a.addedNodes,r),o=o&&!uf(a.removedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function vG(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||uf(a.removedNodes,r),o=o&&!uf(a.addedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const zc=new Map;let fT=0;function WD(){const t=window.devicePixelRatio;t!==fT&&(fT=t,zc.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function xG(t,e){zc.size||window.addEventListener("resize",WD),zc.set(t,e)}function _G(t){zc.delete(t),zc.size||window.removeEventListener("resize",WD)}function wG(t,e,n){const r=t.canvas,s=r&&Ox(r);if(!s)return;const i=bD((a,l)=>{const c=s.clientWidth;n(a,l),c<s.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||i(c,u)});return o.observe(s),xG(t,i),o}function Km(t,e,n){n&&n.disconnect(),e==="resize"&&_G(t)}function bG(t,e,n){const r=t.canvas,s=bD(i=>{t.ctx!==null&&n(gG(i,t))},t);return pG(r,e,s),s}class EG extends qD{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(fG(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[nh])return!1;const r=n[nh].initial;["height","width"].forEach(i=>{const o=r[i];Ne(o)?n.removeAttribute(i):n.setAttribute(i,o)});const s=r.style||{};return Object.keys(s).forEach(i=>{n.style[i]=s[i]}),n.width=n.width,delete n[nh],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const s=e.$proxies||(e.$proxies={}),o={attach:yG,detach:vG,resize:wG}[n]||bG;s[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),s=r[n];if(!s)return;({attach:Km,detach:Km,resize:Km}[n]||mG)(e,n,s),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,s){return fK(e,n,r,s)}isAttached(e){const n=e&&Ox(e);return!!(n&&n.isConnected)}}function SG(t){return!Dx()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?dG:EG}let yi=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return Vc(this.x)&&Vc(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const s={};return e.forEach(i=>{s[i]=r[i]&&r[i].active()?r[i]._to:this[i]}),s}};function TG(t,e){const n=t.options.ticks,r=IG(t),s=Math.min(n.maxTicksLimit||r,r),i=n.major.enabled?kG(e):[],o=i.length,a=i[0],l=i[o-1],c=[];if(o>s)return AG(e,c,i,o/s),c;const u=CG(i,e,s);if(o>0){let f,p;const m=o>1?Math.round((l-a)/(o-1)):null;for(_d(e,c,u,Ne(m)?0:a-m,a),f=0,p=o-1;f<p;f++)_d(e,c,u,i[f],i[f+1]);return _d(e,c,u,l,Ne(m)?e.length:l+m),c}return _d(e,c,u),c}function IG(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),s=t._maxLength/n;return Math.floor(Math.min(r,s))}function CG(t,e,n){const r=RG(t),s=e.length/n;if(!r)return Math.max(s,1);const i=d8(r);for(let o=0,a=i.length-1;o<a;o++){const l=i[o];if(l>s)return l}return Math.max(s,1)}function kG(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function AG(t,e,n,r){let s=0,i=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===i&&(e.push(t[o]),s++,i=n[s*r])}function _d(t,e,n,r,s){const i=be(r,0),o=Math.min(be(s,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),s&&(l=s-r,n=l/Math.floor(l/n)),u=i;u<0;)a++,u=Math.round(i+a*n);for(c=Math.max(i,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(i+a*n))}function RG(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const PG=t=>t==="left"?"right":t==="right"?"left":t,pT=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,mT=(t,e)=>Math.min(e||t,t);function gT(t,e){const n=[],r=t.length/e,s=t.length;let i=0;for(;i<s;i+=r)n.push(t[Math.floor(i)]);return n}function NG(t,e,n){const r=t.ticks.length,s=Math.min(e,r-1),i=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(s),c;if(!(n&&(r===1?c=Math.max(l-i,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(s-1))/2,l+=s<e?c:-c,l<i-a||l>o+a)))return l}function DG(t,e){Le(t,n=>{const r=n.gc,s=r.length/2;let i;if(s>e){for(i=0;i<s;++i)delete n.data[r[i]];r.splice(0,s)}})}function El(t){return t.drawTicks?t.tickLength:0}function yT(t,e){if(!t.display)return 0;const n=Kt(t.font,e),r=zn(t.padding);return(ht(t.text)?t.text.length:1)*n.lineHeight+r.height}function OG(t,e){return xo(t,{scale:e,type:"scale"})}function jG(t,e,n){return xo(t,{tick:n,index:e,type:"tick"})}function MG(t,e,n){let r=kx(t);return(n&&e!=="right"||!n&&e==="right")&&(r=PG(r)),r}function LG(t,e,n,r){const{top:s,left:i,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let f=0,p,m,y;const g=o-s,x=a-i;if(t.isHorizontal()){if(m=zt(r,i,a),Te(n)){const b=Object.keys(n)[0],_=n[b];y=u[b].getPixelForValue(_)+g-e}else n==="center"?y=(c.bottom+c.top)/2+g-e:y=pT(t,n,e);p=a-i}else{if(Te(n)){const b=Object.keys(n)[0],_=n[b];m=u[b].getPixelForValue(_)-x+e}else n==="center"?m=(c.left+c.right)/2-x+e:m=pT(t,n,e);y=zt(r,o,s),f=n==="left"?-Jn:Jn}return{titleX:m,titleY:y,maxWidth:p,rotation:f}}class Ga extends yi{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:s}=this;return e=hr(e,Number.POSITIVE_INFINITY),n=hr(n,Number.NEGATIVE_INFINITY),r=hr(r,Number.POSITIVE_INFINITY),s=hr(s,Number.NEGATIVE_INFINITY),{min:hr(e,r),max:hr(n,s),minDefined:Yt(e),maxDefined:Yt(n)}}getMinMax(e){let{min:n,max:r,minDefined:s,maxDefined:i}=this.getUserBounds(),o;if(s&&i)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),s||(n=Math.min(n,o.min)),i||(r=Math.max(r,o.max));return n=i&&n>r?r:n,r=s&&n>r?n:r,{min:hr(n,hr(r,n)),max:hr(r,hr(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){qe(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:s,grace:i,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=H8(this,i,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?gT(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=TG(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){qe(this.options.afterUpdate,[this])}beforeSetDimensions(){qe(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){qe(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),qe(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){qe(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,s,i;for(r=0,s=e.length;r<s;r++)i=e[r],i.label=qe(n.callback,[i.value,r,e],this)}afterTickToLabelConversion(){qe(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){qe(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=mT(this.ticks.length,e.ticks.maxTicksLimit),s=n.minRotation||0,i=n.maxRotation;let o=s,a,l,c;if(!this._isVisible()||!n.display||s>=i||r<=1||!this.isHorizontal()){this.labelRotation=s;return}const u=this._getLabelSizes(),f=u.widest.width,p=u.highest.height,m=En(this.chart.width-f,0,this.maxWidth);a=e.offset?this.maxWidth/r:m/(r-1),f+6>a&&(a=m/(r-(e.offset?.5:1)),l=this.maxHeight-El(e.grid)-n.padding-yT(e.title,this.chart.options.font),c=Math.sqrt(f*f+p*p),o=m8(Math.min(Math.asin(En((u.highest.height+6)/a,-1,1)),Math.asin(En(l/c,-1,1))-Math.asin(En(p/c,-1,1)))),o=Math.max(s,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){qe(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){qe(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:s,grid:i}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=yT(s,n.options.font);if(a?(e.width=this.maxWidth,e.height=El(i)+l):(e.height=this.maxHeight,e.width=El(i)+l),r.display&&this.ticks.length){const{first:c,last:u,widest:f,highest:p}=this._getLabelSizes(),m=r.padding*2,y=Fi(this.labelRotation),g=Math.cos(y),x=Math.sin(y);if(a){const b=r.mirror?0:x*f.width+g*p.height;e.height=Math.min(this.maxHeight,e.height+b+m)}else{const b=r.mirror?0:g*f.width+x*p.height;e.width=Math.min(this.maxWidth,e.width+b+m)}this._calculatePadding(c,u,x,g)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,s){const{ticks:{align:i,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let p=0,m=0;l?c?(p=s*e.width,m=r*n.height):(p=r*e.height,m=s*n.width):i==="start"?m=n.width:i==="end"?p=e.width:i!=="inner"&&(p=e.width/2,m=n.width/2),this.paddingLeft=Math.max((p-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((m-f+o)*this.width/(this.width-f),0)}else{let u=n.height/2,f=e.height/2;i==="start"?(u=0,f=e.height):i==="end"&&(u=n.height,f=0),this.paddingTop=u+o,this.paddingBottom=f+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){qe(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)Ne(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=gT(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:s,_longestTextCache:i}=this,o=[],a=[],l=Math.floor(n/mT(n,r));let c=0,u=0,f,p,m,y,g,x,b,_,T,k,N;for(f=0;f<n;f+=l){if(y=e[f].label,g=this._resolveTickFontOptions(f),s.font=x=g.string,b=i[x]=i[x]||{data:{},gc:[]},_=g.lineHeight,T=k=0,!Ne(y)&&!ht(y))T=qS(s,b.data,b.gc,T,y),k=_;else if(ht(y))for(p=0,m=y.length;p<m;++p)N=y[p],!Ne(N)&&!ht(N)&&(T=qS(s,b.data,b.gc,T,N),k+=_);o.push(T),a.push(k),c=Math.max(T,c),u=Math.max(k,u)}DG(i,n);const R=o.indexOf(c),S=a.indexOf(u),E=C=>({width:o[C]||0,height:a[C]||0});return{first:E(0),last:E(n-1),widest:E(R),highest:E(S),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return v8(this._alignToPixels?Si(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=jG(this.getContext(),e,r))}return this.$context||(this.$context=OG(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Fi(this.labelRotation),r=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,a=i?i.widest.width+o:0,l=i?i.highest.height+o:0;return this.isHorizontal()?l*r>a*s?a/r:l/s:l*s<a*r?l/r:a/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,s=this.options,{grid:i,position:o,border:a}=s,l=i.offset,c=this.isHorizontal(),f=this.ticks.length+(l?1:0),p=El(i),m=[],y=a.setContext(this.getContext()),g=y.display?y.width:0,x=g/2,b=function(z){return Si(r,z,g)};let _,T,k,N,R,S,E,C,A,P,j,O;if(o==="top")_=b(this.bottom),S=this.bottom-p,C=_-x,P=b(e.top)+x,O=e.bottom;else if(o==="bottom")_=b(this.top),P=e.top,O=b(e.bottom)-x,S=_+x,C=this.top+p;else if(o==="left")_=b(this.right),R=this.right-p,E=_-x,A=b(e.left)+x,j=e.right;else if(o==="right")_=b(this.left),A=e.left,j=b(e.right)-x,R=_+x,E=this.left+p;else if(n==="x"){if(o==="center")_=b((e.top+e.bottom)/2+.5);else if(Te(o)){const z=Object.keys(o)[0],W=o[z];_=b(this.chart.scales[z].getPixelForValue(W))}P=e.top,O=e.bottom,S=_+x,C=S+p}else if(n==="y"){if(o==="center")_=b((e.left+e.right)/2);else if(Te(o)){const z=Object.keys(o)[0],W=o[z];_=b(this.chart.scales[z].getPixelForValue(W))}R=_-x,E=R-p,A=e.left,j=e.right}const F=be(s.ticks.maxTicksLimit,f),B=Math.max(1,Math.ceil(f/F));for(T=0;T<f;T+=B){const z=this.getContext(T),W=i.setContext(z),M=a.setContext(z),H=W.lineWidth,Q=W.color,ie=M.dash||[],re=M.dashOffset,ne=W.tickWidth,se=W.tickColor,je=W.tickBorderDash||[],Pe=W.tickBorderDashOffset;k=NG(this,T,l),k!==void 0&&(N=Si(r,k,H),c?R=E=A=j=N:S=C=P=O=N,m.push({tx1:R,ty1:S,tx2:E,ty2:C,x1:A,y1:P,x2:j,y2:O,width:H,color:Q,borderDash:ie,borderDashOffset:re,tickWidth:ne,tickColor:se,tickBorderDash:je,tickBorderDashOffset:Pe}))}return this._ticksLength=f,this._borderValue=_,m}_computeLabelItems(e){const n=this.axis,r=this.options,{position:s,ticks:i}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:f}=i,p=El(r.grid),m=p+u,y=f?-u:m,g=-Fi(this.labelRotation),x=[];let b,_,T,k,N,R,S,E,C,A,P,j,O="middle";if(s==="top")R=this.bottom-y,S=this._getXAxisLabelAlignment();else if(s==="bottom")R=this.top+y,S=this._getXAxisLabelAlignment();else if(s==="left"){const B=this._getYAxisLabelAlignment(p);S=B.textAlign,N=B.x}else if(s==="right"){const B=this._getYAxisLabelAlignment(p);S=B.textAlign,N=B.x}else if(n==="x"){if(s==="center")R=(e.top+e.bottom)/2+m;else if(Te(s)){const B=Object.keys(s)[0],z=s[B];R=this.chart.scales[B].getPixelForValue(z)+m}S=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")N=(e.left+e.right)/2-m;else if(Te(s)){const B=Object.keys(s)[0],z=s[B];N=this.chart.scales[B].getPixelForValue(z)}S=this._getYAxisLabelAlignment(p).textAlign}n==="y"&&(l==="start"?O="top":l==="end"&&(O="bottom"));const F=this._getLabelSizes();for(b=0,_=a.length;b<_;++b){T=a[b],k=T.label;const B=i.setContext(this.getContext(b));E=this.getPixelForTick(b)+i.labelOffset,C=this._resolveTickFontOptions(b),A=C.lineHeight,P=ht(k)?k.length:1;const z=P/2,W=B.color,M=B.textStrokeColor,H=B.textStrokeWidth;let Q=S;o?(N=E,S==="inner"&&(b===_-1?Q=this.options.reverse?"left":"right":b===0?Q=this.options.reverse?"right":"left":Q="center"),s==="top"?c==="near"||g!==0?j=-P*A+A/2:c==="center"?j=-F.highest.height/2-z*A+A:j=-F.highest.height+A/2:c==="near"||g!==0?j=A/2:c==="center"?j=F.highest.height/2-z*A:j=F.highest.height-P*A,f&&(j*=-1),g!==0&&!B.showLabelBackdrop&&(N+=A/2*Math.sin(g))):(R=E,j=(1-P)*A/2);let ie;if(B.showLabelBackdrop){const re=zn(B.backdropPadding),ne=F.heights[b],se=F.widths[b];let je=j-re.top,Pe=0-re.left;switch(O){case"middle":je-=ne/2;break;case"bottom":je-=ne;break}switch(S){case"center":Pe-=se/2;break;case"right":Pe-=se;break;case"inner":b===_-1?Pe-=se:b>0&&(Pe-=se/2);break}ie={left:Pe,top:je,width:se+re.width,height:ne+re.height,color:B.backdropColor}}x.push({label:k,font:C,textOffset:j,options:{rotation:g,color:W,strokeColor:M,strokeWidth:H,textAlign:Q,textBaseline:O,translation:[N,R],backdrop:ie}})}return x}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Fi(this.labelRotation))return e==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:s,padding:i}}=this.options,o=this._getLabelSizes(),a=e+i,l=o.widest.width;let c,u;return n==="left"?s?(u=this.right+i,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?s?(u=this.left+i,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:s,width:i,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,s,i,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(i=>i.value===e);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const a=(l,c,u)=>{!u.width||!u.color||(r.save(),r.lineWidth=u.width,r.strokeStyle=u.color,r.setLineDash(u.borderDash||[]),r.lineDashOffset=u.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(i=0,o=s.length;i<o;++i){const l=s[i];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:s}}=this,i=r.setContext(this.getContext()),o=r.display?i.width:0;if(!o)return;const a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,f,p;this.isHorizontal()?(c=Si(e,this.left,o)-o/2,u=Si(e,this.right,a)+a/2,f=p=l):(f=Si(e,this.top,o)-o/2,p=Si(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(c,f),n.lineTo(u,p),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,s=this._computeLabelArea();s&&cp(r,s);const i=this.getLabelItems(e);for(const o of i){const a=o.options,l=o.font,c=o.label,u=o.textOffset;Bc(r,c,0,u,l,a)}s&&up(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:s}}=this;if(!r.display)return;const i=Kt(r.font),o=zn(r.padding),a=r.align;let l=i.lineHeight/2;n==="bottom"||n==="center"||Te(n)?(l+=o.bottom,ht(r.text)&&(l+=i.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:f,rotation:p}=LG(this,l,n,a);Bc(e,r.text,0,0,i,{color:r.color,maxWidth:f,rotation:p,textAlign:MG(a,n,s),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=be(e.grid&&e.grid.z,-1),s=be(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Ga.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:r,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",s=[];let i,o;for(i=0,o=n.length;i<o;++i){const a=n[i];a[r]===this.id&&(!e||a.type===e)&&s.push(a)}return s}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Kt(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class wd{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;UG(n)&&(r=this.register(n));const s=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in s||(s[i]=e,FG(e,o,r),this.override&&st.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,s=this.scope;r in n&&delete n[r],s&&r in st[s]&&(delete st[s][r],this.override&&delete ao[r])}}function FG(t,e,n){const r=Lc(Object.create(null),[n?st.get(n):{},st.get(e),t.defaults]);st.set(e,r),t.defaultRoutes&&VG(e,t.defaultRoutes),t.descriptors&&st.describe(e,t.descriptors)}function VG(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),s=r.pop(),i=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");st.route(i,s,l,a)})}function UG(t){return"id"in t&&"defaults"in t}class BG{constructor(){this.controllers=new wd(jx,"datasets",!0),this.elements=new wd(yi,"elements"),this.plugins=new wd(Object,"plugins"),this.scales=new wd(Ga,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(s=>{const i=r||this._getRegistryForType(s);r||i.isForType(s)||i===this.plugins&&s.id?this._exec(e,i,s):Le(s,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const s=Ix(e);qe(r["before"+s],[],r),n[e](r),qe(r["after"+s],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const s=n.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return s}}var mr=new BG;class zG{constructor(){this._init=[]}notify(e,n,r,s){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=s?this._descriptors(e).filter(s):this._descriptors(e),o=this._notify(i,e,n,r);return n==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,s){s=s||{};for(const i of e){const o=i.plugin,a=o[r],l=[n,s,i.options];if(qe(a,l,o)===!1&&s.cancelable)return!1}return!0}invalidate(){Ne(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,s=be(r.options&&r.options.plugins,{}),i=$G(r);return s===!1&&!n?[]:HG(e,i,s,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,s=(i,o)=>i.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(s(n,r),e,"stop"),this._notify(s(r,n),e,"start")}}function $G(t){const e={},n=[],r=Object.keys(mr.plugins.items);for(let i=0;i<r.length;i++)n.push(mr.getPlugin(r[i]));const s=t.plugins||[];for(let i=0;i<s.length;i++){const o=s[i];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function qG(t,e){return!e&&t===!1?null:t===!0?{}:t}function HG(t,{plugins:e,localIds:n},r,s){const i=[],o=t.getContext();for(const a of e){const l=a.id,c=qG(r[l],s);c!==null&&i.push({plugin:a,options:WG(t.config,{plugin:a,local:n[l]},c,o)})}return i}function WG(t,{plugin:e,local:n},r,s){const i=t.pluginScopeKeys(e),o=t.getOptionScopes(r,i);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Gy(t,e){const n=st.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function KG(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function GG(t,e){return t===e?"_index_":"_value_"}function vT(t){if(t==="x"||t==="y"||t==="r")return t}function QG(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Qy(t,...e){if(vT(t))return t;for(const n of e){const r=n.axis||QG(n.position)||t.length>1&&vT(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function xT(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function YG(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return xT(t,"x",n[0])||xT(t,"y",n[0])}return{}}function XG(t,e){const n=ao[t.type]||{scales:{}},r=e.scales||{},s=Gy(t.type,e),i=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!Te(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Qy(o,a,YG(o,t),st.scales[a.type]),c=GG(l,s),u=n.scales||{};i[o]=Zl(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||Gy(a,e),u=(ao[a]||{}).scales||{};Object.keys(u).forEach(f=>{const p=KG(f,l),m=o[p+"AxisID"]||p;i[m]=i[m]||Object.create(null),Zl(i[m],[{axis:p},r[m],u[f]])})}),Object.keys(i).forEach(o=>{const a=i[o];Zl(a,[st.scales[a.type],st.scale])}),i}function KD(t){const e=t.options||(t.options={});e.plugins=be(e.plugins,{}),e.scales=XG(t,e)}function GD(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function JG(t){return t=t||{},t.data=GD(t.data),KD(t),t}const _T=new Map,QD=new Set;function bd(t,e){let n=_T.get(t);return n||(n=e(),_T.set(t,n),QD.add(n)),n}const Sl=(t,e,n)=>{const r=Ia(e,n);r!==void 0&&t.add(r)};class ZG{constructor(e){this._config=JG(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=GD(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),KD(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return bd(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return bd(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return bd(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return bd(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let s=r.get(e);return(!s||n)&&(s=new Map,r.set(e,s)),s}getOptionScopes(e,n,r){const{options:s,type:i}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(f=>Sl(l,e,f))),u.forEach(f=>Sl(l,s,f)),u.forEach(f=>Sl(l,ao[i]||{},f)),u.forEach(f=>Sl(l,st,f)),u.forEach(f=>Sl(l,Wy,f))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),QD.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,ao[n]||{},st.datasets[n]||{},{type:n},st,Wy]}resolveNamedOptions(e,n,r,s=[""]){const i={$shared:!0},{resolver:o,subPrefixes:a}=wT(this._resolverCache,e,s);let l=o;if(tQ(o,n)){i.$shared=!1,r=ui(r)?r():r;const c=this.createResolver(e,r,a);l=Ca(o,r,c)}for(const c of n)i[c]=l[c];return i}createResolver(e,n,r=[""],s){const{resolver:i}=wT(this._resolverCache,e,r);return Te(n)?Ca(i,n,void 0,s):i}}function wT(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const s=n.join();let i=r.get(s);return i||(i={resolver:Rx(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(s,i)),i}const eQ=t=>Te(t)&&Object.getOwnPropertyNames(t).some(e=>ui(t[e]));function tQ(t,e){const{isScriptable:n,isIndexable:r}=kD(t);for(const s of e){const i=n(s),o=r(s),a=(o||i)&&t[s];if(i&&(ui(a)||eQ(a))||o&&ht(a))return!0}return!1}var nQ="4.4.9";const rQ=["top","bottom","left","right","chartArea"];function bT(t,e){return t==="top"||t==="bottom"||rQ.indexOf(t)===-1&&e==="x"}function ET(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function ST(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),qe(n&&n.onComplete,[t],e)}function sQ(t){const e=t.chart,n=e.options.animation;qe(n&&n.onProgress,[t],e)}function YD(t){return Dx()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const rh={},TT=t=>{const e=YD(t);return Object.values(rh).filter(n=>n.canvas===e).pop()};function iQ(t,e,n){const r=Object.keys(t);for(const s of r){const i=+s;if(i>=e){const o=t[s];delete t[s],(n>0||i>e)&&(t[i+n]=o)}}}function oQ(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}let Qa=class{static defaults=st;static instances=rh;static overrides=ao;static registry=mr;static version=nQ;static getChart=TT;static register(...e){mr.add(...e),IT()}static unregister(...e){mr.remove(...e),IT()}constructor(e,n){const r=this.config=new ZG(n),s=YD(e),i=TT(s);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||SG(s)),this.platform.updateConfig(r);const a=this.platform.acquireContext(s,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=n8(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new zG,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=b8(f=>this.update(f),o.resizeDelay||0),this._dataChanges=[],rh[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Br.listen(this,"complete",ST),Br.listen(this,"progress",sQ),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:s,_aspectRatio:i}=this;return Ne(e)?n&&i?i:s?r/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return mr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():GS(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return HS(this.canvas,this.ctx),this}stop(){return Br.stop(this),this}resize(e,n){Br.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,s=this.canvas,i=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,e,n,i),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,GS(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),qe(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Le(n,(r,s)=>{r.id=s})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,s=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let i=[];n&&(i=i.concat(Object.keys(n).map(o=>{const a=n[o],l=Qy(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),Le(i,o=>{const a=o.options,l=a.id,c=Qy(l,a),u=be(a.type,o.dtype);(a.position===void 0||bT(a.position,c)!==bT(o.dposition))&&(a.position=o.dposition),s[l]=!0;let f=null;if(l in r&&r[l].type===u)f=r[l];else{const p=mr.getScale(u);f=new p({id:l,type:u,ctx:this.ctx,chart:this}),r[f.id]=f}f.init(a,e)}),Le(s,(o,a)=>{o||delete r[a]}),Le(r,o=>{Mn.configure(this,o,o.options),Mn.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((s,i)=>s.index-i.index),r>n){for(let s=n;s<r;++s)this._destroyDatasetMeta(s);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(ET("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,s)=>{n.filter(i=>i===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,s;for(this._removeUnreferencedMetasets(),r=0,s=n.length;r<s;r++){const i=n[r];let o=this.getDatasetMeta(r);const a=i.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=i.indexAxis||Gy(a,this.options),o.order=i.order||0,o.index=r,o.label=""+i.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=mr.getController(a),{datasetElementType:c,dataElementType:u}=st.datasets[a];Object.assign(l,{dataElementType:mr.getElement(u),datasetElementType:c&&mr.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Le(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:f}=this.getDatasetMeta(c),p=!s&&i.indexOf(f)===-1;f.buildOrUpdateElements(p),o=Math.max(+f.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),s||Le(i,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(ET("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Le(this.scales,e=>{Mn.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!jS(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:s,count:i}of n){const o=r==="_removeElements"?-i:i;iQ(e,s,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=i=>new Set(e.filter(o=>o[0]===i).map((o,a)=>a+","+o.splice(1).join(","))),s=r(0);for(let i=1;i<n;i++)if(!jS(s,r(i)))return;return Array.from(s).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Mn.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],Le(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,i)=>{s._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,ui(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),s={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Br.has(this)?this.attached&&!Br.running(this)&&Br.start(this):(this.draw(),ST({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let s,i;for(s=0,i=n.length;s<i;++s){const o=n[s];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r={meta:e,index:e.index,cancelable:!0},s=FD(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(s&&cp(n,s),e.controller.draw(),s&&up(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return Uc(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,s){const i=rG.modes[n];return typeof i=="function"?i(this,e,r,s):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let s=r.filter(i=>i&&i._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=xo(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const s=r?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,s);Fc(n)?(i.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(i,{visible:r}),this.update(a=>a.datasetIndex===e?s:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Br.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),HS(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete rh[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(i,o)=>{n.addEventListener(this,i,o),e[i]=o},s=(i,o,a)=>{i.offsetX=o,i.offsetY=a,this._eventHandler(i)};Le(this.options.events,i=>r(i,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},s=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},i=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),r("resize",i),r("detach",o)};o=()=>{this.attached=!1,s("resize",i),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){Le(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},Le(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const s=r?"set":"remove";let i,o,a,l;for(n==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:i,index:o})=>{const a=this.getDatasetMeta(i);if(!a)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:a.data[o],index:o}});!sf(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const s=this.options.hover,i=(l,c)=>l.filter(u=>!c.some(f=>u.datasetIndex===f.datasetIndex&&u.index===f.index)),o=i(n,e),a=r?e:i(e,n);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},s=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;const i=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(i||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:s=[],options:i}=this,o=n,a=this._getActiveElements(e,s,r,o),l=l8(e),c=oQ(e,this._lastEvent,r,l);r&&(this._lastEvent=null,qe(i.onHover,[e,a,this],this),l&&qe(i.onClick,[e,a,this],this));const u=!sf(a,s);return(u||n)&&(this._active=a,this._updateHoverStyles(a,s,n)),this._lastEvent=c,u}_getActiveElements(e,n,r,s){if(e.type==="mouseout")return[];if(!r)return n;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,s)}};function IT(){return Le(Qa.instances,t=>t._plugins.invalidate())}function XD(t,e,n=e){t.lineCap=be(n.borderCapStyle,e.borderCapStyle),t.setLineDash(be(n.borderDash,e.borderDash)),t.lineDashOffset=be(n.borderDashOffset,e.borderDashOffset),t.lineJoin=be(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=be(n.borderWidth,e.borderWidth),t.strokeStyle=be(n.borderColor,e.borderColor)}function aQ(t,e,n){t.lineTo(n.x,n.y)}function lQ(t){return t.stepped?M8:t.tension||t.cubicInterpolationMode==="monotone"?L8:aQ}function JD(t,e,n={}){const r=t.length,{start:s=0,end:i=r-1}=n,{start:o,end:a}=e,l=Math.max(s,o),c=Math.min(i,a),u=s<o&&i<o||s>a&&i>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!u?r+c-l:c-l}}function cQ(t,e,n,r){const{points:s,options:i}=e,{count:o,start:a,loop:l,ilen:c}=JD(s,n,r),u=lQ(i);let{move:f=!0,reverse:p}=r||{},m,y,g;for(m=0;m<=c;++m)y=s[(a+(p?c-m:m))%o],!y.skip&&(f?(t.moveTo(y.x,y.y),f=!1):u(t,g,y,p,i.stepped),g=y);return l&&(y=s[(a+(p?c:0))%o],u(t,g,y,p,i.stepped)),!!l}function uQ(t,e,n,r){const s=e.points,{count:i,start:o,ilen:a}=JD(s,n,r),{move:l=!0,reverse:c}=r||{};let u=0,f=0,p,m,y,g,x,b;const _=k=>(o+(c?a-k:k))%i,T=()=>{g!==x&&(t.lineTo(u,x),t.lineTo(u,g),t.lineTo(u,b))};for(l&&(m=s[_(0)],t.moveTo(m.x,m.y)),p=0;p<=a;++p){if(m=s[_(p)],m.skip)continue;const k=m.x,N=m.y,R=k|0;R===y?(N<g?g=N:N>x&&(x=N),u=(f*u+k)/++f):(T(),t.lineTo(k,N),y=R,f=0,g=x=N),b=N}T()}function Yy(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?uQ:cQ}function dQ(t){return t.stepped?mK:t.tension||t.cubicInterpolationMode==="monotone"?gK:Ri}function hQ(t,e,n,r){let s=e._path;s||(s=e._path=new Path2D,e.path(s,n,r)&&s.closePath()),XD(t,e.options),t.stroke(s)}function fQ(t,e,n,r){const{segments:s,options:i}=e,o=Yy(e);for(const a of s)XD(t,i,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const pQ=typeof Path2D=="function";function mQ(t,e,n,r){pQ&&!e.options.segment?hQ(t,e,n,r):fQ(t,e,n,r)}class fp extends yi{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const s=r.spanGaps?this._loop:this._fullLoop;aK(this._points,r,e,s,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=bK(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,s=e[n],i=this.points,o=LD(this,{property:n,start:s,end:s});if(!o.length)return;const a=[],l=dQ(r);let c,u;for(c=0,u=o.length;c<u;++c){const{start:f,end:p}=o[c],m=i[f],y=i[p];if(m===y){a.push(m);continue}const g=Math.abs((s-m[n])/(y[n]-m[n])),x=l(m,y,g,r.stepped);x[n]=e[n],a.push(x)}return a.length===1?a[0]:a}pathSegment(e,n,r){return Yy(this)(e,this,n,r)}path(e,n,r){const s=this.segments,i=Yy(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of s)o&=i(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,s){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),mQ(e,this,r,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function CT(t,e,n,r){const s=t.options,{[n]:i}=t.getProps([n],r);return Math.abs(e-i)<s.radius+s.hitRadius}class gQ extends yi{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,n,r){const s=this.options,{x:i,y:o}=this.getProps(["x","y"],r);return Math.pow(e-i,2)+Math.pow(n-o,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(e,n){return CT(this,e,"x",n)}inYRange(e,n){return CT(this,e,"y",n)}getCenterPoint(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}size(e){e=e||this.options||{};let n=e.radius||0;n=Math.max(n,n&&e.hoverRadius||0);const r=n&&e.borderWidth||0;return(n+r)*2}draw(e,n){const r=this.options;this.skip||r.radius<.1||!Uc(this,n,this.size(r)/2)||(e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.fillStyle=r.backgroundColor,Ky(e,r,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function ZD(t,e){const{x:n,y:r,base:s,width:i,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,u,f;return t.horizontal?(f=o/2,a=Math.min(n,s),l=Math.max(n,s),c=r-f,u=r+f):(f=i/2,a=n-f,l=n+f,c=Math.min(r,s),u=Math.max(r,s)),{left:a,top:c,right:l,bottom:u}}function Ls(t,e,n,r){return t?0:En(e,n,r)}function yQ(t,e,n){const r=t.options.borderWidth,s=t.borderSkipped,i=CD(r);return{t:Ls(s.top,i.top,0,n),r:Ls(s.right,i.right,0,e),b:Ls(s.bottom,i.bottom,0,n),l:Ls(s.left,i.left,0,e)}}function vQ(t,e,n){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),s=t.options.borderRadius,i=ia(s),o=Math.min(e,n),a=t.borderSkipped,l=r||Te(s);return{topLeft:Ls(!l||a.top||a.left,i.topLeft,0,o),topRight:Ls(!l||a.top||a.right,i.topRight,0,o),bottomLeft:Ls(!l||a.bottom||a.left,i.bottomLeft,0,o),bottomRight:Ls(!l||a.bottom||a.right,i.bottomRight,0,o)}}function xQ(t){const e=ZD(t),n=e.right-e.left,r=e.bottom-e.top,s=yQ(t,n/2,r/2),i=vQ(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:i},inner:{x:e.left+s.l,y:e.top+s.t,w:n-s.l-s.r,h:r-s.t-s.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,i.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(s.b,s.r))}}}}function Gm(t,e,n,r){const s=e===null,i=n===null,a=t&&!(s&&i)&&ZD(t,r);return a&&(s||Ms(e,a.left,a.right))&&(i||Ms(n,a.top,a.bottom))}function _Q(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function wQ(t,e){t.rect(e.x,e.y,e.w,e.h)}function Qm(t,e,n={}){const r=t.x!==n.x?-e:0,s=t.y!==n.y?-e:0,i=(t.x+t.w!==n.x+n.w?e:0)-r,o=(t.y+t.h!==n.y+n.h?e:0)-s;return{x:t.x+r,y:t.y+s,w:t.w+i,h:t.h+o,radius:t.radius}}class eO extends yi{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:r,backgroundColor:s}}=this,{inner:i,outer:o}=xQ(this),a=_Q(o.radius)?lf:wQ;e.save(),(o.w!==i.w||o.h!==i.h)&&(e.beginPath(),a(e,Qm(o,n,i)),e.clip(),a(e,Qm(i,-n,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,Qm(i,n)),e.fillStyle=s,e.fill(),e.restore()}inRange(e,n,r){return Gm(this,e,n,r)}inXRange(e,n){return Gm(this,e,null,n)}inYRange(e,n){return Gm(this,null,e,n)}getCenterPoint(e){const{x:n,y:r,base:s,horizontal:i}=this.getProps(["x","y","base","horizontal"],e);return{x:i?(n+s)/2:n,y:i?r:(r+s)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}function bQ(t,e,n){const r=t.segments,s=t.points,i=e.points,o=[];for(const a of r){let{start:l,end:c}=a;c=Lx(l,c,s);const u=Xy(n,s[l],s[c],a.loop);if(!e.segments){o.push({source:a,target:u,start:s[l],end:s[c]});continue}const f=LD(e,u);for(const p of f){const m=Xy(n,i[p.start],i[p.end],p.loop),y=MD(a,s,m);for(const g of y)o.push({source:g,target:p,start:{[n]:kT(u,m,"start",Math.max)},end:{[n]:kT(u,m,"end",Math.min)}})}}return o}function Xy(t,e,n,r){if(r)return;let s=e[t],i=n[t];return t==="angle"&&(s=yr(s),i=yr(i)),{property:t,start:s,end:i}}function EQ(t,e){const{x:n=null,y:r=null}=t||{},s=e.points,i=[];return e.segments.forEach(({start:o,end:a})=>{a=Lx(o,a,s);const l=s[o],c=s[a];r!==null?(i.push({x:l.x,y:r}),i.push({x:c.x,y:r})):n!==null&&(i.push({x:n,y:l.y}),i.push({x:n,y:c.y}))}),i}function Lx(t,e,n){for(;e>t;e--){const r=n[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function kT(t,e,n,r){return t&&e?r(t[n],e[n]):t?t[n]:e?e[n]:0}function tO(t,e){let n=[],r=!1;return ht(t)?(r=!0,n=t):n=EQ(t,e),n.length?new fp({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function AT(t){return t&&t.fill!==!1}function SQ(t,e,n){let s=t[e].fill;const i=[e];let o;if(!n)return s;for(;s!==!1&&i.indexOf(s)===-1;){if(!Yt(s))return s;if(o=t[s],!o)return!1;if(o.visible)return s;i.push(s),s=o.fill}return!1}function TQ(t,e,n){const r=AQ(t);if(Te(r))return isNaN(r.value)?!1:r;let s=parseFloat(r);return Yt(s)&&Math.floor(s)===s?IQ(r[0],e,s,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function IQ(t,e,n,r){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=r?!1:n}function CQ(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:Te(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function kQ(t,e,n){let r;return t==="start"?r=n:t==="end"?r=e.options.reverse?e.min:e.max:Te(t)?r=t.value:r=e.getBaseValue(),r}function AQ(t){const e=t.options,n=e.fill;let r=be(n&&n.target,n);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function RQ(t){const{scale:e,index:n,line:r}=t,s=[],i=r.segments,o=r.points,a=PQ(e,n);a.push(tO({x:null,y:e.bottom},r));for(let l=0;l<i.length;l++){const c=i[l];for(let u=c.start;u<=c.end;u++)NQ(s,o[u],a)}return new fp({points:s,options:{}})}function PQ(t,e){const n=[],r=t.getMatchingVisibleMetas("line");for(let s=0;s<r.length;s++){const i=r[s];if(i.index===e)break;i.hidden||n.unshift(i.dataset)}return n}function NQ(t,e,n){const r=[];for(let s=0;s<n.length;s++){const i=n[s],{first:o,last:a,point:l}=DQ(i,e,"x");if(!(!l||o&&a)){if(o)r.unshift(l);else if(t.push(l),!a)break}}t.push(...r)}function DQ(t,e,n){const r=t.interpolate(e,n);if(!r)return{};const s=r[n],i=t.segments,o=t.points;let a=!1,l=!1;for(let c=0;c<i.length;c++){const u=i[c],f=o[u.start][n],p=o[u.end][n];if(Ms(s,f,p)){a=s===f,l=s===p;break}}return{first:a,last:l,point:r}}class nO{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,r){const{x:s,y:i,radius:o}=this;return n=n||{start:0,end:tr},e.arc(s,i,o,n.end,n.start,!0),!r.bounds}interpolate(e){const{x:n,y:r,radius:s}=this,i=e.angle;return{x:n+Math.cos(i)*s,y:r+Math.sin(i)*s,angle:i}}}function OQ(t){const{chart:e,fill:n,line:r}=t;if(Yt(n))return jQ(e,n);if(n==="stack")return RQ(t);if(n==="shape")return!0;const s=MQ(t);return s instanceof nO?s:tO(s,r)}function jQ(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function MQ(t){return(t.scale||{}).getPointPositionForValue?FQ(t):LQ(t)}function LQ(t){const{scale:e={},fill:n}=t,r=CQ(n,e);if(Yt(r)){const s=e.isHorizontal();return{x:s?r:null,y:s?null:r}}return null}function FQ(t){const{scale:e,fill:n}=t,r=e.options,s=e.getLabels().length,i=r.reverse?e.max:e.min,o=kQ(n,e,i),a=[];if(r.grid.circular){const l=e.getPointPositionForValue(0,i);return new nO({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<s;++l)a.push(e.getPointPositionForValue(l,o));return a}function Ym(t,e,n){const r=OQ(e),{chart:s,index:i,line:o,scale:a,axis:l}=e,c=o.options,u=c.fill,f=c.backgroundColor,{above:p=f,below:m=f}=u||{},y=s.getDatasetMeta(i),g=FD(s,y);r&&o.points.length&&(cp(t,n),VQ(t,{line:o,target:r,above:p,below:m,area:n,scale:a,axis:l,clip:g}),up(t))}function VQ(t,e){const{line:n,target:r,above:s,below:i,area:o,scale:a,clip:l}=e,c=n._loop?"angle":e.axis;t.save(),c==="x"&&i!==s&&(RT(t,r,o.top),PT(t,{line:n,target:r,color:s,scale:a,property:c,clip:l}),t.restore(),t.save(),RT(t,r,o.bottom)),PT(t,{line:n,target:r,color:i,scale:a,property:c,clip:l}),t.restore()}function RT(t,e,n){const{segments:r,points:s}=e;let i=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,u=s[l],f=s[Lx(l,c,s)];i?(t.moveTo(u.x,u.y),i=!1):(t.lineTo(u.x,n),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(f.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function PT(t,e){const{line:n,target:r,property:s,color:i,scale:o,clip:a}=e,l=bQ(n,r,s);for(const{source:c,target:u,start:f,end:p}of l){const{style:{backgroundColor:m=i}={}}=c,y=r!==!0;t.save(),t.fillStyle=m,UQ(t,o,a,y&&Xy(s,f,p)),t.beginPath();const g=!!n.pathSegment(t,c);let x;if(y){g?t.closePath():NT(t,r,p,s);const b=!!r.pathSegment(t,u,{move:g,reverse:!0});x=g&&b,x||NT(t,r,f,s)}t.closePath(),t.fill(x?"evenodd":"nonzero"),t.restore()}}function UQ(t,e,n,r){const s=e.chart.chartArea,{property:i,start:o,end:a}=r||{};if(i==="x"||i==="y"){let l,c,u,f;i==="x"?(l=o,c=s.top,u=a,f=s.bottom):(l=s.left,c=o,u=s.right,f=a),t.beginPath(),n&&(l=Math.max(l,n.left),u=Math.min(u,n.right),c=Math.max(c,n.top),f=Math.min(f,n.bottom)),t.rect(l,c,u-l,f-c),t.clip()}}function NT(t,e,n,r){const s=e.interpolate(n,r);s&&t.lineTo(s.x,s.y)}var BQ={id:"filler",afterDatasetsUpdate(t,e,n){const r=(t.data.datasets||[]).length,s=[];let i,o,a,l;for(o=0;o<r;++o)i=t.getDatasetMeta(o),a=i.dataset,l=null,a&&a.options&&a instanceof fp&&(l={visible:t.isDatasetVisible(o),index:o,fill:TQ(a,o,r),chart:t,axis:i.controller.options.indexAxis,scale:i.vScale,line:a}),i.$filler=l,s.push(l);for(o=0;o<r;++o)l=s[o],!(!l||l.fill===!1)&&(l.fill=SQ(s,o,n.propagate))},beforeDraw(t,e,n){const r=n.drawTime==="beforeDraw",s=t.getSortedVisibleDatasetMetas(),i=t.chartArea;for(let o=s.length-1;o>=0;--o){const a=s[o].$filler;a&&(a.line.updateControlPoints(i,a.axis),r&&a.fill&&Ym(t.ctx,a,i))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const r=t.getSortedVisibleDatasetMetas();for(let s=r.length-1;s>=0;--s){const i=r[s].$filler;AT(i)&&Ym(t.ctx,i,t.chartArea)}},beforeDatasetDraw(t,e,n){const r=e.meta.$filler;!AT(r)||n.drawTime!=="beforeDatasetDraw"||Ym(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const DT=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},zQ=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class OT extends yi{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=qe(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,s)=>e.sort(r,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,s=Kt(r.font),i=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=DT(r,i);let c,u;n.font=s.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,i,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,s,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,s){const{ctx:i,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=s+a;let f=e;i.textAlign="left",i.textBaseline="middle";let p=-1,m=-u;return this.legendItems.forEach((y,g)=>{const x=r+n/2+i.measureText(y.text).width;(g===0||c[c.length-1]+x+2*a>o)&&(f+=u,c[c.length-(g>0?0:1)]=0,m+=u,p++),l[g]={left:0,top:m,row:p,width:x,height:s},c[c.length-1]+=x+a}),f}_fitCols(e,n,r,s){const{ctx:i,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let f=a,p=0,m=0,y=0,g=0;return this.legendItems.forEach((x,b)=>{const{itemWidth:_,itemHeight:T}=$Q(r,n,i,x,s);b>0&&m+T+2*a>u&&(f+=p+a,c.push({width:p,height:m}),y+=p+a,g++,p=m=0),l[b]={left:y,top:m,col:g,width:_,height:T},p=Math.max(p,_),m+=T+a}),f+=p,c.push({width:p,height:m}),f}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:s},rtl:i}}=this,o=oa(i,this.left,this.width);if(this.isHorizontal()){let a=0,l=zt(r,this.left+s,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=zt(r,this.left+s,this.right-this.lineWidths[a])),c.top+=this.top+e+s,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+s}else{let a=0,l=zt(r,this.top+e+s,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=zt(r,this.top+e+s,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+s,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;cp(e,this),this._draw(),up(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:s}=this,{align:i,labels:o}=e,a=st.color,l=oa(e.rtl,this.left,this.width),c=Kt(o.font),{padding:u}=o,f=c.size,p=f/2;let m;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:y,boxHeight:g,itemHeight:x}=DT(o,f),b=function(R,S,E){if(isNaN(y)||y<=0||isNaN(g)||g<0)return;s.save();const C=be(E.lineWidth,1);if(s.fillStyle=be(E.fillStyle,a),s.lineCap=be(E.lineCap,"butt"),s.lineDashOffset=be(E.lineDashOffset,0),s.lineJoin=be(E.lineJoin,"miter"),s.lineWidth=C,s.strokeStyle=be(E.strokeStyle,a),s.setLineDash(be(E.lineDash,[])),o.usePointStyle){const A={radius:g*Math.SQRT2/2,pointStyle:E.pointStyle,rotation:E.rotation,borderWidth:C},P=l.xPlus(R,y/2),j=S+p;TD(s,A,P,j,o.pointStyleWidth&&y)}else{const A=S+Math.max((f-g)/2,0),P=l.leftForLtr(R,y),j=ia(E.borderRadius);s.beginPath(),Object.values(j).some(O=>O!==0)?lf(s,{x:P,y:A,w:y,h:g,radius:j}):s.rect(P,A,y,g),s.fill(),C!==0&&s.stroke()}s.restore()},_=function(R,S,E){Bc(s,E.text,R,S+x/2,c,{strikethrough:E.hidden,textAlign:l.textAlign(E.textAlign)})},T=this.isHorizontal(),k=this._computeTitleHeight();T?m={x:zt(i,this.left+u,this.right-r[0]),y:this.top+u+k,line:0}:m={x:this.left+u,y:zt(i,this.top+k+u,this.bottom-n[0].height),line:0},DD(this.ctx,e.textDirection);const N=x+u;this.legendItems.forEach((R,S)=>{s.strokeStyle=R.fontColor,s.fillStyle=R.fontColor;const E=s.measureText(R.text).width,C=l.textAlign(R.textAlign||(R.textAlign=o.textAlign)),A=y+p+E;let P=m.x,j=m.y;l.setWidth(this.width),T?S>0&&P+A+u>this.right&&(j=m.y+=N,m.line++,P=m.x=zt(i,this.left+u,this.right-r[m.line])):S>0&&j+N>this.bottom&&(P=m.x=P+n[m.line].width+u,m.line++,j=m.y=zt(i,this.top+k+u,this.bottom-n[m.line].height));const O=l.x(P);if(b(O,j,R),P=E8(C,P+y+p,T?P+A:this.right,e.rtl),_(l.x(P),j,R),T)m.x+=A+u;else if(typeof R.text!="string"){const F=c.lineHeight;m.y+=rO(R,F)+u}else m.y+=N}),OD(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=Kt(n.font),s=zn(n.padding);if(!n.display)return;const i=oa(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,c=s.top+l;let u,f=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),u=this.top+c,f=zt(e.align,f,this.right-p);else{const y=this.columnSizes.reduce((g,x)=>Math.max(g,x.height),0);u=c+zt(e.align,this.top,this.bottom-y-e.labels.padding-this._computeTitleHeight())}const m=zt(a,f,f+p);o.textAlign=i.textAlign(kx(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,Bc(o,n.text,m,u,r)}_computeTitleHeight(){const e=this.options.title,n=Kt(e.font),r=zn(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,s,i;if(Ms(e,this.left,this.right)&&Ms(n,this.top,this.bottom)){for(i=this.legendHitBoxes,r=0;r<i.length;++r)if(s=i[r],Ms(e,s.left,s.left+s.width)&&Ms(n,s.top,s.top+s.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!WQ(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,i=zQ(s,r);s&&!i&&qe(n.onLeave,[e,s,this],this),this._hoveredItem=r,r&&!i&&qe(n.onHover,[e,r,this],this)}else r&&qe(n.onClick,[e,r,this],this)}}function $Q(t,e,n,r,s){const i=qQ(r,t,e,n),o=HQ(s,r,e.lineHeight);return{itemWidth:i,itemHeight:o}}function qQ(t,e,n,r){let s=t.text;return s&&typeof s!="string"&&(s=s.reduce((i,o)=>i.length>o.length?i:o)),e+n.size/2+r.measureText(s).width}function HQ(t,e,n){let r=t;return typeof e.text!="string"&&(r=rO(e,n)),r}function rO(t,e){const n=t.text?t.text.length:0;return e*n}function WQ(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var Fx={id:"legend",_element:OT,start(t,e,n){const r=t.legend=new OT({ctx:t.ctx,options:n,chart:t});Mn.configure(t,r,n),Mn.addBox(t,r)},stop(t){Mn.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;Mn.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,s=n.chart;s.isDatasetVisible(r)?(s.hide(r),e.hidden=!0):(s.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:s,color:i,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=zn(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:i,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};let sO=class extends yi{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const s=ht(r.text)?r.text.length:1;this._padding=zn(r.padding);const i=s*Kt(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:s,right:i,options:o}=this,a=o.align;let l=0,c,u,f;return this.isHorizontal()?(u=zt(a,r,i),f=n+e,c=i-r):(o.position==="left"?(u=r+e,f=zt(a,s,n),l=St*-.5):(u=i-e,f=zt(a,n,s),l=St*.5),c=s-n),{titleX:u,titleY:f,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=Kt(n.font),i=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(i);Bc(e,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:c,textAlign:kx(n.align),textBaseline:"middle",translation:[o,a]})}};function KQ(t,e){const n=new sO({ctx:t.ctx,options:e,chart:t});Mn.configure(t,n,e),Mn.addBox(t,n),t.titleBlock=n}var Vx={id:"title",_element:sO,start(t,e,n){KQ(t,n)},stop(t){const e=t.titleBlock;Mn.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;Mn.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ll={average(t){if(!t.length)return!1;let e,n,r=new Set,s=0,i=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();r.add(l.x),s+=l.y,++i}}return i===0||r.size===0?!1:{x:[...r].reduce((a,l)=>a+l)/r.size,y:s/i}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,s=Number.POSITIVE_INFINITY,i,o,a;for(i=0,o=t.length;i<o;++i){const l=t[i].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=Hy(e,c);u<s&&(s=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function fr(t,e){return e&&(ht(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function zr(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function GQ(t,e){const{element:n,datasetIndex:r,index:s}=e,i=t.getDatasetMeta(r).controller,{label:o,value:a}=i.getLabelAndValue(s);return{chart:t,label:o,parsed:i.getParsed(s),raw:t.data.datasets[r].data[s],formattedValue:a,dataset:i.getDataset(),dataIndex:s,datasetIndex:r,element:n}}function jT(t,e){const n=t.chart.ctx,{body:r,footer:s,title:i}=t,{boxWidth:o,boxHeight:a}=e,l=Kt(e.bodyFont),c=Kt(e.titleFont),u=Kt(e.footerFont),f=i.length,p=s.length,m=r.length,y=zn(e.padding);let g=y.height,x=0,b=r.reduce((k,N)=>k+N.before.length+N.lines.length+N.after.length,0);if(b+=t.beforeBody.length+t.afterBody.length,f&&(g+=f*c.lineHeight+(f-1)*e.titleSpacing+e.titleMarginBottom),b){const k=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;g+=m*k+(b-m)*l.lineHeight+(b-1)*e.bodySpacing}p&&(g+=e.footerMarginTop+p*u.lineHeight+(p-1)*e.footerSpacing);let _=0;const T=function(k){x=Math.max(x,n.measureText(k).width+_)};return n.save(),n.font=c.string,Le(t.title,T),n.font=l.string,Le(t.beforeBody.concat(t.afterBody),T),_=e.displayColors?o+2+e.boxPadding:0,Le(r,k=>{Le(k.before,T),Le(k.lines,T),Le(k.after,T)}),_=0,n.font=u.string,Le(t.footer,T),n.restore(),x+=y.width,{width:x,height:g}}function QQ(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function YQ(t,e,n,r){const{x:s,width:i}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&s+i+o>e.width||t==="right"&&s-i-o<0)return!0}function XQ(t,e,n,r){const{x:s,width:i}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return r==="center"?c=s<=(a+l)/2?"left":"right":s<=i/2?c="left":s>=o-i/2&&(c="right"),YQ(c,t,e,n)&&(c="center"),c}function MT(t,e,n){const r=n.yAlign||e.yAlign||QQ(t,n);return{xAlign:n.xAlign||e.xAlign||XQ(t,e,n,r),yAlign:r}}function JQ(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function ZQ(t,e,n){let{y:r,height:s}=t;return e==="top"?r+=n:e==="bottom"?r-=s+n:r-=s/2,r}function LT(t,e,n,r){const{caretSize:s,caretPadding:i,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=s+i,{topLeft:u,topRight:f,bottomLeft:p,bottomRight:m}=ia(o);let y=JQ(e,a);const g=ZQ(e,l,c);return l==="center"?a==="left"?y+=c:a==="right"&&(y-=c):a==="left"?y-=Math.max(u,p)+s:a==="right"&&(y+=Math.max(f,m)+s),{x:En(y,0,r.width-e.width),y:En(g,0,r.height-e.height)}}function Ed(t,e,n){const r=zn(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function FT(t){return fr([],zr(t))}function eY(t,e,n){return xo(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function VT(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const iO={beforeTitle:Ur,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:Ur,beforeBody:Ur,beforeLabel:Ur,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Ne(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Ur,afterBody:Ur,beforeFooter:Ur,footer:Ur,afterFooter:Ur};function rn(t,e,n,r){const s=t[e].call(n,r);return typeof s>"u"?iO[e].call(n,r):s}class UT extends yi{static positioners=Ll;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&n.options.animation&&r.animations,i=new VD(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=eY(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,s=rn(r,"beforeTitle",this,e),i=rn(r,"title",this,e),o=rn(r,"afterTitle",this,e);let a=[];return a=fr(a,zr(s)),a=fr(a,zr(i)),a=fr(a,zr(o)),a}getBeforeBody(e,n){return FT(rn(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,s=[];return Le(e,i=>{const o={before:[],lines:[],after:[]},a=VT(r,i);fr(o.before,zr(rn(a,"beforeLabel",this,i))),fr(o.lines,rn(a,"label",this,i)),fr(o.after,zr(rn(a,"afterLabel",this,i))),s.push(o)}),s}getAfterBody(e,n){return FT(rn(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,s=rn(r,"beforeFooter",this,e),i=rn(r,"footer",this,e),o=rn(r,"afterFooter",this,e);let a=[];return a=fr(a,zr(s)),a=fr(a,zr(i)),a=fr(a,zr(o)),a}_createItems(e){const n=this._active,r=this.chart.data,s=[],i=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(GQ(this.chart,n[l]));return e.filter&&(a=a.filter((u,f,p)=>e.filter(u,f,p,r))),e.itemSort&&(a=a.sort((u,f)=>e.itemSort(u,f,r))),Le(a,u=>{const f=VT(e.callbacks,u);s.push(rn(f,"labelColor",this,u)),i.push(rn(f,"labelPointStyle",this,u)),o.push(rn(f,"labelTextColor",this,u))}),this.labelColors=s,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),s=this._active;let i,o=[];if(!s.length)this.opacity!==0&&(i={opacity:0});else{const a=Ll[r.position].call(this,s,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=jT(this,r),c=Object.assign({},a,l),u=MT(this.chart,r,c),f=LT(r,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,i={opacity:1,x:f.x,y:f.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,s){const i=this.getCaretPosition(e,r,s);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(e,n,r){const{xAlign:s,yAlign:i}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:f}=ia(a),{x:p,y:m}=e,{width:y,height:g}=n;let x,b,_,T,k,N;return i==="center"?(k=m+g/2,s==="left"?(x=p,b=x-o,T=k+o,N=k-o):(x=p+y,b=x+o,T=k-o,N=k+o),_=x):(s==="left"?b=p+Math.max(l,u)+o:s==="right"?b=p+y-Math.max(c,f)-o:b=this.caretX,i==="top"?(T=m,k=T-o,x=b-o,_=b+o):(T=m+g,k=T+o,x=b+o,_=b-o),N=T),{x1:x,x2:b,x3:_,y1:T,y2:k,y3:N}}drawTitle(e,n,r){const s=this.title,i=s.length;let o,a,l;if(i){const c=oa(r.rtl,this.x,this.width);for(e.x=Ed(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=Kt(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<i;++l)n.fillText(s[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===i&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,s,i){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=i,u=Kt(i.bodyFont),f=Ed(this,"left",i),p=s.x(f),m=l<u.lineHeight?(u.lineHeight-l)/2:0,y=n.y+m;if(i.usePointStyle){const g={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},x=s.leftForLtr(p,c)+c/2,b=y+l/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,Ky(e,g,x,b),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Ky(e,g,x,b)}else{e.lineWidth=Te(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const g=s.leftForLtr(p,c),x=s.leftForLtr(s.xPlus(p,1),c-2),b=ia(o.borderRadius);Object.values(b).some(_=>_!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,lf(e,{x:g,y,w:c,h:l,radius:b}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),lf(e,{x,y:y+1,w:c-2,h:l-2,radius:b}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(g,y,c,l),e.strokeRect(g,y,c,l),e.fillStyle=o.backgroundColor,e.fillRect(x,y+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:s}=this,{bodySpacing:i,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=r,f=Kt(r.bodyFont);let p=f.lineHeight,m=0;const y=oa(r.rtl,this.x,this.width),g=function(E){n.fillText(E,y.x(e.x+m),e.y+p/2),e.y+=p+i},x=y.textAlign(o);let b,_,T,k,N,R,S;for(n.textAlign=o,n.textBaseline="middle",n.font=f.string,e.x=Ed(this,x,r),n.fillStyle=r.bodyColor,Le(this.beforeBody,g),m=a&&x!=="right"?o==="center"?c/2+u:c+2+u:0,k=0,R=s.length;k<R;++k){for(b=s[k],_=this.labelTextColors[k],n.fillStyle=_,Le(b.before,g),T=b.lines,a&&T.length&&(this._drawColorBox(n,e,k,y,r),p=Math.max(f.lineHeight,l)),N=0,S=T.length;N<S;++N)g(T[N]),p=f.lineHeight;Le(b.after,g)}m=0,p=f.lineHeight,Le(this.afterBody,g),e.y-=i}drawFooter(e,n,r){const s=this.footer,i=s.length;let o,a;if(i){const l=oa(r.rtl,this.x,this.width);for(e.x=Ed(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=Kt(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<i;++a)n.fillText(s[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,s){const{xAlign:i,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=r,{topLeft:f,topRight:p,bottomLeft:m,bottomRight:y}=ia(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(a+f,l),o==="top"&&this.drawCaret(e,n,r,s),n.lineTo(a+c-p,l),n.quadraticCurveTo(a+c,l,a+c,l+p),o==="center"&&i==="right"&&this.drawCaret(e,n,r,s),n.lineTo(a+c,l+u-y),n.quadraticCurveTo(a+c,l+u,a+c-y,l+u),o==="bottom"&&this.drawCaret(e,n,r,s),n.lineTo(a+m,l+u),n.quadraticCurveTo(a,l+u,a,l+u-m),o==="center"&&i==="left"&&this.drawCaret(e,n,r,s),n.lineTo(a,l+f),n.quadraticCurveTo(a,l,a+f,l),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,s=r&&r.x,i=r&&r.y;if(s||i){const o=Ll[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=jT(this,e),l=Object.assign({},o,this._size),c=MT(n,e,l),u=LT(e,l,c,n);(s._to!==u.x||i._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},i={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=zn(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(i,e,s,n),DD(e,n.textDirection),i.y+=o.top,this.drawTitle(i,e,n),this.drawBody(i,e,n),this.drawFooter(i,e,n),OD(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,s=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),i=!sf(r,s),o=this._positionChanged(s,n);(i||o)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,i=this._active||[],o=this._getActiveElements(e,i,n,r),a=this._positionChanged(o,e),l=n||!sf(o,i)||a;return l&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,s){const i=this.options;if(e.type==="mouseout")return[];if(!s)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,i.mode,i,r);return i.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:s,options:i}=this,o=Ll[i.position].call(this,e,n);return o!==!1&&(r!==o.x||s!==o.y)}}var Ux={id:"tooltip",_element:UT,positioners:Ll,afterInit(t,e,n){n&&(t.tooltip=new UT({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:iO},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const tY=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function nY(t,e,n,r){const s=t.indexOf(e);if(s===-1)return tY(t,e,n,r);const i=t.lastIndexOf(e);return s!==i?n:s}const rY=(t,e)=>t===null?null:En(Math.round(t),0,e);function BT(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Bx extends Ga{static id="category";static defaults={ticks:{callback:BT}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:s,label:i}of n)r[s]===i&&r.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(Ne(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:nY(r,e,be(n,e),this._addedLabels),rY(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,s=[];let i=this.getLabels();i=e===0&&n===i.length-1?i:i.slice(e,n+1),this._valueRange=Math.max(i.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)s.push({value:o});return s}getLabelForValue(e){return BT.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function sY(t,e){const n=[],{bounds:s,step:i,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:f,includeBounds:p}=t,m=i||1,y=u-1,{min:g,max:x}=e,b=!Ne(o),_=!Ne(a),T=!Ne(c),k=(x-g)/(f+1);let N=LS((x-g)/y/m)*m,R,S,E,C;if(N<1e-14&&!b&&!_)return[{value:g},{value:x}];C=Math.ceil(x/N)-Math.floor(g/N),C>y&&(N=LS(C*N/y/m)*m),Ne(l)||(R=Math.pow(10,l),N=Math.ceil(N*R)/R),s==="ticks"?(S=Math.floor(g/N)*N,E=Math.ceil(x/N)*N):(S=g,E=x),b&&_&&i&&f8((a-o)/i,N/1e3)?(C=Math.round(Math.min((a-o)/N,u)),N=(a-o)/C,S=o,E=a):T?(S=b?o:S,E=_?a:E,C=c-1,N=(E-S)/C):(C=(E-S)/N,ec(C,Math.round(C),N/1e3)?C=Math.round(C):C=Math.ceil(C));const A=Math.max(FS(N),FS(S));R=Math.pow(10,Ne(l)?A:l),S=Math.round(S*R)/R,E=Math.round(E*R)/R;let P=0;for(b&&(p&&S!==o?(n.push({value:o}),S<o&&P++,ec(Math.round((S+P*N)*R)/R,o,zT(o,k,t))&&P++):S<o&&P++);P<C;++P){const j=Math.round((S+P*N)*R)/R;if(_&&j>a)break;n.push({value:j})}return _&&p&&E!==a?n.length&&ec(n[n.length-1].value,a,zT(a,k,t))?n[n.length-1].value=a:n.push({value:a}):(!_||E===a)&&n.push({value:E}),n}function zT(t,e,{horizontal:n,minRotation:r}){const s=Fi(r),i=(n?Math.sin(s):Math.cos(s))||.001,o=.75*e*(""+t).length;return Math.min(e/i,o)}class iY extends Ga{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return Ne(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:s,max:i}=this;const o=l=>s=n?s:l,a=l=>i=r?i:l;if(e){const l=Ar(s),c=Ar(i);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(s===i){let l=i===0?1:Math.abs(i*.05);a(i+l),e||o(s-l)}this.min=s,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,s;return r?(s=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),n=n||11),n&&(s=Math.min(n,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const s={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},i=this._range||this,o=sY(s,i);return e.bounds==="ticks"&&p8(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const s=(r-n)/Math.max(e.length-1,1)/2;n-=s,r+=s}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return ED(e,this.chart.options.locale,this.options.ticks.format)}}class zx extends iY{static id="linear";static defaults={ticks:{callback:SD.formatters.numeric}};determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Yt(e)?e:0,this.max=Yt(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=Fi(this.options.ticks.minRotation),s=(e?Math.sin(r):Math.cos(r))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,i.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const pp={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},an=Object.keys(pp);function $T(t,e){return t-e}function qT(t,e){if(Ne(e))return null;const n=t._adapter,{parser:r,round:s,isoWeekday:i}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),Yt(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(s&&(o=s==="week"&&(Vc(i)||i===!0)?n.startOf(o,"isoWeek",i):n.startOf(o,s)),+o)}function HT(t,e,n,r){const s=an.length;for(let i=an.indexOf(t);i<s-1;++i){const o=pp[an[i]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return an[i]}return an[s-1]}function oY(t,e,n,r,s){for(let i=an.length-1;i>=an.indexOf(n);i--){const o=an[i];if(pp[o].common&&t._adapter.diff(s,r,o)>=e-1)return o}return an[n?an.indexOf(n):0]}function aY(t){for(let e=an.indexOf(t)+1,n=an.length;e<n;++e)if(pp[an[e]].common)return an[e]}function WT(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:s}=Cx(n,e),i=n[r]>=e?n[r]:n[s];t[i]=!0}}function lY(t,e,n,r){const s=t._adapter,i=+s.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=i;a<=o;a=+s.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function KT(t,e,n){const r=[],s={},i=e.length;let o,a;for(o=0;o<i;++o)a=e[o],s[a]=o,r.push({value:a,major:!1});return i===0||!n?r:lY(t,r,s,n)}class GT extends Ga{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),s=this._adapter=new JK._date(e.adapters.date);s.init(n),Zl(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:qT(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:s,max:i,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!a&&!isNaN(c.max)&&(i=Math.max(i,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=Yt(s)&&!isNaN(s)?s:+n.startOf(Date.now(),r),i=Yt(i)&&!isNaN(i)?i:+n.endOf(Date.now(),r)+1,this.min=Math.min(s,i-1),this.max=Math.max(s+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const i=this.min,o=this.max,a=_8(s,i,o);return this._unit=n.unit||(r.autoSkip?HT(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):oY(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:aY(this._unit),this.initOffsets(s),e.reverse&&a.reverse(),KT(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,s,i;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?n=1-s:n=(this.getDecimalForValue(e[1])-s)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?r=i:r=(i-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=En(n,0,o),r=En(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,s=this.options,i=s.time,o=i.unit||HT(i.minUnit,n,r,this._getLabelCapacity(n)),a=be(s.ticks.stepSize,1),l=o==="week"?i.isoWeekday:!1,c=Vc(l)||l===!0,u={};let f=n,p,m;if(c&&(f=+e.startOf(f,"isoWeek",l)),f=+e.startOf(f,c?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const y=s.ticks.source==="data"&&this.getDataTimestamps();for(p=f,m=0;p<r;p=+e.add(p,a,o),m++)WT(u,p,y);return(p===r||s.bounds==="ticks"||m===1)&&WT(u,p,y),Object.keys(u).sort($T).map(g=>+g)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const s=this.options.time.displayFormats,i=this._unit,o=n||s[i];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,s){const i=this.options,o=i.ticks.callback;if(o)return qe(o,[e,n,r],this);const a=i.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],f=c&&a[c],p=r[n],m=c&&f&&p&&p.major;return this._adapter.format(e,s||(m?f:u))}generateTickLabels(e){let n,r,s;for(n=0,r=e.length;n<r;++n)s=e[n],s.label=this._tickFormatFunction(s.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,s=Fi(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:r*i+a*o,h:r*o+a*i}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,s=r[n.unit]||r.millisecond,i=this._tickFormatFunction(e,0,KT(this,[e],this._majorUnit),s),o=this._getLabelSize(i),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,r=s.length;n<r;++n)e=e.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const s=this.getLabels();for(n=0,r=s.length;n<r;++n)e.push(qT(this,s[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return _D(e.sort($T))}}function Sd(t,e,n){let r=0,s=t.length-1,i,o,a,l;n?(e>=t[r].pos&&e<=t[s].pos&&({lo:r,hi:s}=Vi(t,"pos",e)),{pos:i,time:a}=t[r],{pos:o,time:l}=t[s]):(e>=t[r].time&&e<=t[s].time&&({lo:r,hi:s}=Vi(t,"time",e)),{time:i,pos:a}=t[r],{time:o,pos:l}=t[s]);const c=o-i;return c?a+(l-a)*(e-i)/c:a}class IX extends GT{static id="timeseries";static defaults=GT.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Sd(n,this.min),this._tableRange=Sd(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,s=[],i=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=r&&s.push(c);if(s.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=s.length;o<a;++o)u=s[o+1],l=s[o-1],c=s[o],Math.round((u+l)/2)!==c&&i.push({time:c,pos:o/(a-1)});return i}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((s,i)=>s-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(Sd(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return Sd(this._table,r*this._tableRange+this._minPos,!0)}}const oO="label";function QT(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function cY(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function aO(t,e){t.labels=e}function lO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:oO;const r=[];t.datasets=e.map(s=>{const i=t.datasets.find(o=>o[n]===s[n]);return!i||!s.data||r.includes(i)?{...s}:(r.push(i),Object.assign(i,s),i)})}function uY(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:oO;const n={labels:[],datasets:[]};return aO(n,t.labels),lO(n,t.datasets,e),n}function dY(t,e){const{height:n=150,width:r=300,redraw:s=!1,datasetIdKey:i,type:o,data:a,options:l,plugins:c=[],fallbackContent:u,updateMode:f,...p}=t,m=w.useRef(null),y=w.useRef(null),g=()=>{m.current&&(y.current=new Qa(m.current,{type:o,data:uY(a,i),options:l&&{...l},plugins:c}),QT(e,y.current))},x=()=>{QT(e,null),y.current&&(y.current.destroy(),y.current=null)};return w.useEffect(()=>{!s&&y.current&&l&&cY(y.current,l)},[s,l]),w.useEffect(()=>{!s&&y.current&&aO(y.current.config.data,a.labels)},[s,a.labels]),w.useEffect(()=>{!s&&y.current&&a.datasets&&lO(y.current.config.data,a.datasets,i)},[s,a.datasets]),w.useEffect(()=>{y.current&&(s?(x(),setTimeout(g)):y.current.update(f))},[s,l,a.labels,a.datasets,f]),w.useEffect(()=>{y.current&&(x(),setTimeout(g))},[o]),w.useEffect(()=>(g(),()=>x()),[]),Pn.createElement("canvas",{ref:m,role:"img",height:n,width:r,...p},u)}const hY=w.forwardRef(dY);function cO(t,e){return Qa.register(e),w.forwardRef((n,r)=>Pn.createElement(hY,{...n,ref:r,type:t}))}const fY=cO("line",XK),uO=cO("bar",YK);Qa.register(Bx,zx,gQ,fp,Vx,Ux,Fx,BQ);const pY=({data:t})=>{const e={labels:["Jan","Feb","Mar","Apr","May","Jun"],datasets:[{label:"Distribution Volume ($k)",data:t||[25,30,35,40,35,30],borderColor:"hsl(262, 58%, 55%)",backgroundColor:"hsla(262, 58%, 55%, 0.1)",tension:.4,fill:!0}]},n={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.05)"}},x:{grid:{display:!1}}}};return d.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[d.jsx("div",{className:"text-sm font-medium text-gray-700 mb-3",children:"Distribution Volume By Month"}),d.jsx("div",{className:"h-60 w-full",children:d.jsx(fY,{data:e,options:n})})]})};Qa.register(Bx,zx,eO,Vx,Ux,Fx);const mY=({data:t})=>{const e={labels:["Food","Water","Medicine","Shelter","Clothing"],datasets:[{label:"Distribution by Type",data:t||[65,40,55,30,70],backgroundColor:["hsl(262, 58%, 55%)","hsl(330, 100%, 71%)","hsl(187, 85%, 43%)","hsl(38, 92%, 50%)","hsl(270, 95%, 60%)"],borderWidth:0,borderRadius:4}]},n={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.05)"}},x:{grid:{display:!1}}}};return d.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[d.jsx("div",{className:"text-sm font-medium text-gray-700 mb-3",children:"Aid Items Distribution by Type"}),d.jsx("div",{className:"h-60 w-full",children:d.jsx(uO,{data:e,options:n})})]})};Qa.register(Bx,zx,eO,Vx,Ux,Fx);const gY=({data:t})=>{const e={labels:["Jan","Feb","Mar","Apr","May"],datasets:[{label:"Average Days to Deliver",data:t||[1.2,2.3,2.8,2.5,3.5],backgroundColor:["hsl(262, 58%, 55%)","hsl(38, 92%, 50%)","hsl(187, 85%, 43%)","hsl(330, 100%, 71%)","hsl(270, 95%, 60%)"],borderWidth:0,borderRadius:4}]},n={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.05)"}},x:{grid:{display:!1}}}};return d.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[d.jsx("div",{className:"text-sm font-medium text-gray-700 mb-3",children:"Average Distribution Time"}),d.jsx("div",{className:"h-60 w-full",children:d.jsx(uO,{data:e,options:n})})]})},yY=()=>d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[d.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-6",children:[d.jsx("div",{children:d.jsx("h2",{className:"text-xl font-semibold",children:"Distribution Analytics"})}),d.jsxs("div",{className:"mt-4 md:mt-0 flex space-x-2",children:[d.jsx("button",{className:"bg-gray-200 text-gray-800 py-1.5 px-3 rounded-md text-sm font-medium",children:"Last 30 Days"}),d.jsx("button",{className:"bg-gray-100 hover:bg-gray-200 text-gray-800 py-1.5 px-3 rounded-md text-sm font-medium",children:"All Locations"}),d.jsx("button",{className:"bg-gray-100 hover:bg-gray-200 text-gray-800 py-1.5 px-3 rounded-md text-sm font-medium",children:"All Aid type"})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[d.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[d.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Total Aid Distributed"}),d.jsx("p",{className:"text-2xl font-bold",children:"$12,450,000"})]}),d.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[d.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Beneficiaries Served"}),d.jsx("p",{className:"text-2xl font-bold",children:"2000+"})]})]}),d.jsxs("div",{className:"mb-6",children:[d.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Distribution Trends Over Time"}),d.jsx(pY,{data:Lm.distributionTrends})]}),d.jsxs("div",{className:"mb-6",children:[d.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Most Requested Aid Types"}),d.jsx(mY,{data:Lm.aidTypes})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Service Efficiency"}),d.jsx(gY,{data:Lm.serviceEfficiency})]})]}),lt={PENDING:"pending",PREPARING:"preparing",READY_FOR_PICKUP:"ready_for_pickup",IN_TRANSIT:"in_transit",DELIVERED:"delivered",CANCELLED:"cancelled"},vY=()=>{const{distributions:t,loading:e,error:n,lastUpdate:r,createDistribution:s,updateDistributionStatus:i,cancelDistribution:o}=jP(),[a,l]=w.useState(null),{aidRequests:c,getAidRequestById:u}=Ba(),{inventory:f,getInventoryItem:p}=uu(),{currentUser:m,canCreateDistribution:y,canUpdateDistribution:g}=jt(),{toast:x}=ar(),[b,_]=w.useState([]),[T,k]=w.useState("all"),[N,R]=w.useState(""),[S,E]=w.useState("createdAt"),[C,A]=w.useState("desc"),[P,j]=w.useState(!1),[O,F]=w.useState(!1),[B,z]=w.useState(null),[W,M]=w.useState({id:null,deliveryDetails:{method:"pickup",assignedTo:"",estimatedDelivery:"",pickupLocation:"",notes:""},items:[]}),[H,Q]=w.useState({}),[ie,re]=w.useState([]);w.useEffect(()=>{const $=c.filter(oe=>oe.status==="approved"&&!t.some(ke=>ke.requestId===oe.id));re($)},[c,t]),w.useEffect(()=>{let $=[...t];if(T!=="all"&&($=$.filter(oe=>oe.status===T)),N){const oe=N.toLowerCase();$=$.filter(ke=>{const at=u(ke.requestId);return ke.id.toString().includes(oe)||ke.assignedTo.toLowerCase().includes(oe)||at&&at.location.toLowerCase().includes(oe)||ke.notes&&ke.notes.toLowerCase().includes(oe)})}$.sort((oe,ke)=>{let at,mn;return S==="createdAt"||S==="estimatedDelivery"?(at=new Date(oe[S]).getTime(),mn=new Date(ke[S]).getTime()):S==="status"?(at=oe.status,mn=ke.status):S==="requestId"?(at=oe.requestId,mn=ke.requestId):(at=oe[S],mn=ke[S]),C==="asc"?at>mn?1:-1:at<mn?1:-1}),_($)},[t,T,N,S,C,u]);const ne=$=>{const oe=c.find(ke=>ke.id===parseInt($));z(oe)},se=$=>{const{name:oe,value:ke}=$.target;M(at=>({...at,deliveryDetails:{...at.deliveryDetails,[oe]:ke}}))},je=()=>{const $={};console.log(W.deliveryDetails),B||($.request="Please select an aid request"),oe.method==="pickup"&&!oe.pickupLocation.trim()&&($.pickupLocation="Pickup location is required");const{deliveryDetails:oe}=W;return oe.method==="delivery"&&!oe.assignedTo.trim()&&($.assignedTo="Delivery person is required"),oe.method==="delivery"&&!oe.estimatedDelivery&&($.estimatedDelivery="Estimated delivery date is required"),Q($),Object.keys($).length===0},Pe=async()=>{if(!je())return;const $={requestId:B.id,items:B.items,status:lt.PENDING,...W.deliveryDetails},oe=await s($);oe.success?(x({title:"Success",description:"Distribution created successfully."}),z(null),M(ke=>({...ke,deliveryDetails:{method:"pickup",assignedTo:"",estimatedDelivery:"",pickupLocation:"",notes:""}})),j(!1)):x({title:"Error",description:oe.error||"Failed to create distribution.",variant:"destructive"})},X=async($,oe)=>{const ke=await i($,oe);ke.success?x({title:"Status Updated",description:`Distribution status updated to ${oe.replace("_"," ")}.`}):x({title:"Error",description:ke.error||"Failed to update status.",variant:"destructive"})},Me=async $=>{if(!confirm("Are you sure you want to cancel this distribution?"))return;const oe=await o($);oe.success?x({title:"Distribution Cancelled",description:"Distribution has been cancelled successfully."}):x({title:"Error",description:oe.error||"Failed to cancel distribution.",variant:"destructive"})},We=$=>{M({id:$.id,deliveryDetails:{method:$.method,assignedTo:$.assignedTo||"",estimatedDelivery:$.estimatedDelivery?$.estimatedDelivery:"",pickupLocation:$.pickupLocation||"",notes:$.notes||""},items:$.items}),l($.id),F(!0),console.log($)},xe=()=>{const $={};console.log(W.deliveryDetails),W.deliveryDetails.method==="pickup"&&!W.deliveryDetails.pickupLocation.trim()&&($.pickupLocation="Pickup location is required");const{deliveryDetails:oe}=W;return oe.method==="delivery"&&!oe.assignedTo.trim()&&($.assignedTo="Delivery person is required"),oe.method==="delivery"&&!oe.estimatedDelivery&&($.estimatedDelivery="Estimated delivery date is required"),Q($),Object.keys($).length===0},Se=async()=>{if(!xe())return;const $={id:W.id,items:W.items,...W.deliveryDetails};console.log($)},Re=()=>{if(!a||!g)return null;const{deliveryDetails:$}=W;return d.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-6 border",children:[d.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Edit Distribution"}),$.method==="pickup"&&d.jsx(vr,{type:"text",name:"pickupLocation",value:$.pickupLocation,onChange:se}),$.method==="delivery"&&d.jsxs(d.Fragment,{children:[d.jsx(vr,{type:"text",name:"assignedTo",value:$.assignedTo,onChange:se}),d.jsx(vr,{type:"date",name:"estimatedDelivery",value:$.estimatedDelivery,onChange:se})]}),d.jsx("div",{className:"flex justify-end",children:d.jsx(Ue,{onClick:()=>Se(),className:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-6 rounded focus:outline-none focus:shadow-outline",children:"Update Distribution"})})]})},_t=$=>{switch($){case lt.PENDING:return"bg-yellow-100 text-yellow-800 border-yellow-300";case lt.PREPARING:return"bg-blue-100 text-blue-800 border-blue-300";case lt.READY_FOR_PICKUP:return"bg-purple-100 text-purple-800 border-purple-300";case lt.IN_TRANSIT:return"bg-indigo-100 text-indigo-800 border-indigo-300";case lt.DELIVERED:return"bg-green-100 text-green-800 border-green-300";case lt.CANCELLED:return"bg-red-100 text-red-800 border-red-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},pn=$=>{switch($){case lt.PENDING:return lt.PREPARING;case lt.PREPARING:return lt.READY_FOR_PICKUP;case lt.READY_FOR_PICKUP:return lt.IN_TRANSIT;case lt.IN_TRANSIT:return lt.DELIVERED;default:return null}},jr=$=>{const oe=u($.requestId);return oe?d.jsxs("div",{className:"border rounded-lg p-4 bg-gray-50",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("h4",{className:"text-md font-semibold mb-2",children:"Request Details"}),d.jsxs("p",{children:[d.jsx("span",{className:"font-medium",children:"Location:"})," ",oe.location]}),d.jsxs("p",{children:[d.jsx("span",{className:"font-medium",children:"Priority:"})," ",oe.priority]}),d.jsxs("p",{children:[d.jsx("span",{className:"font-medium",children:"Requested:"})," ",new Date(oe.createdAt).toLocaleDateString()]})]}),d.jsxs("div",{children:[d.jsx("h4",{className:"text-md font-semibold mb-2",children:"Distribution Details"}),d.jsxs("p",{children:[d.jsx("span",{className:"font-medium",children:"Method:"}),$.method==="pickup"?"Pickup":"Delivery"]}),$.method==="pickup"&&d.jsxs("p",{children:[d.jsx("span",{className:"font-medium",children:"Pickup Location:"})," ",$.pickupLocation]}),$.method==="delivery"&&d.jsxs(d.Fragment,{children:[d.jsxs("p",{children:[d.jsx("span",{className:"font-medium",children:"Assigned To:"})," ",$.assignedTo]}),d.jsxs("p",{children:[d.jsx("span",{className:"font-medium",children:"Estimated Delivery:"}),new Date($.estimatedDelivery).toLocaleDateString()]})]})]})]}),d.jsxs("div",{className:"mt-4",children:[d.jsx("h4",{className:"text-md font-semibold mb-2",children:"Items"}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"min-w-full bg-white",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"bg-gray-100 text-gray-700 text-left",children:[d.jsx("th",{className:"py-2 px-3 font-semibold",children:"Item"}),d.jsx("th",{className:"py-2 px-3 font-semibold",children:"Quantity"}),d.jsx("th",{className:"py-2 px-3 font-semibold",children:"Unit"}),d.jsx("th",{className:"py-2 px-3 font-semibold",children:"Status"})]})}),d.jsx("tbody",{className:"divide-y divide-gray-200",children:$.items.map((ke,at)=>{const mn=p(ke.itemId),Ya=mn&&mn.quantity>=ke.quantity;return d.jsxs("tr",{children:[d.jsx("td",{className:"py-2 px-3",children:ke.name}),d.jsx("td",{className:"py-2 px-3",children:ke.quantity}),d.jsx("td",{className:"py-2 px-3",children:ke.unit}),d.jsx("td",{className:"py-2 px-3",children:d.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${Ya?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:Ya?"Available":"Insufficient"})})]},at)})})]})})]}),$.notes&&d.jsxs("div",{className:"mt-4",children:[d.jsx("h4",{className:"text-md font-semibold mb-2",children:"Notes"}),d.jsx("p",{className:"text-gray-700",children:$.notes})]})]}):null};return e?d.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md",children:d.jsx("div",{className:"animate-pulse flex space-x-4",children:d.jsxs("div",{className:"flex-1 space-y-4 py-1",children:[d.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("div",{className:"h-4 bg-gray-200 rounded"}),d.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]})]})})}):n?d.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border-l-4 border-red-500",children:[d.jsx("h2",{className:"text-xl font-semibold text-red-700 mb-4",children:"Error"}),d.jsx("p",{className:"text-gray-700",children:n})]}):d.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-2xl font-semibold",children:"Distribution Management"}),r&&d.jsxs("p",{className:"text-sm text-gray-500",children:["Last updated: ",new Date(r).toLocaleString()]})]}),m&&y&&d.jsx("button",{onClick:()=>j(!P),className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",disabled:ie.length===0,children:P?"Cancel":"+ Create Distribution"})]}),P&&m&&y&&d.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-6 border",children:[d.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Create New Distribution"}),ie.length===0?d.jsx("div",{className:"text-center py-4",children:d.jsx("p",{className:"text-gray-500",children:"No approved aid requests available for distribution."})}):d.jsxs("div",{children:[d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"requestId",children:"Select Aid Request *"}),d.jsxs("select",{id:"requestId",value:B?B.id:"",onChange:$=>ne($.target.value),className:`shadow border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline ${H.request?"border-red-500":""}`,children:[d.jsx("option",{value:"",children:"Select a request"}),ie.map($=>d.jsxs("option",{value:$.id,children:["Request #",$.id," - ",$.location," (",$.items.length," items)"]},$.id))]}),H.request&&d.jsx("p",{className:"text-red-500 text-xs italic",children:H.request})]}),B&&d.jsxs("div",{className:"mb-4 p-3 bg-blue-50 rounded border border-blue-200",children:[d.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Request Details"}),d.jsxs("p",{children:[d.jsx("span",{className:"font-medium",children:"Location:"})," ",B.location]}),d.jsxs("p",{children:[d.jsx("span",{className:"font-medium",children:"Priority:"})," ",B.priority]}),d.jsxs("p",{children:[d.jsx("span",{className:"font-medium",children:"Notes:"})," ",B.notes||"None"]}),d.jsx("h5",{className:"font-semibold text-blue-700 mt-3 mb-2",children:"Requested Items:"}),d.jsx("ul",{className:"list-disc pl-5",children:B.items.map(($,oe)=>{const ke=p($.itemId),at=ke&&ke.quantity>=$.quantity;return d.jsxs("li",{className:at?"text-green-700":"text-red-700",children:[$.quantity," ",$.unit," ",$.name,!at&&" (Insufficient stock)"]},oe)})})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Distribution Method *"}),d.jsxs("div",{className:"flex space-x-4",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{type:"radio",id:"method-pickup",name:"method",value:"pickup",checked:deliveryDetails.method==="pickup",onChange:se,className:"mr-2"}),d.jsx("label",{htmlFor:"method-pickup",children:"Pickup"})]}),d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{type:"radio",id:"method-delivery",name:"method",value:"delivery",checked:deliveryDetails.method==="delivery",onChange:se,className:"mr-2"}),d.jsx("label",{htmlFor:"method-delivery",children:"Delivery"})]})]})]}),deliveryDetails.method==="pickup"?d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"pickupLocation",children:"Pickup Location *"}),d.jsx("input",{type:"text",id:"pickupLocation",name:"pickupLocation",value:deliveryDetails.pickupLocation,onChange:se,className:`shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline ${H.pickupLocation?"border-red-500":""}`,placeholder:"Enter pickup location"}),H.pickupLocation&&d.jsx("p",{className:"text-red-500 text-xs italic",children:H.pickupLocation})]}):d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"assignedTo",children:"Assigned To *"}),d.jsx("input",{type:"text",id:"assignedTo",name:"assignedTo",value:deliveryDetails.assignedTo,onChange:se,className:`shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline ${H.assignedTo?"border-red-500":""}`,placeholder:"Enter delivery person name"}),H.assignedTo&&d.jsx("p",{className:"text-red-500 text-xs italic",children:H.assignedTo})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"estimatedDelivery",children:"Estimated Delivery Date *"}),d.jsx("input",{type:"date",id:"estimatedDelivery",name:"estimatedDelivery",value:deliveryDetails.estimatedDelivery,onChange:se,className:`shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline ${H.estimatedDelivery?"border-red-500":""}`,min:new Date().toISOString().split("T")[0]}),H.estimatedDelivery&&d.jsx("p",{className:"text-red-500 text-xs italic",children:H.estimatedDelivery})]})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"notes",children:"Notes"}),d.jsx("textarea",{id:"notes",name:"notes",value:deliveryDetails.notes,onChange:se,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",rows:"3",placeholder:"Any additional notes about this distribution"})]}),d.jsx("div",{className:"flex justify-end",children:d.jsx("button",{onClick:Pe,className:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-6 rounded focus:outline-none focus:shadow-outline",disabled:!B,children:"Create Distribution"})})]})]}),O&&Re(),d.jsxs("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"statusFilter",children:"Status"}),d.jsxs("select",{id:"statusFilter",value:T,onChange:$=>k($.target.value),className:"shadow border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",children:[d.jsx("option",{value:"all",children:"All Statuses"}),Object.values(lt).map($=>d.jsx("option",{value:$,children:$.replace("_"," ").replace(/\b\w/g,oe=>oe.toUpperCase())},$))]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"sortBy",children:"Sort By"}),d.jsxs("div",{className:"flex space-x-2",children:[d.jsxs("select",{id:"sortBy",value:S,onChange:$=>E($.target.value),className:"shadow border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",children:[d.jsx("option",{value:"createdAt",children:"Created Date"}),d.jsx("option",{value:"estimatedDelivery",children:"Estimated Delivery"}),d.jsx("option",{value:"requestId",children:"Request ID"}),d.jsx("option",{value:"status",children:"Status"}),d.jsx("option",{value:"method",children:"Method"})]}),d.jsx("button",{onClick:()=>A(C==="asc"?"desc":"asc"),className:"bg-gray-200 hover:bg-gray-300 px-3 rounded",children:C==="asc"?"↑":"↓"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"search",children:"Search"}),d.jsx("input",{id:"search",type:"text",placeholder:"Search distributions...",value:N,onChange:$=>R($.target.value),className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"})]})]}),b.length===0?d.jsx("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:d.jsx("p",{className:"text-gray-500",children:"No distributions found matching your criteria."})}):d.jsx("div",{className:"space-y-6",children:b.map($=>{u($.requestId);const oe=pn($.status);return d.jsxs("div",{className:"border rounded-lg overflow-hidden shadow",children:[d.jsxs("div",{className:"bg-gray-100 p-4 flex justify-between items-center",children:[d.jsxs("div",{children:[d.jsxs("h3",{className:"text-lg font-semibold",children:["Distribution #",$.id," - Request #",$.requestId]}),d.jsxs("p",{className:"text-sm text-gray-600",children:["Created: ",new Date($.createdAt).toLocaleDateString()]})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("span",{className:`px-3 py-1 rounded-full text-sm border ${_t($.status)}`,children:$.status.replace("_"," ")}),d.jsx("span",{className:`text-sm ${$.method==="pickup"?"bg-orange-100 text-orange-800":"bg-blue-100 text-blue-800"} px-2 py-1 rounded-full`,children:$.method==="pickup"?"Pickup":"Delivery"})]})]}),d.jsxs("div",{className:"p-4",children:[jr($),$.status!==lt.DELIVERED&&$.status!==lt.CANCELLED&&m&&g&&d.jsx(Ue,{onClick:()=>We($),className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Edit"}),d.jsxs("div",{className:"mt-4 flex justify-end space-x-3",children:[oe&&m&&g&&d.jsxs("button",{onClick:()=>X($.id,oe),className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:["Mark as ",oe.replace("_"," ")]}),$.status!==lt.DELIVERED&&$.status!==lt.CANCELLED&&d.jsx("button",{onClick:()=>Me($.id),className:"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Cancel"})]})]})]},$.id)})}),d.jsx("div",{className:"mt-6 text-right",children:d.jsxs("p",{className:"text-xs text-gray-500",children:["Data refreshes automatically. Last refresh: ",r?new Date(r).toLocaleTimeString():"N/A"]})})]})},xY=()=>{const{loading:t,error:e}=jP();return d.jsxs("div",{className:"space-y-6",children:[d.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-bold",children:"Aid Distribution"}),d.jsx("p",{className:"text-sm text-gray-500",children:"Manage and track aid distributions to beneficiaries"})]})}),t?d.jsx("div",{className:"flex justify-center items-center h-64",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):e?d.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4",children:d.jsx("p",{className:"text-red-700",children:e})}):d.jsx(vY,{})]})},_Y=()=>{const{toast:t}=ar(),[e,n]=w.useState(""),[r,s]=w.useState("general"),[i,o]=w.useState(5),a=l=>{l.preventDefault(),console.log({feedback:e,category:r,rating:i}),n(""),s("general"),o(5),t({title:"Feedback Submitted",description:"Thank you for your feedback! We appreciate your input."})};return d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[d.jsx("h2",{className:"text-xl font-semibold mb-6",children:"SEND US FEEDBACK"}),d.jsxs("div",{className:"max-w-2xl mx-auto",children:[d.jsx("p",{className:"text-gray-600 mb-6",children:"Your feedback helps us improve our humanitarian aid distribution system. Please share your thoughts, suggestions, or report any issues you've encountered."}),d.jsxs("form",{onSubmit:a,className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-1",children:"Feedback Category"}),d.jsxs("select",{id:"category",value:r,onChange:l=>s(l.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary",children:[d.jsx("option",{value:"general",children:"General Feedback"}),d.jsx("option",{value:"bug",children:"Report a Bug"}),d.jsx("option",{value:"feature",children:"Feature Request"}),d.jsx("option",{value:"usability",children:"Usability Issue"}),d.jsx("option",{value:"other",children:"Other"})]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"rating",className:"block text-sm font-medium text-gray-700 mb-1",children:"How would you rate your experience? (1-10)"}),d.jsx("input",{type:"range",id:"rating",min:"1",max:"10",value:i,onChange:l=>o(parseInt(l.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),d.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[d.jsx("span",{children:"1"}),d.jsx("span",{children:"2"}),d.jsx("span",{children:"3"}),d.jsx("span",{children:"4"}),d.jsx("span",{children:"5"}),d.jsx("span",{children:"6"}),d.jsx("span",{children:"7"}),d.jsx("span",{children:"8"}),d.jsx("span",{children:"9"}),d.jsx("span",{children:"10"})]}),d.jsxs("p",{className:"text-center mt-2",children:["Your rating: ",i,"/10"]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"feedback",className:"block text-sm font-medium text-gray-700 mb-1",children:"Your Feedback"}),d.jsx("textarea",{id:"feedback",rows:"6",value:e,onChange:l=>n(l.target.value),placeholder:"Please share your thoughts, suggestions, or report any issues...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary",required:!0})]}),d.jsx("div",{className:"flex justify-end",children:d.jsx(Ue,{type:"submit",variant:"default",size:"lg",children:"Submit Feedback"})})]}),d.jsxs("div",{className:"mt-8 text-center text-gray-600",children:[d.jsx("p",{children:"If you need immediate assistance, please contact us at:"}),d.jsx("p",{className:"font-medium",children:"support@hads.org"})]})]})]})},wY=({onRequestSubmitted:t,request:e=null})=>{const{createAidRequest:n,updateAidRequest:r}=Ba(),{inventory:s,aidItems:i}=uu(),{toast:o}=ar(),a=w.useMemo(()=>{if(e){e.items;const R=e.notes||"",S=[];return R.includes("Requested Items:")&&R.split("Requested Items:")[1].trim().split(`
`).filter(A=>A.trim()!=="").forEach(A=>{const P=A.split(":");if(P.length===2){const j=P[0].trim().replace("-","").trim(),O=P[1].trim().split(" "),F=parseInt(O[0]),B=O.slice(1).join(" ")||"unit",z=i.find(W=>W.name.toLowerCase()===j.toLowerCase());S.push({itemId:z?z.id:"",name:j,quantity:F,unit:B})}}),{name:e.name||"",location:e.location||"",aidType:e.aidType||"",urgency:e.urgency||"medium",items:S.length>0?S:[{itemId:"",name:"",quantity:1,unit:""}],notes:R.split("Requested Items:")[0].trim()}}return{name:"",location:"",aidType:"",urgency:"medium",items:[{itemId:"",name:"",quantity:1,unit:""}],notes:""}},[e,i]),[l,c]=w.useState(a),[u,f]=w.useState({}),[p,m]=w.useState([]);w.useEffect(()=>{if(i&&i.length>0)m(i);else if(s.length>0){const R=s.filter(S=>S.quantity>0);m(R)}},[s,i]);const y=()=>{const R={};return l.name.trim()||(R.name="Request name is required"),l.location.trim()||(R.location="Location is required"),l.aidType.trim()||(R.aidType="Aid type is required"),l.urgency||(R.urgency="Urgency level is required"),l.items.length===0?R.items="At least one item is required":l.items.forEach((S,E)=>{S.itemId||(R[`items.${E}.itemId`]="Item is required"),(!S.quantity||S.quantity<=0)&&(R[`items.${E}.quantity`]="Quantity must be greater than 0")}),f(R),Object.keys(R).length===0},g=(R,S,E)=>{const C=[...l.items];if(S==="itemId"){const A=p.find(P=>P.id===parseInt(E));A&&(C[R]={...C[R],itemId:parseInt(E),name:A.name,unit:A.unit||"unit"})}else C[R]={...C[R],[S]:S==="quantity"?parseInt(E):E};c({...l,items:C})},x=()=>{c({...l,items:[...l.items,{itemId:"",name:"",quantity:1,unit:""}]})},b=R=>{const S=[...l.items];S.splice(R,1),c({...l,items:S.length?S:[{itemId:"",name:"",quantity:1,unit:""}]})},_=R=>{const{name:S,value:E}=R.target;c({...l,[S]:E})},T=!!e,k=async R=>{if(R.preventDefault(),!y()){o({title:"Form Error",description:"Please fill in all required fields correctly.",variant:"destructive"});return}const S=l.items.map(P=>({itemId:P.itemId,name:P.name,quantity:P.quantity,unit:P.unit})),E=`${l.notes}

Requested Items:
${S.map(P=>`- ${P.name}: ${P.quantity} ${P.unit}`).join(`
`)}`,C={name:l.name,location:l.location,aidType:l.aidType,urgency:l.urgency,notes:E};let A;if(T?A=await r(e.id,C):A=await n(C),!A){o({title:"Error",description:"An unexpected error occurred.",variant:"destructive"});return}A.success&&t?(o({title:"Success",description:T?"Your aid request has been updated successfully.":"Your aid request has been submitted successfully."}),c({name:"",location:"",aidType:"",urgency:"medium",items:[{itemId:"",name:"",quantity:1,unit:""}],notes:""}),t(T?A.data:A.request)):o({title:"Error",description:A.error||"Failed to submit aid request. Please try again.",variant:"destructive"})},N=R=>{switch(R){case"high":return"bg-red-200 border-red-400";case"medium":return"bg-yellow-200 border-yellow-400 ";case"low":return"bg-green-200 border-green-400";default:return"bg-gray-200 border-gray-400"}};return d.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[d.jsx("h2",{className:"text-2xl font-semibold mb-6",children:T?"Edit Aid Request":"Submit Aid Request"}),d.jsxs("form",{onSubmit:k,children:[d.jsxs("div",{className:"mb-6",children:[d.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"name",children:"Request Name *"}),d.jsx("input",{type:"text",id:"name",name:"name",value:l.name,onChange:_,className:`shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline ${u.name?"border-red-500":""}`,placeholder:"Give your request a descriptive name"}),u.name&&d.jsx("p",{className:"text-red-500 text-xs italic",children:u.name})]}),d.jsxs("div",{className:"mb-6",children:[d.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"location",children:"Location / Address *"}),d.jsx("input",{type:"text",id:"location",name:"location",value:l.location,onChange:_,className:`shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline ${u.location?"border-red-500":""}`,placeholder:"Enter your current location"}),u.location&&d.jsx("p",{className:"text-red-500 text-xs italic",children:u.location})]}),d.jsxs("div",{className:"mb-6",children:[d.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"aidType",children:"Aid Type *"}),d.jsxs("select",{id:"aidType",name:"aidType",value:l.aidType,onChange:_,className:`shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline ${u.aidType?"border-red-500":""}`,children:[d.jsx("option",{value:"",children:"Select Aid Type"}),d.jsx("option",{value:"food",children:"Food"}),d.jsx("option",{value:"water",children:"Water"}),d.jsx("option",{value:"medical",children:"Medical Supplies"}),d.jsx("option",{value:"shelter",children:"Shelter"}),d.jsx("option",{value:"clothing",children:"Clothing"}),d.jsx("option",{value:"hygiene",children:"Hygiene Products"}),d.jsx("option",{value:"other",children:"Other"})]}),u.aidType&&d.jsx("p",{className:"text-red-500 text-xs italic",children:u.aidType})]}),d.jsxs("div",{className:"mb-6",children:[d.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Urgency Level *"}),d.jsx("div",{className:"flex space-x-4",children:["low","medium","high"].map(R=>d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{type:"radio",id:`urgency-${R}`,name:"urgency",value:R,checked:l.urgency===R,onChange:_,className:"mr-2"}),d.jsx("label",{htmlFor:`urgency-${R}`,className:`py-1 px-3 rounded-full text-sm capitalize ${N(R)}`,children:R})]},R))}),u.urgency&&d.jsx("p",{className:"text-red-500 text-xs italic",children:u.urgency})]}),d.jsxs("div",{className:"mb-6",children:[d.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Requested Items *"}),l.items.map((R,S)=>d.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[d.jsxs("div",{className:"flex-1",children:[d.jsxs("select",{value:R.itemId,onChange:E=>g(S,"itemId",E.target.value),className:`shadow border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline ${u[`items.${S}.itemId`]?"border-red-500":""}`,children:[d.jsx("option",{value:"",children:"Select an item"}),p.map(E=>d.jsxs("option",{value:E.id,children:[E.name," (",E.quantity," ",E.unit||"unit"," available)"]},E.id))]}),u[`items.${S}.itemId`]&&d.jsx("p",{className:"text-red-500 text-xs italic",children:u[`items.${S}.itemId`]})]}),d.jsxs("div",{className:"w-24",children:[d.jsx("input",{type:"number",min:"1",value:R.quantity,onChange:E=>g(S,"quantity",E.target.value),className:`shadow border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline ${u[`items.${S}.quantity`]?"border-red-500":""}`}),u[`items.${S}.quantity`]&&d.jsx("p",{className:"text-red-500 text-xs italic",children:u[`items.${S}.quantity`]})]}),d.jsx("div",{className:"w-20 text-gray-600 text-sm flex items-center",children:R.unit||"unit"}),d.jsx("button",{type:"button",onClick:()=>b(S),className:"bg-red-500 hover:bg-red-700 text-white font-bold py-1 px-2 rounded focus:outline-none focus:shadow-outline",disabled:l.items.length===1,children:"X"})]},S)),d.jsx("button",{type:"button",onClick:x,className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"+ Add Item"}),u.items&&d.jsx("p",{className:"text-red-500 text-xs italic mt-2",children:u.items})]}),d.jsxs("div",{className:"mb-6",children:[d.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"notes",children:"Additional Notes"}),d.jsx("textarea",{id:"notes",name:"notes",value:l.notes,onChange:_,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",rows:"3",placeholder:"Any additional information about your request"})]}),d.jsx("div",{className:"flex items-center justify-end",children:d.jsx("button",{type:"submit",className:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-6 rounded focus:outline-none focus:shadow-outline",children:T?"Update Request":"Submit Request"})})]})]})},bY=()=>{const{aidRequests:t=[],loading:e,error:n,updateRequestStatus:r}=Ba(),{user:s}=jt(),[i,o]=w.useState([]),[a,l]=w.useState("all"),[c,u]=w.useState(""),[f,p]=w.useState("createdAt"),[m,y]=w.useState("desc");w.useEffect(()=>{if(!Array.isArray(t)){console.error("aidRequests is not an array:",t),o([]);return}let k=[...t];if(a!=="all"&&(k=k.filter(N=>N.status===a)),c){const N=c.toLowerCase();k=k.filter(R=>R.location?.toLowerCase().includes(N)||R.items?.some(S=>S.name.toLowerCase().includes(N))||R.notes&&R.notes.toLowerCase().includes(N))}k.sort((N,R)=>{let S,E;if(f==="createdAt"||f==="updatedAt")S=new Date(N[f]||0).getTime(),E=new Date(R[f]||0).getTime();else if(f==="priority"){const C={high:3,medium:2,low:1};S=C[N.priority]||0,E=C[R.priority]||0}else S=N[f],E=R[f];return m==="asc"?S>E?1:-1:S<E?1:-1}),o(k)},[t,a,c,f,m]);const g=async(k,N)=>{const R=await r(k,N);R.success||console.error("Failed to update request status:",R.error)},x=k=>{switch(k){case ae.PENDING:return"bg-yellow-100 text-yellow-800 border-yellow-300";case ae.APPROVED:return"bg-blue-100 text-blue-800 border-blue-300";case ae.IN_PROGRESS:return"bg-indigo-100 text-indigo-800 border-indigo-300";case ae.READY_FOR_PICKUP:return"bg-purple-100 text-purple-800 border-purple-300";case ae.IN_TRANSIT:return"bg-sky-100 text-sky-800 border-sky-300";case ae.DELIVERED:return"bg-green-100 text-green-800 border-green-300";case ae.DENIED:return"bg-red-100 text-red-800 border-red-300";case ae.CANCELLED:return"bg-gray-100 text-gray-800 border-gray-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},b=k=>{switch(k){case"high":return"bg-red-100 text-red-800 border-red-300";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"low":return"bg-green-100 text-green-800 border-green-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},_=k=>{f===k?y(m==="asc"?"desc":"asc"):(p(k),y("desc"))};if(e)return d.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md",children:d.jsx("div",{className:"flex justify-center items-center h-64",children:d.jsx(Ys,{className:"h-8 w-8 animate-spin text-primary"})})});if(n)return d.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border-l-4 border-red-500",children:[d.jsx("h2",{className:"text-xl font-semibold text-red-700 mb-4",children:"Error"}),d.jsx("p",{className:"text-gray-700",children:n})]});if(!Array.isArray(t)||t.length===0)return d.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md",children:d.jsxs("div",{className:"text-center",children:[d.jsx("h2",{className:"text-xl font-semibold text-gray-700 mb-4",children:"No Aid Requests"}),s?.role==="beneficiary"&&d.jsx(bn,{href:"/request/new",children:d.jsx("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Create New Request"})})]})});const T=s?.role==="admin"||s?.role==="staff";return d.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsx("h2",{className:"text-2xl font-semibold",children:"Aid Requests"}),s?.role==="beneficiary"&&d.jsx(bn,{href:"/request/new",children:d.jsx("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"New Request"})})]}),d.jsxs("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"statusFilter",children:"Status"}),d.jsxs("select",{id:"statusFilter",value:a,onChange:k=>l(k.target.value),className:"shadow border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",children:[d.jsx("option",{value:"all",children:"All Statuses"}),Object.values(ae).map(k=>d.jsx("option",{value:k,children:k.replace("_"," ").replace(/\b\w/g,N=>N.toUpperCase())},k))]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"sortBy",children:"Sort By"}),d.jsxs("div",{className:"flex space-x-2",children:[d.jsxs("select",{id:"sortBy",value:f,onChange:k=>p(k.target.value),className:"shadow border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",children:[d.jsx("option",{value:"createdAt",children:"Created Date"}),d.jsx("option",{value:"updatedAt",children:"Updated Date"}),d.jsx("option",{value:"priority",children:"Priority"}),d.jsx("option",{value:"status",children:"Status"})]}),d.jsx("button",{onClick:()=>y(m==="asc"?"desc":"asc"),className:"bg-gray-200 hover:bg-gray-300 px-3 rounded",children:m==="asc"?"↑":"↓"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"search",children:"Search"}),d.jsx("input",{id:"search",type:"text",placeholder:"Search by location or items...",value:c,onChange:k=>u(k.target.value),className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"})]})]}),i.length===0?d.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[d.jsx("p",{className:"text-gray-500",children:"No aid requests found matching your criteria."}),s?.role==="beneficiary"&&d.jsx(bn,{href:"/request/new",children:d.jsx("button",{className:"mt-4 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Create New Request"})})]}):d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"min-w-full bg-white",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"bg-gray-100 text-gray-700 text-left",children:[d.jsxs("th",{className:"py-3 px-4 font-semibold cursor-pointer",onClick:()=>_("id"),children:["ID ",f==="id"&&(m==="asc"?"↑":"↓")]}),T&&d.jsx("th",{className:"py-3 px-4 font-semibold",children:"Beneficiary"}),d.jsxs("th",{className:"py-3 px-4 font-semibold cursor-pointer",onClick:()=>_("createdAt"),children:["Date ",f==="createdAt"&&(m==="asc"?"↑":"↓")]}),d.jsx("th",{className:"py-3 px-4 font-semibold",children:"Items"}),d.jsx("th",{className:"py-3 px-4 font-semibold",children:"Location"}),d.jsxs("th",{className:"py-3 px-4 font-semibold cursor-pointer",onClick:()=>_("priority"),children:["Priority ",f==="priority"&&(m==="asc"?"↑":"↓")]}),d.jsxs("th",{className:"py-3 px-4 font-semibold cursor-pointer",onClick:()=>_("status"),children:["Status ",f==="status"&&(m==="asc"?"↑":"↓")]}),d.jsx("th",{className:"py-3 px-4 font-semibold",children:"Actions"})]})}),d.jsx("tbody",{className:"divide-y divide-gray-200",children:i.map(k=>d.jsxs("tr",{className:"hover:bg-gray-50",children:[d.jsxs("td",{className:"py-3 px-4",children:["#",k.id]}),T&&d.jsx("td",{className:"py-3 px-4",children:k.beneficiaryId}),d.jsx("td",{className:"py-3 px-4",children:new Date(k.createdAt).toLocaleDateString()}),d.jsx("td",{className:"py-3 px-4",children:d.jsx("div",{className:"flex flex-col space-y-1",children:k.items.map((N,R)=>d.jsxs("div",{className:"text-sm",children:[N.quantity," ",N.unit," ",N.name]},R))})}),d.jsx("td",{className:"py-3 px-4",children:k.location}),d.jsx("td",{className:"py-3 px-4",children:d.jsx("span",{className:`text-xs px-2 py-1 rounded-full border ${b(k.priority)}`,children:k.priority})}),d.jsx("td",{className:"py-3 px-4",children:d.jsx("span",{className:`text-xs px-2 py-1 rounded-full border ${x(k.status)}`,children:k.status.replace("_"," ")})}),d.jsx("td",{className:"py-3 px-4",children:d.jsxs("div",{className:"flex space-x-2",children:[d.jsx(bn,{href:`/request/${k.id}`,children:d.jsx("button",{className:"bg-blue-500 text-white px-3 py-1 rounded text-xs",children:"View"})}),T&&k.status===ae.PENDING&&d.jsxs(d.Fragment,{children:[d.jsx("button",{onClick:()=>g(k.id,ae.APPROVED),className:"bg-green-500 text-white px-3 py-1 rounded text-xs",children:"Approve"}),d.jsx("button",{onClick:()=>g(k.id,ae.DENIED),className:"bg-red-500 text-white px-3 py-1 rounded text-xs",children:"Deny"})]}),T&&k.status===ae.APPROVED&&d.jsx("button",{onClick:()=>g(k.id,ae.IN_PROGRESS),className:"bg-purple-500 text-white px-3 py-1 rounded text-xs",children:"Start"}),s?.role==="beneficiary"&&k.status===ae.PENDING&&d.jsx("button",{onClick:()=>g(k.id,ae.CANCELLED),className:"bg-gray-500 text-white px-3 py-1 rounded text-xs",children:"Cancel"})]})})]},k.id))})]})})]})},EY=({requestId:t})=>{const{getAidRequestById:e,updateAidRequest:n}=Ba(),{toast:r}=ar(),[s,i]=w.useState(null),[o,a]=w.useState(!0),[l,c]=w.useState(null);w.useEffect(()=>{if(!t){c("No request ID provided"),a(!1);return}const y=()=>{try{const x=e(t);x?(i(x),c(null)):c("Request not found")}catch(x){console.error("Failed to load request:",x),c("Failed to load request details")}finally{a(!1)}};y();const g=setInterval(y,3e4);return()=>clearInterval(g)},[t,e]);const u=y=>{switch(y){case ae.PENDING:return"bg-yellow-100 border-yellow-500 text-yellow-700";case ae.APPROVED:return"bg-blue-100 border-blue-500 text-blue-700";case ae.IN_PROGRESS:return"bg-purple-100 border-purple-500 text-purple-700";case ae.READY_FOR_PICKUP:return"bg-teal-100 border-teal-500 text-teal-700";case ae.IN_TRANSIT:return"bg-indigo-100 border-indigo-500 text-indigo-700";case ae.DELIVERED:return"bg-green-100 border-green-500 text-green-700";case ae.DENIED:return"bg-red-100 border-red-500 text-red-700";case ae.CANCELLED:return"bg-gray-100 border-gray-500 text-gray-700";default:return"bg-gray-100 border-gray-500 text-gray-700"}},f=y=>{switch(y){case ae.PENDING:return"⏳";case ae.APPROVED:return"✅";case ae.IN_PROGRESS:return"🔄";case ae.READY_FOR_PICKUP:return"📦";case ae.IN_TRANSIT:return"🚚";case ae.DELIVERED:return"🎉";case ae.DENIED:return"❌";case ae.CANCELLED:return"⛔";default:return"❓"}},p=y=>{switch(y){case ae.PENDING:return"Your request is pending review by our staff.";case ae.APPROVED:return"Your request has been approved! We are preparing your items.";case ae.IN_PROGRESS:return"Your request is being processed and items are being prepared.";case ae.READY_FOR_PICKUP:return"Your items are ready for pickup at the designated location.";case ae.IN_TRANSIT:return"Your items are on the way to your location.";case ae.DELIVERED:return"Your items have been delivered. Thank you for using our service!";case ae.DENIED:return"We regret to inform you that your request could not be fulfilled at this time.";case ae.CANCELLED:return"This request has been cancelled.";default:return"Status information unavailable."}},m=async()=>{if(!s)return;if(s.status!==ae.PENDING){r({title:"Cannot Cancel",description:"You can only cancel pending requests.",variant:"destructive"});return}const y=await n(s.id,{status:ae.CANCELLED});y.success?(i({...s,status:ae.CANCELLED}),r({title:"Request Cancelled",description:"Your request has been successfully cancelled."})):r({title:"Error",description:y.error||"Failed to cancel request. Please try again.",variant:"destructive"})};return o?d.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md",children:d.jsx("div",{className:"animate-pulse flex space-x-4",children:d.jsxs("div",{className:"flex-1 space-y-4 py-1",children:[d.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("div",{className:"h-4 bg-gray-200 rounded"}),d.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]})]})})}):l?d.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border-l-4 border-red-500",children:[d.jsx("h2",{className:"text-xl font-semibold text-red-700 mb-4",children:"Error"}),d.jsx("p",{className:"text-gray-700",children:l}),d.jsx("p",{className:"mt-4 text-sm text-gray-500",children:"If you believe this is an error, please contact support."})]}):s?d.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[d.jsxs("div",{className:"border-b pb-4 mb-6",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsxs("h2",{className:"text-2xl font-semibold",children:["Request #",s.id]}),d.jsxs("div",{className:`px-4 py-2 rounded-full border ${u(s.status)}`,children:[d.jsx("span",{className:"mr-2",children:f(s.status)}),d.jsx("span",{className:"font-medium capitalize",children:s.status.replace("_"," ")})]})]}),d.jsx("p",{className:"text-gray-600 mt-2",children:p(s.status)}),d.jsxs("div",{className:"mt-4 text-sm text-gray-500",children:["Created: ",new Date(s.createdAt).toLocaleString(),s.updatedAt!==s.createdAt&&d.jsxs("span",{className:"ml-3",children:["Last Updated: ",new Date(s.updatedAt).toLocaleString()]})]})]}),d.jsxs("div",{className:"mb-6",children:[d.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Requested Items"}),d.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[d.jsxs("div",{className:"grid grid-cols-3 font-semibold text-gray-600 pb-2 border-b mb-2",children:[d.jsx("div",{children:"Item"}),d.jsx("div",{children:"Quantity"}),d.jsx("div",{children:"Unit"})]}),s.items.map((y,g)=>d.jsxs("div",{className:"grid grid-cols-3 py-2 border-b border-gray-200 text-gray-700",children:[d.jsx("div",{children:y.name}),d.jsx("div",{children:y.quantity}),d.jsx("div",{children:y.unit})]},g))]})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Location"}),d.jsx("p",{className:"text-gray-700",children:s.location})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Priority"}),d.jsx("p",{className:"capitalize text-gray-700",children:s.priority})]})]}),s.notes&&d.jsxs("div",{className:"mb-6",children:[d.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Additional Notes"}),d.jsx("p",{className:"text-gray-700 bg-gray-50 p-3 rounded",children:s.notes})]}),d.jsxs("div",{className:"mt-8 mb-6",children:[d.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Status Updates"}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute left-4 top-0 h-full w-0.5 bg-gray-200"}),Object.values(ae).map((y,g)=>{const x=Object.values(ae).indexOf(s.status)>=g,b=Object.values(ae).indexOf(s.status)>g;return d.jsxs("div",{className:`relative flex items-start mb-6 ${x?"":"opacity-40"}`,children:[d.jsx("div",{className:`absolute left-0 mt-1 w-8 h-8 rounded-full flex items-center justify-center z-10 
                  ${b?"bg-green-500 text-white":x?"bg-blue-500 text-white":"bg-gray-200"}`,children:b?"✓":g+1}),d.jsxs("div",{className:"ml-12",children:[d.jsx("h4",{className:`text-md font-semibold capitalize ${x?"text-gray-900":"text-gray-500"}`,children:y.replace("_"," ")}),d.jsx("p",{className:`text-sm ${x?"text-gray-600":"text-gray-400"}`,children:p(y)})]})]},y)})]})]}),d.jsx("div",{className:"mt-8 border-t pt-6 flex justify-end",children:s.status===ae.PENDING&&d.jsx("button",{onClick:m,className:"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-6 rounded focus:outline-none focus:shadow-outline",children:"Cancel Request"})})]}):d.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border-l-4 border-yellow-500",children:[d.jsx("h2",{className:"text-xl font-semibold text-yellow-700 mb-4",children:"Request Not Found"}),d.jsx("p",{className:"text-gray-700",children:"The requested aid request could not be found. It may have been removed or you might not have permission to view it."})]})},Xm=()=>{const{loading:t,error:e}=Ba(),{user:n,hasPermission:r,loading:s}=jt(),[i,o]=or(),l=(()=>{const u=i.match(/\/request\/([^/]+)/);return u?u[1]:null})();if(s||t)return d.jsx("div",{className:"flex justify-center items-center h-[calc(100vh-200px)]",children:d.jsx(Ys,{className:"h-8 w-8 animate-spin text-primary"})});const c=()=>i==="/request/new"?r("create_aid_request")?d.jsx(wY,{onRequestSubmitted:()=>{o("/request")}}):d.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-500 p-4",children:d.jsx("p",{className:"text-yellow-700",children:"You don't have permission to create aid requests."})}):l?r("view_aid_requests")?d.jsx(EY,{requestId:l}):d.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-500 p-4",children:d.jsx("p",{className:"text-yellow-700",children:"You don't have permission to view this aid request."})}):r("view_aid_requests")?d.jsx(bY,{}):d.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-500 p-4",children:d.jsx("p",{className:"text-yellow-700",children:"You don't have permission to view aid requests."})});return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-bold",children:"Aid Requests"}),d.jsx("p",{className:"text-sm text-gray-500",children:l?"View details of an aid request":i==="/request/new"?"Submit a new aid request":"Manage and track aid requests"})]}),!l&&i!=="/request/new"&&r("create_aid_request")&&d.jsx(bn,{href:"/request/new",children:d.jsx("button",{className:"mt-4 md:mt-0 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"New Request"})})]}),e?d.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4",children:d.jsx("p",{className:"text-red-700",children:e})}):c()]})};var $x="ToastProvider",[qx,SY,TY]=tx("Toast"),[dO,CX]=vo("Toast",[TY]),[IY,mp]=dO($x),hO=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[a,l]=w.useState(null),[c,u]=w.useState(0),f=w.useRef(!1),p=w.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${$x}\`. Expected non-empty \`string\`.`),d.jsx(qx.Provider,{scope:e,children:d.jsx(IY,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:w.useCallback(()=>u(m=>m+1),[]),onToastRemove:w.useCallback(()=>u(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:p,children:o})})};hO.displayName=$x;var fO="ToastViewport",CY=["F8"],Jy="toast.viewportPause",Zy="toast.viewportResume",pO=w.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=CY,label:s="Notifications ({hotkey})",...i}=t,o=mp(fO,n),a=SY(n),l=w.useRef(null),c=w.useRef(null),u=w.useRef(null),f=w.useRef(null),p=Ge(e,f,o.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=o.toastCount>0;w.useEffect(()=>{const x=b=>{r.length!==0&&r.every(T=>b[T]||b.code===T)&&f.current?.focus()};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[r]),w.useEffect(()=>{const x=l.current,b=f.current;if(y&&x&&b){const _=()=>{if(!o.isClosePausedRef.current){const R=new CustomEvent(Jy);b.dispatchEvent(R),o.isClosePausedRef.current=!0}},T=()=>{if(o.isClosePausedRef.current){const R=new CustomEvent(Zy);b.dispatchEvent(R),o.isClosePausedRef.current=!1}},k=R=>{!x.contains(R.relatedTarget)&&T()},N=()=>{x.contains(document.activeElement)||T()};return x.addEventListener("focusin",_),x.addEventListener("focusout",k),x.addEventListener("pointermove",_),x.addEventListener("pointerleave",N),window.addEventListener("blur",_),window.addEventListener("focus",T),()=>{x.removeEventListener("focusin",_),x.removeEventListener("focusout",k),x.removeEventListener("pointermove",_),x.removeEventListener("pointerleave",N),window.removeEventListener("blur",_),window.removeEventListener("focus",T)}}},[y,o.isClosePausedRef]);const g=w.useCallback(({tabbingDirection:x})=>{const _=a().map(T=>{const k=T.ref.current,N=[k,...UY(k)];return x==="forwards"?N:N.reverse()});return(x==="forwards"?_.reverse():_).flat()},[a]);return w.useEffect(()=>{const x=f.current;if(x){const b=_=>{const T=_.altKey||_.ctrlKey||_.metaKey;if(_.key==="Tab"&&!T){const N=document.activeElement,R=_.shiftKey;if(_.target===x&&R){c.current?.focus();return}const C=g({tabbingDirection:R?"backwards":"forwards"}),A=C.findIndex(P=>P===N);Jm(C.slice(A+1))?_.preventDefault():R?c.current?.focus():u.current?.focus()}};return x.addEventListener("keydown",b),()=>x.removeEventListener("keydown",b)}},[a,g]),d.jsxs(yq,{ref:l,role:"region","aria-label":s.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&d.jsx(ev,{ref:c,onFocusFromOutsideViewport:()=>{const x=g({tabbingDirection:"forwards"});Jm(x)}}),d.jsx(qx.Slot,{scope:n,children:d.jsx(ve.ol,{tabIndex:-1,...i,ref:p})}),y&&d.jsx(ev,{ref:u,onFocusFromOutsideViewport:()=>{const x=g({tabbingDirection:"backwards"});Jm(x)}})]})});pO.displayName=fO;var mO="ToastFocusProxy",ev=w.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=mp(mO,n);return d.jsx(gx,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{const a=o.relatedTarget;!i.viewport?.contains(a)&&r()}})});ev.displayName=mO;var mu="Toast",kY="toast.swipeStart",AY="toast.swipeMove",RY="toast.swipeCancel",PY="toast.swipeEnd",gO=w.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...o}=t,[a,l]=Dc({prop:r,defaultProp:s??!0,onChange:i,caller:mu});return d.jsx(za,{present:n||a,children:d.jsx(OY,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:Bn(t.onPause),onResume:Bn(t.onResume),onSwipeStart:fe(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:fe(t.onSwipeMove,c=>{const{x:u,y:f}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:fe(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:fe(t.onSwipeEnd,c=>{const{x:u,y:f}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),l(!1)})})})});gO.displayName=mu;var[NY,DY]=dO(mu,{onClose(){}}),OY=w.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:u,onSwipeMove:f,onSwipeCancel:p,onSwipeEnd:m,...y}=t,g=mp(mu,n),[x,b]=w.useState(null),_=Ge(e,F=>b(F)),T=w.useRef(null),k=w.useRef(null),N=s||g.duration,R=w.useRef(0),S=w.useRef(N),E=w.useRef(0),{onToastAdd:C,onToastRemove:A}=g,P=Bn(()=>{x?.contains(document.activeElement)&&g.viewport?.focus(),o()}),j=w.useCallback(F=>{!F||F===1/0||(window.clearTimeout(E.current),R.current=new Date().getTime(),E.current=window.setTimeout(P,F))},[P]);w.useEffect(()=>{const F=g.viewport;if(F){const B=()=>{j(S.current),c?.()},z=()=>{const W=new Date().getTime()-R.current;S.current=S.current-W,window.clearTimeout(E.current),l?.()};return F.addEventListener(Jy,z),F.addEventListener(Zy,B),()=>{F.removeEventListener(Jy,z),F.removeEventListener(Zy,B)}}},[g.viewport,N,l,c,j]),w.useEffect(()=>{i&&!g.isClosePausedRef.current&&j(N)},[i,N,g.isClosePausedRef,j]),w.useEffect(()=>(C(),()=>A()),[C,A]);const O=w.useMemo(()=>x?EO(x):null,[x]);return g.viewport?d.jsxs(d.Fragment,{children:[O&&d.jsx(jY,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:O}),d.jsx(NY,{scope:n,onClose:P,children:uo.createPortal(d.jsx(qx.ItemSlot,{scope:n,children:d.jsx(gq,{asChild:!0,onEscapeKeyDown:fe(a,()=>{g.isFocusedToastEscapeKeyDownRef.current||P(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:d.jsx(ve.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":g.swipeDirection,...y,ref:_,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:fe(t.onKeyDown,F=>{F.key==="Escape"&&(a?.(F.nativeEvent),F.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,P()))}),onPointerDown:fe(t.onPointerDown,F=>{F.button===0&&(T.current={x:F.clientX,y:F.clientY})}),onPointerMove:fe(t.onPointerMove,F=>{if(!T.current)return;const B=F.clientX-T.current.x,z=F.clientY-T.current.y,W=!!k.current,M=["left","right"].includes(g.swipeDirection),H=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,Q=M?H(0,B):0,ie=M?0:H(0,z),re=F.pointerType==="touch"?10:2,ne={x:Q,y:ie},se={originalEvent:F,delta:ne};W?(k.current=ne,Td(AY,f,se,{discrete:!1})):YT(ne,g.swipeDirection,re)?(k.current=ne,Td(kY,u,se,{discrete:!1}),F.target.setPointerCapture(F.pointerId)):(Math.abs(B)>re||Math.abs(z)>re)&&(T.current=null)}),onPointerUp:fe(t.onPointerUp,F=>{const B=k.current,z=F.target;if(z.hasPointerCapture(F.pointerId)&&z.releasePointerCapture(F.pointerId),k.current=null,T.current=null,B){const W=F.currentTarget,M={originalEvent:F,delta:B};YT(B,g.swipeDirection,g.swipeThreshold)?Td(PY,m,M,{discrete:!0}):Td(RY,p,M,{discrete:!0}),W.addEventListener("click",H=>H.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),jY=t=>{const{__scopeToast:e,children:n,...r}=t,s=mp(mu,e),[i,o]=w.useState(!1),[a,l]=w.useState(!1);return FY(()=>o(!0)),w.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:d.jsx(rp,{asChild:!0,children:d.jsx(gx,{...r,children:i&&d.jsxs(d.Fragment,{children:[s.label," ",n]})})})},MY="ToastTitle",yO=w.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return d.jsx(ve.div,{...r,ref:e})});yO.displayName=MY;var LY="ToastDescription",vO=w.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return d.jsx(ve.div,{...r,ref:e})});vO.displayName=LY;var xO="ToastAction",_O=w.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?d.jsx(bO,{altText:n,asChild:!0,children:d.jsx(Hx,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${xO}\`. Expected non-empty \`string\`.`),null)});_O.displayName=xO;var wO="ToastClose",Hx=w.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=DY(wO,n);return d.jsx(bO,{asChild:!0,children:d.jsx(ve.button,{type:"button",...r,ref:e,onClick:fe(t.onClick,s.onClose)})})});Hx.displayName=wO;var bO=w.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return d.jsx(ve.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function EO(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),VY(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...EO(r))}}),e}function Td(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?HP(s,i):s.dispatchEvent(i)}var YT=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function FY(t=()=>{}){const e=Bn(t);Ot(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function VY(t){return t.nodeType===t.ELEMENT_NODE}function UY(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Jm(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var BY=hO,SO=pO,TO=gO,IO=yO,CO=vO,kO=_O,AO=Hx;const zY=BY,RO=w.forwardRef(({className:t,...e},n)=>d.jsx(SO,{ref:n,className:Oe("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));RO.displayName=SO.displayName;const $Y=ix("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),PO=w.forwardRef(({className:t,variant:e,...n},r)=>d.jsx(TO,{ref:r,className:Oe($Y({variant:e}),t),...n}));PO.displayName=TO.displayName;const qY=w.forwardRef(({className:t,...e},n)=>d.jsx(kO,{ref:n,className:Oe("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));qY.displayName=kO.displayName;const NO=w.forwardRef(({className:t,...e},n)=>d.jsx(AO,{ref:n,className:Oe("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:d.jsx($P,{className:"h-4 w-4"})}));NO.displayName=AO.displayName;const DO=w.forwardRef(({className:t,...e},n)=>d.jsx(IO,{ref:n,className:Oe("text-sm font-semibold",t),...e}));DO.displayName=IO.displayName;const OO=w.forwardRef(({className:t,...e},n)=>d.jsx(CO,{ref:n,className:Oe("text-sm opacity-90",t),...e}));OO.displayName=CO.displayName;function HY(){const{toasts:t}=ar();return d.jsxs(zY,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return d.jsxs(PO,{...i,children:[d.jsxs("div",{className:"grid gap-1",children:[n&&d.jsx(DO,{children:n}),r&&d.jsx(OO,{children:r})]}),s,d.jsx(NO,{})]},e)}),d.jsx(RO,{})]})}class WY extends w.Component{constructor(){super(...arguments),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("Uncaught error:",e,n)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:d.jsxs("div",{className:"max-w-md w-full space-y-8 p-8 bg-white rounded-lg shadow-lg",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Something went wrong"}),d.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:this.state.error?.message||"An unexpected error occurred"})]}),d.jsx("div",{className:"mt-8 space-y-6",children:d.jsx("button",{onClick:()=>window.location.reload(),className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Refresh Page"})})]})}):this.props.children}}const KY=new fz,GY=()=>d.jsx(WY,{children:d.jsx(gz,{client:KY,children:d.jsx(e$,{children:d.jsx(n$,{children:d.jsx(s$,{children:d.jsx(r$,{children:d.jsxs(i$,{children:[d.jsx(HY,{}),d.jsx(q$,{children:d.jsxs(lL,{children:[d.jsx(ft,{path:"/",children:d.jsx(a7,{})}),d.jsx(ft,{path:"/about",children:d.jsx(D7,{})}),d.jsx(ft,{path:"/auth",children:d.jsx(Qi,{to:"/login"})}),d.jsx(ft,{path:"/login",children:d.jsx(ZE,{component:kS})}),d.jsx(ft,{path:"/register",children:d.jsx(ZE,{component:kS})}),d.jsx(ft,{path:"/home",children:d.jsx(yn,{component:o7,requiredRoles:["admin","staff","donor","beneficiary","volunteer"]})}),d.jsx(ft,{path:"/dashboard",children:d.jsx(yn,{component:l7,requiredRoles:["admin","staff"]})}),d.jsx(ft,{path:"/inventory",children:d.jsx(yn,{component:T7,requiredRoles:["admin","staff","volunteer"]})}),d.jsx(ft,{path:"/donations",children:d.jsx(yn,{component:I7,requiredRoles:["admin","staff","donor"]})}),d.jsx(ft,{path:"/distribution",children:d.jsx(yn,{component:xY,requiredRoles:["admin","staff","volunteer"]})}),d.jsx(ft,{path:"/beneficiaries",children:d.jsx(yn,{component:C7,requiredRoles:["admin","staff","beneficiary"]})}),d.jsx(ft,{path:"/analytics",children:d.jsx(yn,{component:yY,requiredRoles:["admin","staff"]})}),d.jsx(ft,{path:"/feedback",children:d.jsx(yn,{component:_Y,requiredRoles:["admin","staff","donor","beneficiary","volunteer"]})}),d.jsx(ft,{path:"/profile",children:d.jsx(yn,{component:A7,requiredRoles:["admin","staff","donor","beneficiary","volunteer"]})}),d.jsx(ft,{path:"/request/new",children:d.jsx(yn,{component:Xm,requiredRoles:["admin","staff","beneficiary"]})}),d.jsx(ft,{path:"/request/:id",children:d.jsx(yn,{component:Xm,requiredRoles:["admin","staff","beneficiary"]})}),d.jsx(ft,{path:"/request",children:d.jsx(yn,{component:Xm,requiredRoles:["admin","staff","beneficiary"]})}),d.jsx(ft,{path:"/settings",children:d.jsx(yn,{component:N7,requiredRoles:["admin"]})}),d.jsx(ft,{children:d.jsx(Qi,{to:"/home"})})]})})]})})})})})})});Zm.createRoot(document.getElementById("root")).render(d.jsx(Pn.StrictMode,{children:d.jsx(GY,{})}));export{d as j};
//# sourceMappingURL=index-BoHGOZTY.js.map
